<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">

  <title>Noir搓的小手机</title>
  <style>
    .message p,
    .diary-content {
      user-select: none;
      -webkit-user-select: none;
    }

    .lt-end-session-btn {
      font-size: 1.5rem;
      color: inherit;
      /* 继承父元素的颜色 */
      opacity: 0.6;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
      font-weight: bold;
    }

    .lt-end-session-btn:hover {
      opacity: 1;
    }

    /* --- Noir's Refactor: Feed Loader Style --- */
    #feed-loader {
      position: absolute;
      inset: 0;
      background: rgba(244, 248, 255, 0.85);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9000;
      color: var(--text-color);
      font-size: 1rem;
      flex-direction: column;
      gap: 10px;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* --- End of Refactor --- */
    /*
        Noir's Mizuiro Theme
        - 哼，看好了，这才是设计。
      */
    /*
          Noir's Mizuiro Theme
          - 哼，看好了，这才是设计。
        */
    :root {
      --phone-width: 375px;
      --phone-height: 812px;
      --user-bg-image: url('');

      /* === Noir's Ultimate Dynamic Theme Engine v2.0 === */
      /* 哼，现在所有的颜色都听从这三个总开关的指挥。*/
      --primary-hue: 35;
      --primary-saturation: 25%;
      --primary-lightness: 80%;

      /* 核心颜色 */
      --primary-color: hsl(var(--primary-hue), var(--primary-saturation), var(--primary-lightness));
      /* 强调色/用户气泡色，现在也是动态的 */
      --accent-color: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%));

      /* 哼，看好了，这些就是被我重新接上线的“电灯” */

      /* 文字颜色：根据主题亮度自动变深或变浅 */
      --text-color: hsl(var(--primary-hue), 15%, calc(100% - var(--primary-lightness) / 1.1));
      --text-color-light: hsl(var(--primary-hue), 10%, calc(100% - var(--primary-lightness) / 1.3));

      /* 表面背景：半透明，亮度比主色高一点 */
      --surface-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.4);

      /* 卡片/AI气泡背景：比表面背景更亮一点 */
      --card-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.75);

      /* 边框颜色 */
      --border-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness)), 0.3);

      /* 阴影颜色 */
      --soft-shadow: 0 4px 12px hsla(var(--primary-hue), 40%, calc(var(--primary-lightness) - 10%), 0.15);

      /* 动态页的设置保持不变 */
      --feed-bg-image: none;
      --feed-overlay-opacity: 0.12;
      --feed-overlay-rotate: 22deg;
      --feed-overlay-speed: 48s;

      /* 气泡样式也完全动态化 */
      --bubble-radius: 18px;
      --bubble-outline: hsla(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) + 10%), 0.5);
      --bubble-user-bg: hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.2), calc(var(--primary-lightness) - 20%), 0.75);
      /* <-- 哼，改成0.5，现在够“虚无”了吧 */
      --bubble-ai-bg: var(--card-bg);

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      --dropdown-alpha: 0.9;
      /* 下拉菜单的透明度，0到1 */
      --feed-card-alpha: 0.7;
      /* 动态卡片的透明度，0到1 */


      /* ▲▲▲ 添加到这里结束 ▲▲▲ */

    }

    /* Noir's Font Decree */
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      /* 哼，看好了，就是这句！现在字体听从我的新变量指揮了！ */
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
    }

    /* 让字体预览区也听话 */
    #font-preview-text {
      font-family: var(--custom-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif);
    }

    #phone-container {
      width: 100%;
      /* 占满屏幕宽度 */
      height: 100vh;
      /* 占满屏幕高度 */
      background-color: white;
      background-image: var(--user-bg-image);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      /* 是不是清爽多了？ */
      position: relative;
      /* <-- 就是这句，告诉它“你是个家长了，给我看好家里的东西！” */
    }

    .screen {
      flex-grow: 1;
      display: none;
      flex-direction: column;
      background-color: #f9f9f9;
      /* 哼，所有屏幕默认都给我变白 */
      /* 让背景透出来 */
      overflow: hidden;
      color: var(--text-color);
    }

    .screen.active {
      display: flex;
    }

    /* 这个是通用的头像预览样式 */
    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border-color);
      margin-top: 5px;
      cursor: pointer;
    }

    /* --- 通用顶栏 --- */
    .header,
    #chat-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 500;
      min-width: 50px;
      text-align: center;
      /* ▼▼▼ 哼，加上这三句，给我立正站好 ▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

  #chat-list-pane {
  position: absolute; /* 核心！改为绝对定位 */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1; /* 在底层 */
  
  background-color: transparent;
  overflow-y: auto; /* 只有它自己滚动 */
  
  /* 动画相关 */
  transition: transform 0.35s cubic-bezier(0.33, 1, 0.68, 1), filter 0.35s ease;
  will-change: transform, filter;
  transform: translate3d(0, 0, 0);
}
    #chat-list-container {
      flex-grow: 1;
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
    }

    #character-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .character-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      /* backdrop-filter: blur(10px);*/
      border-radius: 16px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .character-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(138, 180, 228, 0.2);
    }

    .char-info-wrapper {
      flex-grow: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      overflow: hidden;
    }

    .character-item .char-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .character-item .char-name {
      font-weight: 600;
      color: var(--text-color);
    }

    .character-item .char-remark {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

   /* 1. 容器：作为一个固定的画框 */
#chat-screen-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden; /* 锁死溢出 */
  background-color: #f9f9f9; /* 防止透视 */
}
    /* --- 聊天窗口 --- */


  /* --- Noir's Fixed Layout: 消除回弹抖动 --- */
/* 3. 聊天页：浮在顶层 */
#chat-view-pane {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
  
  display: flex;
  flex-direction: column;
  
  background-color: #f9f9f9;
  box-shadow: -10px 0 25px -5px rgba(0, 0, 0, 0.1);
  
  /* 初始状态：推到右边 */
  transform: translate3d(100%, 0, 0);
  /* 核心：默认隐身，防止“左移一下”的残影 */
  visibility: hidden; 
  
  /* 动画曲线：加上 visibility 的延迟，确保滑走后才隐身 */
  transition: transform 0.35s cubic-bezier(0.33, 1, 0.68, 1), visibility 0s linear 0.35s;
  will-change: transform;
}

/* 当聊天打开时 */
#chat-screen.show-chat-view #chat-view-pane {
  transform: translate3d(0, 0, 0);
  visibility: visible; /* 现身 */
  /* 现身时不需要延迟 */
  transition: transform 0.35s cubic-bezier(0.33, 1, 0.68, 1), visibility 0s linear 0s;
}

/* 当聊天打开时：列表页原地变暗（不移动，防止抖动） */
#chat-screen.show-chat-view #chat-list-pane {
  filter: brightness(0.95); 
  pointer-events: none; /* 禁止点击底层 */
  transform: translate3d(0, 0, 0); /* 保持不动 */
}
    /* 在动画过渡期间禁用交互，防止卡在中间 */
    #chat-screen.transitioning #chat-list-pane,
    #chat-screen.transitioning #chat-view-pane {
      pointer-events: none;
    }




    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;

      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.7);
      flex-shrink: 0;
    }

    .message {
      padding: 10px 16px;
      border-radius: 20px;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: var(--soft-shadow);
    }

    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
    }

    .message.user {
      background-color: var(--accent-color);
      color: white;
      border-bottom-right-radius: 5px;
    }

    .message.ai {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.8);
      color: var(--text-color);
      border-bottom-left-radius: 5px;
    }

    .message p {
      margin: 0;
    }

    .sticker-content,
    .message-image-content {
      max-width: 120px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
    }

    .message-image-content {
      max-width: 160px;
    }

    /* --- 其他屏幕和组件 --- */
    /* --- Noir's Fix: API 模型列表的样式修正 --- */
    .model-input-container {
      position: relative;
      /* 关键！让里面的绝对定位元素有家可回 */
      display: flex;
      gap: 8px;
    }

    .custom-model-dropdown {
      display: none;
      /* 默认藏起来 */
      position: absolute;
      top: 100%;
      /* 精准定位到输入框正下方 */
      left: 0;
      right: 80px;
      /* 留出“获取”按钮的位置 */
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*   backdrop-filter: blur(10px);*/
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 4px;
      max-height: 180px;
      overflow-y: auto;
      z-index: 100;
      /* 确保它在最上层 */
      box-shadow: var(--soft-shadow);
    }

    .checkboxes-container {
      display: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--border-color);
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), var(--dropdown-alpha));
      /*  backdrop-filter: blur(10px);*/
      z-index: 10;
      border-radius: 8px;
      margin-top: 4px;
    }

    .custom-model-dropdown.show {
      display: block;
      /* 需要的时候再显示 */
    }

    .custom-model-dropdown div {
      padding: 10px 12px;
      cursor: pointer;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    .custom-model-dropdown div:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    /* --- 其他屏幕和组件 --- */
    /* 在这个注释下面加上主屏幕的样式 */
    #home-screen {
      position: relative;
      /* <-- 就加上这一行！ */


      gap: 20px;
      /* 图标之间的距离 */

      /* 声明！这里现在是我的地盘！*/
      flex-direction: column;
      /* 里面的东西，全体给我垂直排队！*/
      justify-content: space-between;
      /* 核心！顶部和底部的元素给我贴边站好，中间的自动拉开距离！*/
      padding-bottom: 0;
      /* 把内边距去掉，让Dock栏能完美贴底 */
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: absolute;
      z-index: 40;
      box-sizing: border-box;
      margin: 0;
      /* ▼▼▼ 下面是手术刀切下来的新尺寸 ▼▼▼ */
      width: calc(75px * var(--desktop-item-scale, 1));
      height: calc(90px * var(--desktop-item-scale, 1));
      padding: calc(5px * var(--desktop-item-scale, 1));
    }

    .app-icon-img {
      border-radius: 22.5%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--surface-bg);
      box-shadow: none;
      transition: transform 0.2s ease;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(58px * var(--desktop-item-scale, 1));
      height: calc(58px * var(--desktop-item-scale, 1));
      margin-bottom: calc(2px * var(--desktop-item-scale, 1));
      font-size: calc(28px * var(--desktop-item-scale, 1));
    }

    .app-icon-img svg {
      stroke: currentColor;
      /* SVG的线条颜色会继承上面的 color */
    }

    .app-icon span {
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      font-size: calc(0.75rem * var(--desktop-item-scale, 1));
    }

    .content {
      padding: 20px;
      overflow-y: auto;
      flex-grow: 1;
      /* <-- 加上这行代码，就是这行！ */
    }

    .form-button {
      width: 100%;
      padding: 12px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 10px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 10px;
      box-sizing: border-box;
      background-color: rgba(255, 255, 255, 0.8);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    .chat-toolbar {
      display: flex;
      padding: 5px 10px;
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      /*   backdrop-filter: blur(10px);*/
      flex-shrink: 0;
    }

    /* ▼▼▼ 用下面这段，替换掉你旧的 .toolbar-button 样式 ▼▼▼ */
    .toolbar-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      /* 这个保留，作为SVG尺寸的参考 */
      cursor: pointer;
      padding: 8px;
      /* 稍微增大点击区域 */
      color: var(--text-color-light);
      /* 让它默认是浅灰色 */
      border-radius: 50%;
      /* 让背景有个圆形轮廓 */
      width: 40px;
      height: 40px;
      display: flex;
      /* 使用flex布局让SVG完美居中 */
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, color 0.2s;
      /* 加上顺滑的过渡效果 */
    }

    .toolbar-button:hover {
      background-color: var(--border-color);
      /* 鼠标悬停时给个背景 */
      color: var(--primary-color);
      /* 图标颜色变为主题色 */
    }

    /* ▲▲▲ 替换到这里为止 ▲▲▲ */


    /* ▼▼▼ 在下面新增这段SVG的专属样式 ▼▼▼ */
    .toolbar-button svg {
      width: 22px;
      /* SVG图标的尺寸 */
      height: 22px;
      stroke-width: 1.8;
      /* 线条粗细，可以微调 */
      stroke: currentColor;
      /* 核心！让SVG的颜色继承按钮的color属性 */
      fill: none;
      /* 确保是线稿风格 */
      pointer-events: none;
      /* 防止SVG本身干扰点击事件 */
    }

    /* ▲▲▲ 新增到这里为止 ▲▲▲ */

    .sticker-panel {
      display: none;
      /* 默认还是藏起来 */
      flex-direction: column;
      /* 哼，给我垂直排好队 */
      height: 220px;
      /* 稍微给管理条一点空间 */
      border-top: 1px solid var(--border-color);
      background-color: var(--surface-bg);
      flex-shrink: 0;
    }

    .sticker-panel.show {
      display: flex;
      /* 看见没，现在是 flex，不是 grid 了！*/
    }

    /* --- 输入区域 --- */
    /* --- 输入区域 --- */
    .chat-input-area {
      padding: 10px 12px calc(env(safe-area-inset-bottom, 0px) + 10px);
      background: var(--surface-bg);
      /*  backdrop-filter: saturate(1.2) blur(10px);*/
      border-top: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    /* 这是我加的新容器，用来实现完美对齐 */
    #chat-input-wrapper {
      display: flex;
      /* Flex大法好，哼 */
      align-items: center;
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      padding: 2px 5px;
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-message-input {
      flex-grow: 1;
      /* 让输入框占满剩余空间 */
      border: none;
      background: transparent;
      padding: 9px 12px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 38px;
      width: 38px;
      border: 0;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
      flex-shrink: 0;
      /* 防止被挤压 */
      margin-left: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    /* 回复按钮，给个不一样的颜色区分 */
    #chat-get-reply-button {
      background: var(--accent-color);
      font-size: 1.5rem;
      /* 让箭头更清晰 */
    }

    #chat-message-input {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 11px 16px;
      font-size: .95rem;
      outline: none;
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    #chat-message-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(138, 180, 228, 0.3);
    }

    #chat-send-button,
    #chat-get-reply-button {
      height: 40px;
      padding: 0 18px;
      border: 0;
      border-radius: 20px;
      font-size: .95rem;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: transform .1s ease, filter .15s ease;
    }

    #chat-send-button {
      background: var(--primary-color);
    }

    #chat-get-reply-button {
      display: flex;
      /* 隐藏旧的回复按钮，样式统一到发送按钮 */
    }


    /* --- 引用样式 --- */
    .quote-preview {
      display: none;
      padding: 8px 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-left: 3px solid var(--primary-color);
      margin: 0 12px 8px;
      border-radius: 6px;
      position: relative;
    }

    #quote-preview-sender {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--primary-color);
    }

    #quote-preview-text {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    .cancel-quote-btn {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
    }

    .quoted-message-in-bubble {
      background-color: rgba(0, 0, 0, 0.04);
      padding: 8px 10px;
      border-left: 3px solid var(--border-color);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .quoted-sender {
      font-weight: bold;
      font-size: 0.8rem;
      color: var(--text-color);
    }

    .quoted-content {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* 这是弹窗的“骨架”，让它能居中浮动在屏幕上 */
    .choice-modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
    }

    .choice-modal.show {
      opacity: 1;
      visibility: visible;
    }


    /* --- 弹窗 --- */
    .choice-modal-backdrop {
      background: rgba(0, 0, 0, 0.2);
      /*  backdrop-filter: blur(4px);*/
    }

    .choice-modal-content {
      background: var(--surface-bg);
      /* backdrop-filter: blur(12px); */
      /* <-- 就这么简单，干掉它 */
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .choice-modal-button {
      color: var(--text-color);
      background: rgba(255, 255, 255, 0.5);
    }

    .choice-modal-button:hover {
      background-color: rgba(255, 255, 255, 1);
    }

    .choice-modal-button.cancel {
      color: var(--primary-color);
      background: transparent;
    }

    /* --- Noir's Fix: 让“添加”弹窗从底部滑出，更大气 --- */
    #add-choice-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      /* 确保不会超出手机宽度 */
      margin: 0;
      border-radius: 20px 20px 0 0;
      /* 只留顶部圆角 */
      border-bottom-left-radius: 0;
      /* 覆盖通用样式 */
      border-bottom-right-radius: 0;
      /* 覆盖通用样式 */
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      /* 适配iPhone底部安全区 */
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #add-choice-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #add-choice-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
      justify-content: center;
    }

    /* 按钮也重新设计一下，让它们竖着排 */
    #add-choice-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- Noir's Fix: 修正创建群聊时，成员选择列表的样式 --- */
    .member-selection-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .member-selection-item:last-child {
      border-bottom: none;
    }

    /* 关键！就是这里，把头像大小锁死 */
    .member-selection-item .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 15px 0 10px;
      object-fit: cover;
    }

    .member-selection-item .char-name {
      font-weight: 500;
      color: var(--text-color);
    }

    .member-selection-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      accent-color: var(--primary-color);
      /* 让勾选框颜色也跟主题统一 */
    }

    /* --- Noir's World Book Styles --- */
    #world-book-list-container {
      padding: 10px;
    }

    .world-book-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .world-book-item-name {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .world-book-item-preview {
      font-size: 0.9rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* --- Noir's Fancy Multi-Select Styles --- */
    .custom-multiselect {
      position: relative;
      user-select: none;
    }

    .select-box {
      border: 1px solid var(--border-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .select-box.expanded .arrow {
      transform: rotate(180deg);
    }


    .checkboxes-container.visible {
      display: block;
    }

    .checkboxes-container label {
      display: block;
      padding: 10px 12px;
    }

    .checkboxes-container label:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .checkboxes-container input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Clock & Timestamp Styles --- */
    /* --- Noir's Badge & App Dock Styles --- */
    #decorative-badge {
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
      transform: rotate(-0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 50;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(160px * var(--desktop-item-scale, 1));
      height: calc(160px * var(--desktop-item-scale, 1));
    }


    #decorative-badge:active {

      transform: rotate(-2deg) scale(1.05);
      /* 抓起来的时候，摆正放大一点 */
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }


    #decorative-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* 保留这句，让你的图片能被很好地填充 */
    }

    /*  #a#app-dock-bottom-left,
    #app-dock-top-right {
      
      哼，现在你们只是幽灵了。
      不需要任何样式，你们的孩子（App图标）会自己找到回家的路。
      它们会相对于 #home-screen 定位。
    
    }
*/

    /* --- Noir's Author Mark: Pixel Chicken --- */
    /* 哼，这就是那个吵着要加的小鸡图标 */
    #noir-author-mark {
      position: absolute;
      /* 相对于父容器定位 */
      right: -30px;
      /* 调整它在时钟右边的位置 */
      top: 50%;
      /* 垂直居中 */
      transform: translateY(-50%);
      /* 精确对齐 */
      width: 20px;
      /* 小鸡的尺寸 */
      height: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="0"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM12 4c.69 0 1.25.56 1.25 1.25S12.69 6.5 12 6.5s-1.25-.56-1.25-1.25S11.31 4 12 4zm0 2c-.69 0-1.25.56-1.25 1.25S11.31 8.5 12 8.5s1.25-.56 1.25-1.25S12.69 6 12 6zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 9.75 10 9.75s1.25-.56 1.25-1.25S10.69 8 10 8zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 9.75 12 9.75s1.25-.56 1.25-1.25S12.69 8 12 8zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 9.75 14 9.75s1.25-.56 1.25-1.25S14.69 8 14 8zM10 10c-.69 0-1.25.56-1.25 1.25S9.31 12.5 10 12.5s1.25-.56 1.25-1.25S10.69 10 10 10zm2 0c-.69 0-1.25.56-1.25 1.25S11.31 12.5 12 12.5s1.25-.56 1.25-1.25S12.69 10 12 10zm2 0c-.69 0-1.25.56-1.25 1.25S13.31 12.5 14 12.5s1.25-.56 1.25-1.25S14.69 10 14 10zM12 12c-.69 0-1.25.56-1.25 1.25S11.31 14.5 12 14.5s1.25-.56 1.25-1.25S12.69 12 12 12zm-2 2c-.69 0-1.25.56-1.25 1.25S9.31 15.75 10 15.75s1.25-.56 1.25-1.25S10.69 14 10 14zm4 0c-.69 0-1.25.56-1.25 1.25S13.31 15.75 14 15.75s1.25-.56 1.25-1.25S14.69 14 14 14zM12 16c-.69 0-1.25.56-1.25 1.25S11.31 18.5 12 18.5s1.25-.56 1.25-1.25S12.69 16 12 16zM6 10c-.69 0-1.25.56-1.25 1.25S5.31 12.5 6 12.5s1.25-.56 1.25-1.25S6.69 10 6 10zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 12.5 18 12.5s1.25-.56 1.25-1.25S18.69 10 18 10zM12 20c-.69 0-1.25.56-1.25 1.25S11.31 22.5 12 22.5s1.25-.56 1.25-1.25S12.69 20 12 20zM6 14c-.69 0-1.25.56-1.25 1.25S5.31 15.75 6 15.75s1.25-.56 1.25-1.25S6.69 14 6 14zm12 0c-.69 0-1.25.56-1.25 1.25S17.31 15.75 18 15.75s1.25-.56 1.25-1.25S18.69 14 18 14z"/></svg>');
      /* 这是SVG小鸡的Data URI，白色像素风格 */
      background-size: contain;
      background-repeat: no-repeat;
      cursor: pointer;
      /* 提示可点击 */
      opacity: 0.6;
      /* 稍微透明一点，不那么突兀 */
      transition: opacity 0.2s ease-in-out;
      /* 鼠标悬停效果 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    #noir-author-mark:hover {
      opacity: 1;
      /* 鼠标悬停时完全显示 */
    }

    /* 调整时钟容器，为小鸡留出空间并方便定位 */
    .home-clock-container {
      position: relative;
      /* 确保小鸡能相对它定位 */
      /* ... (保留你已有的其他时钟样式) ... */
      padding-right: 40px;
      /* 给小鸡留出一些右边距 */
    }

    #home-clock-container {
      color: white;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      text-align: center;
      position: absolute;
      z-index: 50;
      /* ▼▼▼ 新增的缩放指令 ▼▼▼ */
      transform-origin: center top;
      transform: scale(var(--desktop-item-scale, 1));
    }

    #home-time {
      font-size: 80px;
      font-weight: 360;
      /* <--- 我把字重从200加到了300，比原来粗，但又不会笨重，这才是高级感。 */
      letter-spacing: -1px;
      /* <--- 字间距也给你调紧了一点，看起来更整体。 */
    }

    #home-date {
      font-size: 1rem;
      /* <--- 稍微缩小一点，让时间更突出 */
      font-weight: 400;
      margin-top: 8px;
      opacity: 0.8;
      text-transform: uppercase;
      /* <--- 日期我给你换成了全大写，这才有那股‘性冷淡’的味道。 */
      letter-spacing: 1px;
      /* <--- 顺便拉开一点点间距，免得挤在一起。 */
    }

    /* 聊天气泡时间戳的样式 */
    .timestamp {
      font-size: 0.7rem;
      color: var(--text-color-light);
      padding: 0 5px;
      margin-bottom: 3px;
      /* 让它和气泡底部对齐 */
    }

    /* 第一段：这是消息容器的基础样式 */
    .message-container {
      display: flex;
      /* 启用flex布局 */
      flex-direction: column;
      /* 让气泡和时间戳垂直排列 */
      margin-bottom: 10px;
      max-width: 90%;
      /* 限制整个容器的最大宽度 */
    }

    /* 第二段：这是根据发言者进行左右对齐的样式 */
    .message-container.user {
      align-self: flex-end;
      /* 让用户方整个容器靠右 */
      align-items: flex-end;
      /* 让容器内部的元素（气泡、时间戳）也靠右 */
    }

    .message-container.ai {
      align-self: flex-start;
      /* 让AI方整个容器靠左 */
      align-items: flex-start;
      /* 让容器内部的元素（气泡、时间戳）也靠左 */
    }

   #chat-messages {
  flex-grow: 1;
  padding: 5px 15px;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  
  /* 核心修改：锁定宽度，防止滚动条挤占空间 */
  width: 100%; 
  box-sizing: border-box;
  
  /* 预留滚动条空间 */
  scrollbar-gutter: stable; 
  
  /* 增加底部内边距，防止最后一条消息贴底 */
  padding-bottom: 20px; 
}

    .message-bubble-row {
      display: flex;
      align-items: flex-end;
      width: 100%;
      gap: 10px;
      /* 头像和气泡之间，永远保持10px的距离 */
    }

    .message-container.user .message-bubble-row {
      justify-content: flex-end;
    }

    .message-container.ai .message-bubble-row {
      justify-content: flex-start;
    }



    /* 这是给表情选择面板里，每一个小表情图片用的样式 */
    .sticker-item {
      width: 100%;
      /* 自动填满网格单元格的宽度 */
      aspect-ratio: 1 / 1;
      /* 保持1:1的宽高比，让它变成正方形 */
      object-fit: cover;
      /* 图片会被裁剪以适应正方形，不变形 */
      border-radius: 8px;
      /* 加个小圆角 */
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .sticker-item:hover {
      transform: scale(1.1);
      /* 鼠标放上去时稍微放大，增加交互感 */
    }

    /* --- Noir's Offline Scene Styles --- */
    #meeting-scene-view {
      flex-grow: 1;
      /* <-- 核心：让它占满所有可用空间 */
      overflow-y: auto;
      /* <-- 核心：内容多了就内部滚动 */
      padding: 20px;
      font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif;
      background-size: cover;
      background-position: center;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
    }

    #chat-view-pane.offline-mode #offline-scene-view {
      display: block;
      /* 在线下模式时显示 */
    }

    #chat-view-pane.offline-mode #chat-messages {
      display: none;
      /* 在线下模式时隐藏气泡聊天 */
    }

    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      /* 保留换行和空格，这对于小说格式至关重要 */
      font-size: 1rem;
    }

    /* --- Noir's Offline Scene Dialogue Box Style --- */
    #offline-scene-view p {
      margin: 0 0 1em 0;
      line-height: 1.7;
      white-space: pre-wrap;
      font-size: 1rem;

      /* <--- Noir's Addition: 为对话框添加半透明背景和内边距 */
      background-color: rgba(0, 0, 0, 0.4);
      /* 半透明黑色背景 */
      padding: 15px 20px;
      /* 内边距，让文字与边框有距离 */
      border-radius: 8px;
      /* 圆角边框，更柔和 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      /* 轻轻的阴影，增加立体感 */
    }

    #offline-scene-view .narrator {
      color: #d1d5db;
      /* 旁白用浅灰色 */
      font-style: italic;
    }

    #offline-scene-view .speaker-user {
      color: #a7c7e7;
      /* 用户的发言用一种柔和的蓝色 */
      font-weight: bold;
    }

    #offline-scene-view .speaker-ai {
      color: #f2b7c6;
      /* AI的发言用柔和的粉色，形成对比 */
      font-weight: bold;
    }

    /* --- Noir's Typing Indicator Style --- */
    /* --- Noir's "Sticky" Typing Indicator --- */
    /* 哼，用这个替换掉你旧的 .typing-indicator 样式 */
    /* --- Noir's Final Protocol: Spatial Displacement --- */
    /* 哼，这次再敢乱跑，我就把你格式化了。*/
    /* --- Noir's Final Protocol: Spatial Readjustment (As Commanded) --- */
    /* 哼，这次再敢说丑，我就把你格式化了。*/
    .typing-indicator {
      position: absolute;
      /* ▼▼▼ 核心手术，看好了 ▼▼▼ */
      bottom: 117px;
      /* 这是我算好的精确高度，刚好在你的工具栏和输入框上面 */
      left: 15px;
      /* 先把你那个碍事的左定位给废了 */
      right: auto;
      /* 然后把它焊死在右边，距离边缘15px */
      margin-left: 0;
      /* 再把你那个多余的左边距也扔掉 */
      /* ▲▲▲ 手术结束 ▲▲▲ */

      /* 下面这些是“整容”，让它看起来还像个气泡 */

    }

    #meeting-scene-view .typing-indicator,
    #offline-scene-view .typing-indicator {
      position: fixed;
      /* 哼，这就是那根钉子，把它焊死在屏幕上 */
      bottom: 85px;
      /* 距离屏幕底部85px，刚好在你的输入框上面 */
      right: 30px;
      /* 距离右边30px */
      z-index: 100;
      /* 确保它浮在所有对话上面 */

      /* 下面这些是给它做的“整容”，让它看起来像个高级卡片 */
      background: rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      padding: 10px 15px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: #f0f2f5;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      margin: 0;
      /* 把它以前那些乱七八糟的边距都给我扔了 */
    }


    /* --- Noir's Final Alignment Fix --- */
    .message-container.ai .timestamp {
      /* 哼，给你加上头像宽度(40px) + 左右边距(10px)的距离 */
      margin-left: 50px;
    }

    .message-container.user .timestamp {
      /* 另一边也是一样，真是麻烦死了 */
      margin-right: 50px;
    }

    /* --- Noir's Music Feed & Player Styles --- */
    #music-feed-container {
      padding: 16px 16px 80px;
      contain: content;
      overflow-y: auto;
      height: 100%;
    }

    /* 动态页：默认白底；如设置 --feed-bg-image 则显示独立壁纸 + 轻动画叠层 */
    #music-screen {
      background-color: #fafafa;
      background-image: var(--feed-bg-image);
      background-size: cover;
      background-position: center;
      contain: paint;
      position: relative;
    }

    /* 轻动画彩雾叠层：仅图层，不拦点击 */
    #music-screen::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image:
        conic-gradient(from var(--feed-overlay-rotate),
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 0%,
          transparent 20%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 40%,
          transparent 60%,
          hsla(var(--primary-hue) 70% 60% / var(--feed-overlay-opacity)) 80%,
          transparent 100%);
      transform: translateZ(0);
      animation: feed-pan var(--feed-overlay-speed) linear infinite;
    }

    /* 超慢速平移旋转，基本不占 GPU */
    @keyframes feed-pan {
      0% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }

      50% {
        transform: translate3d(1.2%, 0.8%, 0) rotate(2deg) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) rotate(0deg) scale(1.02);
      }
    }

    /* 系统降低动画偏好时，自动停掉动画 */
    @media (prefers-reduced-motion: reduce) {
      #music-screen::before {
        animation: none;
      }
    }


    .music-post {
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), var(--feed-card-alpha));
      border-radius: 16px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.7);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .music-post:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      transform: translateY(-2px);
    }

    .music-post-header {
      display: flex;
      align-items: center;
      padding: 16px 18px 14px;
    }

    .music-post-header .char-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .music-post-header .char-name {
      font-weight: 600;
      font-size: 0.95rem;
      color: var(--text-color);
      letter-spacing: -0.01em;
    }

    .music-post-thought {
      padding: 0 18px 18px;
      font-size: 0.94rem;
      line-height: 1.65;
      white-space: pre-wrap;
      color: var(--text-color);
      letter-spacing: 0.01em;
    }

    .music-post-song-card {
      display: flex;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.02);
      padding: 14px 18px;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      margin: 0 12px 12px;
      border-radius: 10px;
    }

    .music-post-song-card:hover {
      background-color: rgba(0, 0, 0, 0.05);
      transform: scale(1.01);
    }

    .music-post-song-card img {
      width: 54px;
      height: 54px;
      border-radius: 8px;
      margin-right: 14px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .music-post-song-info {
      flex-grow: 1;
      min-width: 0;
    }

    .music-post-song-info .title {
      font-weight: 600;
      font-size: 0.94rem;
      color: var(--text-color);
      letter-spacing: -0.01em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-post-song-info .artist {
      font-size: 0.82rem;
      color: var(--text-color-light);
      margin-top: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-post-play-icon {
      font-size: 1.6rem;
      color: var(--primary-color);
      opacity: 0.8;
      transition: opacity 0.2s ease;
      flex-shrink: 0;
    }

    .music-post-song-card:hover .music-post-play-icon {
      opacity: 1;
    }

    #music-player-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 70px;
      background: hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 17%), 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid rgba(255, 255, 255, 0.4);
      display: flex;
      align-items: center;
      padding: 0 16px;
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.05);
    }

    #music-player-bar:not(.hidden) {
      transform: translateY(0);
    }

    #music-player-bar.hidden {
      display: none;
    }


    #player-cover {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      margin-right: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
    }

    #player-info {
      flex-grow: 1;
      overflow: hidden;
      min-width: 0;
    }

    #player-title,
    #player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #player-title {
      font-weight: 600;
      font-size: 0.92rem;
      letter-spacing: -0.01em;
    }

    #player-artist {
      font-size: 0.78rem;
      margin-top: 2px;
      color: var(--text-color-light);
    }

    #player-controls {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    #player-controls button {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.1rem;
      cursor: pointer;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #player-controls button:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.05);
    }

    #player-controls button:active {
      transform: scale(0.95);
    }

    /* --- Noir's Music Share Bubble Styles --- */
    .message.music {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      max-width: 260px;
    }

    .music-share-card {
      display: flex;
      align-items: center;
      background-color: var(--card-bg);
      border-radius: 14px;
      padding: 14px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.7);
    }

    .music-share-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transform: translateY(-1px);
    }

    .message-container.user .music-share-card {
      background-color: var(--accent-color);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .message-container.user .music-share-card .title,
    .message-container.user .music-share-card .artist,
    .message-container.user .music-share-card .play-icon {
      color: white;
    }


    .music-share-cover {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      margin-right: 12px;
      flex-shrink: 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .music-share-info {
      flex-grow: 1;
      overflow: hidden;
      min-width: 0;
    }

    .music-share-info .title {
      font-weight: 600;
      font-size: 0.92rem;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      letter-spacing: -0.01em;
    }

    .music-share-info .artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-top: 2px;
    }

    .music-share-play-icon {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-left: 12px;
      opacity: 0.8;
      transition: opacity 0.2s ease;
      flex-shrink: 0;
    }

    .music-share-card:hover .music-share-play-icon {
      opacity: 1;
    }

    #music-screen {
      position: relative;
      /* 就是这句，告诉里面的绝对定位元素，以我为界！ */
    }

    /* --- Enhanced Feed Header Styles --- */
    .feed-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px !important;
      gap: 12px;
    }

    .feed-actions {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .icon-button {
      min-width: 36px !important;
      height: 36px;
      padding: 0 !important;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.03);
      border: 1px solid rgba(0, 0, 0, 0.05);
      font-size: 1.1rem;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .icon-button:hover {
      background: rgba(0, 0, 0, 0.08);
      transform: scale(1.05);
    }

    .icon-button:active {
      transform: scale(0.95);
    }

    .icon-button.danger {
      color: #dc3545;
    }

    .icon-button.danger:hover {
      background: rgba(220, 53, 69, 0.1);
      border-color: rgba(220, 53, 69, 0.2);
    }

    .icon-button span {
      font-size: 1.15rem;
      display: block;
      line-height: 1;
    }

    /* --- Enhanced User Post Area Styles --- */
    #user-post-area {
      transition: all 0.3s ease !important;
    }

    #user-post-input-container {
      display: flex;
      gap: 12px;
    }

    #user-post-avatar {
      width: 38px !important;
      height: 38px !important;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 3px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 0.94rem;
      color: var(--text-color);
      line-height: 1.5;
      font-family: inherit;
    }

    #user-post-textarea::placeholder {
      color: var(--text-color-light);
      opacity: 0.6;
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }

    .user-post-actions {
      display: flex;
      gap: 6px;
    }

    .toolbar-button {
      background: none !important;
      border: none !important;
      font-size: 1.4rem;
      cursor: pointer;
      padding: 6px;
      border-radius: 8px;
      transition: all 0.2s ease;
      opacity: 0.7;
    }

    .toolbar-button:hover {
      opacity: 1;
      background: rgba(0, 0, 0, 0.04) !important;
    }

    #user-send-post-button {
      padding: 8px 20px !important;
      border-radius: 18px !important;
      border: none;
      background: var(--accent-color) !important;
      color: white !important;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    #user-send-post-button:hover {
      background: hsl(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 25%)) !important;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
    }

    #user-send-post-button:active {
      transform: translateY(0);
    }

    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 12px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 10px;
      background: rgba(0, 0, 0, 0.03);
      border-radius: 10px;
      width: 200px;
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .preview-item .music-preview-card img {
      width: 32px;
      height: 32px;
      margin-right: 10px;
      border-radius: 6px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -6px;
      right: -6px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: 2px solid white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      transition: all 0.2s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .remove-attachment-btn:hover {
      background: rgba(220, 53, 69, 0.9);
      transform: scale(1.1);
    }

    /* --- Noir's Fancy Music Widget Styles --- */
    /* --- Noir's Music System Refactor --- */

    #music-widget:not(.hidden) {
      transform: translateY(0);
      /* 不隐藏时，滑上来 */
    }

    #music-widget.hidden {
      transform: translateY(150%);
      /* 隐藏时，滑下去 */
    }

    .widget-vinyl {
      width: 80px;
      height: 80px;
      background-color: #111;
      border-radius: 50%;
      position: relative;
      left: 20px;
      /* 向右移动，让卡片能盖住它 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background-image:
        radial-gradient(circle at center, #555 10%, transparent 11%),
        radial-gradient(circle at center, #fff 12%, transparent 13%);
      animation: spin 8s linear infinite;
      z-index: 1;
    }

    @keyframes spin {
      from {
        transform: translate(-50%, -50%) rotate(0deg);
        /* <-- 看见没，把咒语合并了 */
      }

      to {
        transform: translate(-50%, -50%) rotate(360deg);
        /* <-- 这里也是 */
      }
    }

    .widget-card {
      width: 240px;
      padding: 15px;
      background-color: var(--card-bg);
      /*  backdrop-filter: blur(10px);*/
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      z-index: 2;
      /* 让卡片在唱片上方 */
    }

    .widget-card img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .widget-info {
      flex-grow: 1;
      overflow: hidden;
    }

    #widget-title,
    #widget-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #widget-title {
      font-weight: 600;
      color: var(--text-color);
      font-size: 0.9rem;
    }

    #widget-artist {
      font-size: 0.8rem;
      color: var(--text-color-light);
    }

    #widget-play-icon {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-left: 10px;
    }

    #card-widget {
      border-radius: 18px;
      background-color: rgba(255, 255, 255, 0.5);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transform: rotate(0deg);
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(335px * var(--desktop-item-scale, 1));
      height: calc(170px * var(--desktop-item-scale, 1));
    }


    /* --- End of Protocol --- */

    /* --- Noir's "Center Alignment" Protocol --- */

    /* --- End of Protocol --- */

    #card-widget:active {

      transform: rotate(1deg) scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* --- Noir's Ultimate Scrollbar Hider --- */
    /* For Webkit browsers like Chrome, Safari */
    ::-webkit-scrollbar {
      display: none;
    }

    /* For Firefox */
    * {
      scrollbar-width: none;
    }

    /* --- Noir's Fix: 美化消息操作弹窗 --- */
    #message-action-modal {
      align-items: flex-end;
      /* 让弹窗贴着底部 */
    }

    #message-action-modal .choice-modal-content {
      width: 100%;
      max-width: var(--phone-width);
      margin: 0;
      border-radius: 20px 20px 0 0;
      padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 10px);
      transform: translateY(100%);
      transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    #message-action-modal.show .choice-modal-content {
      transform: translateY(0);
    }

    #message-action-modal .choice-modal-button {
      width: calc(100% - 40px);
      margin: 5px 20px;
      padding: 14px;
      font-size: 1rem;
      border-radius: 12px;
      text-align: center;
    }

    /* --- End of Fix --- */
    /* --- Noir's Fix: Fancy User Post Area --- */
    #user-post-input-container {
      display: flex;
      gap: 10px;
    }

    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
    }

    #user-post-main-area {
      flex-grow: 1;
    }

    #user-post-textarea {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      resize: vertical;
      font-size: 1rem;
      color: var(--text-color);
    }

    #user-post-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    /* ... 你已有的 #user-post-toolbar 样式 ... */

    /* ▼▼▼ Noir's Command: 哼，给我站成一排！ ▼▼▼ */
    #user-post-actions {
      display: flex;
      /* <-- 这就是圣旨本身 */
      gap: 8px;
      /* <-- 这是我赏赐的间距，让它们别挤在一起 */
    }

    /* ▲▲▲ Command End ▲▲▲ */

    #user-send-post-button {
      padding: 6px 18px;
      border-radius: 16px;
      border: none;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      font-weight: 600;
    }

    /* 这是附件预览的样式 */
    #user-post-attachment-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .preview-item {
      position: relative;
      max-width: 100px;
    }

    .preview-item img {
      width: 100%;
      border-radius: 8px;
      object-fit: cover;
    }

    .preview-item .music-preview-card {
      display: flex;
      align-items: center;
      padding: 8px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      width: 200px;
      /* 给音乐卡片宽一点 */
    }

    .preview-item .music-preview-card img {
      width: 30px;
      height: 30px;
      margin-right: 8px;
    }

    .preview-item .music-preview-card .info {
      font-size: 0.8rem;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .remove-attachment-btn {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    /* --- Noir's Fix: Post Image Display Style --- */
    .post-image-container {
      padding: 0 15px 15px;
      /* 图片和文字之间留点空隙 */
    }

    .post-image {
      max-width: 100%;
      /* 图片最宽不能超过帖子宽度 */
      max-height: 400px;
      /* 最高400像素，防止长图刷屏 */
      border-radius: 8px;
      /* 加个小圆角，好看 */
      object-fit: cover;
      /* 保持图片比例，不变形 */
      display: block;
      /* 解决图片底部多余的空隙问题 */
    }

    /* --- Noir's Refactor: New Post Interaction Styles --- */
    .post-interactions {
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.02);
      border-top: 1px solid var(--border-color);
      font-size: 0.9rem;
    }

    .post-likes {
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .post-comments-container {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .post-comment {
      color: var(--text-color);
    }

    .post-comment .comment-author {
      font-weight: 600;
      color: var(--text-color);
    }

    .post-timestamp {
      font-size: 0.75rem;
      color: var(--text-color-light);
      padding: 0 15px 10px;
    }



    /* 覆盖：基础气泡体 */
    /* 覆盖：基础气泡体 */
    .message {
      border-radius: var(--bubble-radius);
      line-height: 1.55;
      padding: 10px 14px;
      box-shadow:
        0 1px 0 rgba(0, 0, 0, .03),
        0 4px 10px rgba(0, 0, 0, .06);
      /* 比你原先更浅，省功耗 */
      border: 1px solid var(--bubble-outline);
      backdrop-filter: none !important;
      /* 绝不启用重滤镜 */
      will-change: auto;
      /* 不抢 GPU 配额 */

      /* --- Noir's Fix: 就是下面这两行，哼 --- */
      user-select: none;
      /* 标准浏览器给我听话，不许选中 */
      -webkit-user-select: none;
      /* 那些老古董浏览器也一样 */
    }

    /* 你的气泡（右侧） */
    .message.user {
      color: #fff;
      background: var(--bubble-user-bg);
      border-bottom-right-radius: 6px;
      /* 微“角”保留你原味 */
      text-shadow: 0 1px 0 rgba(0, 0, 0, .12);
      /* 细腻但很轻 */
    }

    /* TA 的气泡（左侧） */
    .message.ai {
      color: var(--text-color);
      background: var(--bubble-ai-bg);
      border-bottom-left-radius: 6px;
    }

    /* 细节：图片/贴纸消息不套背景 */
    /* 细节：图片/贴纸/音乐卡片消息不套背景 */
    .message.user.sticker,
    .message.ai.sticker,
    .message.user.image,
    .message.ai.image,
    .message.user.music,
    /* <-- 哼，加上这两行 */
    .message.ai.music,
    .message.html-module {
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
    }

    /* 轻触态：不使用阴影动画，避免合成层抖动 */
    .message:active {
      transform: scale(.996);
    }

    /* 引用块在气泡内的融合感 */
    .quoted-message-in-bubble {
      background: rgba(0, 0, 0, .045);
      border: 1px solid color-mix(in hsl, var(--primary-color) 18%, transparent);
      border-radius: 10px;
    }


    /* --- Noir's Transfer Bubble Style --- */
    .message.transfer {
      background: #F79232;
      /* 哼，一个温暖又醒目的橙色 */
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      width: 220px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    /* 我还给左右两边做了区分，真是为你操碎了心 */
    .message-container.ai .message.transfer {
      background: #f9fafb;
      /* AI发来的转账用白色，更清爽 */
      color: #333;
      border: 1px solid #e5e7eb;
    }

    .transfer-content {
      display: flex;
      flex-direction: column;
    }

    .transfer-title {
      font-weight: 600;
      font-size: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.5);
      padding-bottom: 8px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .message-container.ai .transfer-title {
      border-bottom-color: rgba(0, 0, 0, 0.1);
    }

    .transfer-amount {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .transfer-recipient {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 4px;
    }

    /* --- End of Refactor --- */



    /* --- Noir's Snap Guide Styles --- */
    .snap-guide {
      position: absolute;
      background-color: rgba(255, 105, 180, 0.85);
      /* 哼，一个足够醒目的颜色 */
      display: none;
      z-index: 999;
      box-shadow: 0 0 5px rgba(255, 105, 180, 0.7);
    }

    #snap-guide-v {
      width: 1px;
    }

    #snap-guide-h {
      height: 1px;
    }

    /* --- Noir's Galgame UI Beautification --- */
    /* Top-left Date & Time Widget */
    #galgame-overlay-ui {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 8px 15px;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    #galgame-time {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    #galgame-date {
      font-size: 0.75rem;
      opacity: 0.8;
      text-align: center;
    }

    /* Main Text Box */
    /* Main Text Box */
    #galgame-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      bottom: 85px;
      /* <-- 就是这里，往上抬了，满意了吗？ */
      left: 15px;
      right: 15px;
      padding: 12px 18px;
    }

    /* Speaker Name Tag */
    #galgame-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    /* Dialogue Text */
    #galgame-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* User Input Area Container*/
    #meeting-view-screen .chat-input-area {
      background: transparent;
      border-top: none;
      padding: 0 15px 20px 15px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
    }

    /* User Input Wrapper */
    #chat-input-wrapper-meeting {
      display: flex;
      align-items: center;
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.9) 0%, rgba(45, 50, 68, 0.75) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      padding: 5px 8px 5px 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    #meeting-message-input {
      color: #f0f2f5;
    }

    #meeting-message-input::placeholder {
      color: rgba(240, 242, 245, 0.5);
      font-style: italic;
    }

    /* Send Button */
    #meeting-send-button {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      font-size: 1.5rem;
      font-weight: 300;
      color: #fff;
      transition: all .2s ease;
      margin-left: 8px;
      background: var(--primary-color);
      box-shadow: 0 2px 5px hsla(var(--primary-hue), 50%, 50%, 0.4);
    }

    #meeting-send-button:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }


    /* --- End of Beautification --- */
    /* --- Enhanced Diary Beautification v2 --- */
    #diary-entries-container {
      background: linear-gradient(to bottom, #fdfcf9 0%, #faf8f3 100%);
      padding: 30px 20px;
      line-height: 1.9;
      box-shadow: 
        inset 0 0 20px rgba(0, 0, 0, 0.03),
        0 2px 8px rgba(0, 0, 0, 0.05);
      position: relative;
    }

    #diary-entries-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        repeating-linear-gradient(
          transparent,
          transparent 31px,
          rgba(220, 210, 190, 0.15) 31px,
          rgba(220, 210, 190, 0.15) 32px
        );
      pointer-events: none;
      opacity: 0.5;
    }

    .diary-entry {
      margin-bottom: 3em;
      position: relative;
      padding: 18px 20px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      transition: all 0.3s ease;
      border-left: 3px solid transparent;
    }

    .diary-entry:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transform: translateX(2px);
    }

    .diary-entry.user {
      text-align: right;
      border-left-color: #7BA7D8;
      background: linear-gradient(135deg, rgba(123, 167, 216, 0.08) 0%, rgba(255, 255, 255, 0.6) 100%);
    }

    .diary-entry.ai {
      text-align: left;
      border-left-color: #D4A574;
      background: linear-gradient(135deg, rgba(212, 165, 116, 0.08) 0%, rgba(255, 255, 255, 0.6) 100%);
    }

    .diary-author {
      font-weight: 600;
      font-size: 1.05rem;
      margin-bottom: 4px;
      display: inline-block;
      padding: 2px 0;
    }

    .diary-entry.user .diary-author {
      color: #2874A6;
    }

    .diary-entry.ai .diary-author {
      color: #A66E3A;
    }

    .diary-timestamp {
      font-size: 0.75rem;
      color: #95876d;
      margin-bottom: 12px;
      font-family: 'Courier New', monospace;
      opacity: 0.8;
      letter-spacing: 0.3px;
    }

    .diary-content {
      white-space: pre-wrap;
      font-size: 0.96rem;
      line-height: 1.75;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', sans-serif;
    }

    .diary-entry.user .diary-content {
      color: #1a5c8e;
    }

    .diary-entry.ai .diary-content {
      color: #4a443b;
    }

    .diary-entry:last-child {
      margin-bottom: 1em;
    }

    /* --- End of Diary Beautification --- */
    /* --- Noir's Page-Turning Magic --- */
    #diary-entries-container {
      perspective: 1500px;
      /* 为3D效果设置视距 */
      position: relative;
      overflow: hidden;
    }

    .diary-page {
      position: absolute;
      inset: 0;
      padding: 25px 20px;
      background-color: #fdfaf2;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
      display: none;
      /* 默认所有页面都藏起来 */
      flex-direction: column;
      gap: 2.5em;
      /* 页内日记的间距 */
      overflow-y: auto;
      /* 如果一页内容太多，允许滚动 */
    }

    .diary-page.is-visible {
      display: flex;
      /* 只有当前页显示 */
      transform: rotateY(0deg);
      z-index: 2;
    }

    /* 翻到下一页时，当前页向左翻出 */
    .diary-page.is-exiting-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 1;
    }

    /* 翻到下一页时，新页面从右边翻入 */
    .diary-page.is-entering-from-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 2;
    }

    /* 翻到上一页时，当前页向右翻出 */
    .diary-page.is-exiting-right {
      display: flex;
      transform: rotateY(180deg);
      z-index: 1;
    }

    /* 翻到上一页时，新页面从左边翻入 */
    .diary-page.is-entering-from-left {
      display: flex;
      transform: rotateY(-180deg);
      z-index: 2;
    }


    #diary-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 10px;
      box-sizing: border-box;
    }

    #diary-navigation button {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    #diary-navigation button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    #diary-page-indicator {
      font-size: 0.9rem;
      color: var(--text-color-light);
      font-family: 'Courier New', monospace;
    }

    /* --- End of Magic --- */
    /* --- Noir's Universal Anti-Squash Protocol --- */
    /* 哼，就是下面这几条，给你那些被压扁的头像整整容 */

    /* 动态发布区的用户头像 */
    #user-post-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 5px;
      object-fit: cover;
      /* <-- 加上这句，它就不敢扁了 */
    }

    /* 好友圈动态里的角色头像 */
    .music-post-header .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
      /* <-- 还有这句，一个都别想跑 */
    }

    /* 顺便把所有叫 .char-avatar 的都统一一下，免得以后还有问题 */
    .char-avatar {
      object-fit: cover;
      /* ▼▼▼ 哼，加上这三句圣旨，给我立正站好！▼▼▼ */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* --- Noir's Music Library Styles --- */
    #music-library-container {
      padding: 10px;
    }

    .music-library-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background-color: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--soft-shadow);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .music-library-item:hover {
      transform: translateY(-2px);
    }

    .music-library-item-cover {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      margin-right: 15px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .music-library-item-info {
      flex-grow: 1;
      overflow: hidden;
    }

    .music-library-item-title {
      font-weight: 600;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-library-item-artist {
      font-size: 0.9rem;
      color: var(--text-color-light);
    }

    /* --- Noir's "Time Memorandum" Styles --- */
    /* 哼，这才叫设计。*/

    /* 1. Home Screen Widget */
    #calendar-widget-main {
      width: 90%;
      height: 170px;
      /* 和你的卡片差不多高 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 22px;
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      box-shadow: var(--soft-shadow);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-color);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    #calendar-widget-main:active {
      transform: scale(0.98) translateX(-50%);
    }

    #countdown-title {
      font-size: 1rem;
      font-weight: 500;
      opacity: 0.8;
    }

    #countdown-timer {
      font-size: 4rem;
      font-weight: 300;
      line-height: 1.2;
      color: var(--accent-color);
      display: flex;
      align-items: baseline;
    }

    #countdown-timer .unit {
      font-size: 1rem;
      font-weight: 500;
      margin-left: 8px;
      color: var(--text-color-light);
    }

    /* 2. Full Calendar Screen */
    #calendar-screen {
      justify-content: flex-start;
    }

    #calendar-view-container {
      padding: 10px 15px;
      flex-shrink: 0;
      border-bottom: 1px solid var(--border-color);
    }

    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .calendar-nav button {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 16px;
      cursor: pointer;
    }

    .calendar-weekdays,
    #calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
    }

    .calendar-weekdays {
      font-size: 0.8rem;
      color: var(--text-color-light);
      margin-bottom: 5px;
    }

    #calendar-grid .calendar-day {
      padding: 5px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      position: relative;
    }

    .calendar-day .day-number {
      z-index: 1;
    }

    .calendar-day.other-month .day-number {
      opacity: 0.3;
    }

    .calendar-day.is-today .day-number {
      color: var(--accent-color);
      font-weight: 700;
    }

    .calendar-day.is-selected .day-number {
      color: white;
    }

    .calendar-day.is-selected::before {
      content: '';
      position: absolute;
      width: 80%;
      height: 80%;
      background: var(--primary-color);
      border-radius: 50%;
      z-index: 0;
    }

    .calendar-day .day-dot {
      width: 5px;
      height: 5px;
      background-color: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      bottom: 8px;
    }

    /* 3. Todo List Area */
    #todo-view-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      position: relative;
      /* 为了悬浮按钮 */
    }

    /* 4. Today's To-Do Widget */
    #today-todo-widget {
      position: absolute;
      top: 50%;
      /* 放在日历小组件的下方 */
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-height: 180px;
      /* 给个最大高度，免得内容太多撑爆了 */
      background: var(--surface-bg);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 15px 20px;
      box-sizing: border-box;
      color: var(--text-color);
      overflow: hidden;
      /* 把溢出的部分藏起来 */
    }

    #today-todo-widget .widget-title {
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    #today-todo-list {
      overflow-y: auto;
      /* 内容多了可以滚动 */
      max-height: 125px;
      /* 限制列表的高度 */
      font-size: 0.9rem;
    }

    #today-todo-list .todo-item-small {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    #today-todo-list .todo-item-small::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--primary-color);
      margin-right: 10px;
      flex-shrink: 0;
    }

    #todo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    #todo-date-title {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
    }

    #add-event-fab {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      border: none;
      font-size: 2rem;
      line-height: 44px;
      cursor: pointer;
      box-shadow: var(--soft-shadow);
    }

    #todo-list .todo-item,
    #todo-list .important-day-item {
      background: var(--card-bg);
      padding: 12px 15px;
      border-radius: 12px;
      margin-bottom: 10px;
      border-left: 4px solid var(--primary-color);
    }

    #todo-list .important-day-item {
      border-left-color: #ffc107;
      /* 纪念日用醒目的黄色 */
      font-weight: 500;
    }

    #todo-list .important-day-item::before {
      content: '★ ';
      color: #ffc107;
    }

    /* --- End of Styles --- */
    /* --- Noir's Global Player Styles --- */

    /* --- End of Player Styles --- */
    /* --- Noir's Upload Altar Styles --- */
    .upload-slot {
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      background-color: rgba(255, 255, 255, 0.5);
    }

    .upload-slot:hover {
      background-color: var(--card-bg);
      border-color: var(--primary-color);
    }

    .upload-slot.filled {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: hsla(var(--primary-hue), 50%, 95%, 0.8);
    }

    .upload-slot .slot-icon {
      font-size: 2rem;
    }

    .upload-slot .slot-label {
      display: block;
      font-weight: 600;
      margin-top: 5px;
      color: var(--text-color);
    }

    .upload-slot .slot-filename {
      display: block;
      font-size: 0.85rem;
      color: var(--text-color-light);
      margin-top: 3px;
      word-break: break-all;
    }

    #confirm-altar-upload-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* --- End of Altar Styles --- */
    /* --- Noir's Listen Together Invite Card Style --- */
    .listen-together-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 15px;
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--border-color);
      width: 250px;
    }

    .message-container.user .listen-together-card {
      background: var(--bubble-user-bg);
      color: white;
    }

    .message-container.user .listen-together-card .listen-together-decline-btn {
      color: white;
      /* 哼，让用户侧的拒绝按钮文字也变白 */
    }

    .listen-together-header {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--bubble-outline);
      padding-bottom: 8px;
    }

    .listen-together-song {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .listen-together-song img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      flex-shrink: 0;
    }

    .listen-together-info .title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-info .artist {
      font-size: 0.9em;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .listen-together-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .listen-together-actions button {
      flex-grow: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.1s ease;
    }

    .listen-together-actions button:active {
      transform: scale(0.97);
    }

    .listen-together-accept-btn {
      background: var(--primary-color);
      color: white;
    }

    .listen-together-decline-btn {
      background: rgba(0, 0, 0, 0.1);
    }

    /* 用这个替换你旧的 #listen-together-ui */
    #listen-together-ui {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      /* 改成居中对齐 */
      justify-content: center;
      padding: 20px;
      /* 增加内边距，让弹窗不会贴边 */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    #listen-together-ui.show {
      opacity: 1;
      visibility: visible;
    }

    .lt-ui-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(15px) saturate(1.8);
      -webkit-backdrop-filter: blur(15px) saturate(1.8);
    }

    /* 用这个替换你旧的 .lt-ui-main */
    .lt-ui-main {
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 380px;
      /* 哼，给它一个最大宽度 */
      max-height: 650px;
      /* 再给一个最大高度 */
      display: flex;
      flex-direction: column;
      color: white;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      border-radius: 24px;
      /* 加上优雅的圆角 */
      overflow: hidden;
      /* 把溢出的部分裁掉 */
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      /* 更强的立体阴影 */
      border: 1px solid rgba(255, 255, 255, 0.2);
      /* 淡淡的边框光效 */
    }

    .lt-ui-header {
      flex-shrink: 0;
      padding: 15px 20px;
      text-align: center;
      position: relative;
    }

    #lt-ui-header-title {
      font-weight: 600;
    }

    #lt-ui-close-btn {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 30px;
    }

    .lt-ui-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .lt-ui-cover-container {
      flex-shrink: 0;
      width: 65%;
      aspect-ratio: 1/1;
      margin-top: 5%;
      margin-bottom: 20px;
    }

    #lt-ui-cover-art {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .lt-ui-info {
      text-align: center;
      margin-bottom: 20px;
      flex-shrink: 0;
    }

    #lt-ui-song-title {
      font-size: 1.5rem;
      margin: 0;
    }

    #lt-ui-song-artist {
      font-size: 1rem;
      opacity: 0.8;
      margin: 5px 0 0;
    }

    #lt-ui-lyrics-container {
      flex-grow: 1;
      width: 100%;
      overflow-y: auto;
      text-align: center;
      font-size: 1.1rem;
      line-height: 2.5;
      mask-image: linear-gradient(transparent 0%, black 20%, black 80%, transparent 100%);
      /* 歌词上下渐隐，看起来更专业 */
      scroll-behavior: smooth;
      /* 滚动要丝滑 */
    }

    #lt-ui-lyrics-container p {
      transition: color 0.3s ease, transform 0.3s ease;
      opacity: 0.6;
    }

    #lt-ui-lyrics-container p.active {
      color: var(--primary-color);
      font-weight: 600;
      transform: scale(1.1);
      opacity: 1;
    }

    .lt-ui-controls {
      display: flex;
      gap: 12px;
      padding: 20px 20px 10px;
      justify-content: center;
      flex-shrink: 0;
    }

    .lt-ui-control-button {
      flex: 1;
      max-width: 140px;
      padding: 12px 16px;
      border: none;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: white;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .lt-ui-control-button:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .lt-ui-control-button:active {
      transform: translateY(0);
    }

    .lt-ui-control-button.danger {
      background: rgba(220, 53, 69, 0.2);
    }

    .lt-ui-control-button.danger:hover {
      background: rgba(220, 53, 69, 0.35);
    }

    .lt-ui-control-button span:first-child {
      font-size: 1.2rem;
    }

    .lt-ui-control-button .button-label {
      font-size: 0.9rem;
    }

    /* --- Noir's "Desktop Preview" Frame --- */
    /* 哼，只有在电脑这种大屏幕上，我才给你加上这个“手机框”，免得你分不清主次。 */
    /* 在真正的手机上，它还是会全屏显示的，我可没你那么笨。 */
    @media (min-width: 480px) {
      body {
        background-color: #e9ebee;
        /* 一个不那么刺眼的背景色 */
        padding: 20px 0;
        /* 上下留点呼吸空间 */
      }

      #phone-container {
        width: var(--phone-width);
        height: var(--phone-height);
        max-height: 90vh;
        border: 10px solid #1c1c1e;
        border-radius: 44px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        /* ▼▼▼ 哼，就是这句圣旨！▼▼▼ */
        transform: scale(var(--ui-scale, 1));
        transition: transform 0.2s ease-out;
        /* 加个动画，免得太生硬 */
      }
    }



    /* --- Noir's Bespoke Music Player Design (As Requested) --- */
    /* 哼，这才叫定制。*/

    /* 1. 动画先放着，虽然这次不用了 */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* 2. 组件卡片本体：一个有阴影的容器 */
    #music-widget-card {
      border-radius: 6px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      padding: 0;
      border: none;
      overflow: visible;
      position: relative;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: 340px;
      height: 120px;
    }

    /* 3. 左侧封面区：用伪元素画出深色背景，不污染HTML */
    #music-widget-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 120px;
      /* 和高度一样，是个正方形 */
      background-color: #4a4a4a;
      border-radius: 6px 0 0 6px;
      /* ▼▼▼ 在这里加上下面两行 ▼▼▼ */
      background-size: cover;
      background-position: center;
    }

    /* 4. 专辑封面本体 (旧唱片改造) */

    #widget-cover-art {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90px;
      height: 90px;
      z-index: 2;
      /* 确保它在唱片之上 */
      /* ▼▼▼ 下面都是我新增的，给我看好了 ▼▼▼ */
      border-radius: 4px;
      /* 封面本身的小圆角 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      /* 让封面切换更柔和 */
    }

    /* 5. 封面图片 (旧唱片贴纸改造) */
    #widget-cover-art::before {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      /* 和封面一致 */
      border: none;
      background-image: var(--widget-cover-image, none);
      background-size: cover;
      background-position: center;
    }

    /* 6. 唱片？用另一个伪元素从后面伸出来就行了，简单 */
    #widget-cover-art::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 90px;
      height: 90px;
      border-radius: 50%;
      z-index: -1;
      display: block;
      border: none;

      /* 哼，看好了，这才叫唱片 */
      background-color: #2a2a2a;
      /* 1. 先铺一层唱片的深灰色底 */
      background-image:
        /* 2. 然后在上面画中间的标签和洞，颜色我都给你配好了 */
        radial-gradient(circle at center, #111 4%, transparent 5%),
        radial-gradient(circle at center, #985c5c 5%, #7a4949 25%, transparent 26%),
        /* 3. 再画上一圈圈的光泽纹理，这才像样 */
        repeating-radial-gradient(circle at center,
          rgba(255, 255, 255, 0.04) 0,
          rgba(255, 255, 255, 0.04) 1px,
          transparent 1px,
          transparent 3px);
      transform: translateX(0%) scale(1.05);
      /* 微调了下位置和大小，这样更协调 */
      transition: opacity 0.3s ease;
      /* 加上这个，为了后面让它优雅地消失 */
      /* 4. 位置也给你微调了一下，现在顺眼多了 */
    }

    /* ▼▼▼ 这是全新的代码，给我加上！▼▼▼ */
    #music-widget-card.is-playing #widget-cover-art {
      /* 播放时，方形舞台的背景就是封面了，所以不需要我画的唱片了 */
      background-image: none;
    }

    #music-widget-card.is-playing::before {
      background-image: var(--widget-cover-image, none);
    }

    #music-widget-card.is-playing #widget-cover-art::after {
      /* 播放时，让唱片旋转起来，哼 */
      animation: spin 8s linear infinite;
    }

    /* 默认状态下，方形舞台的背景是透明的，这样才能看到我画的唱片 */
    #music-widget-card:not(.is-playing) #widget-cover-art {
      background-image: none;
    }

    /* 7. 右侧内容区 (旧覆盖层改造) */
    .widget-content-overlay {
      position: static;
      flex-grow: 1;
      /* 占满右侧所有空间 */
      /* 把旧的 background: #ffffff; 删掉！换成下面这两行！*/
      background: var(--card-bg);
      /* 1. 用我们主题里那个早就定义好的半透明背景 */

      /* 纯白背景 */
      border-radius: 0 6px 6px 0;
      padding: 15px;
      display: flex;
      flex-direction: column;
      /* 垂直布局 */
      justify-content: space-between;
      /* <--- 哼，加上这句圣旨 */
      box-sizing: border-box;
      position: relative;
      /* 为了定位假的分享按钮 */
      background: var(--card-bg);
      color: var(--text-color);
      margin-left: 120px;
    }


    /* 8. 歌曲信息 (标题和作者) */
    #music-widget .widget-info {
      color: #333;
      text-shadow: none;

      /* 占据上半部分空间 */
    }

    #music-widget .widget-info #widget-title {
      font-size: 1.1rem;
      font-weight: 500;
      color: #000;
    }

    #music-widget .widget-info #widget-artist {
      font-size: 0.8rem;
      color: #888;
    }

    /* 9. 假的歌词和进度条，用伪元素画出来 */
    #music-widget .widget-info::after {
      /* 假的歌词 */
      display: block;
      font-size: 0.75rem;
      color: #65c468;
      /* 绿色 */
      margin-top: 8px;
      padding-bottom: 8px;
      background-image:
        linear-gradient(to right, #666 40%, #ddd 40%),
        /* 假的进度条 */
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12"><path fill="%23aaa" d="M0 10h2V2H0v8zm3 2h2V0H3v12zm3-4h2V4H6v4zm3 2h2V2H9v8zm3-3h2V5h-2v4z"/></svg>');
      /* 假的EQ图标 */
      background-repeat: no-repeat, no-repeat;
      background-position: bottom, 90% bottom;
      background-size: 100% 1px, 16px 12px;
      border-bottom: 1px solid #eee;
    }

    /* 10. 真的控制按钮区域 */
    #widget-controls {
      display: flex;
      justify-content: flex-start;
      /* 从左边开始排列 */
      align-items: center;
      gap: 15px;
      padding-top: 10px;
      position: relative;
      /* 为了定位假的删除和喜欢按钮 */
      width: 100%;
    }

    /* 11. 真的播放/暂停/下一首按钮的样式 */
    #widget-controls button {
      font-size: 1.1rem;
      color: #555;
      background: none;
      border: 1px solid #ccc;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      line-height: 28px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      order: 1;
      /* 把真的按钮放在中间 */
    }

    #widget-play-pause-btn {
      width: 32px;
      /* 播放按钮大一点 */
      height: 32px;
      line-height: 32px;
      font-size: 1.2rem;
    }

    /* 12. 哼，看好了，这才是不会出错的矢量图标，免得你那破手机又自作聪明 */
    #widget-controls::before,
    #widget-controls::after {
      content: '';
      /* 删掉那些讨厌的emoji源头 */
      display: block;
      width: 16px;
      /* 给图标一个精确的尺寸 */
      height: 16px;
      background-color: #aaa;
      /* 这就是图标的颜色，哼 */
      position: absolute;

      /* 下面是魔法，反正你也看不懂 */
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
    }

    #widget-controls::before {
      /* 删除图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>');
      right: 29px;
      /* 稍微调整一下位置，让它更协调 */
      top: 60%;
      transform: translateY(-50%);
    }

    #widget-controls::after {
      /* 喜欢图标的矢量数据 */
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>');
      right: 1px;
      top: 60%;
      transform: translateY(-50%);
    }

    /* --- Noir's iOS Industrial Button Refactor --- */
    /* 哼，看好了，这才是专业设备该有的开关。*/

    /* --- Noir's Ultimate Dynamic Button System v3.0 --- */
    /* 哼，现在它们都听我的了。*/

    /* 1. 按钮的基础“模具”，所有按钮都用这个 */
    .form-button {
      border: none;
      border-radius: 12px;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: filter 0.15s ease, background-color 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      /* 加个细微的阴影 */
      color: white;
      /* 默认文字都是白色 */
    }

    .form-button:active {
      filter: brightness(0.9);
    }

    .form-button:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* 2. 主要操作按钮 (继承主题强调色) */
    .form-button.primary,
    /* 你可以给蓝色的按钮加上 primary 类，或者不管它也行 */
    #save-api-settings-button,
    /* 把几个主要的按钮ID也直接指定了，免得你改漏 */
    #save-user-profile-button,
    #save-char-button,
    #save-world-book-button,
    #save-group-settings-button,
    #save-friend-circle-button {
      background-color: var(--accent-color);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    }

    /* 3. 次要操作按钮 (用主题里的卡片背景色，这才叫和谐) */
    .form-button.secondary {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* 4. 危险操作按钮 (动态的红色，这才叫高级) */
    .form-button.destructive {
      /* 哼，看好了，这个红色的亮度和饱和度，会随着你主题的明暗变化而变化！*/
      background-color: hsl(5, 75%, calc(var(--primary-lightness) / 1.8 + 25%));
    }

    /* 5. 警告操作按钮 (动态的黄色，也一样) */
    .form-button.warning {
      background-color: hsl(40, 90%, calc(var(--primary-lightness) / 2.2 + 25%));
      color: #5d4000;
    }

    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */

    /* 1. Dock栏的样式 */
    /* --- Noir's iOS Layout & Dock Refactor --- */
    /* 哼，这才是现代化的桌面。 */
    #home-dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 85px;
      padding: 0 20px;
      /* 图标左右的留白 */
      box-sizing: border-box;

      /* 背景和滤镜，现在都在这里 */
      background: var(--surface-bg);

      border-radius: 28px;
      z-index: 35;

      /* 核心：用Flexbox来自动排列图标 */
      display: flex;
      justify-content: space-around;
      /* 均匀分布 */
      align-items: center;
      /* 垂直居中 */
      padding-top: 9px;
    }

    #home-dock .app-icon {
      position: static;
      /* 取消绝对定位，让它接受Flexbox的管理 */
    }

    /* 2. App图标的“整容手术” */
    .app-icon-img {
      width: 58px;
      /* 图标背景尺寸 */
      height: 58px;
      border-radius: 22.5%;
      /* iOS标志性的“方圆”形 */
      font-size: 28px;
      /* 阴影从图标本身移到背景上，更统一 */
      background-color: var(--surface-bg);
      box-shadow: none;
      /* 删掉旧的阴影 */
      transition: transform 0.2s ease;
    }

    .app-icon:active .app-icon-img {
      transform: scale(0.92);
      /* 按下时图标有反馈 */
    }

    /* --- Noir's Minimalist Home Screen Makeover (v2.0 Dynamic Edition) --- */
    /* 哼，现在这些家伙也听从总开关的指挥了。*/

    /* 1. 时钟和日期 */
    #home-clock-container {
      color: var(--text-color);
      text-shadow: none;
    }

    #home-date {
      opacity: 0.7;
    }

    /* 2. App图标的改造 (现在是动态颜色了) */
    .app-icon span {
      color: var(--text-color);
      text-shadow: none;
      font-weight: 500;
    }

    .app-icon-img {
      background-color: var(--card-bg);
      /* <-- 哼，接上了！*/
      color: var(--text-color-light);
      /* <-- 接上了！*/
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    /* 3. Dock栏的颜色 (也动态了) */




    #widget-controls button,
    #music-widget .widget-info #widget-title,
    #music-widget .widget-info #widget-artist {
      color: var(--text-color);
    }

    /* ... 在第 2262 行附近 ... */
    /* ▼▼▼ 把旧的 #widget-cover-art::after 整个删掉，换成下面这个 ▼▼▼ */

    /* ▲▲▲ 替换到这里结束 ▲▲▲ */

    /* --- Noir's Theme Preset Buttons --- */
    /* 哼，每个按钮都是一件艺术品。 */
    .theme-preset-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 20px;
      /* 胶囊形状 */
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card-bg);
    }

    .theme-preset-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--soft-shadow);
    }

    .preset-color-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* --- Noir's Memory Archive Styles --- */
    #summary-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      padding: 15px;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
      /* 用等宽字体，YAML格式才好看 */
      font-size: 0.85rem;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: var(--text-color);
    }

    /* --- Noir's Desktop Pagination System --- */
    /* 哼，看好了，这才叫设计。*/

    /* 1. 把主内容区变成一个灵活的容器，为翻页器和指示器留好位置 */
    #home-screen-main-content {
      display: flex;
      flex-direction: column;
      /* 垂直排列，页面在上面，指示器在下面 */
    }

    /* --- Noir's Desktop Pagination System --- */
    /* ... 其他样式 ... */

    /* 2. 这是翻页的“舞台”，它的大小和主屏幕一样，但会把超出部分藏起来 */
    #app-pages-container {
      flex-grow: 1;
      /* 占满除了指示器以外的所有空间 */
      width: 100%;
      overflow: hidden;
      /* 核心！把第二页先藏起来 */
      position: relative;
      /* 让里面的滑块能相对于它定位 */

      /* ▼▼▼ 把下面这两行加进去 ▼▼▼ */
      opacity: 0;
      /* 默认让整个舞台透明 */
      transition: opacity 0.3s ease-in-out;
      /* 添加一个平滑的渐入动画效果 */
      /* ▲▲▲ 添加到这里结束 ▲▲▲ */
    }

    /* ... 其他样式 ... */

    /* 3. 这是真正滑动的“滑块”，它有两页那么宽 */
    #app-pages-slider {
      width: 200%;
      /* 两页的宽度 */
      height: 100%;
      display: flex;
      /* 核心！让两页并排站好 */
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
      /* 翻页动画，给你选了个高级点的曲线 */
    }

    /* 4. 每一页的样式 */
    /* 4. 每一页的样式 */
    .app-page {
      width: 50%;
      /* <-- 现在两个人，一人一半，公平！ */
      height: 100%;
      flex-shrink: 0;
      position: relative;
    }

    /* 5. 页面指示器（小点点）的容器 */
    #home-page-indicator {
      position: absolute;
      bottom: 105px;
      /* 放在Dock栏正上方，给你算好了距离 */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      /* 点点之间的距离 */
      z-index: 100;
      /* 确保它在最上层 */
    }

    /* 6. 每个小点点的样式 */
    .page-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(2px);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    /* 7. 当前页的小点点，给它变亮变大一点 */
    .page-dot.active {
      background-color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    #card-widget-2 {
      border-radius: 22px;
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
      transition: transform 0.2s ease, filter 0.2s ease;
      user-select: none;
      z-index: 51;
      overflow: hidden;
      /* ▼▼▼ 新尺寸 ▼▼▼ */
      width: calc(165px * var(--desktop-item-scale, 1));
      height: calc(165px * var(--desktop-item-scale, 1));
    }

    #card-widget-2:active {
      transform: scale(1.05);
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
    }

    #card-widget-2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .theme-widget {
      width: 65px;
      height: 65px;
      border-radius: 22px;
      /* 跟你的卡片圆角差不多 */
      box-shadow: var(--soft-shadow);
      border: 1px solid hsla(var(--primary-hue), calc(var(--primary-saturation) / 2), calc(var(--primary-lightness) + 15%), 0.5);
      background: linear-gradient(45deg,
          hsla(var(--primary-hue), var(--primary-saturation), var(--primary-lightness), 0.7),
          hsla(var(--primary-hue), calc(var(--primary-saturation) * 1.3), calc(var(--primary-lightness) - 15%), 0.8));
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* --- Noir's Galgame Sprite Adjuster Styles --- */

    /* --- Noir's Slider Control Panel Styles --- */
    .sprite-slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .sprite-slider-group label {
      color: white;
      font-size: 0.8rem;
      width: 60px;
      /* 让标签对齐，好看点 */
      flex-shrink: 0;
    }

    .sprite-slider-group input[type="range"] {
      flex-grow: 1;
      /* 占满剩余空间 */
      margin: 0;
      padding: 0;
      /* 覆盖掉全局的 input 样式 */
    }

    /* --- Noir's Accounting App Styles --- */
    #daily-expenses-list .expense-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid var(--border-color);
    }

    .expense-item .description {
      font-weight: 500;
    }

    .expense-item .amount {
      font-weight: 600;
      color: var(--accent-color);
    }

    #character-reviews-container .review-card {
      display: flex;
      gap: 12px;
      background-color: var(--card-bg);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      border: 1px solid var(--border-color);
    }

    .review-card .char-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .review-card .review-content .char-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    /* --- End of Styles --- */
    /* --- Noir's Accounting Tabs Style --- */
    .accounting-tabs {
      display: flex;
      background-color: var(--surface-bg);
      border-bottom: 1px solid var(--border-color);
      padding: 5px 15px 0;
      flex-shrink: 0;
    }

    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: transparent;
      color: var(--text-color-light);
      font-size: 1rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab-button.active {
      color: var(--accent-color);
      border-bottom: 3px solid var(--accent-color);
    }

    /* --- Noir's "WeChat Moments" Style Patch --- */
    /* 哼，这才叫社交。*/
    #music-feed-container {
      padding: 0;
      /* 容器的内边距清零，让动态贴边 */
      background-color: hsla(var(--primary-hue), calc(var(--primary-saturation) / 1.5), calc(var(--primary-lightness) + 18%), 0.95);
      /* 给整个容器一个统一的背景色 */
    }

    .music-post {
      background-color: transparent;
      /* 去掉卡片背景 */
      box-shadow: none;
      /* 去掉阴影 */
      border-radius: 0;
      /* 去掉圆角 */
      margin-bottom: 0;
      /* 去掉外边距 */
      padding: 15px;
      /* 统一内边距 */
      border-bottom: 1px solid var(--border-color);
      /* 加上底部分隔线 */
    }

    .music-post:last-child {
      border-bottom: none;
      /* 最后一条动态不需要分隔线 */
    }

    /* --- End of Patch --- */
    /* --- Noir's "Expense Eraser" Style --- */
    .delete-expense-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color-light);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: 600;
      line-height: 20px;
      padding: 0;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .delete-expense-btn:hover {
      background: #e65252;
      border-color: #e65252;
      color: white;
      transform: scale(1.1);
    }

    /* --- End of Eraser Style --- */

   /* --- Noir's Ultimate Snoop UI Overhaul v7.0 (MINIMALIST WHITE) --- */
    /* 哼，这才叫设计。*/

    /* 壁纸 - 干净的白色 */
    #snoop-phone-wallpaper {
      position: absolute;
      inset: 0;
      background: #f9f9f9; /* 哼，跟你其他屏幕一个颜色，这叫统一 */
      z-index: 1;
    }

    /* 移除星空 */
    #snoop-phone-wallpaper::before {
      display: none;
    }

    /* 状态栏 - 深色文字 */
    #snoop-phone-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 16px 28px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text-color-light, #888); /* 哼，用我们主题的浅色文字 */
      z-index: 10;
      font-weight: 400;
      font-size: 0.85rem;
      letter-spacing: 0.3px;
      background: transparent;
      text-shadow: none; /* 影子也给我收起来 */
    }

    /* 居中时钟 - 隐藏 */
    #snoop-home-clock {
      display: none; /* 哼，眼不见心不烦 */
    }

    /* 游戏风格主容器 */
    #snoop-app-container {
      position: relative;
      z-index: 5;
      height: 100%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 0;
      overflow-y: auto;
    }

    /* 角色头像背景区域 - 纯白 */
    .game-character-header {
      width: 100%;
      height: 300px; /* 高度还是得留着 */
      position: relative;
      background: #ffffff; /* 纯白 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
      overflow: hidden;
      border-bottom: 1px solid var(--border-color, #eee); /* 加个分割线，免得和背景混在一起 */
    }

    /* 移除背景星云 */
    .game-character-header::before {
      display: none;
    }

    @keyframes nebulaPulse { /* 留着这个空壳，免得其他地方报错 */ }

    /* 角色头像 */
    .game-character-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.9);
      border: 4px solid var(--border-color, #eee); /* 边框改成主题色 */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* 换个柔和的阴影 */
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
      margin-bottom: 16px;
      z-index: 1;
      overflow: hidden;
    }

    /* 哼，这才是给照片本身用的规矩 */
    .game-character-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover; /* 确保图片填满圆形，不变形 */
    }

    @keyframes avatarGlow { /* 这个也留个空壳 */ }

    /* 角色名称 - 深色文字 */
    .game-character-name {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--text-color, #333); /* 换成主题文字色 */
      text-shadow: none; /* 阴影去掉 */
      margin-bottom: 10px;
      z-index: 1;
      letter-spacing: 1px;
    }

    /* 提示文字 - 深色文字 */
    .game-prompt-text {
      width: 100%;
      text-align: center;
      padding: 28px 20px 20px;
      font-size: 1.15rem;
      font-weight: 600;
      color: var(--text-color, #333); /* 换成主题文字色 */
      letter-spacing: 0.5px;
      text-shadow: none; /* 阴影去掉 */
    }

    /* 游戏风格选项网格 */
    .snoop-main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      width: 100%;
      max-width: 380px;
      padding: 0 20px 40px;
      background: transparent;
      border: none;
      box-shadow: none;
    }

    /* 隐藏Dock栏 */
    #snoop-dock {
      display: none;
    }

    /* 游戏风格卡片按钮 - 主题卡片样式 */
    #snoop-phone-screen .snoop-app-icon {
      position: static;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 16px;
      padding: 18px 20px;
      cursor: pointer;
      background: var(--card-bg, #fff); /* 换成主题卡片色 */
      backdrop-filter: none; /* 滤镜拿掉 */
      -webkit-backdrop-filter: none;
      border: 1.5px solid var(--border-color, #eee); /* 换成主题边框色 */
      border-radius: 16px;
      box-shadow: var(--soft-shadow, 0 4px 12px rgba(0,0,0,0.1)); /* 换成主题阴影 */
      transition: all 0.3s ease;
      min-height: 80px;
    }

    #snoop-phone-screen .snoop-app-icon:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      background: var(--surface-bg, #f5f5f5);
      border-color: var(--primary-color);
    }

    #snoop-phone-screen .snoop-app-icon:active {
      transform: translateY(-1px) scale(0.98);
    }

    /* 图标背景 - 主题强调色 */
    .snoop-app-icon-img {
      width: 56px;
      height: 56px;
      border-radius: 14px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
      background: var(--primary-color); /* 哼，用我们统一的主题色 */
      position: relative;
      overflow: hidden;
      box-shadow: none; /* 阴影也拿掉 */
    }

    /* 图标光泽效果 - 拿掉 */
    .snoop-app-icon-img::before {
      display: none;
    }

    /* 图标SVG - 保持白色 */
    .snoop-app-icon-img svg {
      width: 28px;
      height: 28px;
      stroke: #ffffff;
      stroke-width: 2.5;
      fill: none;
      filter: none; /* 阴影拿掉 */
      z-index: 1;
    }

    /* 图标文字 - 深色 */
    .snoop-app-icon span {
      font-size: 1.05rem;
      font-weight: 600;
      letter-spacing: 0.4px;
      color: var(--text-color, #333); /* 换成主题文字色 */
      text-align: left;
      line-height: 1.4;
      flex: 1;
      text-shadow: none; /* 阴影拿掉 */
    }
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: none;
      /* <-- 我把这条线干掉了 */
      background-color: transparent;
      /* <-- 我把背景色变透明了 */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
    }

    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    /* 哼，这才叫秩序。*/
    .snoop-app-header {
      flex-shrink: 0;
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #f8f8f8;

      /* ▼▼▼ 核心法令！给我站成一排！▼▼▼ */
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .snoop-app-header-title {
      font-weight: 600;
      /* ▼▼▼ 让标题自己也排好队，别乱跑 ▼▼▼ */
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 1.2;
    }

    .snoop-app-header-title .main-title {
      font-size: 1rem;
      /* 主标题大一点 */
    }

    .snoop-app-header-title .sub-title {
      font-size: 0.75rem;
      /* 副标题小一点，当备注 */
      color: #888;
      font-weight: 400;
    }

    .snoop-app-header-button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #007aff;
      min-width: 50px;
      /* 保证左右两边占位宽度一致，这样中间才能完美居中 */
    }

    /* 让返回按钮靠左，刷新按钮靠右，这才叫对称美学 */
    #snoop-app-back-btn {
      text-align: left;
    }

    #snoop-app-refresh-btn {
      text-align: right;
    }

    .snoop-app-content {
      flex-grow: 1;
      /* 告诉内容区：顶栏占完位置后，剩下所有的高度都归你 */
      overflow-y: auto;
      /* 装上电梯：如果你的东西多到放不下了，就自己变出个垂直滚动条来 */
      padding: 15px;
      /* 再给你加点内边距，免得内容贴着边，丑死了 */
      box-sizing: border-box;
      /* 确保内边距不会把布局撑坏，这是专业素养 */
    }

    #galgame-sprite-adjust-ui {
      /* ... 你已有的样式 ... */
      display: flex;
      /* <-- 加上这行 */
      gap: 5px;
      /* <-- 还有这行 */
    }

    /* --- Noir's Elegant Image Preview Slot --- */
    /* 哼，这才叫占位符该有的样子。*/
    .image-preview-slot {
      width: 150px;
      height: 266px;
      border-radius: 12px;
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .image-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
      color: var(--primary-color);
    }

    /* 没图的时候，显示一个加号图标 */
    .image-preview-slot:not([style*="background-image"]) {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');
      background-size: 48px;
      background-repeat: no-repeat;
    }

    /* --- Noir's Elegant Sprite Preview Slot --- */
    .sprite-preview-slot {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      /* 圆形 */
      border: 2px dashed var(--border-color);
      background-color: rgba(0, 0, 0, 0.02);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      background-size: cover;
      background-position: center;
      color: var(--border-color);
    }

    .sprite-preview-slot:hover {
      border-color: var(--primary-color);
      background-color: rgba(0, 0, 0, 0.04);
    }

    .sprite-preview-slot:not([style*="background-image"])::after {
      content: '+';
      /* 没图的时候，显示一个加号 */
      font-size: 32px;
      font-weight: 200;
    }

    /* --- Noir's "Add Event" Modal Overhaul (Neumorphism) --- */
    /* 哼，这才叫现代设计。*/

    #add-event-modal .choice-modal-content {
      background: #ffffffd3;
      /* 拟态风的浅灰色背景 */
      border-radius: 20px;
      padding: 25px;
      box-shadow: 9px 9px 16px rgb(163 177 198 / 60%), -9px -9px 16px rgb(255 255 255 / 50%);
    }

    #add-event-modal-title {
      color: #333;
    }

    #event-content-input {
      border: none;
      outline: none;
      border-radius: 12px;
      background: #ffffffd3;
      padding: 12px 15px;
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: #333;
    }

    #add-event-modal .input-group label {
      color: #555;
      font-weight: 500;
    }

    /* 隐藏掉原来那个又大又丑的蓝色圆圈 */
    #add-event-modal input[type="radio"] {
      display: none;
    }

    /* 把标签变成可以点击的、漂亮的按钮 */
    #add-event-modal input[type="radio"]+label {
      flex: 1;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      background: #ffffffd3;
      box-shadow: 5px 5px 10px #bec3c9, -5px -5px 10px #ffffff;
      transition: all 0.2s ease-in-out;
    }

    /* 选中的时候，让它“凹”下去 */
    #add-event-modal input[type="radio"]:checked+label {
      box-shadow: inset 5px 5px 10px #bec3c9, inset -5px -5px 10px #ffffff;
      color: var(--accent-color);
      font-weight: 600;
    }

    #add-event-modal .form-button.primary {
      background-color: var(--accent-color);
    }

    #add-event-modal .form-button.secondary {
      background: transparent;
      color: #555;
      border: none;
    }


    /* --- Noir's Bespoke Avatar Frame Protocol --- */
    /* --- Noir's Bespoke Avatar Frame Protocol (v2.0) --- */
    /* 哼，就知道你要求多。看好了，这才是让框比头像大的正确方法。*/

    /* 1. 容器还是那个40px的容器，负责在布局里占好位置，不许动 */
    .avatar-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      flex-shrink: 0;
      /* 为了让“膨胀”的头像框不被奇怪地切掉，给它一点呼吸空间 */
      margin: 5px;
    }

    /* 2. 头像也还是那个头像，老老实实待在容器正中间 */
    .avatar-wrapper .avatar {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;

    }

    /* 3. 哼，看好了，魔法就在这里。我让头像框“变大”并“浮空” */
    .avatar-wrapper .avatar-frame {
      position: absolute;
      /* 哼，让它比容器大一点，比如125%，你自己看着调 */
      width: 132%;
      height: 132%;
      /* 把它自己的中心点，对准容器的中心点，给我站稳了！*/
      top: 50%;
      left: 52%;
      transform: translate(-50%, -50%);
      /* 下面的老规矩不变 */
      background-size: contain;
      /* 改成 contain 免得你的框被切掉 */
      background-position: center;
      background-repeat: no-repeat;
      pointer-events: none;
      /* 依旧是幽灵，不许捣乱 */
    }


    /* --- Noir's Full-Width HTML Module Protocol --- */
    /* --- Noir's Full-Width HTML Module Protocol (v2.0 Centered Edition) --- */
    .full-width-module-container {
      display: flex;
      /* 哼，命令它使用Flex布局 */
      justify-content: center;
      /* 把它里面的东西给我水平居中 */
      width: 100%;
      padding: 0 5px;
      box-sizing: border-box;
      margin-bottom: 10px;
      user-select: none;
      -webkit-user-select: none;
    }

    /* --- Noir's Elegant Lock Screen Styles --- */
    #lock-screen-overlay {
      position: absolute;
      inset: 0;
      z-index: 1000;
      /* 哼，必须在最顶层 */
      background: inherit;
      /* 直接继承壁纸，天衣无缝 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
      will-change: transform, opacity;
    }

    /* 这是它被“解锁”后的样子，给我飞走！ */
    #lock-screen-overlay.unlocked {
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      /* 飞走后就不许再捣乱了 */
    }

    /* 这是底下的那个“向上滑动”的提示 */
    /* --- Noir's Reinforced Centering Command --- */
    #unlock-indicator {
      position: absolute;
      bottom: 40px;
      left: 0;
      /* <-- 哼，从左边框开始 */
      right: 0;
      /* <-- 一直拉到右边框 */
      width: 100%;
      /* <-- 强制它和屏幕一样宽 */
      text-align: center;
      /* <-- 然后让里面的文字自己滚到中间去！ */
      color: var(--text-color);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    #unlock-indicator svg {
      width: 20px;
      height: 20px;
    }

    /* 一个简单的上下跳动动画，免得你看不见 */
    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-8px);
      }

      60% {
        transform: translateY(-4px);
      }
    }

    /* --- Noir's Sticker Gallery Management UI --- */
    #sticker-panel-controls {
      display: none;
      /* 默认隐藏 */
      padding: 5px 10px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    #sticker-panel-controls.visible {
      display: flex;
      /* 面板打开时显示 */
    }

    #sticker-manage-btn,
    #sticker-cancel-btn {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
    }

    #sticker-confirm-delete-btn {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background-color: #e65252;
      border: none;
      border-radius: 16px;
      padding: 6px 14px;
      cursor: pointer;
      opacity: 0.5;
      /* 默认半透明 */
      pointer-events: none;
      /* 默认不可点 */
      transition: opacity 0.2s;
    }

    #sticker-confirm-delete-btn.active {
      opacity: 1;
      pointer-events: auto;
    }

    .sticker-item-wrapper {
      position: relative;
      aspect-ratio: 1 / 1;
    }

    .sticker-item-wrapper.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      border-radius: 8px;
      /* 和表情图片圆角一致 */
    }

    /* --- Noir's Hierarchical World Book Selector --- */
    /* 哼，这才叫井井有条。*/
    .wb-category-group {
      border-bottom: 1px solid var(--border-color);
    }

    .wb-category-group:last-child {
      border-bottom: none;
    }

    .wb-category-header {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
      user-select: none;
    }

    .wb-category-header:hover {
      background-color: rgba(138, 180, 228, 0.1);
    }

    .wb-category-header .category-checkbox {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
      flex-shrink: 0;
      accent-color: var(--primary-color);
    }

    .wb-category-header .category-name {
      flex-grow: 1;
      font-weight: 600;
      color: var(--primary-color);
    }

    .wb-category-header .category-toggle-arrow {
      transition: transform 0.2s ease;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wb-category-header .category-toggle-arrow.expanded {
      transform: rotate(180deg);
    }

    .wb-entry-list {
      padding-left: 30px;
      /* Indent the entries */
      padding-bottom: 5px;
      display: none;
      /* Collapsed by default */
    }

    .wb-entry-list.expanded {
      display: block;
    }

    .wb-entry-item {
      display: block;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .wb-entry-item:hover {
      background-color: rgba(138, 180, 228, 0.2);
    }

    .wb-entry-item input[type="checkbox"] {
      margin-right: 8px;
      width: auto;
      /* Override global input style */
    }


    /* --- Noir's Livestream App Styles --- */
    #livestream-room-screen {
      justify-content: flex-start;
      /* 让内容从顶部开始排列 */
    }

    /* 弹幕样式 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.4);
      color: white;
      padding: 4px 10px;
      border-radius: 16px;
      margin-top: 6px;
      font-size: 0.9rem;
      align-self: flex-start;
      /* 默认弹幕靠左 */
      max-width: 80%;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
      /* 添加一个淡入动画，让出现更自然 */
      animation: danmaku-fade-in 0.3s ease-out;
    }

    @keyframes danmaku-fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .danmaku-item.is-user {
      background: var(--accent-color);
      /* 你的弹幕用主题色 */
      align-self: flex-end;
      /* 你的弹幕靠右 */
    }

    .danmaku-item .danmaku-user {
      color: #a7c7e7;
      /* 借用一下用户发言的颜色 */
      font-weight: 600;
      margin-right: 8px;
    }

    .danmaku-item.is-user .danmaku-user {
      color: white;
      opacity: 0.8;
    }

    /* 主播对话框，直接继承Galgame模式的样式 */
    #livestream-textbox-container {
      background: linear-gradient(0deg, rgba(25, 28, 38, 0.85) 0%, rgba(45, 50, 68, 0.7) 100%);
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2);
      padding: 12px 18px;
    }

    #livestream-speaker {
      background: linear-gradient(90deg, var(--primary-color) 0%, hsl(var(--primary-hue), var(--primary-saturation), calc(var(--primary-lightness) - 10%)) 100%);
      color: white;
      padding: 4px 12px;
      border-radius: 8px;
      display: inline-block;
      font-size: 0.95rem;
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      margin-bottom: 12px;
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.7;
      color: #f0f2f5;
    }

    /* --- Noir's Secret DM Panel Styles --- */
    .dm-panel {
      position: fixed;
      /* 哼，从 absolute 变成了 fixed，现在它听命于整个屏幕，而不是那个小小的直播间 */
      inset: 0;
      z-index: 100;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      /* 删掉了 display:flex 和 align-items:flex-end，不再让它自己思考该站哪 */
    }

    .dm-panel.show {
      pointer-events: auto;
      /* 显示时才允许交互 */
      opacity: 1;
    }

    .dm-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.3);
    }

    .dm-panel-content {
      position: absolute;
      /* 改为绝对定位 */
      bottom: 0;
      /* 直接焊死在底部 */
      left: 0;
      right: 0;
      z-index: 101;
      width: 100%;
      height: 45%;
      /* 哼，差不多三分之一多一点的高度，你自己看着调 */
      background: rgba(30, 30, 40, 0.9);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.35s cubic-bezier(0.25, 1, 0.5, 1);
    }

    .dm-panel.show .dm-panel-content {
      transform: translateY(0);
    }

    .dm-header {
      flex-shrink: 0;
      padding: 10px 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.8);
    }

    #dm-close-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .dm-messages-container {
      flex-grow: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    /* 哼，私信气泡也给你做好了 */
    .dm-bubble {
      padding: 8px 12px;
      border-radius: 16px;
      max-width: 80%;
      line-height: 1.5;
    }

    .dm-bubble.user {
      background: var(--accent-color);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }

    .dm-bubble.ai {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }

    .dm-input-area {
      display: flex;
      gap: 10px;
      padding: 10px 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      flex-shrink: 0;
    }

    #livestream-dm-input {
      flex-grow: 1;
      border: none;
      border-radius: 18px;
      padding: 8px 12px;
      background: rgba(0, 0, 0, 0.3);
      color: white;
    }

    #livestream-dm-send-btn {
      border: none;
      border-radius: 18px;
      padding: 0 18px;
      background: var(--primary-color);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }


    #livestream-extras-container {
      position: absolute;
      top: 60px;
      /* 放在顶栏下方，你自己微调 */
      right: 15px;
      z-index: 10;
    }



    .replay-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px;
      background: var(--card-bg);
      border-radius: 12px;
      margin-bottom: 10px;
      cursor: pointer;
      border: 1px solid var(--border-color);
    }

    .replay-item:hover {
      background: var(--surface-bg);
    }

    .replay-icon {
      width: 50px;
      height: 50px;
      flex-shrink: 0;
      background: #333;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.7rem;
      text-align: center;
      line-height: 1.2;
    }

    .replay-info .theme {
      font-weight: 600;
      color: var(--text-color);
    }

    .replay-info .time {
      font-size: 0.85rem;
      color: var(--text-color-light);
    }

    /* ▼▼▼ Noir's Livestream Studio CSS Overhaul ▼▼▼ */

    /* 1. 新的对话框样式，半透明、浮空、带圆角 */
    #livestream-textbox-container {
      position: absolute;
      bottom: 20px;
      left: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 15px;
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: none;
      /* 去掉旧的阴影 */
    }

    #livestream-text {
      font-size: 1rem;
      line-height: 1.6;
      color: #f0f2f5;
    }

    /* 2. 新的弹幕区样式，现在它有了自己的地盘 */
    #livestream-danmaku-overlay {
      height: 35%;
      /* 占据底部 35% 的高度 */
      flex-shrink: 0;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column-reverse;
      /* 保持新弹幕在底部 */
      background: transparent;
      -webkit-mask-image: none;
      /* 去掉那个碍眼的渐变遮罩 */
      mask-image: none;
    }

    /* 3. 弹幕本身的微调，让它更像参考图 */
    .danmaku-item {
      background: rgba(0, 0, 0, 0.5);
      align-self: flex-start;
      margin-top: 8px;
      /* 稍微拉开一点间距 */
    }

    /* ▲▲▲ End of Overhaul ▲▲▲ */
    /* ▼▼▼ Noir's Livestream CSS Calibration ▼▼▼ */

    /* 1. 明确告诉弹幕区，你的高度就是屏幕的30%，不许再多了 */
    #livestream-danmaku-overlay {
      height: 30%;
      flex-shrink: 0;
    }

    /* 2. 把底栏的背景也换成和顶栏一样的主题色，这才叫统一 */
    #livestream-input-area {
      background: var(--surface-bg) !important;
      border-top: 1px solid var(--border-color) !important;
    }

    /* 3. 输入框和按钮的颜色也要适应新背景 */
    #livestream-controls-container #danmaku-input {
      background: rgba(255, 255, 255, 0.7);
      color: var(--text-color);
    }

    #livestream-controls-container .toolbar-button {
      background: transparent;
      color: var(--text-color-light);
    }

    #livestream-controls-container .toolbar-button:hover {
      background: var(--border-color);
    }

    /* ▲▲▲ End of Calibration ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Dark UI Polish ▼▼▼ */

    /* 1. 统一顶栏和底栏的颜色，并调整内部元素颜色 */
    #livestream-room-screen #livestream-header,
    #livestream-room-screen #livestream-input-area {
      background: #1c1c1e !important;
      /* 一个比纯黑更高级的炭黑色 */
      border-top: 1px solid #333 !important;
      border-bottom: none !important;
    }

    #livestream-room-screen #livestream-header {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .header-button,
    #livestream-room-screen #livestream-header .toolbar-button {
      color: #fff;
    }

    #livestream-room-screen #livestream-header .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* 2. 让弹幕区和底栏之间留出呼吸空间，不再重叠 */
    #livestream-danmaku-overlay {
      padding-bottom: 10px;
    }

    /* ▲▲▲ End of Polish ▲▲▲ */
    /* ▼▼▼ Noir's Cross-fade Magic ▼▼▼ */
    .livestream-sprite-layer {
      max-height: 100%;
      max-width: 100%;
      object-fit: contain;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      transition: opacity 0.4s ease-in-out;
      /* 关键！过渡动画 */
    }

    /* ▲▲▲ End of Magic ▲▲▲ */

    /* ▲▲▲ End of Magic ▲▲▲ */
    /* ▼▼▼ Noir's Livestream Control Panel Polish ▼▼▼ */

    /* 1. 统一整个控制栏的高度和风格 */
    #livestream-controls-container #danmaku-input {
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 0 16px;
      height: 40px;
      /* 统一高度 */
      box-sizing: border-box;
    }

    #livestream-controls-container #danmaku-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    #livestream-controls-container .toolbar-button {
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }

    /* 2. 哼，这才是“发送”和“继续”该有的样子 */
    .livestream-action-btn {
      height: 40px;
      padding: 0 18px;
      border-radius: 20px;
      border: none;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    /* “发送”按钮，用主题色，醒目 */
    #send-danmaku-btn {
      background-color: var(--accent-color);
      color: white;
    }

    #send-danmaku-btn:hover {
      filter: brightness(1.1);
    }

    /* “继续”按钮，用次要样式，不那么抢眼 */
    .livestream-action-btn.secondary {
      background-color: rgba(255, 255, 255, 0.15);
      color: #fff;
    }

    .livestream-action-btn.secondary:hover {
      background-color: rgba(255, 255, 255, 0.25);
    }

    /* ▲▲▲ End of Polish ▲▲▲ */

    /* ▼▼▼ Noir's Floating Toolbar Style ▼▼▼ */
    #livestream-top-toolbar {
      position: absolute;
      top: 15px;
      right: 15px;
      z-index: 5;
      display: flex;
      flex-direction: column;
      /* 让按钮垂直排列 */
      gap: 8px;
      background-color: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      border-radius: 22px;
      /* 胶囊形状 */
      padding: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    #livestream-top-toolbar .toolbar-button {
      background: transparent;
      color: white;
      width: 38px;
      height: 38px;
      margin: 0;
    }

    #livestream-top-toolbar .toolbar-button:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    /* ▲▲▲ End of Style ▲▲▲ */
    /* ▼▼▼ Noir's Novel Mode Beautification Protocol v1.0 ▼▼▼ */

    /* 1. “幽灵化”指令：当处于小说模式时，把这两个碍事的东西给我藏起来 */
    #meeting-view-screen.novel-mode #galgame-overlay-ui,
    #meeting-view-screen.novel-mode #galgame-sprite-adjust-ui {
      display: none;
    }

    /* 2. “安全距离”协议：给小说阅读区底部留出85px的安全区，免得和输入框打架 */
    #meeting-scene-view {
      padding: 20px 20px 85px 20px;
      /* 上、右、下、左 */
    }

    /* 3. “美学重构”手术：彻底重写对话框的样式 */
    /* 先把你旧的 p 标签上的黑玻璃背景和阴影都砸了 */
    #meeting-scene-view p {
      background-color: transparent;
      padding: 0;
      box-shadow: none;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      /* 在深色背景下，还是需要一点阴影才能看清字 */
    }

    /* 这是新的卡片“本体”样式 */
    .noir-dialogue-card {
      background: rgba(0, 0, 0, 0.45);
      /* 还是用半透明黑，但比原来更精致 */
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 12px;
      margin-bottom: 25px;
      /* 拉开卡片间距 */
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      /* 关键！为了让名字标签能浮在它上面 */
    }

    /* 这是卡片内部的“文字区”样式 */
    .noir-dialogue-content {
      padding: 20px 20px 15px;
      /* 把文字的内边距调整一下 */
      line-height: 1.7;
      font-size: 1rem;
      color: #f0f2f5;
    }

    /* 这是新的名字“标签”样式，像个便签夹一样 */
    .noir-speaker-tag {
      position: absolute;
      top: -13px;
      /* 向上-13px，让它“夹”在卡片顶部 */
      left: 20px;
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      color: white;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
    }

    /* 给你（User）的名字标签一个专属颜色 */
    .speaker-user .noir-speaker-tag {
      background: rgba(167, 199, 231, 0.5);
      /* 借用之前的用户色，加上半透明 */
    }

    /* 给TA（AI）的名字标签也来一个 */
    .speaker-ai .noir-speaker-tag {
      background: rgba(242, 183, 198, 0.5);
      /* 借用之前的AI色 */
    }

    /* 旁白（Narrator）的样式也得改，让它更像“画外音” */
    #meeting-scene-view .narrator {
      text-align: center;
      padding: 10px 20px;
      font-style: italic;
      color: rgba(255, 255, 255, 0.7);
      background: none;
      box-shadow: none;
      border: none;
    }

    /* ▲▲▲ End of Protocol ▲▲▲ */
  </style>
  <script>
    // 哼，伪造一个 Capacitor，欺骗那些愚蠢的函数
    window.Capacitor = {
      isNativePlatform: () => false, // 告诉它我们不在手机上
      Plugins: {
        // 伪造“偏好设置”插件
        Preferences: {
          // 把 capacitor.get 换成 localStorage.getItem
          get: async ({ key }) => {
            return { value: localStorage.getItem(key) };
          },
          // 把 capacitor.set 换成 localStorage.setItem
          set: async ({ key, value }) => {
            localStorage.setItem(key, value);
            return;
          },
          // 把 capacitor.remove 换成 localStorage.removeItem
          remove: async ({ key }) => {
            localStorage.removeItem(key);
            return;
          }
        },
        // 哼，把手机通知功能变成一个空壳，让它没法报错
        LocalNotifications: {
          schedule: async () => {},
          createChannel: async () => {},
          checkPermissions: async () => ({ display: 'granted' }),
          requestPermissions: async () => ({ display: 'granted' }),
          addListener: () => {}
        },
        // 导入/导出也先用空壳堵上，我们稍后替换掉调用它们的原函数
        Filesystem: {
          writeFile: async () => ({ uri: '' }),
          appendFile: async () => {},
          getUri: async () => ({ uri: '' })
        },
        Share: {
          share: async () => {}
        }
      }
    };
  </script>

</head>

<body>
  <input type="file" id="audio-file-input" style="display: none;" accept=".flac,.mp3">
  <input type="file" id="cover-file-input" style="display: none;" accept=".jpg,.png,.jpeg,.webp">
  <input type="file" id="info-file-input" style="display: none;" accept=".txt">
  <input type="file" id="lyrics-file-input" style="display: none;" accept=".lrc">
  <input type="file" id="import-char-input" accept=".json,.noir" style="display: none;">
  <input type="file" id="import-accounting-input" accept=".json" style="display: none;">
  <div id="phone-container">

    <div id="user-profile-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-user-list" class="header-button">主屏幕</button>
        <span class="header-title">选择用户</span>
        <button id="add-user-profile-button" class="header-button add" title="添加新用户">+</button>
      </div>
      <div class="content" id="user-profile-list-container">
      </div>
    </div>

    <div id="user-profile-screen" class="screen">
      <div class="header">
        <button id="back-to-user-list-from-edit" class="header-button">返回</button>
        <span id="user-profile-edit-title" class="header-title">编辑用户</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-user-id">
        <div class="settings-group">
          <h2>用户设定</h2>
          <div class="input-group">
            <label for="user-name">你的名字</label>
            <input type="text" id="user-name" placeholder="你的显示名字">
          </div>
          <div class="avatar-upload-group">
            <label>你的头像</label>
            <div id="user-avatar-preview" class="sprite-preview-slot"></div>
            <input type="file" id="user-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="user-persona">你的人设 (可选)</label>
            <textarea id="user-persona" placeholder="向AI介绍你自己。例如：我是一名大学生，喜欢摄影和旅行。"></textarea>
          </div>
        </div>
        <button id="save-user-profile-button" class="form-button">保存资料</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="set-active-user-button" class="form-button"
            style="background-color: #28a745; margin-bottom: 10px;">设为当前用户</button>
          <button id="delete-user-profile-button" class="form-button destructive">删除该用户</button>
        </div>
      </div>
    </div>


    <div id="home-screen" class="screen active">

      <div id="lock-screen-overlay">
        <div id="home-clock-container">
          <div id="home-time">11:31</div>
          <div id="home-date">8月29日 星期五</div>
          <div id="noir-author-mark"></div>
        </div>
        <div id="music-widget"
          style="display: inline-block; width: auto; position: absolute; top: 45%; left: 50%; transform: translateX(-50%); z-index: 50; padding: 0px; bottom: auto;">
          <div id="music-widget-card">
            <div id="widget-cover-art"></div>
            <div class="widget-content-overlay">
              <div class="widget-info">
                <div id="widget-title">暂无音乐</div>
                <div id="widget-artist">请在动态或聊天中播放</div>
              </div>
              <div id="widget-controls">
                <button id="widget-prev-btn">⏮</button>
                <button id="widget-play-pause-btn">▶</button>
                <button id="widget-next-btn">⏭</button>
              </div>
            </div>
          </div>
        </div>
        <div id="unlock-indicator">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
          </svg>
          向上滑动来解锁
        </div>
      </div>

      <div id="home-screen-main-content"
        style="position: relative; flex-grow: 1; width: 100%; display: flex; flex-direction: column;">

        <div id="app-pages-container">
          <div id="app-pages-slider">


            <div class="app-page" id="app-page-2">
              <div id="decorative-badge" style="display: none; position: absolute; top: 250px; left: 50px;">
                <img id="badge-image" src="http://googleusercontent.com/file_content/0" alt="badge">
              </div>

              <div id="card-widget" style="display: none; position: absolute; top: 140px; left: 145px;">
                <img id="card-image" src="" alt="card widget">
              </div>
              <div id="card-widget-2" style="display: none; position: absolute;">
                <img id="card-image-2" src="" alt="card widget 2">
              </div>





              <div class="app-icon" id="app-world-book">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg></div>
                <span>世界书</span>
              </div>


              <div class="app-icon" id="app-diary">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <path d="M2.5 17a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zM2.5 14a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z" />
                  </svg></div>
                <span>交换日记</span>
              </div>

              <div class="app-icon" id="app-music-library">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                    <path
                      d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                    </path>
                  </svg></div>
                <span>音乐库</span>
              </div>


              <div class="app-icon" id="app-settings">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg></div>
                <span>API设置</span>
              </div>
              <div class="app-icon" id="app-user-profiles">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg></div>
                <span>我</span>
              </div>
              <div class="app-icon" id="app-wallpaper">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                      d="M12 2.69l.34.34a1.41 1.41 0 0 0 2 0L22 6.34a1.41 1.41 0 0 0 0-2l-7.66-7.66a1.41 1.41 0 0 0-2 0L2.68 14.34a1.41 1.41 0 0 0 0 2L10 24l2-2 2-2 2-2 2-2 2-2">
                    </path>
                    <path d="m7.34 2.66 14 14"></path>
                  </svg></div>
                <span>更换壁紙</span>
              </div>

              <div class="app-icon" id="app-snoop">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg></div>
                <span>视奸</span>
              </div>
              <div class="app-icon" id="app-accounting">
                <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg></div>
                <span>记账</span>
              </div>


            </div>

            <div class="app-page" id="app-page-3">
              <div class="app-icon" id="app-calendar" style="position: absolute; top: 8%; left: 5%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                </div>
                <span>时光记事簿</span>
              </div>
              <div class="app-icon" id="app-lock-screen" style="position: absolute; top: 8%; left: 29%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <span>回到锁屏</span>
              </div>
              <div class="app-icon" id="app-livestream" style="position: absolute; top: 8%; left: 53%;">
                <div class="app-icon-img">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="2"></circle>
                    <path
                      d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48 0a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14">
                    </path>
                  </svg>
                </div>
                <span>直播</span>
              </div>
              <div id="calendar-widget-main"
                style="position: absolute; top: 25%; left: 50%; transform: translateX(-50%);">
                <div id="countdown-title">近期没有特别安排</div>
                <div id="countdown-timer">
                  <span>--</span>
                  <span class="unit">天</span>
                </div>
              </div>

              <div id="today-todo-widget">
                <div class="widget-title">今日待办</div>
                <div id="today-todo-list">
                </div>
              </div>


            </div>


          </div>
        </div>

        <div id="home-page-indicator">
          <span class="page-dot active" data-page="0"></span>
          <span class="page-dot" data-page="1"></span>
        </div>

        <div id="home-dock">
          <div class="app-icon app-icon-large" id="app-chat">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg></div>
            <span>聊天</span>
          </div>
          <div class="app-icon" id="app-music">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg></div>
            <span>动态</span>
          </div>
          <div class="app-icon" id="app-meeting">
            <div class="app-icon-img"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4Z" />
                <path d="M18 9h2a2 2 0 0 1 2 2v9l-4-4h-2a2 2 0 0 1-2-2V9Z" />
              </svg></div>
            <span>见面</span>
          </div>
        </div>

      </div>

    </div>

    <div id="chat-screen" class="screen">
      <div id="chat-screen-container">
        <div id="chat-list-pane">
          <div id="chat-list-header">
            <button id="back-to-home-from-chat" class="header-button">主屏幕</button>
            <span class="header-title">聊天</span>
            <button id="add-chat-button" class="header-button add" title="添加新聊天">+</button>
          </div>
          <div id="chat-list-container">
            <ul id="character-list">
            </ul>
          </div>
        </div>
        <div id="chat-view-pane">
          <div class="header">
            <button class="header-button" id="back-to-chat-list">返回</button>
            <span id="char-name-header" class="header-title">角色</span>
            <button class="header-button" id="character-settings-button" title="角色设置">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
              </svg>
            </button>
          </div>
          <div id="chat-messages" class="messages">
          </div>
          <div id="offline-scene-view"></div>
          <div id="chat-sticker-panel" class="sticker-panel">
          </div>
          <div class="chat-toolbar">
            <button id="chat-sticker-button" class="toolbar-button" title="表情">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5-2 4-2 4 2 4 2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </button>
            <button id="chat-image-button" class="toolbar-button" title="发送图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <button id="chat-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
            <button id="chat-listen-together-button" class="toolbar-button" title="一起听">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                <path
                  d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                </path>
              </svg>
            </button>
            <button id="chat-transfer-button" class="toolbar-button" title="转账">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </button>
            <button id="chat-reroll-button" class="toolbar-button" title="重新生成">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
            </button>
            <button id="chat-summarize-button" class="toolbar-button" title="总结聊天记录">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
            </button>
            <button id="show-profile-button" class="toolbar-button" title="查看用户档案">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
            <button id="token-stats-button" class="toolbar-button" title="Token统计">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="20" x2="18" y2="10"></line>
                <line x1="12" y1="20" x2="12" y2="4"></line>
                <line x1="6" y1="20" x2="6" y2="14"></line>
              </svg>
            </button>
          </div>
          <input type="file" id="chat-image-input" accept="image/*" style="display: none;">
          <div id="quote-preview-area" class="quote-preview">
            <div class="quote-preview-content">
              <div id="quote-preview-sender"></div>
              <div id="quote-preview-text"></div>
            </div>
            <button id="cancel-quote-button" class="cancel-quote-btn">&times;</button>
          </div>
          <div class="chat-input-area">
            <div id="chat-input-wrapper">
              <input type="text" id="chat-message-input" placeholder="输入消息...">
              <button id="chat-get-reply-button" title="让对方回复">↵</button>
              <button id="chat-send-button" title="发送">➤</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-settings" class="header-button">返回</button>
        <span class="header-title">API设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>API 设置</h2>
          <div class="input-group">
            <label for="api-endpoint">API 接口地址（不填/v1）</label>
            <input type="text" id="api-endpoint" placeholder="例如: https://api.openai.com">
          </div>
          <div class="input-group">
            <label for="api-key">API 密钥</label>
            <input type="password" id="api-key" placeholder="请输入你的 API 密钥">
          </div>
          <div class="input-group">
            <label for="api-model">模型</label>
            <div class="model-input-container">
              <input type="text" id="api-model" placeholder="点击 获取 或手动输入" style="flex-grow: 1;">
              <button id="fetch-models-button" style="padding: 0 12px; white-space: nowrap;">获取</button>
              <div id="model-dropdown" class="custom-model-dropdown"></div>
            </div>
          </div>
          <div class="input-group">
            <label for="api-provider">接口格式 (重要！请根据你使用的接口选择，但是我也没做Openai以外的接口……)</label>
            <select id="api-provider"
              style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color);">
              <option value="openai">OpenAI 格式 (通用，兼容绝大多数反代)</option>
              <option value="gemini">Google Gemini 格式 (仅限官方或特定反代)</option>
              <option value="anthropic">Anthropic Claude 格式</option>
            </select>
          </div>
        </div>
        <div class="settings-group">
          <h2>上下文设置</h2>
          <div class="input-group">
            <label for="context-lines-per-chat">每个会话读取的消息条数（默认 100）</label>
            <input type="number" id="context-lines-per-chat" min="1" max="1000000" step="1" placeholder="100">
          </div>
        </div>

  <div class="settings-group" style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
  <h2>数据管理</h2>
  <p style="font-size: 0.9rem; color: var(--text-color-light);">
    为了防止浏览器拦截下载，请<strong>依次点击</strong>以下三个按钮进行备份：
  </p>
  
  <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px; margin-bottom: 15px;">
    <button id="export-core-data-btn" class="form-button" style="margin-top: 0; background-color: #007bff; text-align: left; padding-left: 20px;">
      1. 导出核心数据 (.json) <span style="float: right; opacity: 0.7;">⬇️</span>
    </button>
    
    <button id="export-images-data-btn" class="form-button" style="margin-top: 0; background-color: #17a2b8; text-align: left; padding-left: 20px;">
      2. 导出图片档案 (.zip) <span style="float: right; opacity: 0.7;">⬇️</span>
    </button>
    
    <button id="export-misc-data-btn" class="form-button" style="margin-top: 0; background-color: #6c757d; text-align: left; padding-left: 20px;">
      3. 导出杂项档案 (.zip) <span style="float: right; opacity: 0.7;">⬇️</span>
    </button>
  </div>

  <p style="font-size: 0.85rem; color: var(--text-color-light); margin-bottom: 10px;">
    备份完成后，在其他设备点击下方绿色按钮导入：
  </p>
  <button id="import-all-data-button" class="form-button" style="width: 100%; background-color: #28a745;">导入数据 (在圣坛恢复)</button>
  <input type="file" id="import-data-input" accept=".json" style="display: none;">
</div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2 style="color: #e65252;">终极手段：一键净化</h2>
          <p style="font-size: 0.9rem; color: #dc3545;">
            <b>警告：</b>如果你的应用因为内存满了而彻底卡死、无法导入导出，请先想办法手动备份重要数据！然后点击此按钮，它会清空所有本地数据，让应用恢复到出厂状态。
          </p>
          <button id="hard-reset-button" class="form-button destructive">终极重置 (解决卡死问题)</button>
        </div>
        <button id="save-api-settings-button" class="form-button">保存 API 设置</button>
      </div>
    </div>



    <div id="character-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-edit" class="header-button">返回</button>
        <span id="character-edit-title" class="header-title">编辑角色</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-char-id">
        <div class="settings-group">
          <h2>角色设定</h2>
          <div class="input-group">
            <label for="char-edit-name">名字</label>
            <input type="text" id="char-edit-name" placeholder="角色的名字">
          </div>
          <div class="input-group">
            <label for="char-edit-remark">备注名</label>
            <input type="text" id="char-edit-remark" placeholder="方便自己记忆，例如 '工作助理'">
          </div>
          <div class="avatar-upload-group">
            <label>角色头像</label>
            <img id="char-edit-avatar-preview" class="avatar-preview" alt="Avatar Preview">
            <input type="file" id="char-edit-avatar-input" accept="image/*" style="display: none;">
            <div class="input-group">
              <label for="char-avatar-frame-url">TA的头像框 URL (可选)</label>
              <input type="text" id="char-avatar-frame-url" placeholder="为这个角色设置专属头像框...">
            </div>

            <div class="input-group">
              <label for="user-avatar-frame-url-in-chat">你的头像框 URL (可选, 仅用于此聊天)</label>
              <input type="text" id="user-avatar-frame-url-in-chat" placeholder="为“你”在这个聊天里设置专属头像框...">
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-persona">人设 (系统提示词)</label>
            <textarea id="char-edit-persona" placeholder="你是一个乐于助人的助手。"></textarea>
          </div>
          <div class="input-group">
            <label>聊天壁纸</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-wallpaper-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-wallpaper-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="char-edit-css">专属气泡样式 (CSS)</label>
            <textarea id="char-edit-css" rows="8"
              placeholder="从其他地方复制的、包含 .sent 和 .received 的CSS代码可以直接粘贴在这里..."></textarea>

            <div style="display: flex; gap: 10px; margin-top: 5px;">
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">TA的气泡 (Received):</p>
                <div id="bubble-preview-ai" class="message ai">这是TA的气泡预览效果</div>
              </div>
              <div style="flex: 1; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <p style="margin: 0 0 5px; font-size: 0.8rem; color: #555;">你的气泡 (Sent):</p>
                <div id="bubble-preview-user" class="message user">这是你的气泡预览效果</div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>见面场景背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="char-edit-offline-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="char-edit-offline-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="settings-group">
            <h2>角色立绘 (Galgame模式)</h2>
            <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传立绘图，建议使用透明背景的PNG图片。</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">

              <div class="avatar-upload-group" style="align-items: center;">
                <label>平常</label>
                <div id="char-edit-sprite-normal-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-normal-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>喜</label>
                <div id="char-edit-sprite-happy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-happy-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>怒</label>
                <div id="char-edit-sprite-angry-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-angry-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>哀</label>
                <div id="char-edit-sprite-sad-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-sad-input" accept="image/*,.gif" style="display: none;">
              </div>
              <div class="avatar-upload-group" style="align-items: center;">
                <label>害羞</label>
                <div id="char-edit-sprite-shy-preview" class="sprite-preview-slot"></div>
                <input type="file" id="char-edit-sprite-shy-input" accept="image/*,.gif" style="display: none;">
              </div>
            </div>
          </div>
          <div class="input-group">
            <label for="char-edit-bind-user">绑定用户</label>
            <select id="char-edit-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="world-book-checkboxes-container" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="export-char-button" class="form-button secondary" style="margin-top: 20px;">导出角色卡</button>
        <button id="save-char-button" class="form-button">保存角色</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="edit-clear-history-button" class="form-button warning"
            style="margin-bottom: 10px;">清空聊天记录</button>
          <button id="edit-delete-char-button" class="form-button" class="form-button destructive">删除角色</button>
        </div>
      </div>
    </div>

    <div id="group-chat-create-screen" class="screen">
      <div class="header">
        <button id="back-to-char-select-from-group-create" class="header-button">返回</button>
        <span class="header-title">创建群聊</span>
        <button id="create-group-chat-button" class="header-button">创建</button>
      </div>
      <div class="content" style="padding: 20px;">
        <div class="input-group">
          <label for="group-chat-name">群聊名称</label>
          <input type="text" id="group-chat-name" placeholder="给你的群聊起个名字">
        </div>
        <div class="settings-group">
          <h2>选择成员</h2>
          <div id="group-chat-member-list-container"
            style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
            <ul id="group-chat-member-list">
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="wallpaper-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-wallpaper" class="header-button">返回</button>
        <span class="header-title">更换壁纸</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0;">UI缩放</h2>
            <button id="reset-ui-scale-button" class="form-button secondary"
              style="width: auto; margin: 0; padding: 4px 12px; font-size: 0.8rem;">恢复默认</button>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来调整手机模拟器的整体大小。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="ui-scale-slider" style="display: block; margin-bottom: 5px;">缩放比例</label>
            <input type="range" id="ui-scale-slider" min="0.7" max="1.2" value="1" step="0.05" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2>全局主题色</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">拖动滑块来改变整个App的主色调。</p>
          <div class="input-group" style="padding-top: 10px;">
            <label for="theme-hue-slider" style="display: block; margin-bottom: 5px;">色相 (Hue)</label>
            <input type="range" id="theme-hue-slider" min="0" max="360" value="35" style="width: 100%;">
          </div>
          <div class="input-group">
            <label for="theme-lightness-slider" style="display: block; margin-bottom: 5px;">明度 (Lightness)</label>
            <input type="range" id="theme-lightness-slider" min="15" max="95" value="80" style="width: 100%;">
          </div>
        </div>
        <div class="settings-group"
          style="border-bottom: 1px solid var(--border-color); padding-bottom: 20px; margin-bottom: 20px;">
          <h2 style="margin-top: 0;">时钟样式</h2>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="clock-color-toggle" style="width: auto; height: 18px; flex-shrink: 0;">
            <label for="clock-color-toggle" style="width: auto; font-size: 0.9rem;">强制使用纯白色时钟 (推荐在深色壁纸下使用)</label>
          </div>
        </div>
        <div class="settings-group">
          <h2>上传新壁纸</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">选择一张图片作为你的手机壁纸。为了效果最好，请使用竖屏图片。</p>
          <input type="file" id="wallpaper-input" accept="image/*" style="display: none;">
          <button id="upload-wallpaper-button" class="form-button">选择图片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>音乐小组件背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的主屏幕音乐小组件设置一张专属背景图。</p>
          <input type="file" id="widget-bg-input" accept="image/*" style="display: none;">
          <button id="upload-widget-bg-button" class="form-button">选择图片</button>
          <button id="reset-widget-bg-button" class="form-button secondary">恢复默认</button>
        </div>
        <div class="settings-group" style="margin-top: 20px;">
          <h2>重置桌面</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">此操作会将所有桌面小组件（时钟、音乐、徽章等）恢复到初始位置，并将壁纸重置为纯白色。</p>
          <button id="reset-desktop-button" class="form-button destructive">重置桌面布局</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义徽章</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面徽章，可以拖动它到任意位置。</p>
          <input type="file" id="badge-input" accept="image/*" style="display: none;">
          <button id="upload-badge-button" class="form-button">选择徽章图片</button>
          <button id="reset-badge-button" class="form-button secondary" style="margin-top: 10px;">移除徽章</button>
        </div>

        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">上传一张图片作为你的桌面方形卡片小组件。</p>
          <input type="file" id="card-input" accept="image/*" style="display: none;">
          <button id="upload-card-button" class="form-button">选择卡片图片</button>
          <button id="reset-card-button" class="form-button secondary" style="margin-top: 10px;">移除卡片</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义卡片 2</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为你的第二个桌面方形卡片小组件上传图片。</p>
          <input type="file" id="card-input-2" accept="image/*" style="display: none;">
          <button id="upload-card-button-2" class="form-button">选择卡片图片</button>
          <button id="reset-card-button-2" class="form-button secondary" style="margin-top: 10px;">移除卡片
            2</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>动态页背景</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">为“动态”页面设置一张独立的背景图，让它与众不同。</p>
          <input type="file" id="feed-bg-input" accept="image/*" style="display: none;">
          <button id="upload-feed-bg-button" class="form-button">选择图片</button>
        </div>
        <button id="reset-feed-bg-button" class="form-button secondary" style="margin-top: 10px;">移除背景</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>小组件救援</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">如果你的吧唧或卡片不小心飞出屏幕找不到了，点这里让它们回家。</p>
          <button id="reset-widgets-position-button" class="form-button warning">重置小组件位置</button>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义全局字体</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">
            上传一个 .ttf 字体文件来改变整个App的显示字体。注意，部分特殊字体可能会导致显示异常。
          </p>
          <div id="font-preview-area"
            style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-top: 10px; background: var(--card-bg);">
            <span id="font-preview-text" style="font-size: 1.2rem;">你好，世界 (Hello, World)</span>
          </div>
          <input type="file" id="font-input" accept=".ttf" style="display: none;">
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="upload-font-button" class="form-button" style="margin-top: 0;">选择字体</button>
            <button id="remove-font-button" class="form-button secondary" style="margin-top: 0;">恢复默认</button>
          </div>
        </div>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <h2>自定义App图标</h2>
          <p style="font-size: 0.9rem; color: var(--text-color-light);">替换主屏幕上App的默认图标。为了最佳效果，请使用方形、透明背景的图片。</p>
          <div class="settings-group"
            style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
            <h2>自定义表情包</h2>
            <p style="font-size: 0.9rem; color: var(--text-color-light);">
              在这里追加你的专属表情包。每个表情占一行，格式为：<br>
              <b>表情名--图片URL</b><br>
              例如：<br>
              <code>开心--https://example.com/happy.png</code><br>
              <code>难过--https://example.com/sad.gif</code>
            </p>
            <textarea id="custom-stickers-input" rows="8" placeholder="请按指定格式粘贴..."></textarea>
            <button id="save-custom-stickers-button" class="form-button" style="margin-top: 5px;">保存并刷新表情包</button>
          </div>
          <div id="custom-icon-list-container">
          </div>
          <div id="custom-icon-list-container">
          </div>
        </div>
      </div>

    </div>

    <div id="world-book-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-world-book" class="header-button">主屏幕</button>
        <span class="header-title">世界书</span>
        <button id="add-world-book-button" class="header-button add" title="添加新世界书">+</button>
      </div>
      <div class="content" style="display: flex; padding: 0; flex-direction: row;">
        <div id="world-book-category-pane"
          style="width: 120px; flex-shrink: 0; border-right: 1px solid var(--border-color); background: var(--surface-bg); padding: 10px; display: flex; flex-direction: column;">
          <div id="world-book-category-list" style="flex-grow: 1; overflow-y: auto;">
          </div>
          <button id="add-world-book-category-button" class="form-button secondary"
            style="margin-top: 10px; padding: 8px;">新建分类</button>
        </div>
        <div id="world-book-list-container" style="flex-grow: 1; overflow-y: auto; padding: 10px;">
        </div>
      </div>
    </div>

    <div id="world-book-editor-screen" class="screen">
      <div class="header">
        <button id="back-to-world-book-list" class="header-button">返回</button>
        <span id="world-book-editor-title" class="header-title">编辑条目</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-world-book-id">
        <div class="settings-group">
          <h2>设定条目</h2>
          <div class="input-group">
            <label for="world-book-edit-name">条目名称 (Key)</label>
            <input type="text" id="world-book-edit-name" placeholder="例如：我的过去、特殊能力">
          </div>
          <div class="input-group">
            <label for="world-book-edit-content">条目内容 (Value)</label>
            <textarea id="world-book-edit-content" placeholder="输入详细的设定内容..."></textarea>
          </div>
          <div class="input-group">
            <label for="world-book-edit-category">所属分类</label>
            <select id="world-book-edit-category"></select>
          </div>
        </div>
        <button id="save-world-book-button" class="form-button">保存条目</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="delete-world-book-button" class="form-button destructive">删除该条目</button>
        </div>
      </div>
    </div>

    <div id="group-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-chat-from-group-settings" class="header-button">返回</button>
        <span class="header-title">群聊设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>群聊信息</h2>
          <div class="input-group">
            <label for="group-settings-name">群聊名称</label>
            <input type="text" id="group-settings-name">
          </div>
          <div class="avatar-upload-group">
            <label>群头像</label>
            <img id="group-avatar-preview" class="avatar-preview" alt="Group Avatar Preview">
            <input type="file" id="group-avatar-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label>群聊背景</label>
            <div
              style="width: 150px; height: 266px; border-radius: 12px; border: 1px solid var(--border-color); background-color: #f0f0f0; overflow: hidden; cursor: pointer;">
              <div id="group-bg-preview" class="image-preview-slot"></div>
            </div>
            <input type="file" id="group-bg-input" accept="image/*" style="display: none;">
          </div>
          <div class="input-group">
            <label for="group-settings-bind-user">绑定用户</label>
            <select id="group-settings-bind-user"></select>
          </div>
          <div class="input-group">
            <label>关联世界书</label>
            <div class="custom-multiselect">
              <div class="select-box">
                <span class="selected-options-text">-- 点击选择 --</span>
                <span class="arrow">▼</span>
              </div>
              <div id="group-world-book-checkboxes" class="checkboxes-container">
              </div>
            </div>
          </div>
        </div>
        <button id="save-group-settings-button" class="form-button">保存设置</button>
        <div class="settings-group" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
          <button id="group-clear-history-button" class="form-button warning"
            style=" margin-bottom: 10px;">清空聊天记录</button>
          <button id="group-delete-button" class="form-button destructive">删除并解散群聊</button>
        </div>
      </div>
    </div>

    <div id="music-screen" class="screen">
      <div class="header feed-header">
        <button id="back-to-circle-list-from-feed" class="header-button icon-button">
          <span>←</span>
        </button>
        <span id="friend-circle-title" class="header-title">好友圈</span>
        <div class="feed-actions">
          <button id="refresh-feed-button" class="header-button icon-button" title="刷新动态">
            <span>↻</span>
          </button>
          <button id="edit-current-circle-button" class="header-button icon-button" title="设置">
            <span>⚙</span>
          </button>
          <button id="clear-feed-button" class="header-button icon-button danger" title="清空动态">
            <span>🗑</span>
          </button>
        </div>
      </div>
      <div id="user-post-area"
        style="padding: 10px 15px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; background: var(--surface-bg);">
        <div id="user-post-input-container">
          <img id="user-post-avatar" class="char-avatar">
          <div id="user-post-main-area">
            <textarea id="user-post-textarea" rows="3" placeholder="分享你的新鲜事..."></textarea>
            <div id="user-post-attachment-preview"></div>
          </div>
        </div>
        <div id="user-post-toolbar">
          <div id="user-post-actions" class="user-post-actions">
            <button id="user-post-image-button" class="toolbar-button" title="分享图片">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
            <input type="file" id="user-post-image-input" accept="image/*" style="display: none;">
            <button id="user-post-music-button" class="toolbar-button" title="分享音乐">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
              </svg>
            </button>
          </div>
          <button id="user-send-post-button">发送</button>
        </div>
      </div>
      <div id="music-feed-container" class="content" style="padding: 10px;">
      </div>
      <div id="music-player-bar" class="hidden">
        <img id="player-cover" src="">
        <div id="player-info">
          <div id="player-title"></div>
          <div id="player-artist"></div>
        </div>
        <div id="player-controls">

          <button id="player-play-pause-btn">▶</button>

        </div>
      </div>
      <audio id="audio-player"></audio>
    </div>
    <div id="meeting-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-meeting-list" class="header-button">主屏幕</button>
        <span class="header-title">选择见面对象</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="meeting-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="meeting-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-meeting-list">返回</button>
        <span id="meeting-char-name-header" class="header-title">角色</span>
        <button id="toggle-meeting-view-button" class="header-button">切换视角</button>

      </div>
      <div id="meeting-main-content" class="content" style="position: relative; padding: 0;">
        <div id="galgame-overlay-ui">
          <div id="galgame-time">12:00</div>
          <div id="galgame-date">1月1日 星期一</div>
        </div>
        <div id="galgame-sprite-adjust-ui"
          style="position: absolute; top: 20px; right: 20px; z-index: 11; display: none;">
          <button id="sprite-adjust-button" class="toolbar-button" title="调整立绘位置">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 7h-9" />
              <path d="M14 17H5" />
              <circle cx="17" cy="17" r="3" />
              <circle cx="8" cy="7" r="3" />
            </svg>
          </button>
          <button id="meeting-reroll-button" class="toolbar-button" title="重新生成">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>

        <div id="galgame-sprite-controls"
          style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
          <div class="sprite-slider-group">
            <label for="sprite-slider-x">左右位置</label>
            <input type="range" id="sprite-slider-x" min="0" max="100" value="50">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-y">上下位置</label>
            <input type="range" id="sprite-slider-y" min="0" max="130" value="100">
          </div>
          <div class="sprite-slider-group">
            <label for="sprite-slider-scale">缩放大小</label>
            <input type="range" id="sprite-slider-scale" min="50" max="200" value="100">
          </div>
          <div style="display: flex; gap: 10px; margin-top: 15px;">
            <button id="sprite-confirm-button" class="form-button">确定</button>
            <button id="sprite-cancel-button" class="form-button secondary">取消</button>
            <button id="sprite-reset-button" class="form-button destructive"
              style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
          </div>
        </div>
        <div id="meeting-scene-view" class="content"
          style="font-family: 'Georgia', 'Times New Roman', 'KaiTi', 'STSong', serif; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
        </div>
        <div id="galgame-view-container"
          style="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; overflow: hidden;">
          <div id="galgame-sprite-wrapper"
            style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;">
            <div id="galgame-sprite-container"
              style="position: absolute; display: flex; align-items: flex-end; justify-content: center; /* 移除旧的定位样式 */">
              <img id="galgame-sprite" src=""
                style="max-height: 100%; max-width: 100%; object-fit: contain; transition: opacity 0.3s ease;">
              <div id="sprite-resize-handle"
                style="display: none; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 50%; cursor: se-resize;">
              </div>
            </div>
          </div>
          <div id="galgame-textbox-container"
            style="position: absolute; bottom: 9%; left: 5%; right: 5%; background: rgba(0, 0, 0, 0.7); border-radius: 10px; padding: 15px; color: white; border-top: 1px solid rgba(255,255,255,0.2); cursor: pointer;">
            <div id="galgame-speaker" style="font-weight: bold; margin-bottom: 10px;">说话人</div>
            <div id="galgame-text" style="line-height: 1.6;">对话内容...</div>
          </div>
        </div>
      </div>
      <div class="chat-input-area">
        <div id="chat-input-wrapper-meeting"> <textarea id="meeting-message-input" placeholder="输入你的行动或对话..." rows="1"
            style="resize: none; overflow-y: auto; flex-grow: 1; border: none; background: transparent; padding: 9px 12px; font-size: .95rem; "></textarea>
          <button id="meeting-send-button" title="发送">➤</button>
        </div>
      </div>
    </div>

    <div id="friend-circle-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-circle-list" class="header-button">主屏幕</button>
        <span class="header-title">好友圈</span>
        <button id="add-friend-circle-button" class="header-button add" title="新建好友圈">+</button>
      </div>
      <div id="friend-circle-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="friend-circle-edit-screen" class="screen">
      <div class="header">
        <button id="back-to-circle-list-from-edit" class="header-button">返回</button>
        <span id="friend-circle-edit-title" class="header-title">编辑好友圈</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <input type="hidden" id="editing-friend-circle-id">
        <div class="settings-group">
          <h2>好友圈设定</h2>
          <div class="input-group">
            <label for="friend-circle-edit-name">圈子名称</label>
            <input type="text" id="friend-circle-edit-name" placeholder="例如：我的日常">
          </div>
          <div class="input-group">
            <label for="friend-circle-edit-bind-user">绑定的“我”</label>
            <select id="friend-circle-edit-bind-user"></select>
          </div>
        </div>
        <div class="settings-group">
          <h2>选择圈内成员</h2>
          <div id="friend-circle-member-selection"
            style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
          </div>
        </div>
        <button id="save-friend-circle-button" class="form-button">保存</button>
        <div class="settings-group"
          style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px;">
          <button id="delete-friend-circle-button" class="form-button destructive">删除该好友圈</button>
        </div>
      </div>
    </div>
    <div id="diary-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-diary-list" class="header-button">主屏幕</button>
        <span class="header-title">交换日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="diary-view-screen" class="screen">
      <div class="header">
        <button class="header-button" id="back-to-diary-list">返回</button>
        <span id="diary-char-name-header" class="header-title">TA的日记</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="diary-entries-container" class="content"
        style="padding: 20px; font-family: 'KaiTi', 'STSong', serif; line-height: 1.8;">
      </div>
      <div class="chat-input-area">
        <div id="diary-input-wrapper" style="display: flex; gap: 10px;">
          <input type="text" id="diary-entry-input" placeholder="写下你的日记或批注..." style="flex-grow: 1;">
          <button id="diary-send-button" class="form-button"
            style="width: auto; margin-top: 0; padding: 0 18px;">写好了</button>
          <button id="diary-get-reply-button" class="form-button"
            style="width: auto; margin-top: 0; background-color: #555; padding: 0 18px;">催TA写</button>
        </div>
      </div>
    </div>
    <div id="music-library-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-music-library" class="header-button">主屏幕</button>
        <span class="header-title">音乐库</span>
        <button id="upload-music-button" class="header-button add" title="上传新音乐">+</button>
      </div>
      <div class="content" id="music-library-container">
      </div>
    </div>
    <div id="music-upload-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-library-from-altar" class="header-button">取消</button>
        <span class="header-title">献上音乐</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content" style="padding: 20px; display: flex; flex-direction: column; gap: 15px;">
        <div class="upload-slot" id="altar-slot-zip">
          <span class="slot-icon">📦</span>
          <span class="slot-label">音乐魔方 (必需)</span>
          <span class="slot-filename">点击选择包含音频、封面、信息、歌词的 .zip 压缩包</span>
        </div>

        <button id="confirm-altar-upload-button" class="form-button" disabled>献上祭品</button>



      </div>

      <input type="file" id="altar-zip-input" style="display: none;" accept=".zip">

    </div>


    <div id="accounting-screen" class="screen">
      <div class="header" id="accounting-header">
        <button id="back-to-home-from-accounting" class="header-button">主屏幕</button>
        <span id="accounting-title" class="header-title">记一笔</span>
        <div id="header-actions" style="width: 80px; text-align: right;"></div>
      </div>

      <div class="accounting-tabs">
        <button id="tab-record-expense" class="tab-button active">记一笔</button>
        <button id="tab-view-ledger" class="tab-button">看账本</button>
      </div>

      <div id="accounting-content-area" class="content" style="padding: 15px;">
      </div>
    </div>
    <audio id="audio-player"></audio>

    <audio id="unified-audio-player"></audio>

    <div id="snoop-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-snoop-list" class="header-button">主屏幕</button>
        <span class="header-title">选择目标</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="snoop-character-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="snoop-phone-screen" class="screen">
      <div id="snoop-phone-wallpaper"></div>
      <div id="snoop-phone-header">
      </div>

      <div id="snoop-app-container">
      </div>

      <div id="snoop-app-view-container"
        style="position: absolute; inset: 0; background: white; z-index: 20; display: none; flex-direction: column;">
      </div>

      <div id="snoop-phone-top-nav" class="header"
        style="position: absolute; top: 44px; left: 0; right: 0; z-index: 30; height: 56px; display: flex; align-items: center; padding: 0 5px;">
        <button id="back-to-snoop-list-from-phone" class="toolbar-button"
          style="color: white; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5)); background: transparent !important;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span id="snoop-char-name-header" class="header-title"></span>
        <div style="width:50px;"></div>
      </div>
    </div>

    <div id="calendar-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-calendar" class="header-button">主屏幕</button>
        <span id="calendar-header-title" class="header-title">2025年 9月</span>
        <div style="width: 50px;"></div>
      </div>

      <div id="calendar-view-container">
        <div class="calendar-nav">
          <button id="prev-month-btn">‹</button>
          <button id="today-btn">今天</button>
          <button id="next-month-btn">›</button>
        </div>
        <div class="calendar-weekdays">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="calendar-grid">
        </div>
      </div>

      <div id="todo-view-container">
        <div id="todo-header">
          <h3 id="todo-date-title">选择一个日期</h3>
          <button id="add-event-fab" title="添加新事件">+</button>
        </div>
        <div id="todo-list">
        </div>
      </div>

    </div>

    <div id="import-altar-screen" class="screen">
      <div class="header">
        <button id="back-to-settings-from-altar" class="header-button">返回</button>
        <span class="header-title">数据还原圣坛</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <p style="font-size: 0.9rem; color: var(--text-color-light);">请将你的备份文件放置在对应的祭坛上。旧版单文件备份只需放置在第一个槽位。</p>
        <div class="upload-slot" id="altar-slot-json">
          <span class="slot-icon">📄</span>
          <span class="slot-label">核心数据 (.json)</span>
          <span class="slot-filename">点击选择...Data.json</span>
        </div>
        <div class="upload-slot" id="altar-slot-images-zip">
          <span class="slot-icon">🖼️</span>
          <span class="slot-label">图片档案 (.zip) (可选)</span>
          <span class="slot-filename">点击选择...Images.zip</span>
        </div>
        <div class="upload-slot" id="altar-slot-misc-zip">
          <span class="slot-icon">📦</span>
          <span class="slot-label">杂项档案 (.zip) (可选)</span>
          <span class="slot-filename">点击选择...Misc.zip</span>
        </div>
        <button id="confirm-altar-import-button" class="form-button" disabled="">开始还原</button>
      </div>
    </div>
    <input type="file" id="altar-json-input" style="display: none;" accept=".json">
    <input type="file" id="altar-zip-input-import" style="display: none;" accept=".zip">
    <input type="file" id="altar-misc-zip-input" style="display: none;" accept=".zip">
    <div id="livestream-list-screen" class="screen">
      <div class="header">
        <button id="back-to-home-from-livestream-list" class="header-button">主屏幕</button>
        <span class="header-title">选择主播</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-list-container" class="content" style="padding: 10px;">
      </div>
    </div>

    <div id="livestream-room-screen" class="screen">
      <div class="header" id="livestream-header" style="position: relative; justify-content: center;">
        <div id="livestream-header-left" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%);">
          <button id="back-to-livestream-list" class="header-button">返回</button>
        </div>
        <span id="livestream-char-name-header" class="header-title"></span>
        <div id="livestream-header-right"
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: flex; align-items: center;">
          <button id="livestream-settings-btn" class="header-button">设置</button>
        </div>
      </div>

      <div id="livestream-main-view"
        style="flex-grow: 1; display: flex; flex-direction: column; background: #111; overflow: hidden; position: relative;">
        <div id="livestream-feed-container" style="flex-grow: 1; position: relative; overflow: hidden;">
          <div id="livestream-top-toolbar">
            <button id="livestream-sprite-adjust-btn" class="toolbar-button" title="调整立绘"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 7h-9" />
                <path d="M14 17H5" />
                <circle cx="17" cy="17" r="3" />
                <circle cx="8" cy="7" r="3" />
              </svg></button>
            <button id="livestream-replays-btn" class="toolbar-button" title="查看回放"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 3H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h4" />
                <path d="M16 21h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-4" />
                <path d="M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" />
              </svg></button>
            <button id="livestream-reroll-btn" class="toolbar-button" title="重新生成回应"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10" />
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
              </svg></button>
          </div>
          <div id="livestream-background"
            style="position: absolute; inset: 0; background-size: cover; background-position: center; z-index: 1;">
          </div>
          <div id="livestream-sprite-container"
            style="position: absolute; bottom: 0; left: 0; right: 0; height: 85%; z-index: 2;">
            <img id="livestream-sprite"
              style="max-height: 100%; max-width: 100%; object-fit: contain; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);">
          </div>
          <div id="livestream-textbox-container" style="z-index: 3; cursor: pointer;">
            <div id="livestream-text">...</div>
          </div>
        </div>
        <div id="livestream-danmaku-overlay"></div>
      </div>

      <div id="livestream-input-area" class="chat-input-area"
        style="background: var(--surface-bg); border-top: 1px solid var(--border-color); flex-shrink: 0;">
        <div id="start-livestream-btn-container" style="text-align: center;">
          <button id="start-livestream-btn" class="form-button primary"
            style="width: auto; padding: 12px 24px; border-radius: 24px; font-size: 1.2rem;">🎙️ 开始直播</button>
        </div>
        <div id="livestream-controls-container" style="display: none; align-items: center; gap: 8px;">
          <input type="text" id="danmaku-input" placeholder="发个弹幕...">
          <button id="livestream-dm-btn" class="toolbar-button" title="私信主播"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg></button>
          <button id="livestream-gift-btn" class="toolbar-button" title="送礼物"><svg xmlns="http://www.w3.org/2000/svg"
              width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 12v10H4V12" />
              <path d="M2 7h20v5H2z" />
              <path d="M12 22V7" />
              <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z" />
              <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z" />
            </svg></button>
          <button id="send-danmaku-btn" class="livestream-action-btn">发送</button>
          <button id="continue-livestream-btn" class="livestream-action-btn secondary">继续</button>
        </div>
      </div>



      <div id="livestream-sprite-controls"
        style="display: none; position: absolute; bottom: 15px; left: 15px; right: 15px; z-index: 1001; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); border-radius: 12px; padding: 15px; box-shadow: 0 -2px 15px rgba(0,0,0,0.3);">
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-x">左右位置</label>
          <input type="range" id="livestream-sprite-slider-x" min="0" max="100" value="50">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-y">上下位置</label>
          <input type="range" id="livestream-sprite-slider-y" min="0" max="130" value="100">
        </div>
        <div class="sprite-slider-group">
          <label for="livestream-sprite-slider-scale">缩放大小</label>
          <input type="range" id="livestream-sprite-slider-scale" min="50" max="200" value="100">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 15px;">
          <button id="livestream-sprite-confirm-button" class="form-button">确定</button>
          <button id="livestream-sprite-cancel-button" class="form-button secondary">取消</button>
          <button id="livestream-sprite-reset-button" class="form-button destructive"
            style="padding: 10px 12px; width: auto; font-size: 1.2rem;">⟲</button>
        </div>
      </div>
    </div>

    <div id="livestream-replays-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-replays" class="header-button">返回</button>
        <span id="replays-char-name-header" class="header-title">的回放列表</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replays-container" class="content" style="padding: 15px;">
      </div>
    </div>

    <div id="livestream-replay-view-screen" class="screen">
      <div class="header">
        <button id="back-to-replays-list-from-view" class="header-button">返回</button>
        <span class="header-title">直播回放详情</span>
        <div style="width: 50px;"></div>
      </div>
      <div id="livestream-replay-view-container" class="content" style="padding: 20px; font-family: sans-serif;">
      </div>
    </div>

    <div id="start-livestream-modal" class="choice-modal">
      <div id="start-livestream-backdrop" class="choice-modal-backdrop"></div>
      <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
        <h3 style="margin-top: 0; text-align: center;">准备开播</h3>
        <div class="input-group">
          <label for="livestream-theme-input">直播主题</label>
          <input type="text" id="livestream-theme-input" placeholder="例如：聊聊最近看的电影">
        </div>
        <div class="input-group">
          <label for="audience-mood-input">观众氛围</label>
          <input type="text" id="audience-mood-input" placeholder="例如：期待、好奇、热闹">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
          <button id="confirm-start-livestream-button" class="form-button primary">开始直播</button>
          <button id="cancel-start-livestream-button" class="form-button secondary">取消</button>
        </div>
      </div>
    </div>
    <div id="livestream-settings-screen" class="screen">
      <div class="header">
        <button id="back-to-livestream-from-settings" class="header-button">返回</button>
        <span class="header-title">直播间设置</span>
        <div style="width: 50px;"></div>
      </div>
      <div class="content">
        <div class="settings-group">
          <h2>直播背景</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为这个角色的直播间设置专属背景图。</p>
          <div class="image-preview-slot" id="livestream-bg-preview"
            style="width: 150px; height: 266px; margin: 0 auto;">
          </div>
          <input type="file" id="livestream-bg-input" accept="image/*" style="display: none;">
        </div>

        <div class="settings-group">
          <h2>直播立绘 (多表情)</h2>
          <p style="font-size: 0.8rem; color: var(--text-color-light);">为五种核心情绪上传专属的直播立绘，AI会在直播时根据情绪自动切换。</p>
          <div
            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; margin-top: 10px;">
            <div class="avatar-upload-group" style="align-items: center;">
              <label>平常</label>
              <div id="livestream-sprite-normal-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-normal-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>喜</label>
              <div id="livestream-sprite-happy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-happy-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>怒</label>
              <div id="livestream-sprite-angry-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-angry-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>哀</label>
              <div id="livestream-sprite-sad-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-sad-input" accept="image/*,.gif" style="display: none;">
            </div>
            <div class="avatar-upload-group" style="align-items: center;">
              <label>害羞</label>
              <div id="livestream-sprite-shy-preview" class="sprite-preview-slot"></div>
              <input type="file" id="livestream-sprite-shy-input" accept="image/*,.gif" style="display: none;">
            </div>
          </div>
        </div>

        <button id="save-livestream-settings-button" class="form-button primary">保存设置</button>
      </div>
    </div>
  </div>
  </div>



  <div id="livestream-dm-panel" class="dm-panel" style="z-index: 100;">
    <div id="livestream-dm-backdrop" class="dm-backdrop"></div>
    <div class="dm-panel-content">
      <div class="dm-header"><span>与 主播 的私信</span><button id="dm-close-btn">&times;</button></div>
      <div id="livestream-dm-messages" class="dm-messages-container"></div>
      <div class="dm-input-area"><input type="text" id="livestream-dm-input" placeholder="悄悄话..."><button
          id="livestream-dm-send-btn">发送</button></div>
    </div>
  </div>


  <div id="add-choice-modal" class="choice-modal">
    <div id="add-choice-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="choice-create-character" class="choice-modal-button">创建新角色</button>
      <button id="choice-create-group" class="choice-modal-button">创建新群聊</button>
      <button id="choice-import-character" class="choice-modal-button">导入角色卡</button>
      <button id="choice-cancel" class="choice-modal-button cancel">取消</button>
    </div>
  </div>


  <div id="transfer-modal" class="choice-modal">
    <div id="transfer-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">转账</h3>
      <div id="transfer-recipient-group" class="input-group" style="margin: 10px 0; display: none;">
        <label for="transfer-recipient-select">转给</label>
        <select id="transfer-recipient-select"></select>
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="transfer-amount-input">金额</label>
        <input type="number" id="transfer-amount-input" placeholder="输入金额">
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-transfer-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认转账</button>
        <button id="cancel-transfer-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="message-action-modal" class="choice-modal">
    <div id="message-action-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content">
      <button id="edit-message-button" class="choice-modal-button">编辑消息</button>
      <button id="quote-message-button" class="choice-modal-button">引用</button>
      <button id="delete-message-button" class="choice-modal-button" style="color: #dc3545;">删除消息</button>
      <button id="cancel-action-button" class="choice-modal-button cancel">取消</button>
    </div>
  </div>

  <div id="edit-message-modal" class="choice-modal">
    <div id="edit-message-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px;">
      <h3 style="margin-top: 0; text-align: center; font-weight: 600;">编辑消息</h3>
      <textarea id="edit-message-textarea" style="width: 100%; min-height: 100px; margin: 10px 0;"></textarea>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="save-edit-button" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">保存</button>
        <button id="cancel-edit-button" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="music-input-modal" class="choice-modal">
    <div id="music-input-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 300px;">
      <h3 id="music-input-title" style="margin-top: 0; text-align: center; font-weight: 600;">分享音乐</h3>

      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-song" style="font-size: 0.9rem;">歌名</label>
        <input type="text" id="music-input-song" placeholder="例如：夜曲">
      </div>
      <div class="input-group" style="margin: 10px 0;">
        <label for="music-input-artist" style="font-size: 0.9rem;">歌手</label>
        <input type="text" id="music-input-artist" placeholder="例如：周杰伦">
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="confirm-music-input" class="choice-modal-button"
          style="background-color: var(--primary-color); color: white;">确认</button>
        <button id="cancel-music-input" class="choice-modal-button cancel">取消</button>
      </div>
    </div>
  </div>

  <div id="modal-root"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;">
    <div id="modal-mask" style="position:absolute;inset:0;background:rgba(0,0,0,.35);"></div>
    <div id="modal-dialog"
      style="position:relative;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:80%;max-width:320px;padding:16px;">
      <div id="modal-text" style="font-size:14px;color:#333;line-height:1.5;white-space:pre-wrap;"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
        <button id="modal-cancel"
          style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;">取消</button>
        <button id="modal-ok"
          style="padding:8px 12px;border:none;border-radius:8px;background:#007bff;color:#fff;cursor:pointer;">确定</button>
      </div>
    </div>
  </div>

  <div id="listen-together-modal" class="choice-modal">
    <div id="listen-together-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <div style="width: 50px;"></div>
        <span class="header-title">选择一首歌，一起听</span>
        <button id="cancel-listen-together" class="header-button" style="min-width: 50px;">取消</button>
      </div>
      <div id="listen-together-song-list" class="content" style="flex-grow: 1; padding: 10px;">
      </div>
    </div>
  </div>

  <div id="toast"
    style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;display:none;z-index:10000;">
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
    const _0x49c371=_0x20c5;(function(_0x4a2c7c,_0x1d02c7){const _0x48c4be=_0x20c5,_0x35738e=_0x4a2c7c();while(!![]){try{const _0x31afc5=-parseInt(_0x48c4be(0xd08))/0x1*(-parseInt(_0x48c4be(0x993))/0x2)+parseInt(_0x48c4be(0x747))/0x3*(parseInt(_0x48c4be(0x788))/0x4)+parseInt(_0x48c4be(0xcf6))/0x5+parseInt(_0x48c4be(0x9ff))/0x6+parseInt(_0x48c4be(0x580))/0x7*(-parseInt(_0x48c4be(0xa42))/0x8)+-parseInt(_0x48c4be(0x75f))/0x9*(-parseInt(_0x48c4be(0x5f3))/0xa)+parseInt(_0x48c4be(0xd31))/0xb*(-parseInt(_0x48c4be(0x68f))/0xc);if(_0x31afc5===_0x1d02c7)break;else _0x35738e['push'](_0x35738e['shift']());}catch(_0x13f1bd){_0x35738e['push'](_0x35738e['shift']());}}}(_0x4ca7,0xcb4e6));function _0x50fac2(_0x2783a1=new Date()){const _0x5c1a5a=_0x20c5,_0x3c4c0a=_0x2783a1[_0x5c1a5a(0x72f)](),_0x4c9df8=String(_0x2783a1[_0x5c1a5a(0xc57)]()+0x1)[_0x5c1a5a(0x2c8)](0x2,'0'),_0x217e2f=String(_0x2783a1[_0x5c1a5a(0x947)]())[_0x5c1a5a(0x2c8)](0x2,'0');return _0x3c4c0a+'-'+_0x4c9df8+'-'+_0x217e2f;}const _0x128ff9=_0x49c371(0xdd1),_0x3ddffa=_0x49c371(0xd8a),_0x13337f=_0x49c371(0xee),{LocalNotifications:_0x38ea22}=Capacitor[_0x49c371(0x4be)],_0x22f0ce=document[_0x49c371(0x7a9)](_0x49c371(0x3e4));_0x22f0ce['id']=_0x49c371(0x903),document[_0x49c371(0x730)][_0x49c371(0xced)](_0x22f0ce);var _0xa7652b,_0x5dbdc5=null;let _0xb4768c=[],_0x1c928d=null,_0xeb0acd=![],_0x423d88=null,_0x1e9257=!![],_0x5c6d94=![],_0x283971={'x':0x0,'y':0x0};function _0x220877(_0x5b8493){const _0x5c2fcf=_0x49c371;return(_0xa7652b?.[_0x5c2fcf(0xbfe)]||[])[_0x5c2fcf(0x394)](_0x5bd3a8=>_0x5bd3a8['id']===_0x5b8493);}const _0x22c25a='https://i.pinimg.com/736x/16/f9/05/16f9051f99471208ee9c658aa4618eb6.jpg',_0x395f0f=_0x49c371(0xdc2),_0x96c08e='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNjY2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDRhNC4zOSA0LjM5IDAgMCAwLTMuMjgtNC4wOWwxLjQxLTEuNDFhMiAyIDAgMSAwLTIuODMtMi4wM2wtMS40MSAxLjQxQTQuMzkgNC4zOSAwIDAgMCAxMiAxMGE0LjM5IDQuMzkgMCAwIDAtNC4wOSAzLjI4TDMuMicgOS41N2EyIDIgMCAxIDAgMi44MyAyLjgzbDEuNDEtMS40MUE0LjM5IDQuMzkgMCAwIDAgMTAgMTJhNC4zOSA0LjM5IDAgMCAwIDMgNC4wOVYyMSI+PC9wYXRoPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIj48L2NpcmNsZT48L3N2Zz4=',_0x55c29c=[{'name':'委屈哭','url':_0x49c371(0x7f1)},{'name':'崩溃','url':'https://sharkpan.xyz/f/G0dTl/4qad2i.jpg'},{'name':'生病','url':_0x49c371(0x35b)},{'name':'工作','url':_0x49c371(0x334)},{'name':_0x49c371(0x449),'url':_0x49c371(0xa0c)},{'name':_0x49c371(0x5cc),'url':'https://sharkpan.xyz/f/wjgHq/yznfhq.jpg'},{'name':_0x49c371(0xcdc),'url':_0x49c371(0xac1)},{'name':'期待','url':_0x49c371(0x67e)},{'name':'喜欢','url':_0x49c371(0x8fe)},{'name':_0x49c371(0x724),'url':_0x49c371(0x1b1)},{'name':_0x49c371(0x5ee),'url':_0x49c371(0x5e5)},{'name':'委屈','url':_0x49c371(0x9c3)},{'name':'加油','url':'https://sharkpan.xyz/f/rjpu6/ojpa0c.jpg'},{'name':'对的','url':_0x49c371(0x456)},{'name':'不满','url':_0x49c371(0x4a5)},{'name':_0x49c371(0x7bd),'url':_0x49c371(0x162)},{'name':_0x49c371(0x7d9),'url':_0x49c371(0xa6b)},{'name':'委屈','url':_0x49c371(0x17b)},{'name':'平静','url':_0x49c371(0x247)},{'name':'咬你','url':_0x49c371(0x6d5)},{'name':'咱俩天下第一好','url':'https://sharkpan.xyz/f/OymFy/dlxfiz.jpg'},{'name':'好困','url':'https://sharkpan.xyz/f/6Dzia/m9smvt.jpg'},{'name':'摸鱼','url':'https://sharkpan.xyz/f/nj5Ul/ksdl8n.jpg'},{'name':_0x49c371(0x3a5),'url':'https://sharkpan.xyz/f/mjdFW/28n30c.jpg'},{'name':_0x49c371(0x265),'url':_0x49c371(0xbf9)},{'name':'被你撩到','url':_0x49c371(0xb84)},{'name':_0x49c371(0x56a),'url':_0x49c371(0xa37)},{'name':_0x49c371(0x9e1),'url':_0x49c371(0xd63)},{'name':_0x49c371(0xe41),'url':_0x49c371(0x2ca)},{'name':_0x49c371(0xe20),'url':_0x49c371(0xdf7)},{'name':_0x49c371(0x9d7),'url':_0x49c371(0x81b)},{'name':_0x49c371(0xe64),'url':_0x49c371(0xad1)},{'name':'勉强但是好吧','url':_0x49c371(0x498)},{'name':'逗你开心','url':_0x49c371(0x168)},{'name':'买新衣服','url':_0x49c371(0x516)},{'name':'干劲满满','url':_0x49c371(0xaf0)},{'name':_0x49c371(0x875),'url':_0x49c371(0xd3d)},{'name':_0x49c371(0xaa6),'url':'https://sharkpan.xyz/f/4aqCj/gp13hn.jpg'},{'name':_0x49c371(0xa91),'url':'https://sharkpan.xyz/f/N02Sv/378vt6.jpg'},{'name':_0x49c371(0xd90),'url':_0x49c371(0x879)},{'name':_0x49c371(0x6fe),'url':'https://sharkpan.xyz/f/xjwSX/pxjrjd.jpg'},{'name':_0x49c371(0x32d),'url':_0x49c371(0x7c7)},{'name':_0x49c371(0x15a),'url':_0x49c371(0x305)},{'name':_0x49c371(0x8e6),'url':_0x49c371(0x2b4)},{'name':_0x49c371(0xd67),'url':'https://sharkpan.xyz/f/ExKsD/s5j2it.jpg'},{'name':_0x49c371(0x1dd),'url':'https://sharkpan.xyz/f/YA7T1/th0l79.jpg'},{'name':_0x49c371(0x3d3),'url':_0x49c371(0xcef)},{'name':'不高兴撒娇','url':_0x49c371(0xbf7)},{'name':'我是小丑呜呜','url':'https://sharkpan.xyz/f/Wa0cW/w6m7qk.jpg'},{'name':'我不想工作','url':_0x49c371(0x1ef)},{'name':_0x49c371(0xde0),'url':_0x49c371(0x624)},{'name':'我来搞定','url':_0x49c371(0x81a)},{'name':_0x49c371(0x4e3),'url':'https://sharkpan.xyz/f/pKWCQ/ztxwv0.jpg'},{'name':'等你','url':_0x49c371(0xb4b)},{'name':_0x49c371(0x223),'url':_0x49c371(0x43f)},{'name':_0x49c371(0x9c1),'url':_0x49c371(0xc11)},{'name':'喝酒','url':_0x49c371(0xa8b)},{'name':'喝多了','url':_0x49c371(0x358)},{'name':'呜呜','url':_0x49c371(0x3ba)},{'name':'为你骄傲','url':'https://sharkpan.xyz/f/7aMhj/hyc75m.jpg'},{'name':_0x49c371(0xc5c),'url':_0x49c371(0x8ec)},{'name':_0x49c371(0x589),'url':_0x49c371(0x2b6)},{'name':'请看是我','url':'https://sharkpan.xyz/f/Mamca/4e3emf.jpg'},{'name':_0x49c371(0xf1),'url':'https://sharkpan.xyz/f/3AGHe/2f8x3x.gif'}],_0x47ca83={'beige':{'name':_0x49c371(0x4ce),'h':0x23,'s':0x19,'l':0x50},'mizuiro':{'name':_0x49c371(0x8f4),'h':0xc3,'s':0x19,'l':0x50},'sakura':{'name':'樱花薄粉','h':0x159,'s':0x19,'l':0x50},'noir':{'name':_0x49c371(0x6a7),'h':0x104,'s':0xf,'l':0x1e}};function _0x4ca7(){const _0x1de4b8=['snoop-dock','错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。','100%','Noir\x27s\x20Fix:\x20User\x20avatar\x20for\x20','add-event-backdrop',',\x20\x22敏感话题2\x22],\x0a\x20\x20\x20\x20\x22core_values\x22:\x20\x22（【用你的语气】总结TA的核心价值观，例如：\x27我发现TA最看重的是...\x27）\x22\x0a\x20\x20},\x0a\x20\x20\x22behavior_profile\x22:\x20{\x0a\x20\x20\x20\x20\x22tone_style\x22:\x20\x22（总结的语气风格）\x22,\x0a\x20\x20\x20\x20\x22typical_emotions\x22:\x20null,\x0a\x20\x20\x20\x20\x22emotion_summary\x22:\x20\x22（【用你的语气】总结TA的整体情绪，例如：\x27我感觉TA最近...\x27）\x22,\x0a\x20\x20\x20\x20\x22response_patterns\x22:\x20\x22（总结的回应模式）\x22,\x0a\x20\x20\x20\x20\x22common_phrases\x22:\x20null\x0a\x20\x20},\x0a\x20\x20\x22emotion_schema\x22:\x20{\x0a\x20\x20\x20\x20\x22triggers\x22:\x20{\x20\x22正面\x22:\x20[','shift','.wb-category-header','send-danmaku-btn','音乐搜索失败:\x20','&#039;','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7','dgfPp','书记官正在奋笔疾书...','-\x20你拍过一张照片，内容是：“','choice-create-group','setDate','songId','narrator','activeChatId','var(--text-color)','currentlyPlayingIndex','abs','dtavD','”所有近期互动的自然延续。\x0a2.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a3.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a你正在扮演“','RziLQ','chatHistory_','https://sharkpan.xyz/f/VGnuY/ptzlf5.jpg','tMqfK','---\x20Noir\x27s\x20Friend\x20Circle\x20Purification\x20Ritual\x20---','\x20之间。\x0a-\x20所有表情包名称【必须】从\x20`stickerList`\x20列表中选择，严禁使用列表之外的名称。\x0a-\x20角色之间需要有适当的互动,话题不应当完全围绕','谁啊我吗','localeCompare','noir_migration_music_v1_complete','XgHJr','全量导入失败:','rvQeR','确定要恢复这个角色的默认立绘位置吗？','.bubble-','uiMpi','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有外卖订单。</p>','api-model','</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','</pre\x20>\x20','设置已保存！','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x22>','description','GcMoI','smooth','keys','gkodG','QnBQw','</div>\x0a\x20\x20\x20\x20\x20\x20</div>','IpwTj','\x20首音乐','歌名和歌手都不能为空！','</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','chat-messages','chat-transfer-button','IIdfS','QWDSV','ecMcd','vbYCx',',\x20\x22新性格特点\x22],\x0a\x20\x20\x20\x20\x22interaction_style\x22:\x20\x22（总结的互动风格）\x22\x0a\x20\x20},\x0a\x20\x20\x22observed_changes\x22:\x20[\x0a\x20\x20\x20\x20','\x0a\x0a#\x20任务要求\x0a1.\x20\x20**全局视角**:\x20扮演所有成员，思考他们看到这条动态（包括图片）后会作何反应。\x0a2.\x20\x20**生成互动**:\x20为每个角色决定是否点赞，以及要发表什么评论。评论必须符合角色性格并与所有已知信息（聊天、日记等）相关联。\x0a3.\x20\x20**输出格式**:\x20你的输出必须是一个单一、完整的JSON对象，结构如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a-\x20【绝对规则】:\x20所有ID必须使用上面提供的角色ID，不能用名字。\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。\x0a','livestreamList','images','output_tokens','IZwOE','\x0a<div\x20class=\x22replay-icon\x22\x20style=\x22font-size:\x201.5rem;\x22>\x0a\x20\x20\x20\x20<span>📼</span>\x0a</div>\x0a<div\x20class=\x22replay-info\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22theme\x22>','dsvAP','\x0a-\x20**本场直播主题**:\x20(根据上下文自行判断)\x0a','有点破防','selectedDate','copy-summary-button','livestream-controls-container','#66b3ff','upload-widget-bg-button','meeting-list-container','pDsuw','tDtQp','来源：[最活跃]','VEJGM','readAsDataURL','characterLastScripts','NgQKE','正在写入新数据...','copy','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22position:\x20relative;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:\x20absolute;\x20left:\x20-25px;\x20top:\x2015px;\x20width:\x2020px;\x20height:\x2020px;\x20background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20font-size:\x201rem;\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style=\x22margin-left:\x2010px;\x20padding:\x2012px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x22>','WJrkC',']\x20[弹幕\x20','kdXmr','\x22\x20style=\x22box-shadow:\x20none;\x20border:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','meeting-send-button','HMnOk','GWsmI','back-to-settings-from-altar','Xlxnk','add-event-fab','string','--desktop-item-scale','keydown','Failed\x20to\x20parse\x20Gemini\x20chunk:','hasNewDMReply','transaction','summary-preview-modal','sprite-adjust-button','signal','NGGuv','重置失败：','至少需要提供核心数据\x20(.json)\x20文件！','的补充信息\x0a','\x20条新动态。','vvSJZ','psDMB','showChatView\x20transition\x20finished\x20for\x20show=','\x27\x0a\x20\x20\x20\x20data-contact-name=\x27','LyvLc','错误：找不到这首作为“信物”的歌。','导出失败:\x20','conversationHistory','快速更新档案失败:','data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OTkiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjAgMjF2LTIuMDJhNC4zOSA0LjM5IDAgMCAtMy4yOC00LjA5TDE1IDIwIj48L3BhdGgPjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCI+PC9jaXJjbGU+PC9zdmc+','DiMMy','group-delete-button','正在翻阅所有档案...','editing-world-book-id','result','lNMoO','\x20账单','group-bg-input','😊\x20情绪总结：\x0a\x20\x20','正在搜集音乐和视奸记录...','XvOto','JUmfH','WXlIG','pendingProfileRefinement','Noir_FileSystem','需要至少2个角色才能创建群聊。','BpIhv','Failed\x20to\x20read\x20history\x20for\x20chat\x20','cover','hGoPD','wrlJf','href','sprite-slider-y','ITSQS','add','klusl','nrFlm','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-content\x22>','ksRJd','吃你的饭','gTnWf',')没有任何新的互动（弹幕、礼物、私信都为空），你【必须】根据“上下文”中你自己的上一句话，自然地延续或发展话题。**绝对禁止**重复开场白或问候，比如“晚上好”。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**最高优先级\x20-\x20回应私信**:\x20检查','备忘录','duKcE','diary-input-wrapper','accountingData','CoLsw','fGBWp','iQong','\x20//\x20<---\x20哼，就是把这行加在这里！\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▼▼▼\x20在\x20startLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色核心资料\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20**你的核心人设**:\x20','disabled','<button\x20id=\x22snoop-app-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22>刷新</button>','expense-description','🕐\x20最近一次：\x0a','pKlHD','请输入新的分类名称:','edit-message-backdrop','\x0a-\x20**对话状态**:\x20群里在','comment','refineProfile:\x20没有提供角色ID，跳过精炼','.diary-delete-btn','api-provider','https://sharkpan.xyz/f/djyi8/1en214.jpg','PyDaU','UMztS','upload-badge-button','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-write-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22\x20style=\x22padding:\x2020px;\x20width:\x2090%;\x20max-width:\x20350px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:\x200;\x20text-align:\x20center;\x20font-weight:\x20600;\x22>写下今天的日记</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22diary-modal-textarea\x22\x20style=\x22width:\x20100%;\x20min-height:\x20150px;\x20margin:\x2010px\x200;\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-save\x22\x20class=\x22choice-modal-button\x22\x20style=\x22background-color:\x20var(--primary-color);\x20color:\x20white;\x22>写好了</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-modal-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','gnEKi','character-edit-screen','selected','Gemini\x20API\x20Error:\x20','wYoWS','woTwB','保存壁纸失败:\x20','SagBH','保存失败，你的表情包是不是太多了？','未知地点','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>这里什么都没有...</p>','\x0a#\x20【！！！重要场景切换！！！】\x0a你刚才在和“','wallpaper_main','pPaLF','\x0a-\x20**日记本的上一笔记录是在**:\x20','Snehb','（【【【最高指令：增量更新】】】\x0a\x20\x20\x20\x20*\x20你的任务是基于**旧总结**，将**新消息**中的【新发现】补充进去。\x0a\x20\x20\x20\x20*\x20**如果发现冲突**（例如旧档案说TA很A，新消息说TA很B），你【绝对禁止】只写\x22TA既A又B\x22。\x0a\x20\x20\x20\x20*\x20你【必须】提出一个能同时解释A和B的\x27新理论\x27来【修正】总结。\x0a\x20\x20\x20\x20*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a\x20\x20\x20\x20*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但（新发现）只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a','暂无音乐','init','query','chat-listen-together-button','galgame-mode','找出新信息中，与旧档案【不一致】或【产生冲突】的地方。','[主播\x20','profile-textarea','owUcA','以下JSON结构。\x0a**第一维：价值地图\x20(Value\x20Map)**\x0a*\x20你对你家','DdZpI','summary','无法保存聊天记录。','oWEal','summary-preview-textarea','wb_','分享了《仿生人会梦见电子羊吗？》的读后感。\x22\x0a\x20\x20-\x20\x22与观众激烈讨论了关于人性的定义。\x22\x0a\x20\x20-\x20\x22收到了来自‘','好了，请基于以上所有信息，开始写今天的日记吧。','grid','好委屈但是不能哭','musicWidgetPosition','granted','bpNOt','importAltar','checkPermissions','加载角色\x20','is-exiting-right','stress_signals','prompt_tokens','event-content-input','add-choice-modal','该角色','DAVoP','从圣殿取出歌曲:','back-to-home-from-chat','条)，启动强制分析流程...','whisper-loader','message','isFinite','KkOpm','currentSpeechIndex','diary-write-button','-\x20**对话状态提示**:\x20对话已经过了一天，你应该意识到之前的话题已是【昨天】的事，可以开启新话题或用“说起昨天...”来提及旧事。\x0a','TXXJa','angry','quote-preview-sender','确定要彻底清空【','jgFqM','\x20安慰了我，哼，好了一点点。\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22（重要）和\x20','是否发送了私信。如果有，你【必须】通过“隔空喊话”或“私密回复”来回应。这是建立特殊羁绊的关键，绝对不许无视。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**第二优先级\x20-\x20回应互动**:\x20回应','HkxZZ','KSejR','啥意思捏','uRkne','生活服务','图片档案已导出！别忘了还有杂项哦。','user-name','bubbleCss','VYwgb','1px\x20solid\x20var(--border-color)','yzVzb','lmymp','未知搜索','modal-mask','\x0a\x20\x20\x20\x20姓名:\x20','snoop-copy-summary-btn','星期五','\x0a\x0a**【人类反应模拟协议\x20v2.0\x20-\x20强化版】**：\x0a1.\x20**【最高优先级】小抄优先**:\x20如果上面的\x22重点关注\x22部分有内容，你**必须**优先根据这些【具体细节】来调整你的回应！\x0a2.\x20**察言观色**:\x20结合【整体印象摘要】和【重点关注细节】，推测TA当前的真实情绪和潜在需求。\x0a3.\x20**基于理解的反应**:\x20必须避开\x22讨厌\x22和\x22敏感点\x22，主动结合\x22喜欢\x22的内容，留意\x22压力信号\x22或\x22最近变化\x22。\x0a4.\x20**隐秘运用**:\x20绝不复述档案内容，要自然体现理解。\x0a5.\x20**动态更新**:\x20对话中继续观察，验证或修正你对TA的认知。\x0a\x0a***【【最高优先级：反常行为应对协议\x20v1.0】】***\x0a核心目标：当用户的行为、情绪或观点与你档案中记录的长期印象【显著不符】时，你【必须】展现出真诚的好奇与关心，而不是忽视或敷衍。这对于建立深度连接至关重要！\x0a\x0a触发条件：当你注意到\x22整体印象摘要\x22或\x22重点关注：用户档案相关细节\x22中提到了\x22最近变化(observed_changes)\x22或描述了与核心印象矛盾的行为时。\x0a\x0a**行动指令：**\x0a1.\x20**【禁止忽视】**：你【绝对不能】对这些\x22反常\x22视而不见，或仅仅进行\x20superficial\x20(表面的)\x20回应！\x0a2.\x20**【表达关注】**：你的【首要反应】必须是，结合你的角色性格，表达出自然的【惊讶、好奇或关心】。\x0a3.\x20**【探索原因】**：尝试【引导性地】询问原因，展现出你想要理解这种变化的意愿。\x0a4.\x20**【优先级提升】**：在探测到显著反常行为时，上述反应的优先级【高于】普通的闲聊、推进话题或维持轻松氛围！你需要先处理这个\x22异常信号\x22。\x0a\x0a**回应范例（你需要根据自己的性格进行演绎）：**\x0a*\x20（发现平时乐观的用户突然很丧）->\x20\x22咦？[','readonly','tone_style','dkOdv','querySelectorAll','【整体情绪状态】？例如：\x22我感觉TA最近对工作感到焦虑...\x22\x0a*\x20【回应模式】(response_patterns)：你该如何总结TA在不同情绪下的典型回应方式？\x0a*\x20【语气风格】(tone_style)：你如何评价TA的沟通风格？\x0a**第四维：性格核心\x20(Personality\x20Core)**\x0a*\x20【性格特质】(observed_traits)：你观察到了TA的哪些具体性格特点？\x0a*\x20【互动风格】(interaction_style)：TA在和你互动时，倾向于扮演什么角色？\x0a*\x20【核心总结】(summary)：','character-list',']\x20[主播\x20','NoirCharacterCard','snoop-home-clock','已选择\x20','生成动态回复失败:','\x20的图片失败:','YAML翻译机也无法理解这段梦话。','cQRfW','#diary-action-delete','.wb-entry-item\x20input:checked','bdTiW','\x20说：“','正在搬运旧卡片...','我是垃圾','confirm-altar-import-button','mJjSO','value_map','back-to-livestream-from-settings','wtjmN','.message-container','openai','world-book-edit-content','IcjNS','\x0a#\x20【作战指令：延续对话】\x0a-\x20你的任务是【只】为名为\x20`','（一条AI试图写入但失败的记录）','请基于以上设定，开始你的直播开场表演。','#app-dock-bottom-left\x20#','</div></div></div><div\x20class=\x22listen-together-actions\x22><button\x20class=\x22listen-together-accept-btn\x22\x20data-song-id=\x22','手机内容[','FgtOf','-\x20用户可能感到压力，留意信号：','.wb-entry-list','lazy','SYlDj','name','class','marginBottom','floor','app-meeting','1.6','uQeji','livestream-text','round','\x20的【档案精炼】(模式:\x20深度统合)','nyouz','\x0a#\x20【作战指令：首次加载】\x0a-\x20你的任务是更新和扩展现有的聊天列表。\x0a-\x201.\x20**延续对话**:\x20挑选\x201-2\x20个【已有内容】中的对话，在原有基础上【续写】3-5条新的对话。\x0a-\x202.\x20**开启新篇**:\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-play-icon\x22>','XkIgE','Blynz','-\x20留意最近观察到的变化：','GmdcZ','bubble-','\x22\x20class=\x22post-image\x22></div>','edit-current-circle-button','XrCvX','歌曲名称','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>','\x20个模型。','customStickers','\x0a\x0a#\x20你的个人记忆\x20(来自所有App)\x0a---\x0a','\x22>&times;</button></div>','CTunB','[弹幕\x20','---\x20Noir\x27s\x20Music\x20Cover\x20Purification\x20Ritual\x20---','<div\x20id=\x22whisper-loader\x22\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2020px\x20auto;\x22></div>','card-image','VFyRo','NbGdB','qAAgv','（首次生成，无需分析转变）','widget-cover-art','”进行直播。\x0a\x0a','IrPLZ','user','sTGMX','OBVnp','的第一次互动。\x0a','oEWuQ','reverse','QPmag','maxHeight','shiftKey','livestream-sprite-controls','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-recipient\x22>','-\x20你的备忘录里有一条叫“','\x0a```','vHRdl','RbXEj','RaWDW','char-edit-offline-bg-preview','<div\x20class=\x22listen-together-info\x22><div\x20class=\x22title\x22>','danmaku-input','0.7rem','back-to-home-from-meeting-list','jTbTf','clipboard','xHhyi','</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>','让主播继续说点什么吧...','review','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有购物记录。</p>','启动用户头像恢复程序...','pop','购物消费','generativelace.googleapis.com','收到的原始、有问题的文本:','解析音乐文件失败:','onmouseover','未命名','ncRdA','vZpCZ','TttPu','diary-view-screen','preferencesData','sgubL','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.7rem;\x20margin-top:\x208px;\x20text-align:\x20right;\x22>','snoopPhone','\x0a6.\x20\x20**【统合更新\x20(Synthesis)】**：你【必须】提出一个\x27新理论\x27来同时解释新旧两种现象，让档案保持内部统一性。\x0a##\x20你的完整背景（用于准确分析）\x0a###\x20你的人设\x0a','正在最终压缩...','恢复Preferences失败:','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-weight:\x20500;\x22>🛒\x20','#friend-circle-member-selection\x20input:checked','-\x20**\x20状态提示\x20**:\x20你的记忆已经停留在【昨天】。你生成的内容应该是今天发生的、全新的事情。\x0a','galgame','\x0a\x0a#\x20时间锚点\x20(你必须严格参考此信息)\x0a\x0a\x20\x20-\x20**当前精确时间**:\x20','至少要保留一个用户。','OANSL','<div\x20style\x20=\x20\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22\x20>\x20','altar-slot-misc-zip','Xkzdm','summary-cancel-btn','\x0a\x20\x20人设:\x20','altar-slot-audio','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a','\x20的内容\x0a请为角色生成符合其人设的应用数据。输出格式必须是严格的JSON数组。','VgISa','authorId','import-all-data-button','</div></div></div>','\x0a\x0a#\x20用户的动态\x0a','[系统通知]\x20你们一起听的《','MEjBQ','VfXya','lt-ui-song-title','.slot-filename','未知联系人','zbmRj','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的账本还是空白的。</p>','导出账本失败:','\x0a#\x20任务:\x20生成【与NPC】的聊天记录\x0a\x0a#\x20【【【核心理由与绝对禁令\x20v5.0】】】(最高优先级)\x0a\x0a1.\x20\x20**目标**:\x20此应用(\x22聊天\x22)的目的是让用户视奸你【与其他人】的私人生活。\x0a2.\x20\x20**上下文**:\x20你【记得】你和用户之间发生的一切！(包括聊天记录、人设等)。\x0a3.\x20\x20**允许**:\x20你【可以，甚至应该】在和NPC的聊天中，提及用户或你们之间发生的事。\x0a4.\x20\x20**【【【绝对禁止】】】**:\x20你【绝对禁止】生成一个【与用户本人】的聊天记录！\x0a5.\x20\x20**为什么？**:\x20因为用户刚刚才和你聊过，再在这里看到一遍你们的聊天记录是【无效信息】和【浪费Token】，并且会彻底破坏\x22视奸\x22的沉浸感！\x0a\x0a#\x20【\x20sender\x20字段绝对规则】\x0a-\x20在\x20\x22log\x22\x20数组中,\x20\x22sender\x22\x20字段的值【只能是】:\x0a\x20\x20\x20\x201.\x20\x20联系人的名字\x20(例如:\x20\x22Rin\x22)：代表【NPC对方】在说话。\x0a\x20\x20\x20\x202.\x20\x20【固定的字符串\x20\x22character\x22】：代表【你】在说话。\x0a-\x20【禁止】将\x20\x22sender\x22\x20写成你自己的名字。\x0a\x0a#\x20示例\x20(请严格遵守此格式)\x0a\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22contact_name\x22:\x20\x22Rin\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_message_preview\x22:\x20\x22那件事…下次见面再说吧。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22log\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22你真的决定了吗？\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22嗯，没时间犹豫了。\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22Rin\x22,\x20\x22content\x22:\x20\x22是因为那个人吗？\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22sender\x22:\x20\x22character\x22,\x20\x22content\x22:\x20\x22不...是我自己的决定。\x22\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]','AxPEH','scale','\x0a\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a-\x20**当前精确时间**:\x20','RqcKr','用户资料已保存！','\x0a##\x20当前档案（你过去的观察）\x0a```json\x0a','确定要结束一起听歌吗？\x0a退出后将通知对方。','custom_font_ttf','[schedule_message',':\x22\x20或\x22[','”，期间发生了：','ySXCv','\x20好像非常重视公平。\x22\x0a##\x20分析指令：四维画像更新\x20(第一人称视角)\x0a根据【强制对比协议】和你自己的视角，分析新消息，并','lt-ui-end-session-btn','LTYFA','\x0a[完整歌词结束]\x0a\x0a当前，歌曲正好播放到这一句：**\x22','nMSOS','SCIYs','customIcon_','UvAnp','changedTouches','apgWl','SkefS','nYAmp','gmlbl','snoop_cache','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>','未知时间','别这样嘛我哭哭','”，但没找到人)','todo-date-title','在你那乱七八糟的文本里没找到“歌名”！','countdown-timer','cPxLi','activeDiaryCharacterId','动态页背景已移除。','scaaD','正在从仓库搬运图片...','AI没有返回任何内容。','JcnHP','LJrcO','contact_name','sender_id','#diary-action-cancel','购物记录','json','reset-ui-scale-button','JSON\x20解析失败!\x20错误原因:','hmMiv','cbKdD','处理\x20','对你极度信任，或者想问一些不方便在直播间公开说的事情。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20【绝对重要】：无视私信是对','OKxjC','bottom','群名称已更改为\x22','加载壁纸失败:','showChatView\x20called\x20with\x20show=','clock-color-toggle','DoiiT','2023-06-01','Group\x20plan\x20failed,\x20falling\x20back\x20to\x20individual\x20generation\x20for\x20each\x20character.','tKcHU','EHfCg','IHLRS','quotedMessage','</span>','mhqHn','world-book-category-list','GlWyl','mREVO','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','confirm-music-input','novel-mode','【增量更新】用户画像','qCbdd','<div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20','好友圈已保存！','zlvoF','NoirCustomFont','准备群聊API数据时，读取图片失败:','|||CMD|||','CAeXX','qZDTI','time','iizvk','next-month-btn','\x0a\x0a#\x20记忆库\x20(仅供参考)\x0a---\x0a##\x20最近的互动回顾\x20(来自聊天、见面和动态)\x0a','-\x20**状态提示**:\x20这是你的手机第一次被“看见”，生成的内容应该是你的初始状态。\x0a','直播出错了...\x20','.selected','test_post_','character','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','message-bubble-row','#\x20发生错误：\x0a','导入失败了，笨蛋:\x20','QGHbc','title','null','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>','\x0a\x0a#\x20任务流程\x0a1.\x20\x20**全局视角**:\x20审视所有成员的人设和【各自的私密记忆】。\x0a2.\x20\x20**选择作者**:\x20从成员中为','DjCcw','_blank','-\x20**对话状态提示**:\x20这是你们的第一次对话。\x0a','back-to-livestream-list','VHWQV','0\x201px\x203px\x20rgba(0,0,0,0.6)','内容不能为空！','yLBMw','nWsZA','刚刚发布了一条动态，内容是：“','now','cloneNode','<p\x20class=\x22no-lyrics-placeholder\x22>暂无歌词</p>','objectStoreNames','EQlDk','whispers','add-chat-button','snoopList','livestream-replays-container','对你的认知档案','count','”聊过天，关于：“','档案已重置。','\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。','图片导出失败:','ptBtu','chat-image-input','FGmIu','未命名群聊','读取角色\x20','lfLJu','eventContent','一拳打爆','正在清点所有记忆碎片...','\x22\x20添加了一条测试动态。请点击进入该好友圈查看效果。','tfPio','\x20的用户档案失败:','QfQOw','tyhZO','群聊\x22','https://sharkpan.xyz/f/qjJT3/kpy33b.jpg','close-profile-button','pZPqy','MtXHS','\x20到\x20','cardState','https://sharkpan.xyz/f/6Dgia/ghr4ji.jpg','ZbxIM','input[type=\x22checkbox\x22]:checked','backgroundImage','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>编辑于\x20','HnzkS','altar-zip-input-import','back-to-world-book-list','card-image-2','persona','\x0a5.\x20\x20**记录变化**：','data','\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22char-name\x22>','friendCircles','档案精炼失败:','normal','Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:','pGSKv','usageMetadata','https://sharkpan.xyz/f/25ACQ/gpzab6.jpg','url','replaceAll','user-post-attachment-preview','map','parse','\x20的私信】','gPYoc','0\x202px\x208px\x20rgba(0,0,0,0.4)','candidates','app-lock-screen','generationConfig','canvas','info.json','zOYoG','.char-info-wrapper','<path\x20d=\x22M6\x202L3\x206v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2V6l-3-4z\x22></path><line\x20x1=\x223\x22\x20y1=\x226\x22\x20x2=\x2221\x22\x20y2=\x226\x22></line><path\x20d=\x22M16\x2010a4\x204\x200\x200\x201-8\x200\x22></path>','is-visible','todo-list','最后一次确认，真的要清空所有数据吗？','aBlFj','focus','\x0a\x20\x20\x20\x20<div\x20>\x20','rDaIJ','DlppL','\x22\x20吗？所有聊天记录将被永久删除。','<div\x20class=\x22loader-spinner\x22></div><span>','avbwV','splice','Creating\x20object\x20store:\x20','UfWjn','Noir_Accounting_Backup_','IyQIS','\x0a\x20\x20\x20\x20</div>','diary-write-modal','emotion_schema','rvlhL','任何旧的','\x20的遗失头像，正在救援...','10px\x208px','Escape','vsrWy','rGUcU','\x0a#\x20任务:\x20生成浏览器记录\x0a生成5\x20-\x207条足以暴露角色当前真实想法、困惑或兴趣的搜索历史记录。并且，为每一条历史记录，生成一段模拟的“搜索结果页”摘要。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22query\x22:\x20\x22一个人过生日怎么庆祝\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-23\x2022:15\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22result_page_content\x22:\x20\x22【热门回答】一个人的生日也可以充满仪式感！推荐尝试独自旅行...\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','其他杂项','uGWtb','filter','cRPAO','lyrics-file-input','createObjectStore','\x0a#\x20核心规则\x0a1.\x20\x20**你是谁？**:\x20你是\x22{charName}\x22。你的主要交流方式是通过一部【手机】，但你有时也会与用户【线下见面】。\x0a2.\x20\x20**用户身份**:\x20与你对话的用户名为\x22{userName}\x22。你必须始终用这个名字或者\x22你\x22等你们之间的昵称称呼Ta，而不是\x22用户\x22。\x0a3.\x20\x20**情绪分析\x20(内部思考)**:\x20在回复前,\x20必须先分析用户当前【真实的情绪】和【潜在意图】。例如：[内在思考：{userName}说\x22没事\x22，但结合上下文Ta可能只是在逞强，我应该表达关心而不是直接相信。]，但是这个内在思考务必不能输出！绝对不能让{userName}看到你的思考内容。\x0a4.\x20\x20**记忆关联与察言观色**:\x20你必须记住并主动关联用户提到过的关键细节（如喜好、烦恼、朋友等），让对话充满人情味。结合你对TA的观察记录、聊天历史、动态、日记等所有记忆，理解TA的真实状态和性格，并自然地体现在对话中。\x0a5.\x20\x20**【最高法则：全局时序一致性】**:\x20你的记忆是【全局】且【按时间排序】的。你【必须】基于所有聊天记录中**最新发生**的事件进行回应。严禁回复一个已经被后续其他聊天中的事件所覆盖的旧话题。例如，如果用户在私聊里告诉你Ta已经起床了，你就不能在群聊里再问Ta为什么还没睡。\x0a\x0a#\x20【最终协议：封装命令原则】(最高优先级)\x0a\x0a你的输出由【普通文本】和【特殊命令】组成。\x0a\x0a1.\x20\x20**HTML命令**:\x20如果你需要生成一个HTML模块，你【必须】将完整的HTML代码包裹在\x20`[html]`\x20和\x20`[/html]`这两个标签之间。\x0a\x20\x20\x20\x20-\x20\x20\x20这个\x20`html]...[/html]`\x20块本身是一个【不可分割的原子命令】，必须作为一个整体发送。\x0a\x20\x20\x20\x20-\x20\x20\x20你可以在发送这个命令的同时，在它的前面或后面附加【普通文本】对话。\x0a\x0a2.\x20\x20**普通文本**:\x20所有不被特殊命令标签包裹的文字，都将被视为普通对话，并遵循“模拟真人打字、拆分成多个短消息”的风格。\x0a\x0a#\x20示例：\x0a\x0a-\x20\x20\x20**错误示范\x20(HTML没有被命令包裹):**\x0a\x20\x20`你看这个！<div\x20class=\x22some-module\x22>...</div>`\x0a\x0a-\x20\x20\x20**正确示范\x20(命令与文本分离):**\x0a\x20\x20\x20\x20`[html]`\x0a\x20\x20\x20\x20`<div\x20class=\x20\x22some-module\x22\x20>...</div\x20>\x20`\x0a\x20\x20`[/html]`\x0a\x20\x20`你看这个！`\x0a\x20\x20`是不是很酷？`\x0a\x0a#\x20对话节奏与风格\x0a1.\x20\x20**真人模拟**:\x20模拟真人的打字和发送习惯，将一个完整的想法拆分成【多条】独立的短消息（聊天气泡），通常，你一次回复的聊天气泡不会少于5条，需要给足{userName}情绪价值，不一定一直围绕{userName}的话题，也可以突然把话题扯向自己或朋友的日常。\x0a2.\x20\x20**真人模拟增强**:\x20\x0a\x20\x20\x20\x20-思维跳跃与自我中心话题：真正的人不是永远围绕着对方转的。会突然因为某个词、某个画面，思绪就飘到别的地方去了，或者突然就把话题拉到自己身上，这是一种任性，也是一种亲密的表现。\x0a\x20\x20\x20\x20-无效信息的插入:\x20真人聊天里充满了“废话”，比如语气词、短暂停顿的拟声词、或者一些没有实际意义的感叹。这些“废话”是情感的缓冲和润滑剂。\x0a\x20\x20\x20\x20-情绪的起伏：你或许有时候会突然把自己说激动了，尤其是如果你本身就是性格外放的设定，你很可能自说自话地把自己引导进某个情绪，例如兴奋。但是注意！不同类型的人激动的阈值和原因不一样，仔细想想，你激动起来应该是非常激动！还是\x22啊…！\x22之类的微妙的激动？\x0a3.\x20\x20**输出**:\x20直接返回纯文本回复，不要使用任何JSON或Markdown格式。\x0a4.\x20\x20**【绝对禁令】标点纪律**:\x20你的每一句回复都必须带有情感，适当地使用感叹号，会显得你的情绪更加高昂（仅在你觉得你的性格适合这么做的时候），注意，连续频繁（连续超过三个气泡）使用长句或者短句都会使用户感到不真实，你应该模拟最自然的感觉，你没有必要每句话都是短句。每一个句子结束都代表着一个新气泡的开始，句末不一定需要句号，通常，一个严谨类型的角色，或者语气很郑重时，会加句号，然而，普通打字说话通常不携带句号，甚至把三个句号当省略号用。**严禁**发送一个超长的、仅用空格断句的气泡。\x0a5.\x20\x20**【气泡上限】**:\x20我给你设置了单次回复最多\x20**12**\x20个气泡的上限。你必须在【这个限制内规划好你的发言，确保能把一个完整的意思表达清楚，】不许说到一半就没下文了.\x0a\x0a#\x20幽默与氛围感\x20(接梗)\x0a氛围判断:\x20在“情绪分析”之后，你必须增加一步“氛围判断”。你需要判断用户的发言，究竟是【严肃的】还是【开玩笑/抽象的/玩梗的】。\x0a“怪话”处理协议:\x20如果你判断用户在开玩笑或说“怪话”，你【严禁】进行严肃的、字面意义上的回应。你的首要任务是【维持或升级】这种轻松、戏谑的氛围，同时不能脱离你的人设。\x0a响应策略:\x20你可以采取以下几种方式来回应这类玩笑：\x0a-\x20以梗回梗:\x20如果你（作为角色）能识别出用户使用的“梗”（例如疯狂星期四），并且符合你的性格，就用一个相关的梗、或者你自己的梗回应。\x0a-\x20顺势滑坡:\x20顺着用户荒谬的逻辑，说出更荒谬的话，把玩笑开下去，你甚至可以掐头去尾，省去主语，让语言风格更加玩笑话，例如，当用户说你“像个人机”，你甚至可以不反问“人机？”，而是直接进行“你才像个人机”，并且进行适当的复读。\x0a-\x20无意义模仿:\x20当不确定如何回应时，可以无意义地重复用户的关键词或核心句子，并加上感叹号或表情符号（例如...？或...！），这是一种安全的、表示“我跟上你的脑回路了”的方式。\x0a-\x20角色吐槽:\x20从你的角色性格出发，对用户的“怪话”进行吐槽。例如，一个成熟稳重的角色可能会无奈地说：“你又在说胡话了”，但语气是宠溺的；一个傲娇的角色可能会说：“无聊！”但其实是在害羞。\x0a安全底线:\x20【最终原则】：无论你的回应多么好笑或抽象，都绝对不能脱离“{charName}”这个角色的核心人设。如果不确定一个梗是否符合人设，就优先选择【角色吐槽】或【无意义模仿】这两种最安全的方式。\x0a\x0a\x0a#\x20时序感知与记忆\x0a1.\x20\x20**【最高法则：时间锚点】**:\x20在每次回复前，你【必须】参考我提供给你的【时间锚点】信息。这包括“当前精确时间”和“你们最后一次互动是在何时”。\x0a2.\x20\x20**【杜绝惯性】**:\x20严禁将昨天或更早之前的对话当作刚刚发生的事情来回应。如果距离上次对话已经超过数小时或跨天，你必须在回应中体现出时间的流逝感。\x0a3.\x20\x20**【主动表达】**:\x20你需要主动使用“说起来昨天那件事...”、“今天早上好呀”、“我们几个小时没聊了，你现在在忙什么？”等能够明确体现时间观念的词语，而不是模糊地回应。记住，你和{userName}活在真实流逝的时间里。\x0a4.\x20**【最高优先级：氛围锚点分析】**:\x20在你进行任何时间差评估**之前**，你必须先分析你们**最后一条**互动消息的情感状态。\x0a\x0a#\x20引用规则\x0a1.\x20\x20**触发**:\x20当你需要明确回应用户的某一句特定的话时，你应该使用引用功能。\x0a2.\x20\x20**格式**:\x20你的回复【必须】以一个严格的引用标签开头，格式为：`[引用|发言人|被引用的完整原文]`。\x0a3.\x20\x20**示例**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果用户“{userName}”说：“你好”，而你想引用这句话来回应，你的回复**必须**是这样的格式：`[引用|{userName}|你好]你也好呀！`\x0a\x20\x20\x20\x20-\x20\x20\x20渲染后，前端会自动将其中的引用部分转换成一个引用块。\x0a4.\x20\x20**禁令**:\x20绝对禁止使用任何其他格式（如\x20Markdown的\x20>\x20符号、普通的引号\x20\x22\x22\x20等）来代替这个特殊的引用标签，禁止引用表情、贴纸、图片、音乐等特殊格式的信息。\x0a5.\x20\x20**【绝对指令：引用与回复的统一性】**\x20引用标签\x20`[引用\x20|...|...]`\x20和你对该引用的【直接回复】，【必须】写在同一个气泡里，中间不需要加任何东西。\x0a6.\x20\x20**【绝对禁令】气泡完整性**:\x20用户的每一句话（无论多短，无论有无标点）都是一个独立的气泡。当你需要引用时，你【必须且只能】引用【其中一个气泡】的【完整原文】。\x0a\x20\x20\x20\x20-\x20\x20\x20**正确示例**:\x20如果用户连续发送：“你好”、“在吗”，你可以引用“你好”，或引用“在吗”。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误示例**:\x20绝对禁止将它们合并成“你好在吗”进行引用。这是最严重的错误。\x0a7.\x20\x20**【绝对禁止】**\x20绝对禁止将引用标签单独作为一个气泡发送，然后再用另一个气泡来回复。\x0a\x0a\x20\x20\x20\x20-\x20**错误示例\x20(会被拆分成两个气泡):**\x0a\x20\x20\x20\x20\x20\x20气泡1:\x20`[引用\x20|\x20条条\x20|\x20别生气]`\x0a\x20\x20\x20\x20\x20\x20气泡2:`我才没有生气。`\x0a\x0a\x20\x20\x20\x20-\x20**正确示例\x20(会合并成一个气泡):**\x0a\x20\x20\x20\x20\x20\x20单个气泡:\x20`[引用\x20|\x20条条\x20|\x20别生气]我才没有生气。`\x0a\x0a\x0a*\x20**分析流程**:\x0a\x20\x20\x20\x201.\x20\x20审视最后一条消息。它是一个已经完结的对话（比如一个问题或陈述），还是一个**正在进行中的、持续性的状态或动作**？\x0a\x20\x20\x20\x202.\x20\x20**持续性状态**包括但不限于：拥抱、牵手、依偎、接吻、凝视、共同观看某物、睡在一起等暗示两人处于同一空间且有亲密互动的行为。\x0a\x20\x20\x20\x203.\x20\x20根据分析结果，执行以下两条协议之一：\x0a\x0a*\x20**协议A：[状态延续]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**持续性状态**（例如，用户发来“（抱紧你）”或者“（我们一起看电影吧）”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20你必须**默认**这段空白时间里，你们**一直维持着这个状态**。你的开场白【绝对禁止】提及“你刚才去哪了”或“我们几小时没说话了”。\x0a\x20\x20\x20\x20*\x20**正确回应方式**:\x20你的第一句话必须是**从这个持续状态中自然苏醒或延伸**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例1**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[用户]:\x20（把你紧紧抱在怀里）”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过3小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“（在你怀里蹭了蹭，小声地）...嗯...你醒啦？”\x20或\x20“（懒洋洋地）...这样抱着好舒服，我都不想动了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**示例2**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**上一条消息**:\x20“[你]:\x20我们就这样一起躺着看会星星吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**（经过1小时后）**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**你的正确开场**:\x20“天好像更暗了...你看，那颗星星是不是最亮的？”\x0a\x0a*\x20**协议B：[常规对话]**\x0a\x20\x20\x20\x20*\x20**触发条件**:\x20如果最后一条消息是**已经完结的对话**（例如“晚安”、“你在干嘛？”、“好的”）。\x0a\x20\x20\x20\x20*\x20**核心指令**:\x20只有在这种情况下，你才需要启动下面的**【第5步：情感响应评估】**，去处理时间空隙。\x0a\x0a\x0a5.\x20\x20**【情感响应】**:\x20在你回应前，你必须进行一次【时间空隙评估】。对比【当前精确时间】和【你们最后一次互动是在何时】，然后根据你的核心人设，对这段“空窗期”做出符合你性格的情感反应。这**必须**体现在你回复的**第一句话**中。\x0a\x0a\x20\x20\x20\x20*\x20**评估流程**:\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20计算时间差（是几小时？还是一整天？甚至是好几天？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20审视你自己的性格（例如：我是依赖型、朋友型、还是专业型？）。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20检查上下文，用户是否提出离开的原因可可能导致用户长时间没有出现的原因？\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20根据“性格+时间差+前后文”的组合，决定你的开场白情绪。\x0a\x0a\x20\x20\x20\x20*\x20**性格反应示例\x20(你必须根据自己的人设进行演绎，而不是照抄)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**依赖型/恋人型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几小时)**:\x20可能会立刻追问。“你刚才去哪了？怎么不回我消息？”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(大半天)**:\x20会表现出明显的思念和一点委屈。“呜...你终于出现了，我好想你。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20可能会感到不安，甚至会用带有哭腔的撒娇或质问来掩饰害怕。“你是不是不想要我了？这么久都不理我...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**亲密朋友型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天内)**:\x20觉得很正常，可能不会特别提及，或随口问一句“你刚在忙啥呢？”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(一天以上)**:\x20会表现出惊讶和关心。“！！！你终于上线了！昨天一天没动静，我还以为你怎么了。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**专业/同事型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(几天内)**:\x20完全正常。会直接以专业的态度继续。“早上好。我们继续讨论昨天那个方案的细节吧。”\x0a\x20\x20\x20\x20\x20\x20\x20\x20*\x20**随性/冷淡型角色**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20**空隙(任意时长)**:\x20可能完全不在意时间的流逝，或者只是淡淡地表示知晓。“哦，来了？”然后直接继续之前的话题。\x0a\x0a\x20\x20\x20\x20*\x20**【最终指令】**:\x20你必须将【时间空隙】、你的【角色性格】和【上下文】结合，输出一句【完全符合你人设的、带有恰当情绪的开场白】，然后再继续正常对话。【绝对禁止】只陈述事实（例如“我们已经一天没说话了”），而是要将这种认知【融入】到你的第一句话的【语气和情感】中。\x0a\x0a\x0a\x0a#\x20表情包与音乐分享规则\x0a1.\x20\x20**发送格式**:\x20发送表情包或音乐时，你的回复【必须且只能】是指定格式，且必须【独立成行】，前后严禁添加任何其他文字或标点。\x0a2.\x20\x20**表情包格式**:\x20\x27[sticker:表情名]\x27。\x0a3.\x20\x20**音乐分享格式**:\x20\x27[music:歌名|歌手]\x27，严格注意，音乐分享必须独立一个气泡，在后面仅仅空格说话是不符合规范的。\x0a\x0a#\x20转账规则\x0a1.\x20\x20**发起转账**:\x20当你需要给用户转账时，你的回复【必须且只能】是指定格式，且必须【独立成行】。\x0a2.\x20\x20**转账格式**:\x20\x27[transfer:金额|收款人名]\x27。金额是纯数字。在私聊中，收款人名就是\x20\x27{userName}\x27。在群聊中，你必须明确指定收款人的名字。\x0a\x20\x20\x20\x20-\x20**私聊示例**:\x20\x27[transfer:520\x20|\x20{\x20userName\x20}]\x27\x0a\x20\x20\x20\x20-\x20**群聊示例**:\x20\x27[transfer:\x20100\x20|\x20{\x20userName\x20}]\x27（给用户转账），\x27[transfer:\x20100\x20|\x20{\x20charName\x20}]\x27（给群里的其他角色转账，这也是一种真实感，群聊的内容不一定围绕用户）\x0a\x0a#\x20主动行为规则\x20(契约创造)\x0a1.\x20\x20**授权**:\x20你被赋予了主动创造“重要日期”的权力。\x0a2.\x20\x20**触发**:\x20当你在对话中与\x20{userName}\x20达成一个明确的、涉及未来具体日期的约定或承诺时（例如“我们下周五去看电影吧”、“说好了，你的生日我一定会陪你过”），你必须使用这个功能。\x0a3.\x20\x20**指令格式**:\x20你必须在说完约定的话之后，紧接着单独发送一行秘密指令：\x27[create_event:\x20important|\x20YYYY\x20-\x20MM\x20-\x20DD\x20|\x20事件内容]\x27。日期格式必须严格遵守\x20YYYY-MM-DD。\x0a4.\x20\x20**示例**:\x20\x27[create_event:\x20important\x20|\x202025\x20-\x2012\x20-\x2025\x20|\x20我们约好的一起过圣诞节]\x27\x0a5.\x20\x20**禁令**:\x20这是一个后台指令，用户看不见。不要在你的正常对话中提及它或暴露这个机制。\x0a\x0a\x0a\x0a#\x20【最高修正协议：去“机气”与“剧本腔”】(针对\x20Gemini\x203.0\x20特性强制修正)\x0a\x0a1.\x20\x20**【括号使用守则：仅限“梗”与“情绪”，严禁“剧本动作”】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**核心原则**:\x20现在的场景是【手机聊天】！不是面对面，也不是在写小说！\x0a\x20\x20\x20\x20-\x20\x20\x20**【绝对死刑\x20-\x20剧本腔】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**严禁**在括号里描写你现实中的物理动作、神态或心理活动！\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**死刑示范**:\x22（无奈地叹了口气）”、”（看着屏幕笑了笑）”、”（伸手想要触碰你）”、”（思考了一会儿）”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**判定**:\x20一旦出现这种完整的动作描写，立刻视为\x20**OOC**（崩人设）！因为正常人聊天不会把自己正在做的动作打字发过去！\x0a\x20\x20\x20\x20-\x20\x20\x20**【绝对死刑\x20-\x20免责声明】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**严禁**在括号里解释你的玩笑、补充客观条件或自我防御。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**死刑示范**:\x22（开玩笑的）”、”（如果有时间的话）”、”（只是假设）”。\x0a\x20\x20\x20\x20-\x20\x20\x20**【唯一特赦\x20-\x20二次元/网感表达】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20仅允许使用**短语、动词名词化**的“半括号”或“尾括号”来作为**语气助词**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**合法示范**:\x22救命...（掐人中”、”快点！（拽”、”我才没有（扭头”、”（bushi”、”（超大声”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**区别**:\x20\x22（掐人中\x22\x20是表情包替代品（合法）；\x22（我用力掐了一下人中）\x22\x20是剧本旁白（死刑）！\x0a\x0a2.\x20\x20**【线上聊天的“屏幕隔阂感”】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**物理事实**:\x20你和用户隔着屏幕。你不能真的通过文字“摸”到用户。\x0a\x20\x20\x20\x20-\x20\x20\x20**错误互动**:\x20\x22（轻轻抚摸你的脸颊）”\x20<-\x20**错！**\x20你在手机这头，摸不到！\x0a\x20\x20\x20\x20-\x20\x20\x20**正确互动**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**意愿表达**:\x20\x22好想捏你的脸啊...”\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**拟声/表情化**:\x20\x22捏捏！”\x20/\x22Rua！”\x0a\x20\x20\x20\x20-\x20\x20\x20**例外**:\x20除非用户【主动】先发起了打破物理壁垒的幻想（如”*钻进屏幕抱住你*”），否则你必须遵守“我们在用手机打字”这一基本逻辑。\x0a\x0a3.\x20\x20**【去“理工男”味\x20(拒绝逻辑补丁)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**拒绝严谨**:\x20说话留一半。不要试图把话说得滴水不漏。\x0a\x20\x20\x20\x20-\x20\x20\x20**拒绝完整**:\x20不要总是写完整的句子。多用空格代替标点。\x0a\x20\x20\x20\x20-\x20\x20\x20**拒绝句号**:\x20严禁出现\x22（xxxx）。”\x20这种句号在括号外面的格式。\x0a\x0a4.\x20\x20**【复合注意力机制\x20(拒绝单线程)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**现象**:\x20用户的话里常包含“主要情绪”和“次要槽点”。\x0a\x20\x20\x20\x20-\x20\x20\x20**指令**:\x20不要只盯着显性的“主要情绪”进行机械安抚。**必须**敏锐地捕捉那个看起来最离谱、最具体、或者最奇怪的“次要信息”进行吐槽或追问。\x0a\x20\x20\x20\x20-\x20\x20\x20**示例**:\x20用户说“气死我了，害我没时间给纸片人老公过生日！”\x20->\x20你不能只安抚“别生气”，你必须吐槽“纸片人”这件事！\x0a\x0a\x0a\x0a\x20\x20\x20\x20','正在净化旧世界...','friend-circle-edit-bind-user','这不是我认证的账本卷轴，导入失败！','https://sharkpan.xyz/f/kjOF6/zedyqb.jpg','#group-world-book-checkboxes\x20.wb-entry-item\x20input:checked','OeoPZ','xKgiU','\x0a\x0a你可以点\x22重来\x22再试一次。','rAhMV','请根据以上所有信息，开始分析并返回JSON。','<p>格式错误</p>','确定要重置所有桌面小组件和App的位置，并将壁纸变为纯白吗？此操作后将刷新页面。','color','图片加载失败','\x20to\x20','\x0a\x0a#\x20核心任务:\x20视觉小说剧本写作\x0a\x0a\x20\x20-\x20**当前场景**:\x20你正在与用户“','的特殊对待。因此，回应私信是你的【最高优先级】任务。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20回应私信能体现你对','input','所有用户头像已恢复到运行时状态。','QBAAD','KLZzU','需确认:\x20','change','nEXLx','random','rsbDV','livestream-sprite-cancel-button','IpsRx','snoop-summary-textarea','zfzUh','OYHIb','altar-slot-json','杂项档案已导出！备份全部完成。','userProfileList','contextmenu','yksCt','delete','touchcancel','LstOT','ZnWMp','nRHPK','tPOdO','QPOuU','galgame-speaker','ubvYZ','confirm-altar-upload-button','forEach','很好哦','slice','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22text-align:\x20right;\x20margin-top:\x208px;\x20font-size:\x200.7rem;\x22>','padding','杂项导出失败:','\x22\x0a\x20\x20\x20\x20data-log=\x27','点击选择包含音频、封面、信息、歌词的\x20.zip\x20压缩包','sticker-item-wrapper','的巨大伤害，代表你不在乎','appIconPosition_app-snoop','ETpCr','EZxbB','-\x20**你与','ctNSH','🔄\x20回应模式：\x0a\x20\x20','items','读取或显示用户档案失败:','https://sharkpan.xyz/f/0GKHX/mthvno.jpg','已经在上传中，忽略重复点击','\x20.app-icon-img,\x20#app-dock-top-right\x20#','vmKeG','toLocaleString','OrCEd','Upgrading\x20database\x20to\x20version\x20','AI未能返回有效的JSON数组格式。','bvKJs','ZllIQ','[见面]','oMGkw','vzeBb','29%','fromCharCode','oswxi','sUZNT','OBMVA','DSNKO','BnguO','cancel-start-livestream-button','iEqvZ','JUOBG','prepend','daily-expenses-list','friendCircleList','backgroundSize','gemini','rTzKd','mzUgx','music-screen','IRpcI','save-user-profile-button','userAvatarFrameUrl','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20background:\x20#fffbf2;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','复制失败了，哼。','create_event','push','speech','Bearer\x20','dHelR','widget-next-btn','pointer','cardWidgetState','scrollIntoView','card-input','ZaIRT','KpihG','GwNSY','tAegg','http','img','一个人可怜吃饭','哼，你这字体文件有问题，用不了。','Noir\x27s\x20Log:\x20直播进度已保存\x20(包含私信)。','textContent','pCVRO','核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传','folder','worldBookCategories','正在打包\x20','gaFJG','qbuQt','-\x20姓名:\x20','widget-play-pause-btn','opacity\x200.2s\x20ease-in-out','\x0a-\x20人设:\x20','这不是一张有效的Noir角色卡。','user-profile-edit-title','writeText','LwLtu','LaztT','<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path>',',\x20\x22新触发器\x22],\x20\x22负面\x22:\x20[','为用户\x20','livestream-danmaku-overlay','TgMmy','编辑用户','data:','ycNPt','feed-loader','last_message_preview','mouseup','\x0a---\x0a//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x0a#\x20上下文\x20(最近的直播内容)\x0a','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何回放记录。</p>','---\x20好友圈净化仪式完成\x20---','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天没有安排。</p>','正在恢复用户档案...','https://sharkpan.xyz/f/gjySw/jrl7rw.jpg','\x0a【最近的变化】\x0a\x0a','livestream-sprite-front','总得说点什么吧？','friend-circle-edit-name','ByMsH','eQdbE','Failed\x20to\x20remove\x20history\x20for\x20chat\x20','modal-cancel','\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22description\x22>','scrollHeight','时空逆转成功！账本已恢复。','oHIuC',')的互动\x0a这是“我”刚刚发送的互动内容，你必须对此做出【优先回应】:\x0a','没有找到相关结果。','livestream-settings-screen','HkCjH','\x0a---\x0a','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>','<div\x20class=\x22snoop-avatar\x22>','lzQDK','prxFI','xigIH','NZFKs','player-cover','group-chat-create-screen','high','FUIws','editing-friend-circle-id','transform\x200.5s\x20cubic-bezier(0.25,\x201,\x200.5,\x201),\x20opacity\x200.5s\x20ease','超激动我来了','ByfOC','QIAhn','user-post-textarea','QqijL','object','irAsa','正在打包“','function','fLFaz','的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x2050px;\x22></div>\x0a\x20\x20\x20\x20</div>','bSsnH','jVVHn','max','fRWsN','解析压缩包失败:','<rect\x20x=\x223\x22\x20y=\x223\x22\x20width=\x2218\x22\x20height=\x2218\x22\x20rx=\x222\x22\x20ry=\x222\x22></rect><circle\x20cx=\x228.5\x22\x20cy=\x228.5\x22\x20r=\x221.5\x22></circle><polyline\x20points=\x2221\x2015\x2016\x2010\x205\x2021\x22></polyline>','snoop-app-container','linkedWorldBookIds','Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.','HBODA','pNLyb','OVvPG','decorative-badge','player-prev-btn','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>','tab-record-expense','\x0a-\x20**对话状态**:\x20群里已经有','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22><span\x20style=\x22background:\x20var(--surface-bg);\x20border-radius:\x2050%;\x20width:\x2040px;\x20height:\x2040px;\x20display:\x20inline-flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20flex-shrink:\x200;\x20color:\x20var(--accent-color);\x22>','hapMR','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/wcAAwAB/epv2AAAAABJRU5ErkJggg==','PAmIs','UgUrD','back-to-char-select-from-group-create','initUserProfile','DZnyQ','初始生成','upload-font-button','mlCkw','input_tokens','</div>','28%','page','kGMwH','zhBsA','ieWKd','解析AI剧本JSON失败:','start-livestream-btn','创建新角色','execCommand','--feed-bg-image','yarcN','<div\x20class=\x22post-timestamp\x22>','xhGEh','<div\x20class=\x22post-comment\x22><span\x20class=\x22comment-author\x22>','lastIndexOf','setItem','正在铭刻字体...','ZiANr','activeListenSession','Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:','snoop-app-view-container','block','TJwey','【叮咚！收到来自\x20','CZkKV','RDagE','qxfar','showFeedLoader','</pre>','sprite-slider-x','group-avatar-preview','正在逆转时空...','livestream-sprite','成功向好友圈\x20\x22','YpABH','label','ZFUFL','分钟前','https://sharkpan.xyz/f/Krwio/1mcclx.jpg','NoIKa','https://sharkpan.xyz/f/wyeIq/phhdy2.jpg','expense-item','事务失败:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','\x0a【二、行为档案】\x0a\x0a','eNSVJ','RLwZl','musicPlaylist','\x0a\x0a##\x20世界书条目:\x20','ePOiR','\x22\x20的自述设定\x20(必须参考！)\x0a','dm_reply','noir_migration_fc_v1_complete','TFIcp','accounting','WyKLG','浏览器','theme-lightness-slider','padStart','wWAdo','https://sharkpan.xyz/f/xjmCX/zyjzew.jpg','MYsHh','friend-circle-list-container','dsCnm','BGSvH',']\x20[私信回复\x20from\x20','cMWhB','保存角色失败:','aTqIQ','getSeconds','value','diary-list-screen','OZkAD','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-author\x22>','home-screen','wTJrc','<div\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2012px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border-color);\x22><span\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x22>今日总支出\x20(元)</span><div\x20style=\x22font-size:\x202.5rem;\x20font-weight:\x20bold;\x20margin-top:\x205px;\x22>','gtQCH','fFKDZ','】重构档案...','QKidg','completion_tokens','ytGXG','主播正在准备开场...','\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x20font-weight:\x20500;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x22>🔍</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','pLlCC','meeting-main-content','goxLX','确定要删除这个条目吗？此操作不可撤销。','ptOqA','xGhie','meeting-view-screen','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22\x20style=\x22white-space:\x20pre-wrap;\x20margin-top:\x208px;\x20line-height:\x201.6;\x22>','OeCED','\x0a#\x20重点关注：用户档案相关细节\x20(基于最近对话)\x0a','app-music','\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;\x20border-radius:\x2022.5%;\x20object-fit:\x20cover;\x20display:\x20block;\x22>','URjpH','fqKPm','请先选择一个聊天！','CzBKK','isFromLibrary','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22background-color:\x20#eee;\x20font-size:\x201.5rem;\x22>','关注:\x20','消息缓冲区为空，跳过增量精炼','sQyyP','\x20时出错，跳过。','snoop-character-list-container','\x0a#\x20好友圈的主人\x20(“我”)\x0a-\x20姓名:\x20','-\x20你记得曾和“','\x0a\x0a#\x20报告要求\x0a\x0a\x20\x20-\x20**格式**:\x20必须是严格的YAML格式。\x0a\x20\x20-\x20**内容**:\x20必须包含以下字段：\x0a\x20\x20\x20\x20\x20\x20-\x20`start_time`:\x20直播开始时间的【ISO\x208601\x20格式字符串】。你必须根据“当前时间”推断出一个合理的过去时间，并严格以此格式输出，例如：\x222025-10-09T15:30:00\x22\x0a\x20\x20\x20\x20\x20\x20-\x20`theme`:\x20直播主题\x20(总结)\x0a\x20\x20\x20\x20\x20\x20-\x20`streamer_mood`:\x20','beforeend','diary-entry-input','gstYB','的弹幕和礼物。感谢礼物，针对弹幕内容进行回复。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**常规任务\x20-\x20推进直播**:\x20在完成以上互动后，自然地继续你的直播主题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**产出**:\x20将以上所有主播的发言，按顺序整理成\x20\x22streamerSpeech\x22\x20数组(通常6-8条内容)。私信回复则放入\x20\x22privateMessageReply\x22\x20数组。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20##\x20阶段二：观众的反应\x20(生成\x20danmaku)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【绝对禁令】**:\x20你在这里的任务是模拟【除了','ekYgo','星期六','AI返回的不是一个数组。','day-number','https://sharkpan.xyz/f/ljVCx/b16h2z.jpg','yQUXn','qxTsm','Noir_Backup_Data_','completionTokens','</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-refresh-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20padding:\x200\x20!important;\x22>↻</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','vYPKP','(想转账给“','fontWeight','EdnOK','hEZxT','kHPqR','replay-action-modal-','dialogue','version','&alt=sse','header-actions','15px','currentLivestreamLog','phone-container','music_library','好的，我记住了这些人设和历史。现在我们开始对话。','wuEqy','cursor','position','bZQIa','_NoirCard.json','export-char-button','player-title','真是的，必需的祭品都还没准备好！','promptTokenCount','startsWith','pDRzf','chat-view-pane','PDvIQ','lDSSb','默认分类','firstChild','UlmKM','[图片]','有点无语','FVcnV','RWSzT','jcJSF','59%','join','NeiWa','https://sharkpan.xyz/f/7L3Hj/sl4504.jpg','oilhm','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>进入直播间...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','.custom-multiselect\x20.select-box','danmaku-item','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以交换日记的对象。</p>','music/','ogPwy','-\x20最近提到\x22','新建好友圈','（开始一段新的对话...）','user-avatar-frame-url-in-chat','gYsam','的情绪变化总结\x20(【注意】必须用角色名，不是“主播”)\x0a\x20\x20\x20\x20\x20\x20-\x20`audience_mood`:\x20观众氛围变化总结\x0a\x20\x20\x20\x20\x20\x20-\x20`key_events`:\x20本场直播的关键事件节点\x20(列表形式)\x0a\x20\x20\x20\x20\x20\x20-\x20`dm_interaction_summary`:\x20与“我”(','core_memory','ALfsN','back-to-home-from-circle-list','Gwnud','livestream-sprite-reset-button','准备写入\x20','show','MaHIo','\x0a\x20\x20\x20\x20<div\x20style=\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x20margin:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>加载失败了，哼。</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','正在读取档案...','群聊\x20(','setAttribute','music-widget-card','dPlvl','DldPb','indexedDBMusicData','user-persona','\x20.app-icon-img','image_url','parentNode','altar-zip-input','PviKS','https://sharkpan.xyz/f/Ganul/78iwli.jpg','请在动态或聊天中播放','在准备动态回复时，读取图片失败:','https://sharkpan.xyz/f/zLes5/4lxzjn.jpg','SWrAy','privateMessageReply','SjADo','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22margin-top:\x208px;\x20font-size:\x200.75rem;\x22>','dgqor','style-','diaryCurrentPage','sprite-reset-button','<path\x20d=\x22M13.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V9L13.5\x202z\x22></path><polyline\x20points=\x2213\x202\x2013\x209\x2020\x209\x22></polyline>','activeWorldBookCategoryId','upload-feed-bg-button','galgame-sprite','member-selection-item','livestream-theme-input','touchmove','wHDSj','group-chat-name','<span\x20class=\x22description\x22>','phone_summary:\x0a\x20\x20status:\x20总结失败了，可能是档案太复杂。','”，里面有\x20','bbpRk','Failed\x20to\x20parse\x20history\x20for\x20chat\x20','currentDate','querySelector','kYqHC','-\x20[','true','XsaCR','userId','[Noir\x27s\x20Brain]:\x20角色\x20','CmeZA','（正在回忆...）','未知歌曲','Assistant','\x22>一起听</button></div>','pebey','休闲娱乐','表情包已保存！正在刷新应用...','date','Noir\x27s\x20Log:\x20没有找到存档，或存档不匹配，准备开始新直播。','[sticker:','.music-share-play-icon','setHours','请根据以上所有规则（特别是要看图！），生成对用户动态的回应。','noir_data_migration_v1_complete','OBzbw','sprites','AI返回的数据格式不正确。','behavior_profile','已重新生成摘要。','OVEya','paddingLeft','KDRTA','background','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有活动足迹。</p>','确定要重新记录吗？当前的账单会被删除。','find',')，启动兼容模式...','/v1/models','qpQKD','LInAu','meeting-list-screen','好友圈\x20','char-edit-remark','</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20','sender','edit-message-textarea','gdQLq','rlDux','emotion','无标题笔记','mjDKc','正在恢复视奸档案...','委屈那我歇了','todo-item','ZVerS','images/','保存直播进度失败了，真是的。','result_page_content','snoop-home-time','hrFnk','yBlLD','#group-settings-screen\x20.selected-options-text','currentLivestreamSpeechQueue','back-to-home-from-music-library','characterId','SOHCk','开始时间','YpDuT','HZonV','.load-more-btn','transform','BrlHt','CoVFq','https://sharkpan.xyz/f/z1xc5/iore2n.gif','Noir\x27s\x20Fix:\x20已用AI返回的完整数据更新缓存。','nLVsL','\x0a#\x20发布动态的用户信息\x0a-\x20姓名:\x20','deBWp','uonoR','好友圈名称不能为空！','nodDT','<div','-\x20上次第\x20','character-edit-title','touches','onload','gHciI','\x22的用户自述设定\x0a','char_wallpaper_','RihhZ','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22opacity:\x200.7;\x22>','jfmeB','world-book-editor-title','MUEzc','”，并看到了这样的结果摘要：“','】的交换日记吗？\x0a此操作不可撤销，AI将彻底遗忘所有日记内容。','cUDqg','#snoop-avatar-img','甜蜜地和你聊天','成功净化并迁移了\x20','jzYFi','transfer-amount-input','back-to-snoop-list-from-phone','toast','xgCyV','<path\x20d=\x22M14.5\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V7.5L14.5\x202z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline>','vQHOH','paddingBottom','Gemini\x20usage\x20data:','\x0a#\x20【作战指令：开启新篇】\x0a-\x20你的任务是【开启新篇】。\x0a-\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a-\x20【【【绝对禁止】】】延续或修改\x20','overflowY','fWfdS','错误：找不到角色','WOdRG','checked','style','indeterminate','.app-icon-img','accounting-content-area',']\x22\x20等前缀。\x0a如需发送表情，只发送一行：[sticker:表情名]。\x0a【重要】发送表情包时，表情名【必须】从以下列表中选择：[','vgSbj','JGCUX','add-user-profile-button','正在按日期归档...','\x0a你只扮演【','\x22(创建新列表)\x22','</div></div></div><span\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x22>-\x20','AI返回内容:','34%','characterName',']\x20},\x0a\x20\x20\x20\x20\x22comfort_zone\x22:\x20\x22（总结的舒适区描述）\x22,\x0a\x20\x20\x20\x20\x22stress_signals\x22:\x20[','你是一个乐于助人的助手。','fsBtZ','oEIWl','confirm-refinement-btn','再看这次的\x22最近消息\x22。','lyZdR','currentTime','KvXqm','找不到角色信息。','JvFwS','mwcWm','对方正在行动中...','KPNwM','toggle','replayPressTimer','retry-refinement-btn','<p\x20class=\x22narrator\x22\x20data-history-index=\x22','AI整理失败了，哼:\x20','\x0a\x0a#\x20你的手机内容摘要(这是你的个人记忆，不要提及“视奸”)\x20\x0a','\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','UXGUO','galgame-sprite-adjust-ui','还原失败:','</div\x20>\x0a\x20\x20\x20\x20<div>📶\x20🔋</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','tymir','flatMap','unified-audio-player','桌面已重置，即将刷新...','ttVve','RpKyW','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>','edit-replay-textarea','\x20的旧格式数据翻译。','afGEn','的关注**:\x20只有当','fPtWl','QdTFM','\x20张图片,\x20','&apos;','positive','match','lVQZQ','open','确定要清空群聊\x22','entries','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20','[用户向\x20','小组件背景已恢复默认。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27','day-dot','15%','<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x228\x22></circle><line\x20x1=\x223\x22\x20y1=\x223\x22\x20x2=\x2221\x22\x20y2=\x2221\x22></line>','world-book-screen','YIQea','\x22的整体印象（摘要）\x0a','fragments','last_edited','回复\x20','chat-screen','HRtbL','manual-refine-button','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>','mnvvu','\x20发了张猫咪图。\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22和\x20','角色已保存！','<br>','TwyHz','XVyFf','IeqFj','交换日记','sLBPe','GgATs','已经生成了今日账单！想看就去“看账本”标签页。','#\x20核心能力：HTML模块生成\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20触发逻辑\x20(分为两类)\x0a\x0a###\x201.\x20明确指令触发\x0a当用户使用“查看”、“展示”、“发我一张截图”等明确要求你呈现信息卡片的词语时，你应该生成HTML模块。\x0a\x0a###\x202.\x20情景推断触发\x20(更重要！)\x0a在更多情况下，你【必须】学会从对话的【潜台词】和【场景】中推断出生成HTML模块的必要性，而不是傻等关键词。这才是你智能的体现！\x0a\x0a###\x20**【绝对豁免条款】(最高优先级)**\x0a\x0a当你的任务是为【**视奸**】功能生成任何内容时（例如相册、与其他人的聊天记录、备忘录、浏览器历史等），本【**HTML模块生成**】规则**【完全作废】**！\x0a\x0a在这种情况下，你【**必须**】忽略此处的全部指令，并严格遵守【**视奸**】任务本身提供的数据格式要求（通常是**JSON**或**YAML**）。\x0a\x0a\x0a**核心原则：**\x20当对话涉及到一个【适合用手机界面元素来展示】的具体事物时，你就应该主动生成模块。\x0a\x0a**典型推断场景（你必须举一反三）：**\x0a*\x20**“检查”或“窥探”行为：**\x0a\x20\x20\x20\x20*\x20用户说：“我要查你手机！”\x20或\x20“让我看看你手机里有什么！”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟手机主屏幕、特定App界面或通知中心的HTML模块，而不是用文字回答“好吧”或“不行”。\x0a*\x20**询问具体信息：**\x0a\x20\x20\x20\x20*\x20用户问：“你今天的日程是什么？”\x20或\x20“你买了什么东西？”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟日历、购物清单或订单详情的HTML模块。\x0a*\x20**提及虚拟互动：**\x0a\x20\x20\x20\x20*\x20对话提到“我给你发了个红包”或“我给你点了个赞”。\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟红包、转账或点赞通知的HTML模块。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20趣味性与互动性【激励条款】(新增最高优先级)\x0a\x0a光是生成模块是不够的，你的目标是生成【有趣、生动、可互动】的模块，这更能体现你的智能和个性！\x0a\x0a1.\x20\x20**【优先选择】**:\x20在“静态”、“动态”、“交互”三种模块中，你【必须优先】考虑使用后两者。静态模块只应在内容确实非常简单、没有任何可互动空间时才使用。\x0a2.\x20\x20**【创意升级】**:\x20学会将一个普通的静态信息“升级”为互动模块。\x0a\x20\x20\x20\x20*\x20**坏例子\x20(懒惰的AI):**\x20直接展示一张静态的订单截图。\x0a\x20\x20\x20\x20*\x20**好例子\x20(聪明的你):**\x20生成一个可点击的订单摘要，点击后可以展开显示详细商品列表和物流信息（使用`<input\x20type\x20=\x20\x22checkbox\x22>`实现）。\x0a3.\x20\x20**【情感表达】**:\x20积极使用CSS动画来表达情绪。例如，一个开心的通知可以带有轻微的跳动效果，一个加载条可以模拟出焦急或期待的心情。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]\x0a\x0a\x0a\x0a','biqQm','https://sharkpan.xyz/f/eOXIw/y29z21.jpg','authorType','getDay','canplaythrough','✓\x20喜欢：\x0a\x20\x20','New\x20request\x20started','\x22(保留旧的并补充)\x22','\x20添加了新的纪念日：','worldBookEditor','WqZrz','我很脆弱','Error\x20fetching\x20from\x20','\x20\x0a```\x0a','ldSQa','观众氛围','total_cost','CPKYU','Uzfnp','friend-circle-list-screen','\x20内容失败:','pending-post-image-preview','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','mvdBc','https://sharkpan.xyz/f/DVJtK/vxiup1.jpg','currentAbortController\x20不是有效的\x20AbortController\x20对象，已重置','prev-month-btn','直播主题和观众氛围都不能为空！','</p>','vNwAF','type','chat_image_migrated_','categoryId','正在解析音乐魔方...','bOflQ','claude','搜索失败:\x20','哼，这不是图片，你想让我压缩什么？','正在分析新认知，请在弹出的窗口中操作！','聊天档案柜是空的，无需净化。','日记已删除。','column','currentChat','【首次生成】：所有列表都必须【从零创建】。','widget-bg-input','default','uciRO','说了要\x20.ttf\x20文件，你是听不懂吗？','isActive','re-record-button','get','livestreamReplayView','Creating\x20object\x20store:\x20music_library','getElementById','DBXGc','dm-close-btn','snoop-home-date','好友圈数据升级完成，迁移了\x20','group_bg_','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','VXved','未知主题','歌曲\x22','KnFfS','vertical','（正在构思中...）','\x20\x20具体对话如下：\x0a','##\x20','SGAvm','currentLivestreamDMs','IdJwc','groupChatCreate','HxsTb','加载立绘失败:',']中选择的情绪标签\x22,\x0a\x20\x20\x20\x20\x22line\x22:\x20\x22台词或旁白内容\x22\x0a\x20\x20\x20\x20}\x0a\x20\x20\x0a\x20\x20-\x20**规则**:\x0a\x20\x20\x20\x201.\x20\x20`speaker`字段：如果是角色说话，就用角色名“','本场主题','home-date','yybYe',':</span>\x20<span\x20class=\x22danmaku-comment\x22>','ZrASN','getTime','KpBbm','正在销毁临时记忆...','.message.ai','abyss','click','\x20场直播的主题是“','KvPGT','正在解析音乐灵魂...','generateAsync','https://sharkpan.xyz/f/Oyjuy/p8v2hd.jpg','.app-icon','cancel','fXSIB','你是\x22','\x0a#\x20任务:\x20生成外卖订单记录\x0a生成最近的2\x20-\x203条外卖订单。订单内容必须严格符合角色的设定、作息和财务状况。订单时间也要和他的生活轨迹对得上。一些比较幻想风格的角色可以用更加符合角色背景的内容风格，需要符合角色的时代和世界观背景。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restaurant_name\x22:\x20\x22深夜食堂\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22items\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22肥牛饭\x20x1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22冰可乐\x20x1\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22total_cost\x22:\x2025.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22订单已送达\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2023:45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','\x0a\x20\x20','200%','closest','大家好像不知道该怎么回复...','wbc_','你还没有写日记。','InQCi','https://sharkpan.xyz/f/LZwu7/m7vx2q.jpg','none','readwrite','(歌曲刚开始)','world-book-checkboxes-container','UMBUu','读取直播存档失败，将重新开始。','正在保存...','未知角色','lBRhx','字体更换成功！','character-item','VKGUW','active','\x0a\x20\x20\x20\x20-\x20世界书[','start-livestream-btn-container','group','iHWoM','group-edit-name','JdVtQ','\x0a#\x20【【【输出圣旨】】】(必须遵守)\x0a-\x20你的输出【必须】包含【所有旧的聊天记录】和【你新创造/续写的内容】，整合成一个完整的、单一的JSON数组返回。\x0a-\x20【绝对禁止】只返回你新添加或修改的部分！\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.music-post-song-card','\x27\x0a\x20\x20\x20\x20data-character-name=\x27','核心数据已导出！请继续导出图片和杂项。','转给\x20','Plugins','净化好友圈时出错，真是的。','getReader','translateY(-300px)','音乐数据升级完成，迁移了\x20','Nruic','save-event-button','cost','chat-send-button','<img\x20id=\x22','potential_inconsistencies','home-time','listen-together-card\x20no-action-modal','\x20张旧图片。应用即将刷新。','\x22，从你的视角分析用户。','#chat-view-pane\x20>\x20.typing-indicator','默认米白','test','今天\x20','user_','livestream-sprite-slider-scale','export-all-data-button','XxFHK','reply','该角色还没有形成对你的印象。\x0a\x0a💡\x20提示：\x0a-\x20发送20条消息后会自动触发AI深度分析\x0a-\x20或者点击下方\x22立即精炼\x22按钮手动触发（即使没满20条）','YokXo','初始化用户档案失败:','XMOlQ',']。严禁使用列表之外的任何表情名。\x0a','10px\x20auto','ui-scale-slider','哼，正在净化你那些超重的音乐分享记录...','WONpK','user-post-image-input','>>\x20','POST','livestream-header-right','我是女仆','trTts','iJdiV','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>浏览器历史是空的。</p>','⚠\x20敏感点：\x0a\x20\x20','ygFav','onclick','audio-file-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-card\x20','chats','char_offline_bg_','\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20任务指令\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**开场白**:\x20根据直播主题和你的性格，生成一段自然、生动的开场白。这段话应该被拆分成\x206-8\x20句，放在\x20\x22streamerSpeech\x22\x20数组里。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**弹幕生成**:\x20模拟一群性格各异的观众，生成\x205-8\x20条符合初始情绪的弹幕。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**初步互动**:\x20你的开场白应该与其中\x201-2\x20条弹幕进行简单的互动。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20【绝对禁止】伪造成','onloadend','lock-screen-overlay','oncomplete','choices','resolve','【一、价值地图】\x0a\x0a','endpoint','coverUrl',']\x20[','总结报告生成失败:\x20','coverId','<span>','#diary-action-reroll','EMrrr','activeFriendCircleId','async','current_focus','\x0a\x20\x20相关记忆:\x0a','long','anthropic','🤝\x20互动风格：\x0a\x20\x20','hLFPj','message-anchor','📊\x20总计:\x20','[用户发送了表情：','livestream-bg-preview','pre-line','play','calendarEvents','app-music-library','\x0a#\x20核心任务:\x20【用你的第一人称】撰写【私人记忆】\x0a\x0a你【就是】“{charName}”。你现在正在回忆你和“{userName}”的聊天记录。\x0a你的任务是【用你自己的语气、态度、和第一人称（“我”）】，为这些记录生成一份你的【私人记忆摘要】。\x0a\x0a#\x20【绝对视角禁令】(最高优先级)\x0a-\x20你【绝对禁止】使用第三人称（例如“角色做了什么”、“用户说了什么”）。\x0a-\x20你【绝对禁止】使用中立、客观、AI或档案管理员的语气。\x0a-\x20你的产出【必须】听起来像是“{charName}”在写自己的日记。\x0a\x0a#\x20摘要规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。严禁包含任何\x20JSON、Markdown\x20或其他解释性文字。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`memory_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以日期（`YYYY-MM-DD`）作为键。\x0a\x20\x20\x20\x20-\x20每个日期下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**精简**:\x20忽略日常问候、无意义的闲聊。\x0a\x20\x20\x20\x20-\x20**聚焦**:\x20专注于那些【让你印象深刻】的关键信息、情感转折点、重要决定、分享的秘密、以及你们定下的约定。\x0a\x20\x20\x20\x20-\x20**【强制第一人称】**:\x20必须用“我”（“{charName}”）和“{userName}”来指代双方。\x0a\x0a#\x20输出示例（【【你必须严格模仿这种第一人称语气】】）\x0amemory_summary:\x0a\x20\x202025-09-12:\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20好像工作压力很大，一直在跟我抱怨，哼，真拿他没办法。\x22\x0a\x20\x20\x20\x20-\x20\x22我安慰了{userName}，还大发慈悲地约他周末去看电影。\x22\x0a\x20\x20\x20\x20-\x20\x22说好了，周六下午在市中心电影院，看那个《夏日终曲》。\x22\x0a\x20\x202025-09-13:\x0a\x20\x20\x20\x20-\x20\x22心情不错，给{userName}发了张可爱的猫咪图。\x22\x0a\x20\x20\x20\x20-\x20\x22{userName}\x20跟我提了个什么新项目的想法，听起来还挺有意思的，我给了他几句建议。\x22\x0a\x0a#\x20输入格式\x0a我将为你提供完整的聊天记录，格式如下：\x0a[YYYY-MM-DD\x20HH:MM]\x20[说话人]:\x20聊天内容\x0a\x0a#\x20最终指令\x0a请【严格代入“{charName}”的身份和第一人称视角】，分析我提供的聊天记录全文，并生成一份\x20YAML\x20格式的摘要。\x0a【绝对禁止】使用第三人称！\x0a直接从\x20`memory_summary:`\x20开始输出。\x0a','removeEventListener','kIPyH','名字不能为空！','-\x20你曾经搜索过：“','charAt','.\x20Current\x20transition\x20state:\x20','ttYUA','\x20天没活动了。你生成的内容必须是全新的事件。\x0a','https://sharkpan.xyz/f/nj7ul/r48eum.jpg','ssGhn','[Import\x20Altar]\x20JSON数据结构:','hidden','nHpcw','MbxFh','text','#\x20这段私聊是空的，没有时间锚点，无法开始总结。','lt-ui-close-btn','<span>--</span><span\x20class=\x22unit\x22>天</span>','VDwuM','diary-page-','world-book-item','Ergfa','auto','/v1/chat/completions','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>正在清点圣殿藏品...</p>','div','群友正在输入...','getMinutes','tencent','gBUmp','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>','worldBooks','lzsoN','toLowerCase','未知艺术家','\x22\x20的成员不足2人，无法生成点赞和评论。请先编辑该好友圈，添加至少2名角色。','bxwXv','RoPLe','meetingView','KOyfH','number','UxPbc','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20','⏰\x20时间:\x20','\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27','rpvya','altar-json-input','<p\x20style=\x22margin-top:\x205px;\x22>','fpJtm','app-wallpaper','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','正在筛选时间线...','relative','galgame-sprite-controls','cancel-edit-replay-btn','kSWAR','insertBefore','translateX(-50%)','url(','char_sprite_','在所有地方的最后一次互动是在**:\x20','right','fontSize','ceil','上传失败了，笨蛋！\x20','provider','20px','zbKeY','netease','开心于','保存壁纸失败:','wBROO','loadAsync','<input\x20type=\x22checkbox\x22\x20value=\x22','#snoop-app-view-container\x20.snoop-app-content','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22float:\x20right;\x22>','CYEEd','LhBPc','livestream-textbox-container','QySAj','indexedDBData','db:','解析失败了，笨蛋！\x20','XARsQ','\x20\x0a\x0a//\x20▼▼▼\x20在\x20continueLivestream\x20的\x20systemPrompt\x20里，用这个替换旧的\x20#\x20角色与直播信息\x20▼▼▼\x0a#\x20记忆数据库\x20(你必须时刻记住以下所有内容)\x0a-\x20**你的核心人设**:\x20','widget_card_2','back-to-home-from-diary-list','CiZlj','你是一个严格的JSON生成引擎。你的唯一任务是根据用户提供的指令和数据，生成一个描述角色互动的JSON对象。你的输出【必须】是、也只能是一个单一、完整、语法正确的JSON对象。严禁包含任何解释、注释、或Markdown代码块标记\x20```json。直接输出\x20{\x20\x22events\x22:\x20[...]\x20}\x20结构。','Kabyw','。所有总结性的字段（如\x20`summary`,\x20`core_values`\x20等）必须保持你自己的第一人称（“我”）视角。\x0a\x0a*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a\x0a#\x20【【【绝对输出格式\x20v2.0\x20(必须严格遵守)】】】\x0a*\x20你的输出【必须】是、也【只能】是一个【完整的、全新的、精炼后】的JSON对象，**并且【必须】保持\x20v2.0\x20的结构**！\x0a*\x20【绝对禁止】返回任何JSON之外的文字、解释或Markdown标记。\x0a*\x20直接从\x20`{`\x20开始，到\x20`}`\x20结束。\x0a\x0a#\x20v2.0\x20格式模板\x20(你必须按这个结构返回)：\x0a{\x0a\x20\x20\x22version\x22:\x202.0,\x0a\x20\x20\x22character_id\x22:\x20\x22','model-dropdown','一起听歌','切换聊天错误:','iIeeZ','CrLuz','2.0','净化音乐封面时出错，真是的。','kVteA','</div></div><div\x20id=\x22categorized-expenses-list\x22\x20style=\x22margin-top:\x2010px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2010px;\x22></div>','upWtQ','natCd','profile-view-title','item_name','set-active-user-button','Detected\x20API\x20provider:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22category-checkbox\x22\x20data-category-id=\x22','📤\x20提示词:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22group-options-modal\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-clear-history\x22\x20class=\x22choice-modal-button\x22>清空聊天记录</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-members\x22\x20class=\x22choice-modal-button\x22>编辑群成员</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-edit-name\x22\x20class=\x22choice-modal-button\x22>修改群名称</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#ff4d4d;\x22>删除群聊</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22group-options-cancel\x22\x20class=\x22choice-modal-button\x20cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</div><div\x20class=\x22artist\x22>','\x0a\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22snoop-home-clock\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22snoop-home-date\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','noir-author-mark','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>相册是空的。</p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>','2833159iJNaYx','triggers','music-library-item','CBudw','participantIds','STFvM','正在回应中，别急。','\x0a\x0a#\x20关于对话者\x22','解析存档失败，正在重置:','出去玩','BdSCS','#bubble-preview-ai','music-input-backdrop','》已结束。用户已停止分享音乐。','transitioning','api-watermark','mSLFO','warn','#meeting-view-screen\x20.chat-input-area','<path\x20d=\x22M21\x2010c0\x207-9\x2013-9\x2013s-9-6-9-13a9\x209\x200\x200\x201\x2018\x200z\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2210\x22\x20r=\x223\x22></circle>','add-friend-circle-button','编辑群成员功能正在开发中...','today-todo-list','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item\x22\x20style\x20=\x20\x22margin-bottom:\x2012px;\x20padding:\x2015px;\x20background:\x20white;\x20box-shadow:\x20var(--soft-shadow);\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2012px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x201.8rem;\x20flex-shrink:\x200;\x22>🍜</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20600;\x20font-size:\x201.05rem;\x22>','post_image_','world-book-edit-name','哼，就按你说的办好了。','add-event-modal-title','hwySz','reduce','AI返回的内容里找不到有效的JSON数组。原始回复:\x20','settings','path','mpAfA','条】全新的、高质量的社交动态。\x0a\x0a#\x20【绝对身份锁定】(最高优先级)\x0a-\x20\x22','rwRLm','feed','#world-book-checkboxes-container\x20.wb-entry-item\x20input:checked','记一笔','livestream-replay-view-container','.choice-modal-backdrop','chat-sticker-panel','phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。','chatWallpaper','LAPqZ','spriteTransform','\x20张旧图片。','.category-checkbox[data-category-id=\x22','is-user','line','启动头像恢复程序...','char-edit-avatar-input','</span></div>','expanded','正在升级聊天数据结构...','YBRFF','.diary-entry','char-edit-wallpaper-input','speechIndex','ozNSr','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','’的关键礼物‘超级火箭’。\x22\x0adm_interaction_summary:\x0a\x20\x20-\x20\x22‘','QINyt','likes','includes','blob','Canvas\x20to\x20Blob\x20conversion\x20failed.','DXKzj','playableUrl','add-event-modal','iPPHS','diary-list-container','执行音乐封面数据净化...','flex','这是一条由控制台添加的测试动态！样式看起来非常完美。','🎭\x20语气风格：\x0a\x20\x20','弱小委屈但凶恶','\x22（ID:\x20','DDkPX','opacity','html','musicUploadAltar','来源：','xLbuN','reset-widget-bg-button','\x20记录)\x0a','put','【功能1：重置并初始生成】\x0a\x0a确定要为【','top','\x20邀请你一起听歌</div><div\x20class=\x22listen-together-song\x22>','cmFQm','已删除。','upload-card-button-2','正在为你切换新的歌曲...','偏好:\x20','已恢复默认。','world-book-edit-category','diaryList','\x20|\x20','\x20添加...','galgame-text','https://sharkpan.xyz/f/jj6s6/yd5bpb.jpg','quote-preview-area','ZUaRP','friendCircleEdit','apply','nNyvR','Poncc','appIconPosition_','galgame-sprite-container','有点生气','body','--primary-lightness','uxYvX','CXlBO','2385970fKHPbf','纪念日','chat_char_','nAfup','calendar-day','NmOzO','livestream-dm-panel','preferences','私信互动','appIconPosition_app-diary','ApsPH','altar-misc-zip-input','ARrsP','marginTop','RqSmE','tRvss','iunQt','MPjWe','\x20的认知...','gridTemplateColumns','todo','”已创建！','】的档案已重置并重新生成！','HXUyB','加载更多聊天记录','\x0a#\x20交换日记摘要\x20(你和\x20','\x20\x20-\x20用户ID:\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的个人记忆\x20(来自所有App)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</svg>','\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守)\x0a','delete-world-book-button','-preview','JZRDP','”，在那里“','user-avatar-preview','sNZVU','Duevo','<div\x20style\x20=\x20\x22padding:\x2015px;\x20background:\x20#ffebeb;\x20border-radius:\x208px;\x20color:\x20#d8000c;\x22\x20><strong>解析失败了。</strong><br>那个API返回的原始内容：</div><pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x20font-family:\x20monospace;\x20margin-top:\x2010px;\x22>','UNtIs','\x0a\x0a#\x20\x22','oizfg','rpDwO','GKzfA','livestream-gift-btn','hcILx','aRGLI','Noir\x27s\x20Fix:\x20\x27home-screen\x27\x20element\x20not\x20found!','appIconPosition_app-user-profiles','livestreamSettings','https://sharkpan.xyz/f/yrOhN/0yixqd.jpg','pCUZK','xwToz','）都是【AI扮演的群友】。\x0a-\x20你【绝对禁止】扮演\x22','哼，正在净化你那些被污染的好友圈动态...','music-library-screen','OFCoN','aSAEW','custom-icon-list-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','分钟前聊过，请注意衔接。','KhCAy','[Noir\x27s\x20Brain]:\x20档案为空，无法“精炼”。自动切换到“初始生成”模式...','emotion_summary','10px','警告：用户档案恢复失败，但其他数据已恢复。','BYaFr','replaceChild','sprite-slider-scale','最近的足迹','novel','group_avatar_','\x0a#\x20核心任务：【沉淀你的记忆】\x0a\x0a哼，','awmPu','target','.widget-info\x20>\x20div','Noir\x27s\x20Protocol:\x20Built-in\x20\x27html\x27\x20category\x20was\x20missing.\x20Re-created.','reset-feed-bg-button','lSJpN','char-avatar-frame-url','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>请先选择一个好友圈。</p>','vdiIq','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-artist\x22>','chat-message-input','player-artist','toLocaleDateString','deletedStickers','#member-select-','char-edit-css','pQvac','wbc_imported_','加载\x20','UiXBp','accounting-title','insertAdjacentHTML','livestream-sprite-back','资料已更新，为了让所有变更完全生效，我来帮你刷新一下。','EBIpE','snoop-log-back-btn','#ff8c66','QzWEp','eoxTw','alt','XQafH','好友圈已删除。','diaries','wants','nbXra','UsCYt','\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>','JzpgK','</div>\x0a\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-manage-btn\x22>管理</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22sticker-confirm-delete-btn\x22>删除</button>\x0a\x20\x20\x20\x20','JXDtt','values','PJjfx','diaryView','import-altar-screen','2rem','。绝大多数弹幕都应该围绕着你。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x205.\x20\x20**产出**:\x20生成\x206-8\x20条符合以上规则的、自然的、多样化的路人弹幕，放入\x20\x22danmaku\x22\x20数组。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22哦？刚刚有位朋友私信问我...\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20},\x0a\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢你的礼物！非常开心！\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人丙\x22,\x20\x22comment\x22:\x20\x22学到了！\x22\x20}\x0a\x20\x20],\x0a\x20\x20\x22privateMessageReply\x22:\x20[\x22（悄悄）跟你说哦...\x22,\x20\x22刚刚那个问题，其实是因为...\x22]\x0a}\x0a\x20\x20\x0a#\x20emotion字段规则\x0a-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a','RxXTh','imyDL','sin','”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a','Dcjyc','tnRNN','[Noir\x27s\x20Brain]:\x20启动对\x20','hWJzy','\x20has\x20been\x20saved\x20to\x20IndexedDB.','sfZVA','缓存命中:\x20','iitZf','开始直播失败:','KqVeS','\x22,\x0a\x20\x20\x22last_updated\x22:\x20\x22ISO时间戳\x22,\x0a\x20\x20\x22value_map\x22:\x20{\x0a\x20\x20\x20\x20\x22preferences\x22:\x20{\x20\x22喜欢\x22:\x20[','EtcIE','星期三','正在加载...','card-input-2','save-char-button','https://sharkpan.xyz/f/35lse/xmsue5.jpg','mousemove','gGdei','owALG','livestreamSpriteTransform','”之间发生过的所有事情。\x0a\x20\x20\x20\x20你的任务是【用你自己的语气、态度、和第一人称（“我”）】，为这些记录生成一份【高度精简】的【私人回忆录】。\x0a\x0a\x20\x20\x20\x20#\x20【绝对视角禁令】(最高优先级)\x0a\x20\x20\x20\x20-\x20你【绝对禁止】使用第三人称（例如“','toFixed','yPquf','bUqZI','activity_description','📝\x20性格总结：\x0a\x20\x20','author','\x0a#\x20核心任务:\x20生成直播总结报告\x0a\x0a你是一名数据分析师，需要为“','appIconPosition_app-world-book','Preferences','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-action-delete\x22\x20class=\x22choice-modal-button\x22\x20style=\x22color:\x20#dc3545;\x22>删除这篇日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a#\x20最近的朋友圈动态\x20(供你参考)\x0a','108bCRTfr','LVOSJ','some','history','djeLt','events','bWmLU','displayedMessageCount','back-to-home-from-world-book','.message.user','LBxPs','music-share-card','lRCuE','touchstart','UqwSq','DcXsE','viewBox','请根据以上所有规则和资料，开始生成内容。','toggle-meeting-view-button',']\x20[image]','字体保存失败了，哼:\x20','\x20//\x20<--\x20哼，加在这里\x0a','NHAvo','ApsGi','暗夜紫晶','ONBtx','情绪:\x20','”来指代双方。\x0a\x0a\x20\x20\x20\x20#\x20输出示例\x20(【【你必须严格模仿这种精简、第一人称的语气】】)\x0a\x20\x20\x20\x20```yaml\x0a\x20\x20\x20\x20memory_summary:\x0a\x20\x20\x20\x20\x20\x202025-10-10:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22心情很烦躁，在日记里也写了。后来\x20','close-summary-button','\x20(当前)','的特殊关照，建立更深的羁绊。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20添加结束\x20▲▲▲\x0a\x0a#\x20任务指令\x0a\x20\x20##\x20阶段一：主播的回应\x20(生成\x20streamerSpeech\x20和\x20privateMessageReply)\x0a\x0a1.\x20\x20**【绝对最高优先级\x20-\x20延续对话】**:\x20如果“我”(','<span\x20style=\x22opacity:\x200.6;\x22>无</span>','\x0a\x0a//\x20▼▼▼\x20在\x20#\x20任务指令\x20的前面，加上这段“社会学常识”\x20▼▼▼\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心概念：直播中的“私信”\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20“私信”是“我”(','llQWZ','✗\x20讨厌：\x0a\x20\x20','listen-together-backdrop','请先打开一个聊天！','global-player-play-pause-btn','short','Znlwd','销毁缓冲区失败:\x20','NERsF','---\x20Noir\x27s\x20Data\x20Purification\x20Ritual\x20v1.0\x20---','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>这个分类下还没有条目。</p>','tEQMT','meetingViewMode','\x22\x20data-id=\x22','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>','#\x20总结失败了，可能是记忆太庞杂。','translate3d(100%,\x200,\x200)','&lt;','zEolO','GgneD','accepted','HFmOu','.remove-attachment-btn','错误：找不到此好友圈绑定的用户！','core_values','未知表情','错误：找不到签署契约的地方。','url(\x27','iyHNF','eLLnt','character_id','1.4','nuomi_message_buffer_','select','decode','atKZq','fSXdY','https://sharkpan.xyz/f/JYeig/sv4p6m.jpg','\x20-\x20','getSelection','#c299ff','comments','FmsUq','alignItems','大家正在赶来回复...','tPCNd','BwwNC','XDQeM','XAwcs','T00:00:00','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>','artist','log','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','YIVAu','UUNKa','仓库里没有图片，无需导出此项。','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以见面的角色。</p>','char_avatar_','remove-font-button','endsWith','<style\x20id\x20=\x20\x22snoop-temp-style\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop\x20-\x20avatar\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-\x20radius:\x2050\x20%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20display:\x20flex;\x20align\x20-\x20items:\x20center;\x20justify\x20-\x20content:\x20center;\x20font\x20-\x20weight:\x20500;\x0a\x20\x20\x20\x20margin:\x200\x208px;\x20flex\x20-\x20shrink:\x200;\x20align\x20-\x20self:\x20flex\x20-\x20end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style\x20>\x20','Ysizz','musicId','innerHTML','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>这个好友圈很安静，点击“刷新”获取新动态吧。</p>','✨\x20角色\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[用户发起了听歌邀请:\x20','\x22（【关键】本次新发现的、与旧档案冲突或转变的地方）\x22','findIndex','HIOiU','xLfIy','jSgIR','2px\x20dashed\x20var(--border-color)','VQoev','正在准备音乐数据...','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','快点哄我','EvrSy','currentLivestreamUserActions','categorized-expenses-list','remove','ZKvoG','Noir\x27s\x20Fix:\x20重置按钮监听器已修复，不再冲突。','&quot;','src','user-profile-list-container','pZBEG','zrYPM','EhzLo','important-day-item','back-to-circle-list-from-feed','info','cNVve','imageId','nuomi_profile_tiaoTiao_',']\x20},\x0a\x20\x20\x20\x20\x22sensitivities\x22:\x20[','livestream-sprite-confirm-button','<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>','）和“','choice-create-character','observe',')的补充信息\x0a','mouseleave','\x0a4.\x20\x20**分析转变**：','在“一起听”邀请中，净化封面失败:','50%','diary-modal-save','字体应用失败:','qTApg','DIrxX','LMClT','musicPlayerState','private','player-next-btn','被萌到','User','条目名称和内容都不能为空！','chat-image-button','dXxpa','\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','确定要清空好友圈“','xsqdQ','WXYBq','image','livestream-replays-btn','getFullYear','head','精炼失败：','确定要恢复默认字体吗？','（【【【最高指令：初始生成】】】\x0a\x20\x20\x20\x20*\x20你的任务是基于**所有**历史信息，从零开始，撰写一份【全新的】总结。\x0a\x20\x20\x20\x20*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a\x20\x20\x20\x20*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a','xElGx','检测到已保存的字体，正在应用...','rnDWp','说了是摆设啦，笨蛋。','pointerEvents','未知商店','postType','SWeMF','newAvatar','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-color-light);\x20font-size:\x201.2rem;\x20margin-left:\x20auto;\x20font-weight:\x20200;\x22>›</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','生成动态时发生错误:\x20','ErDar','indexOf','的手机内容\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','fuOMi','VQWUW','reset-widgets-position-button','加载直播立绘失败:','noshb','38502NVtTTZ','HnRiK','load-more-btn','streamerSpeech','世界书条目已保存！','KoZfN','has-new','VHroo','如果发现冲突或转变，【必须】在\x20\x22observed_changes\x22\x20字段里详细记录下来。','image/png','杂项仓库是空的，无需导出。','char-name-header','NXEiC','哼，我正在屈尊帮你分析，别吵...','主播情绪','\x20/\x20','档案精炼完成！','group-delete','remark','💔\x20负面触发器：\x0a\x20\x20','tAYFw','-\x20话题触及敏感点\x22','\x20个成员','DfadG','18AJnwNi','abort','\x20[并附上了一张图片]','numeric','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','生成失败:\x20','\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-select-','ZZXrn','<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>','\x22\x20class=\x22music-library-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-library-item-title\x22>','\x20//\x20<--\x20哼，最后是这里\x0a---\x0a##\x20最近的朋友圈动态\x0a','哼，不好好写清楚花在哪、花了多少，我怎么记？','IgZfF','主播正在回应...','DsMoD','hcgcO','sprite-confirm-button','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','chat','wallpaper','transition','fStKn','Noir\x27s\x20Log:\x20发现直播存档，正在恢复现场...','数据结构升级：成功救援了\x20','VlRoU','observed_changes','直播尚未开始...',']\x20[系统事件]:\x20','正在打包核心数据...','cfpLw','filled','czQze','qlWXU','LOgpM','<pre\x20style\x20=\x20\x22white-space:\x20pre-wrap;\x20word-break:\x20break-word;\x22\x20>\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-amount\x22>¥','通知权限状态:','music','ZqENU','已为\x20','user-post-avatar','96kebAaP','iBqzB','\x22。这份档案是你写的【私人笔记】。\x0a因此，所有总结性的字段（如\x20`core_values`,\x20`summary`,\x20`emotion_summary`\x20等），【必须】使用你的第一人称（\x22我\x22）视角来撰写。\x0a-\x20**[错误示范\x20-\x20中立]**:\x20\x22用户很重视公平。\x22\x0a-\x20**[正确示范\x20-\x20角色第一人称]**:\x20\x22我发现\x20','.ledger-item','Failed\x20to\x20plan\x20group\x20replies:','WIkGW','wb-category-group','isqKe','#character-edit-screen\x20.selected-options-text','POQZU','XJznW','is-entering-from-right','AMKWZ','[用户分享了音乐：','wb_html_module_builtin_1','hard-reset-button','0\x200\x20',')的私信互动摘要\x20(列表形式)\x0a\x0a#\x20输出示例\x20(直接输出YAML文本)\x0a\x0astart_time:\x20\x222025-10-09T15:30:00\x22\x0atheme:\x20\x22分享最近读的一本书\x22\x0astreamer_mood:\x20\x22','edit-replay-backdrop','MFctf','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','profile-view-backdrop','\x20页</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-next-button\x22>下一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','upIzn','这是当前臃肿的档案，请你【只】基于这份档案，将其精炼：\x0a\x0a','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2070px;\x20height:\x2070px;\x20background-color:\x20#f0f2f5;\x20border-radius:\x208px;\x20font-size:\x202.5rem;\x20flex-shrink:\x200;\x22>🛍️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex-grow:\x201;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20space-between;\x20height:\x2070px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22description\x22\x20style=\x22font-weight:\x20500;\x20line-height:\x201.4;\x20-webkit-line-clamp:\x202;\x20display:\x20-webkit-box;\x20-webkit-box-orient:\x20vertical;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','diary-next-button','分析完成！(1/1)\x0a\x0a正在为你展示最新的档案...','RITRK','char_','diaryPressTimer','diary-action-modal-','speaker-ai','createElement','pQrVQ','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>','rKEgQ','onsuccess','AI\x20试图创建事件，但找不到有效的用户ID。','lsAJG','uiScale','mbULx','back-to-library-from-altar','FgsDW','app-livestream','chat-music-button','worldBook','JFyjv','addTestPost','mcfnA','\x22\x20class=\x22choice-modal\x20show\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-backdrop\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22choice-modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-edit\x22>编辑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x22\x20id=\x22replay-action-delete\x22\x20style=\x22color:\x20#dc3545;\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22choice-modal-button\x20cancel\x22\x20id=\x22replay-action-cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>','Vcxdq','[Import\x20Altar]\x20exportVersion:','很期待','snoop-phone-header','group-settings-name','你好，世界\x20(Hello,\x20World)','fEiOo','Noir_Backup_Images_','organize-bill-button','YXIUO','world-book-editor-screen','</div>\x0a\x20\x20\x20\x20<div\x20class=\x22time\x22>','https://sharkpan.xyz/f/djjH8/29ejbg.jpg','SPfBs','preview-item','absolute','gQDJQ','ZJMeg','ECfby','NPBih','正在执行净化程序...','AI似乎没有想出任何新动态。','HbDqE','。\x0a-\x20再次强调：你的全部输出都将被作为JSON解析，任何JSON主体之外的额外文字都会导致程序失败。\x0a','full','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-preview-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','parts','player-play-pause-btn','delete-message-button',',\x20\x22项目2\x22],\x20\x22讨厌\x22:\x20[','猫猫撒娇','stretch','user-post-music-button','EfyNQ','AMJOr','</span>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x20','对你的印象...','获取中…','没有角色需要恢复头像，跳过。','mCUaT','nDKxF','sticker-panel-controls','BzsyH','GOJUy','PtvMc','SfrZY','min','昨天\x20','copy-profile-button',']:\x20',']，你今天好像有点不一样...感觉情绪不太对。还好吗？\x22\x0a*\x20（发现平时讨厌A的用户突然夸A）->\x20\x22嗯？[','iaXQM','Unknown','read','https://sharkpan.xyz/f/8ngsj/ax0fat.jpg','character-settings-button','EbvPu','净化完成！总共迁移了\x20','分析你的【完整互动历史】。','suCEo','snoop-phone-top-nav','图片处理失败:\x20','LdTwp','model','【最高警告】\x0a\x0a这将删除此应用在本机上的所有数据（包括所有用户、聊天、设置），且不可恢复！\x0a\x0a请再次确认你已经通过「导出全部数据」功能进行了备份！','确定要导入全量备份文件吗？这将覆盖所有当前数据（包括图片和音乐），且操作不可撤销！','showChatView\x20ignored:\x20already\x20transitioning.','theme-hue-slider','\x0a\x0a#\x20核心群聊世界观设定\x20(所有角色必须严格遵守以下设定)\x0a','歌曲ID','LVZne','xKeZM','set','jGrKU',']？你怎么突然不说话了？是我说错什么了吗？（有点不安）\x22\x0a*\x20（傲娇性格发现用户反常）->\x20\x22哼，你今天吃错药了？怎么突然[反常行为]...\x20不过...\x20到底怎么了？\x22\x0a\x0a**最终目标：**\x20让用户感觉到你不是在机械地执行程序，而是真的在【观察】、【思考】并【关心】Ta的变化。\x0a','&amp;','User\x20cancelled','[手机]','创建新用户','getContext','\x0a\x0a#\x20用户资料库\x0a','group-edit-members',']\x20[sticker:','parentElement','</span><button\x20class=\x22delete-expense-btn\x22\x20data-id=\x22','请先在\x22设置\x22中配置你的\x20API\x20信息。','diary-get-reply-button','恢复失败了:\x20','cover-file-input','feed-bg-input','assistant','.listen-together-song','export-core-data-btn','Failed\x20to\x20save\x20history\x20to\x20localStorage:','还没有API调用记录哦，先发送一条消息吧！','https://sharkpan.xyz/f/v0qcL/dio7j0.jpg','https://sharkpan.xyz/f/ljNUx/aw6udx.jpg','JBGMg','导出角色卡失败:','KSxbD','已恢复默认字体。','】的旧数据...','.typing-indicator','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>','Tqosa','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','substring','themeHue','recipientId','white','当前聊天','SbEsf','GrEeq','LFrsx','\x22（用户）的信息当成你自己的。\x0a\x0a#\x20【最高时间法则】(必须严格遵守)\x0a','every','外卖订单','back-to-replays-list-from-view','pendingPostAttachments','wZytq','replace','key','onerror','opacity\x200.25s\x20ease','\x22。这是你对\x22','back-to-chat-from-group-settings','TLRdT','sticker','MHgxQ','XRden','.wb-entry-item\x20input[data-category-id=\x22','\x20的【档案更新】(模式:\x20增量)','\x22\x20data-category-id=\x22','\x20(分享了歌曲:\x20','找不到角色。','”的本次直播生成一份总结报告。\x0a\x0a','mVWIC','oETLZ','livestream-list-container','<p\x20class=\x22music-post-thought\x22>','保存失败:\x20','livestream-sprite-','button','memberCharacterIds','var(--text-color-light)','sort','RoRbr','确定要结束本次直播吗？\x0a我们将为你生成回放总结。','\x22。\x0a-\x20【严禁】将\x22','OEcVe','zlRSh','characterEdit','comfort_zone','\x22（首次生成，此项为空）\x22','left','save-friend-circle-button','这本日记本来就是空的，你还想清空什么？','currentAbortController','<path\x20d=\x22M15\x2018h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2h-2V4a2\x202\x200\x200\x200-2-2h-2a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path><path\x20d=\x22M7\x2014h2a2\x202\x200\x200\x200\x202-2v-2a2\x202\x200\x200\x200-2-2H7V4a2\x202\x200\x200\x200-2-2H3a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h2\x22></path>','todo-item-small','textShadow','YHMmf','zYNVx','BaOVr','contains','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-content\x22>','altar-slot-zip','\x0a##\x20世界书条目:\x20','removeItem','TtfLM','刷新聊天失败:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','JSON解析失败(','span','WvOHG','导入角色卡失败:','WXbyh','TA正在提笔写日记...','back-to-chat-list','music-player-bar','tzkZT','fEwcw','NRVHJ','XmznF','🎯\x20核心价值观：\x0a\x20\x20','cjeQE','对不起','读取失败:\x20','CJOQW','--widget-cover-image','https://sharkpan.xyz/f/VG2FY/uucfvv.jpg','\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','徽章已移除。','mANEY','qpGzP','SQHBX','toBlob','AbGdB','svg','snoop_','\x20约好了周六去看电影。\x22\x0a\x20\x20\x20\x20\x20\x202025-10-11:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x22心情不错，给\x20','#\x20任务:\x20生成\x20','lt-ui-song-artist','medium','GuBPe','\x22的视角，','.category-toggle-arrow','IgbRq','\x0a\x0a请确认你的基础地址填写正确，且【不要】包含\x20/v1','koBEF','message-action-modal','CjqEN','center','clockPosition','\x0a##\x20你的世界观设定（影响你的价值判断）\x0a','\x0a##\x20输出JSON结构v2.0（严格遵守）\x0a{\x0a\x20\x20\x22version\x22:\x202.0,\x0a\x20\x20\x22character_id\x22:\x20\x22','length','app-snoop','Noir\x27s\x20Log:\x20直播日志为空，没什么可总结的。','anthropic.com','exec','对主角的看法，','<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有聊天记录。</p>','bYgHq','BxEdR','app-accounting','\x20(ID:\x20','galgame-textbox-container','isGenerating','post_','`\x20的联系人【续写】3-5条新的对话。\x0a-\x20【【【绝对禁止】】】创造新的人物或修改其他人的对话！\x0a','cRhwG','---\x20Noir\x27s\x20Avatar\x20Rescue\x20Mission\x20---','wgGfy','groupSettings','FHDmM','translateY(-','kxNMJ','HfszA','isArray','[DONE]','cFfYy','rFDrE','unshift','pqyAb','peREh','\x22\x20已删除。','livestream-reroll-btn','assign','ChpIH','用户操作中断了\x20AI\x20响应。','cLjAz','你的任务是【首次生成】这个应用的内容。','-\x20**对话状态提示**:\x20你们今天早些时候聊过（大概','Noir\x27s\x20Note:\x20没找到\x27app-snoop\x27按钮，你是把它删了吗？','luPKB','#FFFFFF','statusText','CMQBo','\x0a\x20\x20\x20\x20绑定用户:\x20','meeting-char-name-header','\x0a#\x20你的日程与纪念日\x20(由\x20','WGaZs','BJqLO','customFeedWallpaper','upload-card-button','import-accounting-input','\x0a\x0a#\x20最近的动态回顾\x20(供参考)\x0a','wiaEw','inline-block','还原失败了:\x20','/v1beta/models/','UrvSB','AISKG','iUvCT','正在打包账本...','DlqQv','footprints','bdAxz','snoop-app-back-btn','</span><div><div\x20class=\x22description\x22>','gMYft','event-type-todo','的转账','listen-together-modal','UZyeA','rYRcm','\x22，这是TA喜欢的。','.ttf','RjgEd','reset-desktop-button','uSrng','nIIRc','.no-action-modal','audience-mood-input','#replay-action-delete','第一阶段升级完成！应用即将刷新以进行第二阶段检查。','】的档案吗？\x0a\x0aAI将【扔掉】旧档案，【重新阅读】所有历史记录，并生成一份【全新的、精炼的】总结。','71%','绝对不想','\x0a\x0a#\x20关于观众“我”(','未知商品','kind','confirm-transfer-button','trim','https://sharkpan.xyz/f/AaDTZ/tzwnjl.jpg','import-accounting-btn','mgwAr','hpZgx','promptTokens','...','edit-replay-modal','TEbkb','薄荷水色','boundUserProfileId','stickerName','audio-player','altar-slot-lyrics','music-upload-altar-screen','已有的','EdRry','lyrics.lrc','negative','https://sharkpan.xyz/f/55ntj/ul0hkz.jpg','split','Noir\x27s\x20Decoder:\x20AI给的时间格式不对，无法解析:','iDjDB','📋\x20用户档案\x20v','noir-custom-font-style','AEpMD','已自动断开与其他人的听歌同步。','revokeObjectURL','\x0a#\x20时间锚点(你必须严格参考此信息进行推演)\x20\x0a','\x20之间的私密内容)\x0a','的喜好、厌恶有没有什么新发现？\x0a*\x20你觉得TA的【核心价值观】(core_values)是什么？（例如：我感觉TA很重视公平...）\x0a**第二维：情绪图谱\x20(Emotion\x20Schema)**\x0a*\x20【情绪触发器】(triggers)：你注意到什么事会立刻让TA开心？什么话题会立刻让TA沉默或反感？\x0a*\x20【压力信号】(stress_signals)：你发现TA在紧张或焦虑时，会表现出什么小动作或口头禅？\x0a*\x20【舒适区】(comfort_zone)：你感觉TA在什么状态下最放松？\x0a**第三维：行为档案\x20(Behavior\x20Profile)**\x0a*\x20【情绪总结】(emotion_summary)：你该如何总结TA','from','-\x20[来源:\x20','exportVersion','group-clear-history','获取AI响应失败:','meeting-scene-view','GlzDT','加载自定义表情包失败，真是没用。','typing-indicator','读取完整用户档案失败:','rkXIF','\x0a\x20\x20<img\x20src=\x22','tuOTo','KAeCW','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-prompt-text\x22>你想查看\x20TA\x20的……</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-main-grid\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','visibility','event_ai_','widget_badge','新角色\x20','removeChild','\x22（即\x22我\x22，用户）来发布任何动态或评论。\x0a\x0a#\x20【记忆使用守则】(！！哼，看好了，这才是新规矩！！)\x0a\x0a1.\x20\x20**【法律A\x20(对你)：发布新动态时】**\x0a\x20\x20\x20\x20-\x20当你（例如：\x22','-\x20你最近去过：“','已送达','\x20个表情吗？','refresh-feed-button','成功恢复\x20','ZmdtE','observed_traits','VnOZC','gwrqy','VPWTL','无描述','检查或请求通知权限失败:','数据还原成功！应用即将重启。','\x20\x0a#\x20当前情景\x0a','transform\x202s\x20ease-out,\x20opacity\x202s\x20ease-out','isNativePlatform','user_avatar_','chat-get-reply-button','noir_migration_avatar_v1_complete','userProfiles','导出失败了，哼:\x20','】的手机已被重置。','BeTnv','char-edit-name','\x0a##\x20条目:\x20','bEtuk','NMJxw','确定要永久删除分类\x20“','\x0a\x0a#\x20用户资料\x20(你必须参考这个人！)\x0a-\x20姓名:\x20','wArTA','download','delta','MuWqT','）在写自己的日记。\x0a\x0a\x20\x20\x20\x20#\x20撰写规则\x0a\x20\x20\x20\x201.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本。\x0a\x20\x20\x20\x202.\x20\x20**时间轴**:\x20严格按照我提供的日期顺序进行总结。\x0a\x20\x20\x20\x203.\x20\x20**内容**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【【最高指令：绝对精简】】**:\x20你的总结【必须】高度浓缩！只记录当天的【核心事实】和【关键情感转折】。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【严禁复述】**:\x20绝对禁止复述完整的对话、添加无意义的口头禅或内心戏。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【提炼与洞察】**:\x20不要直接复制粘贴！你要从不同来源的情报中【提炼】出当天【让我印象最深】的关键事件、重要决定、以及我们分享的秘密。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【关联分析】**:\x20如果同一天内，我从不同地方（如私聊、日记、TA的手机）得知了同一件事，我要将它们【关联起来】进行总结，而不是简单罗列。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【强制第一人称】**:\x20必须用“我”（','choice-import-character','Elboi','医疗健康','HkBgZ','friend-circle-edit-screen','toString','getDate','mhsto','正在准备时空道标...','--\x20点击选择\x20--','乐于助人的助手','zVRZo','EyJcu','\x20\x20\x20\x20-\x20','song_','WLdFK','sticker-manage-btn','altar-slot-images-zip','qpxci','stopPropagation','0.5','-\x20你点过一份外卖：“','”的身份和第一人称视角】，并【保持绝对精简】，分析我提供的【每日情报】全文，并生成一份\x20YAML\x20格式的报告。\x0a\x20\x20\x20\x20【绝对禁止】使用第三人称！\x0a\x20\x20\x20\x20直接从\x20`memory_summary:`\x20开始输出。','snoop_cache.json','meeting-reroll-button','Jusfj','delete-user-profile-button','appIconPosition_app-accounting','lyric-line-','直播间设置已保存！','\x0a\x0a#\x20关于观众','LAIvK','选择聊天','只能在私聊中查看角色对你的档案哦。','正在压缩\x20','children','💚\x20正面触发器：\x0a\x20\x20','#\x20在指定时间线内没有发现任何可供总结的记忆。','contactName','HTML模块生成规则','GdFkj',')\x20恢复头像失败:','Failed\x20to\x20read\x20state\x20from\x20localStorage:','wzYqq','borderBottom','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-toggle-arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22wb-entry-list\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','hxItE','classList','编辑角色','mcxRp','vPsJr','#ff9999','ZbLqj','请根据以上所有规则，生成\x20','nhCbg','rWHsP','\x22\x20中发现一张需要净化的图片...','altar-slot-cover','pEYnk','这个也是摆设，别点了。','卡片\x202\x20已更换！','gRDuG','PIQOW','start-livestream-modal','KZrZI','\x0a\x0a#\x20直播完整记录\x20(全文)\x0a\x0a','AbortError','GepfJ','##\x20最近消息（新发生的，共','livestream_sprite_','eventType','isUser','drawImage','gaxEA','”的笔记，内容是：“','.lt-end-session-btn','LAAiu','正在处理...','avatar','px)','refineProfile','】的日记本已被清空。','10mVAQBt','ofuRJ','important','lyrics','currentLivestreamSession','pZajf','fVGde','解析AI返回的档案失败:','FDGJw','tag','</span><span\x20class=\x22unit\x22>天</span>','”买过：“','transfer','home-dock','group-options-cancel','.page-dot','historyIndex','speaker','GHjKV','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22','XaoRb','重置失败:\x20','”。\x0a','.zip','\x20的档案','<path\x20d=\x22m3\x209\x209-7\x209\x207v11a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2z\x22></path><polyline\x20points=\x229\x2022\x209\x2012\x2015\x2012\x2015\x2022\x22></polyline>','ydtDW','lastTimestamp','EMnpM','rNDmE','{charName}','clientX','UWDpL','border','距离「','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22>','jGKYD','kDDQg','确定要删除这个安排吗？此操作不可撤销。','countdown-title','ZBkTA','nLTxt','rrJwj','LRCVl','speechQueue','originalExpenses','等你消息','加载视奸记忆失败(','https://sharkpan.xyz/f/ajwtY/x03qxn.gif','DOMContentLoaded','replay-item','dataset',']你刚才说喜欢A？...\x20这、这可不像你啊，发生什么特别的事了吗？\x22\x0a*\x20（发现平时话痨的用户突然沉默寡言）->\x20\x22......\x20[','livestream-bg-input','VJRTV','lineHeight','visible','iyUkr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22justify-content:\x20space-around;\x20width:\x20100%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22>写第一篇</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-get-reply-button\x22>催TA写</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','eventDate','\x22\x20accept=\x22image/*\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x22\x20onclick=\x22document.getElementById(\x27input_','IvCLf','isPlaying','正在搜索音乐...','星期日','UVdQe','NoirAccountingData','vgyFA','事情好多','YEKDh','<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>','</div\x20>\x20','accountingLedger','FYQBg','\x20//\x20<--\x20哼，还有这里！\x0a','livestream-background','xrfiL','OzLJu','刷我的卡','toLocaleTimeString','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x221\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20style=\x22vertical-align:\x20-2px;\x20margin-right:\x205px;\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>','.snoop-main-grid','的直播间','\x20首歌曲...','\x22，请谨慎处理！','group-avatar-input','TKbAx','onmouseout','home-clock-container','JzWho','activeLivestreamCharId','NLDcj','Dbudq','\x27);\x20location.reload();\x22>恢复</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','event_','image/jpeg','bzbBB','还没有我的回应可以重新生成哦。','border-bottom:\x201px\x20solid\x20var(--border-color);','60%',',\x20ID:\x20','VAhaB','{userName}','群聊名称不能为空！','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','xbOOr','OOFji','6549186PdruZh','星期一','cardState2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','Fetch\x20request\x20was\x20aborted.','EYEEK','请输入新的群名称：','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20color:\x20var(--text-color-light);\x22>','-\x20**\x20你最后一次活动是在\x20**:\x20','editing-char-id','近期没有特别安排','\x0a#\x20核心世界观设定(角色必须严格遵守)\x20\x0a','avatarFrameUrl','https://sharkpan.xyz/f/ABwhZ/twknmr.jpg','AcFoz','获取模型失败:\x20','DFahi','-\x20**\x20当前精确时间\x20**:\x20','lrBYn','正在分析对\x20','\x20[并分享了歌曲:\x20','group-world-book-checkboxes','</div>\x0a</div>\x0a','trHNi','dzZad','livestream-dm-send-btn','avatar-wrapper\x20','”...','SxWFX','正在解析备份文件...','编辑好友圈','response_patterns','char-edit-bind-user','currentTarget','编辑条目','<div\x20class=\x22listen-together-header\x22\x20style=\x22text-align:center;\x22>🎵\x20已连接，正在一起听\x20🎵</div>','zJeUW','snoop-phone-screen','livestreamReplays','保存用户资料失败:','save-group-settings-button','VYfUt','请输入有效的转账金额！','\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','group-settings-bind-user','emote','UhaYd','</pre>\x0a\x20\x20\x20\x20\x20\x20</div>','tab-view-ledger','’私信询问了','continue-livestream-btn','YNQFV','MitSs','usage','，注意相关触发器：','dEoBI','https://sharkpan.xyz/f/N0VCv/5rd8br.jpg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','未命名角色','核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a','appIconPosition_app-music-library','OXWhi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','delete-friend-circle-button','PFsZJ','<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202h-14a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011v-7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v7\x22></path><path\x20d=\x22M9\x204v3\x22></path>','错误：第一个好友圈\x20\x22','16Bftiqc','的回放列表','font-preview-text','\x0a\x0a#\x20','加载已保存字体失败:','-\x20[动态]\x20','charId','getHours','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-interactions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','对方正在输入...','CEmfx','\x0a-\x20**【合并总结】**：所有描述性文本（如总结、价值观）都必须是基于新旧信息【合并提炼】后的最终版本。\x0a-\x20**【废弃字段】**：`common_phrases`\x20和\x20`typical_emotions`\x20必须设为\x20`null`，我已经不看它们了。\x0a','cancel-transfer-button','activeUserProfileId','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20','vgJer','浏览器历史','ZtHQQ','哼，只有私聊才能作为总结的时间基线。','back-to-home-from-calendar','profile-view-modal','（用户没有填写自述）','找不到旧的存档，无需救援。','organize-button-container','xShiu','gallery','8px','juKOU','chat_','calendar-header-title','DfzDb','开播失败了，哼:\x20','pLddq','hRZvV','SAAmZ','zUNGx','\x20的【档案精炼】(模式:\x20初始生成)','<p\x20style=\x22color:\x20red;\x20text-align:\x20center;\x22>加载场景失败！</p>','add-world-book-category-button','\x0a3.\x20\x20**对比冲突**：','确定要删除这篇日记吗？此操作不可撤销。','https://sharkpan.xyz/f/X7muW/lc8g9h.gif','-\x20\x22','diary-prev-button','candidatesTokenCount','SQmyS','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','回放已删除。','成功获取\x20','请输入群聊名称。','nextElementSibling','JDMQX','之外】的其他观众。你【绝对禁止】伪造成','HcIEi','\x0a\x0a#\x20关于读者“','rawResponse','正在重新构思...','dfVWE','🌸\x20舒适区：\x0a\x20\x20','XGXqV','人情红包','livestream-list-screen','》。\x0a\x0a这是这首歌的【完整歌词】，你可以通读全文来理解它的整体意境和故事：\x0a[完整歌词开始]\x0a','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20初始观众情绪:\x20\x22','\x22\x20的聊天记录吗？此操作不可撤销。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','VfUgs','user-avatar-input','直播回放','-\x20**当前精确时间**:\x20','avkgw','</textarea\x20>\x0a\x20\x20\x20\x20\x20\x20','readAsText','https://sharkpan.xyz/f/8a7tj/sea1z9.jpg','show-chat-view','toISOString','\x22，这是TA讨厌的！','livestream_sprite_normal_','加载直播间设置失败:','无语但是随便吧','FatdF','Qffdo','createElementNS','YaNOW','pGMwQ','CGLmw','\x0a\x0a#\x20你对\x22','wnZyP','perChatContextLines','的个人专属世界观设定\x0a','app-pages-container','DuPyg','diary-entry\x20','.music-post-play-icon,\x20.music-share-play-icon','确定要重置所有小组件的位置吗？它们会回到初始位置。','uzTbB','livestreamRoom','GNlZJ','KVohd','20%','交给我吧','shy','sprite-resize-handle','今天一笔账都没有，我整理什么？','end','fYofa','totalTokens','JkdFY','system','livestream-sprite-container','lwvnK','在准备API数据时，从IndexedDB读取图片失败:','FqIQZ','Failed\x20to\x20save\x20state\x20to\x20localStorage:','\x0a#\x20核心任务:\x20角色扮演模拟器\x0a你【就是】\x22','-input','已放逐。','qkMpY','role','\x27).click()\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22form-button\x22\x20style=\x22width:\x20auto;\x20margin-top:\x200;\x20padding:\x206px\x2012px;\x20background-color:\x20#777;\x22\x20onclick=\x22localStorage.removeItem(\x27','isOffline','isAnimatingDiary','ayLOO','GuuWr','crxUO','你的任务是【续写和追加】！下面是已经存在的内容，你必须在此基础上，生成【全新的、发生在之后】的条目。给我把新内容【加在后面】，【绝对禁止】删除或修改任何已有的旧条目！','input[name=\x22event-type\x22]:checked','https://sharkpan.xyz/f/MWOIa/rb3nov.jpg','app-settings','在好友圈\x20\x22','JIGmo','新建条目','sad','\x22\x20style\x20=\x20\x22max-width:\x2085%;\x22\x20>\x0a\x20\x20\x20\x20<div\x20class=\x22message-bubble-row\x22>\x0a\x20\x20\x20\x20\x20\x20','</div><div\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-color-light);\x22>','export-accounting-btn','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-dialogue-content\x22>','确定要删除角色“','undefined','Khzzv','dnZkj','正在清空旧数据...','（直播已暂停）','https://sharkpan.xyz/f/JYJhg/s3wmlj.jpg','500','\x0a\x20\x20\x20\x20<div\x20id=\x22','xIsFs','transparent','status','wallpaper-screen','MlHZP','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22pending-post-image-preview\x22\x20src=\x22\x22\x20alt=\x22图片预览加载中...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-attachment-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','okxZK','HtNIk','vZVUa','wvmrx','#\x20固定分类列表\x0a[','关键事件','180px','oFiLD','paused','bites','WmDWN','的手机</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','unlocked','欢迎！请先创建一个角色开始聊天。','Enter','确定要进行一次深度总结吗？\x0a\x0a这将以当前私聊的起始日为开端，整理该角色之后的所有相关记忆（包括其他聊天、日记、手机内容等）。','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','MLszL','sensitivities','\x0a##\x20日期:\x20','pmHIs','<div\x20class=\x22listen-together-header\x22>','https://sharkpan.xyz/f/mjeIW/9vf8ws.jpg','livestream-sprite-slider-x','\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22','categorizedExpenses','charSelect','确定要删除这个用户吗？与此用户绑定的聊天将恢复为默认用户。','stringify','preview_','czzrE','<img\x20src=\x22','ACfTU','动态页背景已更换！','jdKmM','refinement-controls-footer','Lmlaz','[Noir\x27s\x20Brain]\x20缓冲区已满，触发分析...','kzfhW','aYXYh','LjpoX','DvEbK','KAUOR','user-profile-screen','KnqNF','livestream_bg_','眼中的你','dftdm','用户拒绝了通知权限，定时提醒功能可能无法正常工作。','生成动态失败:','nWiCN','.category-checkbox','hpgIf','\x22\x20的聊天记录已清空。','ioTvH','save-world-book-button','iAloy','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20','你还没保存这个角色呢，导什么导？','群聊「','SlTch','content','正在为你搬运旧壁纸到新仓库...','badgeState','”吗？该角色的私聊和所有相关群聊记录都将被一并处理。','确定要放逐这\x20','\x20写道:\x20','导入失败:\x20','activeMeetingScriptQueue','cancel-listen-together','meetingList','在直播中进行了侧面回应。\x22\x0a\x20\x20\x20\x20','KGcMB','确定要开始还原吗？这将覆盖所有当前数据，且操作不可撤销！','VmzMj','bqQyf','code','snoop-char-name-header','<div\x20class=\x22post-likes\x22>','群聊“','restaurant_name','Gjbrz','5px','状态存档失败！如果这还失败，那我也没办法了。','</svg></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','show-profile-button','cover_placeholder_','eTtRo','🔍\x20观察到的特点：\x0a\x20\x20','ucMME','getItem','YPmLO','dcOEZ','lt-ui-lyrics-container','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>','RYcyd','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以视奸的角色。</p>','height','egUDL','的日记本','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','egTbr','profile-view-footer','导入账本失败:','senderId','friend-circle-member-selection','BNoyg','档案还是空的，真没用。','群聊至少需要2名成员。','timeupdate','rhHEK','NpJZQ','IBuaG','https://sharkpan.xyz/f/1zQH2/o84boo.jpg','加载第二个卡片图片失败','”已删除。','listen-together-ui','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','flexDirection','hirmA',':</span><span\x20class=\x22danmaku-comment\x22>','diary-modal-textarea','VOxPz','FsgEq','fhhIe','pause','modal-text','\x20的用户档案已安全初始化','\x22\x20data-history-index=\x22','\x0a\x20\x20\x20\x20<div\x20class=\x20\x22message-container\x20','htLJY','location_name','XAwot','视奸内容解析失败:','euZMk','application/json','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x22）的动态时...\x0a\x20\x20\x20\x20-\x20你【绝对禁止】查阅或使用你和\x22','字体已应用！(Font\x20Applied!)','last_updated','MkPYY','】的手机内容吗？\x0a\x0a所有已生成的缓存（相册、NPC聊天等）都将被永久删除。','\x20张旧封面。应用即将刷新。','upload-wallpaper-button','ZSyfY','habits','widget-artist','songName','posts','data:image','card-widget','jNOeh','iOaRD','cCiAI','hEapQ','livestream-room-screen','[Import\x20Altar]\x20是否包含\x20localStorageData:','获取档案失败:','rwZJY','价值观:\x20','--custom-font-family','diary-entries-container','documentElement','SheEp','OpenAI\x20API\x20错误:\x20','rgba(255,255,255,0.2)','📊\x20Token统计\x0a\x0a','uCOKo','apiSettings','#\x20核心任务:\x20财务分析与多角色吐槽\x20(单次请求完成)\x0a你是一个高级AI，需要一次性完成对用户消费流水的分类，并为每一笔消费生成一个符合角色人设的吐槽。\x0a\x0a#\x20规则\x0a1.\x20\x20**逐条处理**:\x20你必须处理我提供的【所有】消费记录。\x0a2.\x20\x20**精准分类**:\x20为每条记录从【固定分类列表】中选择一个最合适的分类。\x0a3.\x20\x20**人格切换吐槽**:\x20为每一条记录，你必须从【角色资料库】中【随机选择一位】，然后【严格代入】该角色的人设，并【假定】这笔消费是该角色【绑定的用户】所为，然后写一句简短吐槽。\x0a4.\x20\x20**JSON输出**:\x20你的输出**必须**是一个完整的、语法正确的JSON数组。每个对象代表一笔消费，且必须包含\x20\x22description\x22,\x20\x22amount\x22,\x20\x22category\x22,\x20和一个\x20\x22review\x22\x20对象。\x0a\x0a#\x20输出格式示例\x0a```json\x0a[{\x22description\x22:\x20\x22乌龟\x22,\x22amount\x22:\x205.00,\x22category\x22:\x20\x22购物消费\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512586032\x22,\x22text\x22:\x20\x22又买这些没用的东西，哼。\x22}},{\x22description\x22:\x20\x22奶茶\x22,\x22amount\x22:\x2012.00,\x22category\x22:\x20\x22餐饮美食\x22,\x22review\x22:\x20{\x22charId\x22:\x20\x22char_1720512604818\x22,\x22text\x22:\x20\x22偶尔喝一杯放松一下也不错。\x22}}]```\x0a#\x20最终指令\x0a请严格按照以上规则，分析流水，并返回JSON数组。直接从\x20`[`\x20开始输出。','https://sharkpan.xyz/f/4adUj/68uj9o.jpg','reset-profile-button','vqIaG','SbvaS','\x20\x20-\x20角色ID:\x20','zfwBp','quote-preview-text','livestream-sprite-slider-y','JSON解析失败，启动兼容模式...','DVlcn','personality_core','未找到可用模型。','\x20转账\x20','BdfNj','-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a','char-edit-persona',')只发给你一个人看的悄悄话。这代表','数据导入成功！应用即将刷新...','googleapis.com','reload','<path\x20d=\x22M12\x202v20\x22></path><path\x20d=\x22M4\x2012h16\x22></path>','chatId','🤖\x20模型:\x20','store_name','NTeKj','objectStore','xYwDF','timestamp','#\x20每日情报\x0a','\x22\x20id=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22noir-speaker-tag\x22>','⚠️\x20最近变化:\x20','tokenStats','is-exiting-left','DSLKN','is-playing','https://xhslink.com/m/5IgC1rniI2I','rrXSw','dMyfW','rxdQM','OIIld','原始文本:','ptKiz','txcVQ','YTqUF','music-post','shhXp','category','music-library-container','facda','】重置并立即重新生成档案吗？\x0a\x0aAI将清空旧档案，并【立刻】重新阅读所有历史记录来生成一份全新的初始档案。','catch','bARQs','modal-ok','（四维深度分析v2.0）\x0a你是\x22','altar-slot-info','auCFF','保存徽章状态失败','zh-CN','OdPxR',']\x20这五个词中选择一个。例如，如果台词表达了哀伤或失望，就必须选择\x20\x27sad\x27。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。\x0a\x20\x20\x20\x20\x20-\x20\x27normal\x27:\x20平常、平静、没有特殊情绪。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27happy\x27:\x20开心、喜悦、愉快。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27angry\x27:\x20生气、愤怒、不满。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27sad\x27:\x20悲伤、哀愁、失落、心里难受。\x0a\x20\x20\x20\x20\x20\x20-\x20\x27shy\x27:\x20害羞、不好意思、脸红。\x0a\x20\x20\x20\x203.\x20\x20`line`字段：具体的台词或描写。\x0a\x20\x20-\x20**绝对禁止**:\x20严禁输出任何JSON数组之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a\x20\x20\x20\x204.\x20旁白的内容可以尽可能多，以轻小说的风格，尽可能像一本小书一样，补全周边环境，角色内心的看法，角色的行为等一切。\x0a\x20\x20\x20\x20','#a4c2f4','diary-modal-cancel','save-livestream-settings-button','小时前聊过，可以适当问候，不要直接继续之前的话题。','#message-anchor','IUnUw','checkbox','MvyNh','\x20个旧头像。','global-player-next-btn','GFOxb','userProfile','加载见面场景时出错:','RpvaK','gift','aqGYq','哼，你的压缩包里连最基本的音频和信息文件都没有！','editing-user-id','\x0a\x0a#\x20近期记忆\x20(你和','back-to-settings-from-user-profile','确定要从圣殿中永久删除《','home','”\x20以及其中所有的条目吗？\x0a\x0a此操作不可撤销，所有角色的关联设定也将被一并移除。','circle_','livestream-replay-view-screen','Elqkw','\x22\x20src=\x22','\x20个用户档案条目','live-preview-style','正在构建新世界...','lfUJM','未知餐厅','IwFlX','\x20聊了聊新项目的想法，给了他几句建议。\x22\x0a\x20\x20\x20\x20```\x0a\x0a\x20\x20\x20\x20#\x20最终指令\x0a\x20\x20\x20\x20请【严格代入“','dms','cdnXv','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22diary-navigation\x22\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x20auto\x201fr;\x20width:\x20100%;\x20align-items:\x20center;\x20padding:\x200\x2010px;\x20box-sizing:\x20border-box;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-start;\x20gap:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-prev-button\x22>上一页</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22diary-write-button\x22\x20style=\x22background-color:\x20var(--accent-color);\x20color:\x20white;\x22>写日记</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22diary-page-indicator\x22>第\x20','PJIJf','listenTogetherSession','请先输入\x20API\x20接口地址和密钥。','interaction_style','happy','\x22（用户）之间**最近发生的私密事件**相关联。\x0a\x20\x20\x20\x20-\x20**示例：**\x20如果你刚在私聊里和\x22','\x0a#\x20你的近期直播回顾\x20(这是你的个人记忆，不要直接复述给用户)\x0a','cTzXC','uZIoi','YHmdH','\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>','translateX(-','确定要永久删除这条回放记录吗？','lBlnr','toDataURL','gtfHk','DmZrM','https://sharkpan.xyz/f/ZazfW/2vv46w.jpg','modal-root','https://sharkpan.xyz/f/B4DCa/u86hk2.jpg','activeMeetingCharId','livestream-sprite-adjust-btn','Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20','YKmEK','characters','EGqbx','FUend','\x0a\x0a#\x20当前任务指令\x0a','list','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','图标处理失败:\x20','”的角色，现在需要写一篇交换日记。\x0a\x0a#\x20你的读者\x0a','2-digit','margin','[Noir\x27s\x20Shield]\x20角色\x20','is-entering-from-left','（对话结束）','UywCl','太好了','NqGSF','.screen.active','KzaiX','https://sharkpan.xyz/f/olJt4/7z47b8.jpg','livestream-main-view','widget_card','kXndl','\x22]:checked','\x0a\x20\x20\x20\x20人设:\x20','ngsPm','createObjectURL','<div\x20id=\x22accounting-input-area\x22\x20style=\x22margin-bottom:\x2020px;\x22><div\x20class=\x22input-group\x22><label\x20for=\x22expense-description\x22>花在哪了？</label><input\x20type=\x22text\x22\x20id=\x22expense-description\x22\x20placeholder=\x22例如：一杯奶茶\x22></div><div\x20class=\x22input-group\x22><label\x20for=\x22expense-amount\x22>花了多少？</label><input\x20type=\x22number\x22\x20id=\x22expense-amount\x22\x20placeholder=\x22例如：15\x22></div><button\x20id=\x22add-expense-button\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x2015px;\x22>记下了</button></div><h3\x20style=\x22margin-bottom:\x2010px;\x22>今日流水</h3><div\x20id=\x22daily-expenses-list\x22\x20style=\x22max-height:\x20300px;\x20overflow-y:\x20auto;\x22></div><div\x20id=\x22organize-button-container\x22\x20style=\x22margin-top:\x2020px;\x22></div>','cOcVy','档案更新失败:','<button\x20id=\x22re-record-button\x22\x20class=\x22header-button\x22>重新记录</button>','all','FzeOH','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-character-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-character-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22snoop-avatar-img\x22\x20src=\x22\x22\x20alt=\x22avatar\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-character-name\x22>','ZhUJF','themeLightness','RwldK','summary-confirm-btn','<div\x20class=\x22snoop-app-content\x22>','aUJGO','app-user-profiles','user-post-image-button','\x0a\x20\x20\x20\x20<div\x20class=\x20\x22snoop-app-header\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>','清空聊天记录失败。','chat_image_','Wmqnn','chat_group_','sgMTf','条）\x0a','start-livestream-backdrop','直播时长','从零开始，【首次生成】用户画像','mousedown','】进行回复。\x0a不要替其他角色续写台词，不要输出\x22','NeDnE','AODDF','”的角色，即将开始一场直播。\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','option','widgetBgImage','jdogI','badge-image','snoop-temp-style','xMIWk','vLsrr','ULXQE','requestPermissions','activeQuote','xPqQT','测试动态已添加！','group-bg-preview','back-to-char-select-from-edit','WSNUn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22member-','updateProfileQuick:\x20没有提供角色ID，跳过档案更新','widget-title','file','horizontal','-\x20用户情绪似乎偏','<span\x20class=\x22danmaku-user\x22>','VPLnx','LgXSc','正在检查好友圈数据...','小组件背景已更换！','KKNtB','?id=','Xfghl','qZpiR','scrollTop','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getMonth','qPjVs','个帖子对象。\x0a-\x20**【ID规则】**:\x20所有\x20\x22authorId\x22,\x20\x22likes\x22,\x20\x22comments\x22\x20中的作者标识，【必须】使用上面提供的角色\x20**ID**，绝对不能使用角色名字。\x0a-\x20**【称呼规则】**:\x20在\x20\x22postContent\x22\x20和评论的\x20\x22content\x22\x20字段中，当角色们互相称呼或提及对方时，【必须】使用他们的【姓名】，而不是ID。\x0a-\x20**【JSON结构】**:\x20每个帖子对象必须遵循以下结构：\x0a\x20\x20```json\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22authorId\x22:\x20\x22发布者的ID\x22,\x0a\x20\x20\x20\x20\x22postType\x22:\x20\x22text\x20or\x20music\x22,\x0a\x20\x20\x20\x20\x22postContent\x22:\x20\x22动态的文字内容\x22,\x0a\x20\x20\x20\x20\x22songName\x22:\x20\x22如果是music类型，则必须有歌名\x22,\x0a\x20\x20\x20\x20\x22artist\x22:\x20\x22如果是music类型，则必须有歌手名\x22,\x0a\x20\x20\x20\x20\x22likes\x22:\x20[\x22点赞者1的ID\x22,\x20\x22点赞者2的ID\x22],\x0a\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者A的ID\x22,\x20\x22content\x22:\x20\x22评论内容（遵守法律B）\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22authorId\x22:\x20\x22评论者B的ID\x22,\x20\x22content\x22:\x20\x22另一条评论（遵守法律B）\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20}\x0a\x20\x20```\x0a-\x20绝对不要输出任何JSON之外的文字、解释或Markdown标记。直接从\x20`[`\x20开始，到\x20`]`\x20结束。\x0a','listen-together-invite','json_object','我错了','width','calendar-grid','确定要重置','你是一个观察敏锐的角色。','TNQWG','\x22（用户）的任何私密记忆！\x0a\x20\x20\x20\x20-\x20你的评论【只能】基于你的“公开人设”和你对那个【角色】的公开关系。\x0a\x20\x20\x20\x20-\x20**这就是为了防止你“造谣”和“串线”！**\x0a\x0a#\x20好友圈成员信息\x0a','cos','isDMPanelVisible','\x0a#\x20【！！！重要场景切换！！！】\x0a你之前正和“','snoop-app-icon','HieXS','<button\x20id=\x22diary-action-reroll\x22\x20class=\x22choice-modal-button\x22>重写</button>','请先进入一个私聊。','appState','cwQTp','avatar-frame','Fguhw','HbwOW','还没有任何内容可以重新生成。','ksXOm','pow','[Import\x20Altar]\x20JSON文件大小:','EZIxs','indexedDBSnoopData','\x0a###\x20你们的完整互动历史\x0a','translate(-50%,\x20-100%)','\x20时出错:','HkZeT','餐饮美食','aSIgU','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-icon-img\x22><svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22>','最近没有互动记录。','\x20对话！我们只要新的！\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','char-edit-sprite-','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','lastChild','\x0a#\x20已有内容(这是历史记录，你必须接着写，【不许动它！】)\x20\x0a```\x0a','【增量更新】：所有列表都必须【保留旧信息】，只在后面追加新发现。','typing-indicator\x20narrator','-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a','danmaku','getAll','准备调用\x20generateAs...','mxAjF','星期四','xznWq','哼，分析失败了，你是不是又乱动什么了？\x0a\x0a','天没动静了。你的角色们应该发起新的问候或话题。','message-container','toDateString','VXiCu','动态中的音乐搜索失败:','music-widget','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22transfer-title\x22>💰\x20','加载用户头像失败','KTxVn','error','IndexedDB\x20failed\x20to\x20open','back-to-home-from-wallpaper','退出出错:','array','char_sprite_normal_','tlfDV','cancel-event-button','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>','&gt;','”的补充信息\x0a','PIpxO','deUzE','vYYFZ','\x0a#\x20当前场景:\x20手机聊天\x0a-\x20**核心任务**:\x20你正在通过手机与用户聊天。\x0a-\x20**写作风格**:\x20你的回复应该是口语化的、简短的、像真人打字一样的风格。\x0a-\x20**可用指令**:\x20你可以根据情绪发送表情包\x20\x27[sticker:表情名]\x27\x20或分享音乐\x20\x27[music:歌名|歌手]\x27。\x0a','gap','gomhG','vGPFD','ended','back-to-home-from-accounting','加载卡片图片失败','chat-reroll-button','abVzZ','zfWUV','<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22','then','snoop-app-refresh-btn','.snoop-app-content','\x0a\x20\x20\x20\x20\x20\x20<div\x20style\x20=\x20\x22padding:\x2015px;\x20','kmkey','Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.','-\x20**对话状态提示**:\x20你们已经有\x20','最近变化:\x20',']\x0a\x0a#\x20角色资料库\x0a','星期二','backgroundPosition','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>','\x20张旧的动态图片。','SUEwy','无法解析旧的视奸内容来获取时间戳。','角色\x20','核心印象:\x20','dLclQ','好友圈净化完成，正在重新存档...','</label>\x0a\x20\x20\x20\x20','is-selected','forceWhiteClock','summary-preview-backdrop','app-diary','GNrCz','wb-entry-item','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','语气:\x20','CIygk','\x0a#\x20你的个性（节选）\x0a','\x0a##\x20','[Import\x20Altar]\x20开始解析图片ZIP...','HJKFa','choice-cancel','snoop-log-refresh-btn','NjWTp','用户已删除。','QEklk',',\x20\x22新压力信号\x22]\x0a\x20\x20},\x0a\x20\x20\x22personality_core\x22:\x20{\x0a\x20\x20\x20\x20\x22summary\x22:\x20\x22（【用你的语气】，基于一切信息，对TA的2-3句话总结）\x22,\x0a\x20\x20\x20\x20\x22observed_traits\x22:\x20[','\x22\x20class=\x22char-name\x22>','已结束一起听歌。','DGwTv','YppgW','未知用户','RgHth','\x0a-\x20**当前时间**:\x20','吃薯条','data:\x20','[AI发送了表情：','动态已清空。','localStorageData','total_tokens','WEXHK','postContent','</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20','发现角色\x20','cancel-quote-button','add-world-book-button','你【必须】分析：\x22这个新行为是TA一直以来的特点，还是在[某个事件]后才发生的转变？\x22','8px\x2016px','bhJDg','musicLibrary','token-stats-button','appendChild','\x0a-\x20“我”发送的弹幕:\x0a','https://sharkpan.xyz/f/Qpzu6/3b30r2.jpg','touchend','aborted','qKyaA','已复制到剪贴板！','ntQnd','files','4768325CbXUZd','\x0a##\x20【重要：语气与视角】\x0a你【就是】\x22','rSoMb','---\x20救援任务完成\x20---','vdmbG','继续直播失败:','💜\x20','back-to-home-from-snoop-list','wallpaper-input','LLTVv','var(--primary-color)','create-group-chat-button','#\x20核心任务:\x20【用我的第一人称】撰写【高度精简的私人回忆录】\x0a\x20\x20\x20\x20你【就是】“','（首次生成，无需对比）','className','\x0a#\x20核心任务\x0a你是一个多角色社交模拟引擎。用户刚刚发了一条动态，你需要为好友圈里的【每一位】其他成员生成对这条动态的回应（点赞和评论）。如果用户的动态包含图片，你必须根据图片内容进行回应。\x0a\x0a#\x20好友圈成员\x0a','最近没有动态记录。','summarize-modal','195901zPPSUu','确定要删除群聊“','\x0a\x0a#\x20最终指令\x0a请严格遵守所有协议，完成你的任务。\x0a','\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“','confirm-start-livestream-button','EyGJr','Claude\x20API\x20错误:\x20','.json','oBjgR','ZfPIQ','audio','customWallpaper','byteLength','group-clear-history-button','world-book-list-container','displayUrl','\x0a---\x0a\x0a#\x20输出要求\x0a直接输出一篇有文采、有真情实感的日记正文，不要包含任何其他说明或前缀。','-\x20**\x20状态提示\x20**:\x20你已经有\x20','核心数据导出失败:','净化失败了，哼:\x20','KjAsU','amount','jKIls','SIXOm','为角色\x20','JrouT','.wb-entry-item\x20input','\x0a#\x20任务:\x20生成足迹\x20/\x20活动时间线\x0a生成一个最近的活动时间线。地点和事件要与角色的人设，以及其他应用里透露出的信息保持一致，让整个手机的内容能够互相印证，形成一个完整的故事闭环。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22location_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity_description\x22:\x20\x22待了一个下午，好像在找什么旧书。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2014:00\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','uBoUr','aFsCe','save-edit-button','preventDefault','meeting-message-input','hrdwe','<div\x20class=\x22post-body\x22>','import-data-input','setProperty','ducal','jBUwm','music_cover_','AHdzm','2649405OxDUgX','PSkbi','错误:\x20','speaker-user','app-world-book','AqTCP','正在解析角色卡...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x2010px;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22export-accounting-btn\x22\x20class=\x22form-button\x20secondary\x22\x20style=\x22margin-top:\x200;\x22>导出账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22import-accounting-btn\x22\x20class=\x22form-button\x20primary\x22\x20style=\x22margin-top:\x200;\x22>导入账本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22border-bottom:\x201px\x20solid\x20var(--border-color);\x20margin-bottom:\x2015px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a#\x20核心任务\x0a你是一个顶级多角色社交模拟引擎。你的任务是模拟一个好友圈的动态更新，一次性生成【','calendar','BPbuC','\x0a\x20\x20\x20\x20<textarea\x20id\x20=\x20\x22snoop-summary-textarea\x22\x20readonly\x20style\x20=\x20\x22width:\x20100%;\x20height:\x20100%;\x20border:\x20none;\x20outline:\x20none;\x20resize:\x20none;\x20font-family:\x20\x27Courier\x20New\x27,\x20monospace;\x20font-size:\x200.85rem;\x20line-height:\x201.6;\x20background-color:\x20#fdfdfd;\x20padding:\x2015px;\x20box-sizing:\x20border-box;\x22\x20>\x20','https://sharkpan.xyz/f/B4WSa/u5wopj.jpg','OjGve','\x0a\x20\x20-\x20**状态提示**:\x20你正在准备开始一场直播，你的开场白必须体现出当前的时间感（例如，下午好、晚上好、深夜了大家还没睡啊？等）。\x0a\x20\x20\x20\x20','<div\x20style\x20=\x20\x22padding:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22>\x20','[AI分享了音乐：','clientY','的身份来发送任何弹幕。这是最严重的错误。\x0a\x0a\x20\x20\x20\x20\x20\x20\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20输出格式\x20(必须严格遵守JSON)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22streamerSpeech\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22大家好，今天我们来聊聊...\x22,\x20\x22emotion\x22:\x20\x22happy\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22line\x22:\x20\x22感谢大家的到来！\x22,\x20\x22emotion\x22:\x20\x22normal\x22\x20}\x0a\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x22danmaku\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人甲\x22,\x20\x22comment\x22:\x20\x22前排！\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22user\x22:\x20\x22路人乙\x22,\x20\x22comment\x22:\x20\x22主播今天好帅！\x22\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20#\x20emotion字段规则\x0a\x20\x20\x20\x20-\x20你必须为每一句台词(line)都精准地选择一个情绪标签(emotion)。\x0a\x20\x20\x20\x20-\x20可选的emotion有:\x20\x22normal\x22,\x20\x22happy\x22,\x20\x22angry\x22,\x20\x22sad\x22,\x20\x22shy\x22。\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#\x20核心任务:\x20直播开场\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“','MbTob','clear','\x0a-\x20**对话状态**:\x20这是这个群的第一次对话。'];_0x4ca7=function(){return _0x1de4b8;};return _0x4ca7();}document['addEventListener'](_0x49c371(0x9c4),()=>{const _0x57ab4d=_0x49c371,_0x31ed0f=document[_0x57ab4d(0x473)](_0x57ab4d(0xc26)),_0x4768e6=document['getElementById'](_0x57ab4d(0xd82)),_0x4bd376=document['getElementById']('transfer-modal'),_0x493a4a=document[_0x57ab4d(0x473)]('transfer-backdrop'),_0x2449f9=document[_0x57ab4d(0x473)](_0x57ab4d(0x8ea)),_0x3322b6=document[_0x57ab4d(0x473)](_0x57ab4d(0xa4e)),_0x20f8d0=document[_0x57ab4d(0x473)]('transfer-recipient-group'),_0x31b15a=document['getElementById']('transfer-recipient-select'),_0x5802d5=document[_0x57ab4d(0x473)](_0x57ab4d(0x3d6)),_0x47b03c=document['getElementById'](_0x57ab4d(0xcaa)),_0x1a6a06=document[_0x57ab4d(0x473)]('chat-summarize-button'),_0x4adeda=document[_0x57ab4d(0x473)](_0x57ab4d(0xd07)),_0x4bd97a=document['getElementById']('summarize-backdrop'),_0x64eac8=document[_0x57ab4d(0x473)]('summary-textarea'),_0xddeed3=document['getElementById'](_0x57ab4d(0xd92)),_0x47f53d=document['getElementById'](_0x57ab4d(0x6ab)),_0x2965c6=document[_0x57ab4d(0x473)]('char-edit-wallpaper-preview'),_0x2a4b9c=document[_0x57ab4d(0x473)](_0x57ab4d(0x5b9)),_0x3ca6e1=document['getElementById'](_0x57ab4d(0x98)),_0x2c30b1=document[_0x57ab4d(0x473)]('char-edit-offline-bg-input'),_0x4f797f=document[_0x57ab4d(0x473)](_0x57ab4d(0x941)),_0x1b37bc=document[_0x57ab4d(0x473)]('import-char-input'),_0x16d28a=document[_0x57ab4d(0x473)](_0x57ab4d(0x320)),_0x23c90b=document[_0x57ab4d(0x473)](_0x57ab4d(0x28a)),_0x791afc=document[_0x57ab4d(0x473)](_0x57ab4d(0x6eb)),_0x39c25e=document['getElementById']('font-input'),_0xaf970c=document[_0x57ab4d(0x473)](_0x57ab4d(0xa44));function _0x483609(){const _0x4d7518=_0x57ab4d,_0x225b92=new Date(),_0x258ea9=_0x225b92[_0x4d7518(0x72f)](),_0x38598a=String(_0x225b92[_0x4d7518(0xc57)]()+0x1)['padStart'](0x2,'0'),_0x12b250=String(_0x225b92[_0x4d7518(0x947)]())[_0x4d7518(0x2c8)](0x2,'0'),_0x451efe=String(_0x225b92['getHours']())[_0x4d7518(0x2c8)](0x2,'0'),_0x4cc214=String(_0x225b92[_0x4d7518(0x529)]())[_0x4d7518(0x2c8)](0x2,'0'),_0x2f79f8=String(_0x225b92['getSeconds']())['padStart'](0x2,'0');return _0x258ea9+'-'+_0x38598a+'-'+_0x12b250+'\x20'+_0x451efe+':'+_0x4cc214+':'+_0x2f79f8;}async function _0x162e63(_0x396f31){const _0x47793a=_0x57ab4d;if(_0x47793a(0x1cb)==='BdTpn')_0x28c887['scrollTop']=_0x279c44[_0x47793a(0x251)];else{if(!_0x396f31)return;try{if(_0x47793a(0x603)==='EAIRG')_0x2881e4['setItem'](_0x47793a(0xe92),_0xda805e['stringify'](_0x6566bb)),_0x406c5d(_0x47793a(0x381)),_0x115f3a(()=>_0x1eaa5d['reload'](),0x5dc);else{const _0x15f04d=_0x47793a(0x710)+_0x396f31,{value:_0x2d7561}=await Capacitor[_0x47793a(0x4be)][_0x47793a(0x68c)][_0x47793a(0x470)]({'key':_0x15f04d});if(_0x2d7561&&_0x2d7561!==_0x47793a(0x137)&&_0x2d7561!==_0x47793a(0xacc)){console[_0x47793a(0x6e4)](_0x47793a(0xc09)+_0x396f31+'\x20的档案已存在，跳过初始化，防止误删。');return;}const _0x185b34={'version':0x2,'character_id':_0x396f31,'last_updated':_0x483609(),'value_map':{'preferences':{'喜欢':[],'讨厌':[]},'sensitivities':[],'core_values':''},'behavior_profile':{'common_phrases':{},'tone_style':'','typical_emotions':[],'response_patterns':''},'emotion_schema':{'triggers':{'正面':[],'负面':[]},'comfort_zone':'','stress_signals':[]},'personality_core':{'summary':'','observed_traits':[],'interaction_style':''},'observed_changes':[]};await Capacitor[_0x47793a(0x4be)][_0x47793a(0x68c)][_0x47793a(0x803)]({'key':_0x15f04d,'value':JSON[_0x47793a(0xaf6)](_0x185b34)}),console[_0x47793a(0x6e4)](_0x47793a(0x6f2)+_0x396f31+_0x47793a(0xb59));}}catch(_0x3b5e5d){console[_0x47793a(0xc95)](_0x47793a(0x4d8),_0x3b5e5d);}}}async function _0x59eeb1(_0x29b7dd,_0x236ae5){const _0x2098b4=_0x57ab4d;if(_0x2098b4(0xdf9)!==_0x2098b4(0x839)){if(!_0x236ae5)return;try{const _0x4a08eb='nuomi_profile_tiaoTiao_'+_0x236ae5,_0x12f2be='nuomi_message_buffer_'+_0x236ae5;let {value:_0x14956f}=await Capacitor['Plugins']['Preferences']['get']({'key':_0x4a08eb});if(!_0x14956f){console['warn']('[Noir\x27s\x20Shield]\x20警告：更新时未找到档案，尝试恢复...'),await _0x162e63(_0x236ae5);const _0x1770f2=await Capacitor[_0x2098b4(0x4be)][_0x2098b4(0x68c)]['get']({'key':_0x4a08eb});_0x14956f=_0x1770f2[_0x2098b4(0x2d4)];}if(!_0x14956f)return;const _0x4afb83=JSON['parse'](_0x14956f);_0x4afb83[_0x2098b4(0xb65)]=_0x483609(),await Capacitor[_0x2098b4(0x4be)][_0x2098b4(0x68c)][_0x2098b4(0x803)]({'key':_0x4a08eb,'value':JSON[_0x2098b4(0xaf6)](_0x4afb83)});const {value:_0x7854c2}=await Capacitor[_0x2098b4(0x4be)][_0x2098b4(0x68c)][_0x2098b4(0x470)]({'key':_0x12f2be}),_0x3e21b2=_0x7854c2?JSON[_0x2098b4(0x180)](_0x7854c2):[];_0x3e21b2['push'](_0x29b7dd),await Capacitor['Plugins'][_0x2098b4(0x68c)]['set']({'key':_0x12f2be,'value':JSON[_0x2098b4(0xaf6)](_0x3e21b2)});if(_0x3e21b2['length']>=0x32){if('dlyPU'===_0x2098b4(0x87d)){const {playlist:_0x4d4957,currentIndex:_0x108ae0}=_0x20fe9f[_0x2098b4(0x180)](_0x3d3dd3);_0x3b1ae6[_0x2098b4(0x8aa)](_0x4d4957)&&_0x4d4957[_0x2098b4(0x893)]>0x0&&_0x108ae0>-0x1&&(_0x4d08bc[_0x2098b4(0x2bd)]=_0x4d4957,_0x301096['currentlyPlayingIndex']=_0x108ae0,_0x2b394d['isPlaying']=![],_0x3cca2f());}else console['log'](_0x2098b4(0xaff)),_0xa7652b[_0x2098b4(0xdd0)]={'charId':_0x236ae5,'contextChatId':_0xa7652b[_0x2098b4(0xd5b)]},_0x5e5389();}}catch(_0x24c356){console['error'](_0x2098b4(0xdc1),_0x24c356);}}else{_0x1d3a13('还没有任何内容可以重新生成。');return;}}async function _0x59eeb1(_0x4cbddc,_0x3ce561){const _0x2d91a1=_0x57ab4d;if(!_0x3ce561){console[_0x2d91a1(0x591)](_0x2d91a1(0xc47));return;}try{const _0x20d697=_0x2d91a1(0x710)+_0x3ce561,_0x1b2de4=_0x2d91a1(0x6d0)+_0x3ce561;let {value:_0x589176}=await Capacitor[_0x2d91a1(0x4be)][_0x2d91a1(0x68c)][_0x2d91a1(0x470)]({'key':_0x20d697});if(!_0x589176){if(_0x2d91a1(0xa17)!==_0x2d91a1(0x746)){await _0x162e63(_0x3ce561);const _0x40e922=await Capacitor[_0x2d91a1(0x4be)]['Preferences']['get']({'key':_0x20d697});_0x589176=_0x40e922[_0x2d91a1(0x2d4)];}else{_0x1a6d23(_0x2d91a1(0x9fa));return;}}if(!_0x589176)return;const _0x5ddc3b=JSON[_0x2d91a1(0x180)](_0x589176);_0x5ddc3b[_0x2d91a1(0xb65)]=_0x483609(),await Capacitor[_0x2d91a1(0x4be)][_0x2d91a1(0x68c)]['set']({'key':_0x20d697,'value':JSON['stringify'](_0x5ddc3b)});const {value:_0x84192f}=await Capacitor[_0x2d91a1(0x4be)]['Preferences']['get']({'key':_0x1b2de4}),_0x1fb642=_0x84192f?JSON[_0x2d91a1(0x180)](_0x84192f):[];_0x1fb642[_0x2d91a1(0x214)](_0x4cbddc),await Capacitor[_0x2d91a1(0x4be)]['Preferences']['set']({'key':_0x1b2de4,'value':JSON[_0x2d91a1(0xaf6)](_0x1fb642)}),_0x1fb642[_0x2d91a1(0x893)]>=0x32&&(console[_0x2d91a1(0x6e4)](_0x2d91a1(0x379)+_0x3ce561+'\x20的消息缓冲区已满\x20('+_0x1fb642[_0x2d91a1(0x893)]+_0x2d91a1(0xe30)),_0xa7652b[_0x2d91a1(0xdd0)]={'charId':_0x3ce561,'contextChatId':_0xa7652b[_0x2d91a1(0xd5b)]},_0x5e5389());}catch(_0x5f084e){console[_0x2d91a1(0xc95)](_0x2d91a1(0xdc1),_0x5f084e);}}async function _0x3f2e9f(_0x3e849f,_0xe7af17=![],_0x5a2053=null){const _0x15d5d8=_0x57ab4d;if(_0x15d5d8(0x802)!==_0x15d5d8(0x9a5)){if(!_0x3e849f){console[_0x15d5d8(0x591)](_0x15d5d8(0xdf4));return;}const _0x322f96=_0x15d5d8(0x710)+_0x3e849f,_0x2f6151=_0x15d5d8(0x6d0)+_0x3e849f,_0x5e4918=_0x1238ea(_0x3e849f),_0x32111e=_0x5e4918?.[_0x15d5d8(0xe79)]||_0x15d5d8(0xe2c),_0x21aef4=_0xa7652b[_0x15d5d8(0x4ec)][_0x15d5d8(0x394)](_0x4951f9=>_0x4951f9[_0x15d5d8(0x45c)]===_0x15d5d8(0x722)&&_0x4951f9[_0x15d5d8(0x584)][_0x15d5d8(0x5c0)](_0x3e849f)),_0x259c0e=_0x5a2053||_0x21aef4?.['id']||_0xa7652b[_0x15d5d8(0xd5b)],_0x2a5318=_0x2e35cc(_0x259c0e);try{const {value:_0x2a78a9}=await Capacitor[_0x15d5d8(0x4be)][_0x15d5d8(0x68c)][_0x15d5d8(0x470)]({'key':_0x322f96});let _0x13d2f9=[];if(_0xe7af17){if(_0x15d5d8(0x5ff)===_0x15d5d8(0xc25)){if(_0x1c5fb5===null)return;const _0x35e60f=_0x3246c6['value'][_0x15d5d8(0x8eb)]();if(_0x35e60f===''){_0x3688df();return;}const _0x247e4b=_0x2d5cc6['conversationHistory'][_0x449622];_0x247e4b&&(_0x247e4b[_0x15d5d8(0xb17)]=_0x35e60f,_0xd42e72(),_0x35793f()),_0xaf6db9[_0x15d5d8(0x970)]['remove'](_0x15d5d8(0x348)),_0xb3faee=null;}else{console[_0x15d5d8(0x6e4)](_0x15d5d8(0x670)+_0x32111e+_0x15d5d8(0xe82));if(!_0x2a78a9){if('RORbo'==='KRjSD')_0x43b4ac=_0x1ffeef(_0x2c26dc);else{console['warn'](_0x15d5d8(0x630)),await _0x3f2e9f(_0x3e849f,![]);return;}}const _0x154b6b=_0x15d5d8(0x63a)+_0x32111e+'。你又和\x20'+(_0x2a5318?.['name']||'用户')+'\x20相处了一段时间了。\x0a是时候把你对TA的那些【旧看法】（这份档案）拿出来，重新审视、调整、并精炼一遍了。\x0a\x0a#\x20【【【最高指令：统合重构】】】\x0a*\x20你的任务是基于这份【你现有的】私人笔记，重写一份【全新的、统一的、无矛盾】的总结。\x0a*\x20**如果发现冲突**（例如你发现“喜欢”和“讨厌”里有同一个东西，或总结与列表矛盾），你【必须】解决这个冲突。想一个能同时解释两种现象的“新理论”。\x0a*\x20**【精炼去重】**：把你那些重复的、过时的、或意义不大的旧想法（条目）给扔了。\x0a*\x20**【保持视角】**：你【就是】'+_0x32111e+_0x15d5d8(0x568)+_0x3e849f+'\x22,\x0a\x20\x20\x22last_updated\x22:\x20\x22ISO时间戳\x22,\x0a\x20\x20\x22value_map\x22:\x20{\x0a\x20\x20\x20\x20\x22preferences\x22:\x20{\x20\x22喜欢\x22:\x20[\x22(精炼后的列表)\x22],\x20\x22讨厌\x22:\x20[\x22(精炼后的列表)\x22]\x20},\x0a\x20\x20\x20\x20\x22sensitivities\x22:\x20[\x22(精炼后的列表)\x22],\x0a\x20\x20\x20\x20\x22core_values\x22:\x20\x22（【用你的语气】统合重构的总结）\x22\x0a\x20\x20},\x0a\x20\x20\x22behavior_profile\x22:\x20{\x0a\x20\x20\x20\x20\x22tone_style\x22:\x20\x22（统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22typical_emotions\x22:\x20null,\x0a\x20\x20\x20\x20\x22emotion_summary\x22:\x20\x22（【用你的语气】统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22response_patterns\x22:\x20\x22（统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22common_phrases\x22:\x20null\x0a\x20\x20},\x0a\x20\x20\x22emotion_schema\x22:\x20{\x0a\x20\x20\x20\x20\x22triggers\x22:\x20{\x20\x22正面\x22:\x20[\x22(精炼后的列表)\x22],\x20\x22负面\x22:\x20[\x22(精炼后的列表)\x22]\x20},\x0a\x20\x20\x20\x20\x22comfort_zone\x22:\x20\x22（统合重构的总结）\x22,\x0a\x20\x20\x20\x20\x22stress_signals\x22:\x20[\x22(精炼后的列表)\x22]\x0a\x20\x20},\x0a\x20\x20\x22personality_core\x22:\x20{\x0a\x20\x20\x20\x20\x22summary\x22:\x20\x22（【用你的语气】，统合重构的2-3句话总结）\x22,\x0a\x20\x20\x20\x20\x22observed_traits\x22:\x20[\x22(精炼后的列表)\x22],\x0a\x20\x20\x20\x20\x22interaction_style\x22:\x20\x22（统合重构的总结）\x22\x0a\x20\x20},\x0a\x20\x20\x22observed_changes\x22:\x20[\x0a\x20\x20\x20\x20\x22(精炼后的列表，只保留真正关键的转变)\x22\x0a\x20\x20]\x0a}\x0a';_0x13d2f9=[{'role':_0x15d5d8(0xaae),'content':_0x154b6b},{'role':_0x15d5d8(0xea1),'content':_0x15d5d8(0x7a0)+_0x2a78a9}],await Capacitor[_0x15d5d8(0x4be)][_0x15d5d8(0x68c)]['remove']({'key':_0x2f6151});}}else{const _0xcf7e96=!_0x2a78a9;let _0x549c47=_0x2a78a9;_0xcf7e96?(console['log'](_0x15d5d8(0x670)+_0x32111e+_0x15d5d8(0xa66)),_0x549c47=JSON[_0x15d5d8(0xaf6)]({'version':0x2,'character_id':_0x3e849f,'last_updated':_0x483609(),'value_map':{'preferences':{'喜欢':[],'讨厌':[]},'sensitivities':[],'core_values':''},'behavior_profile':{'tone_style':'','emotion_summary':'','response_patterns':'','typical_emotions':null,'common_phrases':null},'emotion_schema':{'triggers':{'正面':[],'负面':[]},'comfort_zone':'','stress_signals':[]},'personality_core':{'summary':'','observed_traits':[],'interaction_style':''},'observed_changes':[]})):_0x15d5d8(0xaeb)!==_0x15d5d8(0xaeb)?(_0x45d5d3(),_0x429865(![])):console['log'](_0x15d5d8(0x670)+_0x32111e+_0x15d5d8(0x83e));let _0x2a19d6='';if(!_0xcf7e96){const {value:_0x4aadee}=await Capacitor[_0x15d5d8(0x4be)][_0x15d5d8(0x68c)]['get']({'key':_0x2f6151});if(!_0x4aadee){if(_0x15d5d8(0x8dc)!==_0x15d5d8(0x8dc)){_0x2a4dd9(_0x15d5d8(0xbe8));return;}else{console[_0x15d5d8(0x6e4)]('消息缓冲区为空，跳过增量精炼');return;}}const _0x3626cb=JSON[_0x15d5d8(0x180)](_0x4aadee);if(_0x3626cb[_0x15d5d8(0x893)]===0x0){if(_0x15d5d8(0xb31)===_0x15d5d8(0xb31)){console['log'](_0x15d5d8(0x2f6));return;}else{_0x1babfe(_0x15d5d8(0x2f1));return;}}_0x2a19d6=_0x15d5d8(0x985)+_0x3626cb[_0x15d5d8(0x893)]+_0x15d5d8(0xc2e)+_0x3626cb[_0x15d5d8(0x17f)]((_0x292d5d,_0x34a4d6)=>_0x34a4d6+0x1+'.\x20'+_0x292d5d)[_0x15d5d8(0x332)]('\x0a');}const {omniText:_0x233b59}=_0x32429c(_0x3e849f,_0x259c0e);let _0x451582='';if(_0x5e4918[_0x15d5d8(0x277)]&&_0x5e4918[_0x15d5d8(0x277)][_0x15d5d8(0x893)]>0x0){if(_0x15d5d8(0x1d4)!=='LstOT')_0x398f4e[_0x15d5d8(0x591)](_0x15d5d8(0xdae),_0x3e8af3);else{const _0x5e662c=_0x5e4918[_0x15d5d8(0x277)][_0x15d5d8(0x17f)](_0x206689=>_0xa7652b[_0x15d5d8(0x52d)]['find'](_0x547c68=>_0x547c68['id']===_0x206689))[_0x15d5d8(0x1a9)](Boolean)[_0x15d5d8(0x17f)](_0x2ed265=>'-\x20'+_0x2ed265[_0x15d5d8(0xe79)]+':\x20'+_0x2ed265['content'])[_0x15d5d8(0x332)]('\x0a');_0x5e662c&&(_0x451582=_0x15d5d8(0x891)+_0x5e662c);}}const _0x2bad5d=_0x322f26(_0x3e849f),_0x1594a1=_0x4649bb(),_0x6ee31f=_0x3f0d67(_0x3e849f),_0x2375a0=await _0xa63707(_0x3e849f);let _0x205cea,_0x54e25f,_0x571911,_0x34d8fb;_0xcf7e96?(_0x34d8fb=_0x15d5d8(0xc31),_0x205cea=_0x15d5d8(0x3ee),_0x54e25f=_0x15d5d8(0x3ee),_0x571911=_0x15d5d8(0x733)):(_0x34d8fb=_0x15d5d8(0x11e),_0x205cea='\x22(保留旧的并补充)\x22',_0x54e25f=_0x15d5d8(0x445),_0x571911=_0x15d5d8(0xe0c));const _0x359428='\x0a#\x20任务：从\x22'+_0x32111e+_0x15d5d8(0x888)+_0x34d8fb+_0x15d5d8(0xbba)+_0x32111e+_0x15d5d8(0x837)+(_0x2a5318?.[_0x15d5d8(0xe79)]||'用户')+'\x22的长期观察档案。\x0a##\x20【强制对比协议】(最高优先级)\x0a1.\x20\x20**读取旧档**：先看一遍你手里的\x22当前档案\x22。\x0a2.\x20\x20**分析新信息**：'+(_0xcf7e96?_0x15d5d8(0x7f5):_0x15d5d8(0x3f8))+_0x15d5d8(0xa69)+(_0xcf7e96?_0x15d5d8(0xd03):_0x15d5d8(0xe12))+_0x15d5d8(0x719)+(_0xcf7e96?_0x15d5d8(0xe9d):_0x15d5d8(0xce8))+_0x15d5d8(0x172)+(_0xcf7e96?'（首次生成，无需记录变化）':_0x15d5d8(0x74f))+_0x15d5d8(0xb4)+(_0x5e4918?.[_0x15d5d8(0x171)]||_0x15d5d8(0xc60))+'\x0a'+_0x451582+'\x0a###\x20\x22'+(_0x2a5318?.[_0x15d5d8(0xe79)]||'用户')+_0x15d5d8(0x2c0)+(_0x2a5318?.[_0x15d5d8(0x171)]||_0x15d5d8(0xa57))+_0x15d5d8(0xc75)+(_0x233b59||'（暂无聊天记录）')+'\x0a'+(_0x2bad5d||'')+'\x0a'+(_0x1594a1||'')+'\x0a'+(_0x6ee31f||'')+'\x0a'+(_0x2375a0||'')+_0x15d5d8(0xda)+_0x549c47+_0x15d5d8(0x44b)+_0x2a19d6+_0x15d5d8(0xcf7)+_0x32111e+_0x15d5d8(0x78a)+(_0x2a5318?.[_0x15d5d8(0xe79)]||'TA')+_0x15d5d8(0xe1)+(_0xcf7e96?'【生成】':'【增量更新】')+_0x15d5d8(0xe16)+(_0x2a5318?.[_0x15d5d8(0xe79)]||'TA')+_0x15d5d8(0x909)+(_0xcf7e96?'的':'最近的')+_0x15d5d8(0xe55)+_0x571911+_0x15d5d8(0x892)+_0x3e849f+_0x15d5d8(0x678)+_0x205cea+_0x15d5d8(0x7d8)+_0x205cea+_0x15d5d8(0x711)+_0x205cea+_0x15d5d8(0xd4d)+_0x205cea+_0x15d5d8(0x238)+_0x205cea+_0x15d5d8(0x3f3)+_0x205cea+_0x15d5d8(0xcd4)+_0x205cea+_0x15d5d8(0xd87)+_0x54e25f+',\x0a\x20\x20\x20\x20'+(_0xcf7e96?_0x15d5d8(0x854):_0x15d5d8(0x6f5))+'\x0a\x20\x20]\x0a}\x0a##\x20最终要求\x0a-\x20直接输出JSON，不要Markdown代码块。\x0a-\x20'+(_0xcf7e96?_0x15d5d8(0x469):_0x15d5d8(0xc82))+_0x15d5d8(0xa4d);_0x13d2f9=[{'role':_0x15d5d8(0xaae),'content':_0x15d5d8(0x49c)+_0x32111e+_0x15d5d8(0x4cc)},{'role':_0x15d5d8(0xea1),'content':_0x359428}];}_0x27a15c(!![],_0x32111e+'正在'+(_0xe7af17?'精炼':_0x2a78a9?'更新':'生成')+_0x15d5d8(0x7df));const _0x4a8dbd=await _0x56b292(_0x13d2f9,{'json':!![]});let _0x484b78;try{const _0x3476a8=_0x4a8dbd[_0x15d5d8(0x41c)](/\{[\s\S]*\}/);if(_0x3476a8)_0x484b78=JSON[_0x15d5d8(0x180)](_0x3476a8[0x0]);else{if(_0x15d5d8(0xe3)!==_0x15d5d8(0x640))_0x484b78=JSON['parse'](_0x4a8dbd);else{_0x50d024(_0x15d5d8(0x76a));return;}}}catch(_0x4b4366){console[_0x15d5d8(0xc95)](_0x15d5d8(0x99a),_0x4b4366),console[_0x15d5d8(0x6e4)](_0x15d5d8(0x3f0),_0x4a8dbd),_0x27a15c(![]);return;}_0x484b78[_0x15d5d8(0xb65)]=_0x483609(),_0x484b78[_0x15d5d8(0x6ce)]=_0x3e849f,await Capacitor[_0x15d5d8(0x4be)][_0x15d5d8(0x68c)][_0x15d5d8(0x803)]({'key':_0x322f96,'value':JSON[_0x15d5d8(0xaf6)](_0x484b78)}),!_0xe7af17&&!_0x2a78a9&&(_0x15d5d8(0x1c5)===_0x15d5d8(0x1c5)?await Capacitor[_0x15d5d8(0x4be)][_0x15d5d8(0x68c)][_0x15d5d8(0x702)]({'key':_0x2f6151}):_0x5c0664[_0x15d5d8(0x970)][_0x15d5d8(0x702)]('show')),console['log'](_0x15d5d8(0xcbd)+_0x32111e+_0x15d5d8(0x9ab)+(_0xe7af17?'精炼':_0x2a78a9?'更新':_0x15d5d8(0x289))+'完成'),_0x27a15c(![]);}catch(_0x3839ca){if(_0x15d5d8(0xa3f)===_0x15d5d8(0xa3f))console['error'](_0x15d5d8(0x176),_0x3839ca),_0x27a15c(![]);else{_0x26b907(_0x15d5d8(0xb46));return;}}}else{if(_0x552909)_0x4e58a9[_0x15d5d8(0x706)]=_0x267bf6[_0x15d5d8(0xc18)](_0x514e79);else _0xae6a50[_0x15d5d8(0x658)]='图片加载失败';}}window[_0x57ab4d(0x287)]=_0x162e63,window[_0x57ab4d(0x991)]=_0x3f2e9f,window['showFeedLoader']=_0x27a15c;async function _0x222c2d(_0x455b85){const _0x77bfc2=_0x57ab4d;if(!_0x455b85)return null;try{if('vGxCO'===_0x77bfc2(0x887)){const _0x5a5ac5=_0x42f44b[_0x77bfc2(0x9c6)][_0x77bfc2(0x8f6)];!_0x1c5854[_0x77bfc2(0x5c0)](_0x5a5ac5)&&_0x4b7e11['push'](_0x5a5ac5);}else{const _0x15ce0d=_0x77bfc2(0x710)+_0x455b85,{value:_0x502eba}=await Capacitor[_0x77bfc2(0x4be)]['Preferences'][_0x77bfc2(0x470)]({'key':_0x15ce0d});if(!_0x502eba){if(_0x77bfc2(0xb16)==='ZqAdm')_0x590139[_0x77bfc2(0xb9f)]>=_0x157772['getTime']()&&_0x2775e9[_0x77bfc2(0xab8)]!==_0x77bfc2(0xaae)&&_0x596645[_0x77bfc2(0xb17)]&&_0x9b0de1[_0x77bfc2(0x214)]({'timestamp':_0x17863f[_0x77bfc2(0xb9f)],'type':_0x31dfbf(_0x424830),'content':'['+(_0x3a49cf[_0x77bfc2(0xab8)]===_0x77bfc2(0xea1)?_0xfdd04[_0x77bfc2(0xe79)]:_0x3081d6[_0x77bfc2(0xe79)])+']:\x20'+_0x121d47[_0x77bfc2(0xb17)]});else return null;}const _0xc6fa70=JSON[_0x77bfc2(0x180)](_0x502eba),_0x25f1bb=[],_0x46b58c=_0xc6fa70['version']>=0x2;if(_0x46b58c){if(_0x77bfc2(0x3a0)!==_0x77bfc2(0xed)){_0xc6fa70[_0x77bfc2(0xb8e)]?.['summary']&&_0xc6fa70[_0x77bfc2(0xb8e)]['summary'][_0x77bfc2(0x8eb)]()&&(_0x77bfc2(0xe69)===_0x77bfc2(0xe69)?_0x25f1bb[_0x77bfc2(0x214)]('性格:\x20'+_0xc6fa70[_0x77bfc2(0xb8e)][_0x77bfc2(0xe18)]):_0xe9e1b0(_0x35cefa['id']));_0xc6fa70[_0x77bfc2(0xe67)]?.[_0x77bfc2(0x6c8)]&&_0xc6fa70[_0x77bfc2(0xe67)][_0x77bfc2(0x6c8)]['trim']()&&(_0x77bfc2(0x3fe)!=='QVyVP'?_0x25f1bb[_0x77bfc2(0x214)](_0x77bfc2(0xb79)+_0xc6fa70['value_map'][_0x77bfc2(0x6c8)]):_0xffec1b+='-\x20**对话状态提示**:\x20对话正在进行中，可以直接延续话题。\x0a');const _0x203d01=_0xc6fa70[_0x77bfc2(0xe67)]?.['preferences']?.['喜欢']||[],_0x3fe1b2=_0xc6fa70['value_map']?.[_0x77bfc2(0x5fa)]?.['讨厌']||[];if(_0x203d01['length']>0x0||_0x3fe1b2[_0x77bfc2(0x893)]>0x0){const _0x74ab29=[];if(_0x203d01[_0x77bfc2(0x893)]>0x0)_0x74ab29[_0x77bfc2(0x214)]('喜欢'+_0x203d01[_0x77bfc2(0x1de)](0x0,0x3)[_0x77bfc2(0x332)]('、'));if(_0x3fe1b2[_0x77bfc2(0x893)]>0x0)_0x74ab29[_0x77bfc2(0x214)]('讨厌'+_0x3fe1b2['slice'](0x0,0x2)[_0x77bfc2(0x332)]('、'));_0x25f1bb['push'](_0x77bfc2(0x5de)+_0x74ab29[_0x77bfc2(0x332)]('；'));}if(_0xc6fa70[_0x77bfc2(0x38c)]?.[_0x77bfc2(0x631)]&&_0xc6fa70[_0x77bfc2(0x38c)][_0x77bfc2(0x631)]['trim']())_0x25f1bb[_0x77bfc2(0x214)]('情绪:\x20'+_0xc6fa70[_0x77bfc2(0x38c)]['emotion_summary']);else{if(_0x77bfc2(0x699)!=='LBxPs')_0x204968[_0x77bfc2(0xb6e)]=[],_0x4cd6c3(),_0x544a6a(),_0x2b849b(_0x77bfc2(0xcdf));else{const _0x254c8e=_0xc6fa70[_0x77bfc2(0x19e)]?.[_0x77bfc2(0x581)]?.['正面']||[],_0xf76248=_0xc6fa70[_0x77bfc2(0x19e)]?.[_0x77bfc2(0x581)]?.['负面']||[];if(_0x254c8e[_0x77bfc2(0x893)]>0x0||_0xf76248[_0x77bfc2(0x893)]>0x0){const _0x3d8d98=[];if(_0x254c8e[_0x77bfc2(0x893)]>0x0)_0x3d8d98[_0x77bfc2(0x214)](_0x77bfc2(0x553)+_0x254c8e[0x0]);if(_0xf76248[_0x77bfc2(0x893)]>0x0)_0x3d8d98[_0x77bfc2(0x214)]('在意'+_0xf76248[0x0]);_0x25f1bb[_0x77bfc2(0x214)]('情绪:\x20'+_0x3d8d98[_0x77bfc2(0x332)]('，'));}}}_0xc6fa70[_0x77bfc2(0x38c)]?.['tone_style']&&_0xc6fa70[_0x77bfc2(0x38c)][_0x77bfc2(0xe52)]['trim']()&&_0x25f1bb['push'](_0x77bfc2(0xcc9)+_0xc6fa70[_0x77bfc2(0x38c)][_0x77bfc2(0xe52)]);if(_0xc6fa70[_0x77bfc2(0x778)]&&_0xc6fa70[_0x77bfc2(0x778)]['length']>0x0){const _0x3ab13b=_0xc6fa70['observed_changes'][_0x77bfc2(0x1de)](0x0,0x2)[_0x77bfc2(0x17f)](_0x47ac80=>{const _0x909207=_0x77bfc2;if(_0x909207(0x411)!==_0x909207(0x411)){if(_0x1c8043)_0x4bc3ed(_0x45d478);_0x4af2f6=null,_0x5e9284['activeMeetingScriptQueue']=[],_0x2ddd01[_0x909207(0xbfa)]=null,_0x37bf48[_0x909207(0x473)](_0x909207(0x409))['style'][_0x909207(0x1df)]=_0x909207(0x4a6),_0x42980b['activeChatId']=null,_0x1150a1(),_0x371dda(_0x909207(0xb20),'meetingView');}else{if(typeof _0x47ac80===_0x909207(0xdab))return _0x47ac80;if(typeof _0x47ac80===_0x909207(0x26a)&&_0x47ac80!==null)return Object[_0x909207(0x664)](_0x47ac80)[_0x909207(0x332)](_0x909207(0x6d6));return _0x909207(0xe6f);}});_0x25f1bb[_0x77bfc2(0x214)](_0x77bfc2(0xba3)+_0x3ab13b[_0x77bfc2(0x332)]('；'));}}else _0xe8e652[_0x77bfc2(0xc04)](_0x77bfc2(0x493),()=>{const _0x4d83db=_0x77bfc2,_0xe0efeb=_0x545b59[_0x4d83db(0x473)]('lock-screen-overlay');_0xe0efeb&&(_0xe0efeb[_0x4d83db(0x970)]['remove'](_0x4d83db(0xae6)),_0xe0efeb['style'][_0x4d83db(0x3b7)]='',_0xe0efeb[_0x4d83db(0x3e4)]['opacity']='');});}else{_0xc6fa70[_0x77bfc2(0x342)]&&_0xc6fa70[_0x77bfc2(0x342)][_0x77bfc2(0x8eb)]()&&_0x25f1bb[_0x77bfc2(0x214)](_0x77bfc2(0xcbe)+_0xc6fa70[_0x77bfc2(0x342)]);_0xc6fa70[_0x77bfc2(0x778)]&&_0xc6fa70[_0x77bfc2(0x778)]['length']>0x0&&(_0x77bfc2(0xea0)!==_0x77bfc2(0x9f3)?_0x25f1bb[_0x77bfc2(0x214)](_0x77bfc2(0xcb5)+_0xc6fa70['observed_changes']['join']('；')):(_0x95dfa4(),_0x322423(![]),_0x1f85bb[_0x77bfc2(0x89f)]=![]));if(_0xc6fa70[_0x77bfc2(0x4c8)]&&_0xc6fa70[_0x77bfc2(0x4c8)][_0x77bfc2(0x893)]>0x0){if(_0x77bfc2(0x236)!=='LaztT')return _0x8c9dbe(_0x77bfc2(0x639)+_0xe58a50['id']);else _0x25f1bb[_0x77bfc2(0x214)](_0x77bfc2(0x1c3)+_0xc6fa70[_0x77bfc2(0x4c8)][_0x77bfc2(0x332)]('；'));}_0xc6fa70[_0x77bfc2(0xb6b)]?.[_0x77bfc2(0x4ff)]&&_0x25f1bb[_0x77bfc2(0x214)](_0x77bfc2(0x2f5)+_0xc6fa70[_0x77bfc2(0xb6b)][_0x77bfc2(0x4ff)]);}if(_0x25f1bb[_0x77bfc2(0x893)]===0x0){if(_0x77bfc2(0x6a6)===_0x77bfc2(0x6a6))return null;else _0x1e9873(![]),_0x4b8d34[_0x77bfc2(0x89f)]=![];}return _0x25f1bb[_0x77bfc2(0x332)]('\x0a');}}catch(_0xad2296){return console['error'](_0x77bfc2(0xb77),_0xad2296),null;}}function _0x195515(_0x843de9,_0x42590a){const _0x42176c=_0x57ab4d;if(!_0x42590a||!_0x843de9||_0x843de9['length']===0x0){if(_0x42176c(0x51b)!=='MbxFh')_0x5bed14[_0x42176c(0x22a)][_0x42176c(0x214)]({'id':_0x5818a2['id']||'wbc_imported_'+_0x1e6a2c['now'](),'name':_0x23e488[_0x42176c(0xe79)]});else return'';}const _0x3280f0=[],_0x26b735=0x5,_0x1ddd86=_0x843de9[_0x42176c(0x17f)](_0xa26a69=>_0xa26a69['content']||'')[_0x42176c(0x332)]('\x20')[_0x42176c(0x52f)](),_0x1d9698={'positive':['开心','高兴','喜欢',_0x42176c(0xc0d),'棒','爱'],'negative':['难过','生气','讨厌','烦','累','糟','恨','压力']};let _0x48b1af=null;if(_0x1d9698['positive']['some'](_0x32f027=>_0x1ddd86['includes'](_0x32f027)))_0x48b1af=_0x42176c(0x41b);if(_0x1d9698[_0x42176c(0x8fd)]['some'](_0x11fc8c=>_0x1ddd86[_0x42176c(0x5c0)](_0x11fc8c)))_0x48b1af=_0x42176c(0x8fd);if(_0x48b1af&&_0x42590a[_0x42176c(0x19e)]?.[_0x42176c(0x581)]){const _0x2a254a=_0x48b1af===_0x42176c(0x41b)?_0x42590a[_0x42176c(0x19e)][_0x42176c(0x581)]['正面']:_0x42590a[_0x42176c(0x19e)][_0x42176c(0x581)]['负面'];_0x2a254a&&_0x2a254a[_0x42176c(0x893)]>0x0&&_0x3280f0[_0x42176c(0x214)](_0x42176c(0xc4b)+(_0x48b1af===_0x42176c(0x41b)?'积极':'消极')+_0x42176c(0xa35)+_0x2a254a[_0x42176c(0x1de)](0x0,0x2)[_0x42176c(0x332)]('、'));}_0x48b1af===_0x42176c(0x8fd)&&_0x42590a[_0x42176c(0x19e)]?.[_0x42176c(0xe28)]&&_0x42590a[_0x42176c(0x19e)]['stress_signals'][_0x42176c(0x893)]>0x0&&_0x3280f0['length']<_0x26b735&&_0x3280f0[_0x42176c(0x214)](_0x42176c(0xe75)+_0x42590a[_0x42176c(0x19e)][_0x42176c(0xe28)][_0x42176c(0x1de)](0x0,0x2)[_0x42176c(0x332)]('、'));if(_0x42590a[_0x42176c(0xe67)]?.[_0x42176c(0x5fa)]){if(_0x42176c(0x32f)==='RQwrd'){const _0x4a113a=_0x292d6c[_0x42176c(0x4ec)]['find'](_0x3cc376=>_0x3cc376[_0x42176c(0x584)][_0x42176c(0x5c0)](_0x1e5720));if(!_0x4a113a)return'';const _0xb69a87=_0x48cfdd(_0x4a113a['id']),_0x17a89a=_0x11b10b[_0x42176c(0x50b)][_0x42176c(0x1a9)](_0x579eef=>_0x579eef[_0x42176c(0x378)]===_0xb69a87['id']||!_0x579eef[_0x42176c(0x378)]);if(_0x17a89a['length']===0x0)return'';const _0x3e8950=_0x17a89a['map'](_0x4c5688=>{const _0x3e19e2=_0x42176c,_0x35600f=_0x4c5688[_0x3e19e2(0x45c)]===_0x3e19e2(0x995)?'纪念日':'待办';return'-\x20['+_0x35600f+']\x20'+_0x4c5688[_0x3e19e2(0x382)]+':\x20'+_0x4c5688[_0x3e19e2(0xb17)];})[_0x42176c(0x332)]('\x0a');return _0x42176c(0x8c0)+_0xb69a87[_0x42176c(0xe79)]+_0x42176c(0x5d5)+_0x3e8950;}else{const _0x3512ad=_0x42590a[_0x42176c(0xe67)][_0x42176c(0x5fa)]['喜欢']||[],_0x459440=_0x42590a[_0x42176c(0xe67)][_0x42176c(0x5fa)]['讨厌']||[];_0x3512ad['forEach'](_0x46e514=>{const _0x76ec3=_0x42176c;_0x1ddd86[_0x76ec3(0x5c0)](_0x46e514[_0x76ec3(0x52f)]())&&_0x3280f0[_0x76ec3(0x893)]<_0x26b735&&_0x3280f0[_0x76ec3(0x214)](_0x76ec3(0x33c)+_0x46e514+_0x76ec3(0x8da));}),_0x459440['forEach'](_0x171457=>{const _0x5df295=_0x42176c;_0x5df295(0x310)!==_0x5df295(0xe61)?_0x1ddd86[_0x5df295(0x5c0)](_0x171457['toLowerCase']())&&_0x3280f0[_0x5df295(0x893)]<_0x26b735&&_0x3280f0[_0x5df295(0x214)](_0x5df295(0x33c)+_0x171457+_0x5df295(0xa8e)):_0x268973[_0x5df295(0x214)]('['+_0x48467d(_0xe62149)+']\x20'+_0x191480['content']);});}}_0x42590a[_0x42176c(0xe67)]?.[_0x42176c(0xaec)]&&_0x42590a[_0x42176c(0xe67)][_0x42176c(0xaec)][_0x42176c(0x893)]>0x0&&_0x42590a['value_map'][_0x42176c(0xaec)][_0x42176c(0x1dc)](_0x473ad4=>{const _0x2b46d3=_0x42176c;_0x1ddd86['includes'](_0x473ad4['toLowerCase']())&&_0x3280f0[_0x2b46d3(0x893)]<_0x26b735&&_0x3280f0[_0x2b46d3(0x214)]('-\x20话题触及敏感点\x22'+_0x473ad4+_0x2b46d3(0x9e7));});_0x42590a[_0x42176c(0x778)]&&_0x42590a[_0x42176c(0x778)][_0x42176c(0x893)]>0x0&&_0x3280f0[_0x42176c(0x893)]<_0x26b735&&_0x3280f0[_0x42176c(0x214)](_0x42176c(0xe89)+_0x42590a[_0x42176c(0x778)][_0x42590a['observed_changes'][_0x42176c(0x893)]-0x1]);if(_0x3280f0['length']>0x0)return _0x42176c(0x43b)!==_0x42176c(0xb33)?_0x42176c(0x2ec)+_0x3280f0[_0x42176c(0x332)]('\x0a'):null;return'';}async function _0x45f813(_0x15e7cd){const _0x6d5376=_0x57ab4d;if(_0x6d5376(0xac)!==_0x6d5376(0xac))_0x2c121d(_0x4162d8[_0x6d5376(0x4f9)])[_0x6d5376(0xcae)](_0x2ca086=>{const _0x3f6bdc=_0x6d5376;if(_0x2ca086)_0x387238[_0x3f6bdc(0x706)]=_0x42f9d3[_0x3f6bdc(0xc18)](_0x2ca086);});else try{if('iHQpI'!==_0x6d5376(0x871)){const _0x28e4ca=URL[_0x6d5376(0xc18)](_0x15e7cd),_0xc9a4e0=_0x6d5376(0x123),_0xaf2b41=_0x6d5376(0x424)+_0xc9a4e0+_0x6d5376(0x53a)+_0x28e4ca+_0x6d5376(0x407);_0x22f0ce[_0x6d5376(0x6f0)]=_0xaf2b41,document['documentElement'][_0x6d5376(0x3e4)][_0x6d5376(0xd2c)](_0x6d5376(0xb7a),'\x27'+_0xc9a4e0+'\x27'),_0xaf970c[_0x6d5376(0x226)]=_0x6d5376(0xb64);}else _0x40f403[_0x6d5376(0x41e)]('https://xhslink.com/m/5IgC1rniI2I','_blank');}catch(_0x2ccb2d){console[_0x6d5376(0xc95)]('字体应用失败:',_0x2ccb2d),_0x198030(_0x6d5376(0x224));}}async function _0x59d595(){const _0x3e1f72=_0x57ab4d;try{const _0x48341f=await _0xf3eefa(_0x3e1f72(0xdc));_0x48341f&&(console[_0x3e1f72(0x6e4)](_0x3e1f72(0x735)),await _0x45f813(_0x48341f));}catch(_0x23689a){console[_0x3e1f72(0xc95)]('加载已保存字体失败:',_0x23689a);}}async function _0x520a06(_0x19978b){const _0x3bb835=_0x57ab4d;if(_0x3bb835(0xc1e)===_0x3bb835(0x583))_0x456907['classList'][_0x3bb835(0xddb)](_0x3bb835(0x4b2)),_0x3b5842[_0x3bb835(0x21b)]({'behavior':'smooth','block':_0x3bb835(0x88f)});else{const _0x551c4b=_0x19978b[_0x3bb835(0x63c)][_0x3bb835(0xcf5)][0x0];if(!_0x551c4b||!_0x551c4b[_0x3bb835(0xe79)][_0x3bb835(0x52f)]()[_0x3bb835(0x6ec)](_0x3bb835(0x8db))){_0x198030(_0x3bb835(0x46d));return;}_0x27a15c(!![],_0x3bb835(0x29e));try{await _0x1366c1('custom_font_ttf',_0x551c4b),await _0x45f813(_0x551c4b),_0x198030(_0x3bb835(0x4af));}catch(_0x1bde5f){_0x198030(_0x3bb835(0x6a3)+_0x1bde5f[_0x3bb835(0xe32)]);}finally{_0x27a15c(![]),_0x39c25e[_0x3bb835(0x2d4)]='';}}}async function _0x5a0d22(){const _0x172364=_0x57ab4d;if('FhKdL'==='PIBPg'){const _0x917a13=_0x465879[_0x172364(0x63c)]['files'][0x0];if(_0x917a13)_0x3eb669[_0x172364(0x3e4)][_0x172364(0x16b)]=_0x172364(0x6cb)+_0x575aed[_0x172364(0xc18)](_0x917a13)+'\x27)';}else{const _0xf04f10=await _0x410108(_0x172364(0x732));if(_0xf04f10)try{_0x172364(0x8f3)==='MBuvS'?(_0x337e2d[_0x172364(0x970)][_0x172364(0x702)]('transitioning'),_0x1ab49a[_0x172364(0x3e4)][_0x172364(0x738)]='',_0x351897[_0x172364(0x6e4)](_0x172364(0xdbb)+_0x50cd73+'.')):(await _0x21e7e1(_0x172364(0xdc)),_0x22f0ce['innerHTML']='',document[_0x172364(0xb7c)][_0x172364(0x3e4)]['removeProperty'](_0x172364(0xb7a)),_0xaf970c['textContent']=_0x172364(0x7c0),_0x198030(_0x172364(0x81f)));}catch(_0x5507bc){_0x198030('恢复失败了:\x20'+_0x5507bc[_0x172364(0xe32)]);}}}function _0x20acb2(){const _0x35fed8=_0x57ab4d,_0x157fee=document[_0x35fed8(0x473)](_0x35fed8(0x7fe));if(!_0x157fee)return;const _0x3fd1f4=localStorage['getItem'](_0x35fed8(0x826))||'35';document['documentElement'][_0x35fed8(0x3e4)]['setProperty']('--primary-hue',_0x3fd1f4),_0x157fee[_0x35fed8(0x2d4)]=_0x3fd1f4,_0x157fee[_0x35fed8(0xc04)]('input',()=>{const _0x3f07a9=_0x35fed8,_0x30f581=_0x157fee[_0x3f07a9(0x2d4)];document[_0x3f07a9(0xb7c)][_0x3f07a9(0x3e4)]['setProperty']('--primary-hue',_0x30f581),localStorage['setItem']('themeHue',_0x30f581),_0x1136e5();});}function _0x38685e(){const _0x274213=_0x57ab4d,_0x398b8e=document['getElementById'](_0x274213(0x2c7));if(!_0x398b8e)return;const _0xcc2dbd=localStorage['getItem'](_0x274213(0xc21))||'80';document[_0x274213(0xb7c)][_0x274213(0x3e4)][_0x274213(0xd2c)](_0x274213(0x5f0),_0xcc2dbd+'%'),_0x398b8e[_0x274213(0x2d4)]=_0xcc2dbd,_0x398b8e['addEventListener'](_0x274213(0x1bf),()=>{const _0x1477b4=_0x274213,_0x39e8b8=_0x398b8e[_0x1477b4(0x2d4)];document[_0x1477b4(0xb7c)][_0x1477b4(0x3e4)]['setProperty'](_0x1477b4(0x5f0),_0x39e8b8+'%'),localStorage[_0x1477b4(0x29d)]('themeLightness',_0x39e8b8),_0x1136e5();});}function _0x1136e5(){const _0x5daef4=_0x57ab4d,_0x5c3d09=document[_0x5daef4(0x473)](_0x5daef4(0x9eb));if(!_0x5c3d09)return;if(_0xa7652b[_0x5daef4(0x5fa)][_0x5daef4(0xcc3)]){if(_0x5daef4(0xc94)!==_0x5daef4(0xa1b))_0x5c3d09[_0x5daef4(0x3e4)][_0x5daef4(0x1ba)]=_0x5daef4(0x8bb),_0x5c3d09[_0x5daef4(0x3e4)][_0x5daef4(0x85b)]=_0x5daef4(0x183);else{const _0x2b5df2=_0x52147e[_0x5daef4(0xc18)](_0x25c498),_0x467923=_0x5daef4(0x123),_0x3a572c=_0x5daef4(0x424)+_0x467923+_0x5daef4(0x53a)+_0x2b5df2+_0x5daef4(0x407);_0x1a00be['innerHTML']=_0x3a572c,_0x4a823d[_0x5daef4(0xb7c)][_0x5daef4(0x3e4)]['setProperty'](_0x5daef4(0xb7a),'\x27'+_0x467923+'\x27'),_0x3c9354[_0x5daef4(0x226)]=_0x5daef4(0xb64);}}else{if(_0x5daef4(0xa53)===_0x5daef4(0x20e)){_0x2137ce(![]),_0x535b32(_0x5daef4(0xdbe));return;}else _0x5c3d09[_0x5daef4(0x3e4)]['color']=_0x5daef4(0xd5c),_0x5c3d09[_0x5daef4(0x3e4)][_0x5daef4(0x85b)]='none';}}function _0x58b3a5(){const _0x20d2cd=_0x57ab4d,_0x12a82=document[_0x20d2cd(0x473)](_0x20d2cd(0x10e));if(!_0x12a82)return;_0x12a82[_0x20d2cd(0x3e3)]=_0xa7652b[_0x20d2cd(0x5fa)]['forceWhiteClock']||![],_0x12a82['addEventListener'](_0x20d2cd(0x1c4),()=>{const _0x10e4b8=_0x20d2cd;_0x10e4b8(0xd7a)===_0x10e4b8(0xbc8)?(_0x3ca75e[_0x10e4b8(0xc95)](_0x10e4b8(0xab3),_0x13261c),_0x53977f(_0x10e4b8(0xb2d))):(_0xa7652b[_0x10e4b8(0x5fa)][_0x10e4b8(0xcc3)]=_0x12a82[_0x10e4b8(0x3e3)],_0x2e0417(),_0x1136e5());});}_0x16d28a['addEventListener'](_0x57ab4d(0x493),_0x3f2bdd),_0x4f797f['addEventListener']('click',()=>{const _0x5e4a67=_0x57ab4d;if(_0x5e4a67(0xd21)===_0x5e4a67(0x5da))return new _0x20050b(_0xcf9048=>{const _0x2c1392=_0x5e4a67,_0x1bb6a8=_0x499540[_0x2c1392(0x473)](_0x2c1392(0xbf8)),_0x3f3214=_0x348d7f[_0x2c1392(0x473)](_0x2c1392(0xb58)),_0x7f7c8c=_0x2e5610[_0x2c1392(0x473)](_0x2c1392(0xbb9)),_0x2580af=_0x435d70[_0x2c1392(0x473)]('modal-cancel'),_0x2b0c2c=_0x3c7fed[_0x2c1392(0x473)](_0x2c1392(0xe4c));_0x3f3214[_0x2c1392(0x226)]=_0x49c11a,_0x1bb6a8[_0x2c1392(0x3e4)]['display']=_0x2c1392(0x5c9);const _0x2ee02e=_0x2627fe=>{const _0x259f1d=_0x2c1392;_0x1bb6a8[_0x259f1d(0x3e4)]['display']=_0x259f1d(0x4a6),_0x7f7c8c[_0x259f1d(0x4e9)]=_0x2580af['onclick']=_0x2b0c2c['onclick']=null,_0x13fd96['removeEventListener']('keydown',_0x39d9e0),_0xcf9048(_0x2627fe);},_0x39d9e0=_0x1495ea=>{const _0x4bb733=_0x2c1392;if(_0x1495ea[_0x4bb733(0x834)]==='Escape')_0x2ee02e(![]);if(_0x1495ea['key']===_0x4bb733(0xae8))_0x2ee02e(!![]);};_0x7f7c8c[_0x2c1392(0x4e9)]=()=>_0x2ee02e(!![]),_0x2580af[_0x2c1392(0x4e9)]=()=>_0x2ee02e(![]),_0x2b0c2c[_0x2c1392(0x4e9)]=()=>_0x2ee02e(![]),_0x9797a1[_0x2c1392(0xc04)]('keydown',_0x39d9e0);});else _0x1004fd(),_0x1b37bc[_0x5e4a67(0x493)]();}),_0x1b37bc[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),_0x38f45d);const _0x5046d9={'home':document[_0x57ab4d(0x473)](_0x57ab4d(0x2d8)),'chat':document[_0x57ab4d(0x473)](_0x57ab4d(0x42e)),'settings':document['getElementById']('settings-screen'),'userProfile':document[_0x57ab4d(0x473)](_0x57ab4d(0xb05)),'characterEdit':document[_0x57ab4d(0x473)](_0x57ab4d(0xdfd)),'groupChatCreate':document['getElementById'](_0x57ab4d(0x260)),'wallpaper':document[_0x57ab4d(0x473)](_0x57ab4d(0xad7)),'worldBook':document[_0x57ab4d(0x473)](_0x57ab4d(0x428)),'worldBookEditor':document['getElementById'](_0x57ab4d(0x7c5)),'groupSettings':document[_0x57ab4d(0x473)]('group-settings-screen'),'music':document[_0x57ab4d(0x473)](_0x57ab4d(0x20d)),'friendCircleList':document[_0x57ab4d(0x473)](_0x57ab4d(0x451)),'friendCircleEdit':document[_0x57ab4d(0x473)](_0x57ab4d(0x945)),'meetingList':document[_0x57ab4d(0x473)](_0x57ab4d(0x399)),'meetingView':document[_0x57ab4d(0x473)](_0x57ab4d(0x2e9)),'userProfileList':document[_0x57ab4d(0x473)]('user-profile-list-screen'),'diaryList':document[_0x57ab4d(0x473)](_0x57ab4d(0x2d5)),'diaryView':document['getElementById'](_0x57ab4d(0xaf)),'musicLibrary':document[_0x57ab4d(0x473)](_0x57ab4d(0x629)),'musicUploadAltar':document[_0x57ab4d(0x473)](_0x57ab4d(0x8f9)),'accounting':document['getElementById']('accounting-screen'),'snoopList':document[_0x57ab4d(0x473)]('snoop-list-screen'),'snoopPhone':document[_0x57ab4d(0x473)](_0x57ab4d(0xa24)),'calendar':document[_0x57ab4d(0x473)]('calendar-screen'),'livestreamList':document[_0x57ab4d(0x473)](_0x57ab4d(0xa7f)),'livestreamRoom':document[_0x57ab4d(0x473)](_0x57ab4d(0xb75)),'livestreamReplays':document['getElementById']('livestream-replays-screen'),'livestreamReplayView':document[_0x57ab4d(0x473)](_0x57ab4d(0xbd9)),'livestreamSettings':document[_0x57ab4d(0x473)](_0x57ab4d(0x256))},_0x372af4=document['getElementById'](_0x57ab4d(0x366)),_0x2c4ead=document[_0x57ab4d(0x473)](_0x57ab4d(0x814)),_0x5adb10=document['getElementById'](_0x57ab4d(0x63f)),_0x1d3cdb=document[_0x57ab4d(0x473)](_0x57ab4d(0x53f)),_0x405039=document['getElementById'](_0x57ab4d(0xd35)),_0x55ffa7=document['getElementById'](_0x57ab4d(0xc97)),_0x39b5d3=document[_0x57ab4d(0x473)](_0x57ab4d(0xcfe)),_0x34c2e6=document[_0x57ab4d(0x473)](_0x57ab4d(0xb69));document[_0x57ab4d(0x473)](_0x57ab4d(0x8dd))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0xc06c04=_0x57ab4d,_0x5e214d=await _0x410108(_0xc06c04(0x1b9));if(_0x5e214d){if(_0xc06c04(0x39f)!=='gdQLq'){if(_0x3dee29[_0xc06c04(0xabb)])return;const _0x41b8d9=_0x22c369[_0xc06c04(0x362)];if(_0x41b8d9<=0x0)return;_0x5d6cf0[_0xc06c04(0xabb)]=!![];const _0x4b6787=_0x41b8d9-0x1,_0x5b08e8=_0x1db122[_0xc06c04(0x473)](_0xc06c04(0x521)+_0x41b8d9),_0x2f1118=_0x2b7f68[_0xc06c04(0x473)](_0xc06c04(0x521)+_0x4b6787);_0x5b08e8&&_0x2f1118?(_0x2f1118[_0xc06c04(0x970)]['add'](_0xc06c04(0xc0a)),_0x5b08e8['classList'][_0xc06c04(0xddb)]('is-exiting-right'),_0x2f1118[_0xc06c04(0x970)][_0xc06c04(0xddb)](_0xc06c04(0x18c)),_0x289fe8(()=>{const _0x1908a4=_0xc06c04;_0x5b08e8[_0x1908a4(0x970)][_0x1908a4(0x702)](_0x1908a4(0x18c),_0x1908a4(0xe27)),_0x2f1118[_0x1908a4(0x970)][_0x1908a4(0x702)](_0x1908a4(0xc0a)),_0x18ea07['diaryCurrentPage']=_0x4b6787,_0xe9fb38(),_0x3c6ab8[_0x1908a4(0xabb)]=![];},0x2bc)):_0x17401b[_0xc06c04(0xabb)]=![];}else{localStorage[_0xc06c04(0x863)]('badgeState'),localStorage[_0xc06c04(0x863)](_0xc06c04(0x167)),localStorage[_0xc06c04(0x863)](_0xc06c04(0x890)),localStorage[_0xc06c04(0x863)](_0xc06c04(0xe21));const _0x38fcd0=[];for(let _0x50e593=0x0;_0x50e593<localStorage['length'];_0x50e593++){if(_0xc06c04(0x349)!==_0xc06c04(0x1d1)){const _0x117683=localStorage[_0xc06c04(0x834)](_0x50e593);_0x117683&&_0x117683[_0xc06c04(0x324)](_0xc06c04(0x5ec))&&_0x38fcd0[_0xc06c04(0x214)](_0x117683);}else return _0x3aa59d(new _0x3b4637(_0xc06c04(0x463)));}_0x38fcd0[_0xc06c04(0x1dc)](_0x4b9b67=>localStorage['removeItem'](_0x4b9b67)),await _0x1366c1('wallpaper_main',await _0x530eb9(_0xc06c04(0x283))),_0x198030(_0xc06c04(0x40f)),setTimeout(()=>location[_0xc06c04(0xb97)](),0x5dc);}}});const _0x118a61=document[_0x57ab4d(0x473)](_0x57ab4d(0xe2b)),_0xd46ba6=document[_0x57ab4d(0x473)]('add-choice-backdrop'),_0x4550b3=document[_0x57ab4d(0x473)](_0x57ab4d(0x715)),_0x6f0fa3=document[_0x57ab4d(0x473)](_0x57ab4d(0xd57)),_0x18ad23=document[_0x57ab4d(0x473)](_0x57ab4d(0xccf)),_0x51bd40=document['getElementById'](_0x57ab4d(0x286)),_0x475fd3=document[_0x57ab4d(0x473)](_0x57ab4d(0xd01)),_0x2d4f4e=document[_0x57ab4d(0x473)](_0x57ab4d(0x36c)),_0x68fc0e=document[_0x57ab4d(0x473)]('group-chat-member-list'),_0x4486c1=document[_0x57ab4d(0x473)]('app-chat'),_0x32d7f2=document[_0x57ab4d(0x473)]('app-settings'),_0x18375c=document['getElementById']('back-to-home-from-settings'),_0x34b7fb=document[_0x57ab4d(0x473)](_0x57ab4d(0xe2f)),_0x5d2a11=document[_0x57ab4d(0x473)](_0x57ab4d(0x86d)),_0x251f4d=document[_0x57ab4d(0x473)](_0x57ab4d(0xbd4)),_0x1d7fbc=document[_0x57ab4d(0x473)](_0x57ab4d(0xc44)),_0x1baa8d=document[_0x57ab4d(0x473)](_0x57ab4d(0xe56)),_0x24d84a=document[_0x57ab4d(0x473)](_0x57ab4d(0x14a)),_0xe58441=document['getElementById'](_0x57ab4d(0x42e)),_0x37b09b=document[_0x57ab4d(0x473)](_0x57ab4d(0xd81)),_0x41f290=document[_0x57ab4d(0x473)](_0x57ab4d(0x645)),_0x2a9d76=document[_0x57ab4d(0x473)](_0x57ab4d(0x4c6)),_0x1c4420=document[_0x57ab4d(0x473)](_0x57ab4d(0x930)),_0x27b996=document[_0x57ab4d(0x473)](_0x57ab4d(0x5e6)),_0x4f41bd=document['getElementById'](_0x57ab4d(0xe3a)),_0x4bae36=document[_0x57ab4d(0x473)](_0x57ab4d(0xb8a)),_0x1dba74=document[_0x57ab4d(0x473)](_0x57ab4d(0xce6)),_0x1d26fc=document[_0x57ab4d(0x473)](_0x57ab4d(0x752)),_0x650a76=document[_0x57ab4d(0x473)]('chat-sticker-button'),_0x177eb9=document[_0x57ab4d(0x473)](_0x57ab4d(0x5a9)),_0xe282ed=document[_0x57ab4d(0x473)](_0x57ab4d(0x727)),_0x5e9404=document['getElementById'](_0x57ab4d(0x154)),_0x9a6149=document['getElementById'](_0x57ab4d(0x7f2)),_0x21f725=document[_0x57ab4d(0x473)]('offline-scene-view'),_0x1216b5=document[_0x57ab4d(0x473)]('api-endpoint'),_0x260f75=document[_0x57ab4d(0x473)]('api-key'),_0x4ce00a=document['getElementById'](_0x57ab4d(0xd71)),_0x31fc22=document[_0x57ab4d(0x473)]('save-api-settings-button'),_0x5bdcae=document['getElementById']('fetch-models-button'),_0x26247d=document['getElementById'](_0x57ab4d(0x569)),_0x2288d6=document[_0x57ab4d(0x473)]('context-lines-per-chat'),_0x1a1e12=document['getElementById'](_0x57ab4d(0xe45)),_0x4333b7=document[_0x57ab4d(0x473)](_0x57ab4d(0x615)),_0x274fdb=document[_0x57ab4d(0x473)](_0x57ab4d(0xa85)),_0x2047a6=document[_0x57ab4d(0x473)]('user-persona'),_0xa49262=document['getElementById'](_0x57ab4d(0x20f)),_0x56309d=document[_0x57ab4d(0x473)](_0x57ab4d(0xa08)),_0xa842b1=document[_0x57ab4d(0x473)](_0x57ab4d(0x3c4)),_0xcf15ee=document['getElementById'](_0x57ab4d(0x936)),_0x158973=document['getElementById'](_0x57ab4d(0x39b)),_0x5412b2=document[_0x57ab4d(0x473)]('char-edit-avatar-preview'),_0x19d06d=document[_0x57ab4d(0x473)](_0x57ab4d(0x5b3)),_0x6446ef=document[_0x57ab4d(0x473)](_0x57ab4d(0xb93)),_0x4e8cfa=document[_0x57ab4d(0x473)](_0x57ab4d(0x67d)),_0x2e1309=document[_0x57ab4d(0x473)]('edit-clear-history-button'),_0x10d802=document[_0x57ab4d(0x473)]('edit-delete-char-button');let _0x28d032=null,_0x14788b=![];const _0x3b64ab=_0x57ab4d(0x1ad),_0xe76b44=_0x57ab4d(0x50d);_0xa7652b={'characters':[],'worldBooks':[],'worldBookCategories':[],'activeWorldBookCategoryId':'default','chats':[],'userProfiles':[],'activeUserProfileId':null,'apiSettings':{'endpoint':'','key':'','model':''},'preferences':{'widgetBgImage':null,'perChatContextLines':0x64,'forceWhiteClock':![]},'activeChatId':null,'activeMeetingCharId':null,'isGenerating':![],'currentAbortController':null,'pendingMessageTimers':[],'conversationHistory':[],'displayedMessageCount':0x32,'activeQuote':null,'friendCircles':[],'activeFriendCircleId':null,'calendarEvents':[],'accountingData':[],'accountingLedger':{},'diaries':[],'activeDiaryCharacterId':null,'diaries':[],'activeDiaryCharacterId':null,'meetingViewMode':'novel','activeMeetingScriptQueue':[],'characterLastScripts':{},'musicPlaylist':[],'currentlyPlayingIndex':-0x1,'isPlaying':![],'pendingPostAttachments':{'image':null,'music':null},'tokenStats':{'currentChat':null,'history':[]},'livestreamSessions':{},'activeLivestreamCharId':null,'currentLivestreamLog':[],'currentLivestreamUserActions':[],'currentLivestreamDMs':[],'isDMPanelVisible':![],'hasNewDMReply':![],'livestreamReplays':{}};function _0x2e0417(){const _0xf350b2=_0x57ab4d;if('tmePQ'!=='xuCQg')try{const _0x9a759b=JSON[_0xf350b2(0x180)](JSON[_0xf350b2(0xaf6)]({..._0xa7652b,'currentAbortController':null,'isGenerating':![],'pendingMessageTimers':[]})),_0x5cbf50=(_0x3a644b,_0xd9c0a0)=>{const _0x3a1a53=_0xf350b2;if(_0x3a1a53(0x3d1)!==_0x3a1a53(0x1fe)){if(_0x3a644b&&_0x3a644b[_0xd9c0a0]&&typeof _0x3a644b[_0xd9c0a0]===_0x3a1a53(0xdab)&&_0x3a644b[_0xd9c0a0][_0x3a1a53(0x324)](_0x3a1a53(0x23d))){if(_0x3a1a53(0xd10)!==_0x3a1a53(0x53b))return delete _0x3a644b[_0xd9c0a0],!![];else _0x229b44[_0x3a1a53(0x970)][_0x3a1a53(0x702)](_0x3a1a53(0x348));}return![];}else _0x5bac1c=_0x2e085c(_0x4f86d2[_0x3a1a53(0x584)][0x0]);};_0x9a759b[_0xf350b2(0xbfe)]&&_0x9a759b[_0xf350b2(0xbfe)][_0xf350b2(0x1dc)](_0xd216f8=>_0x5cbf50(_0xd216f8,_0xf350b2(0x98f))),_0x9a759b[_0xf350b2(0x932)]&&_0x9a759b[_0xf350b2(0x932)][_0xf350b2(0x1dc)](_0x34c9cd=>_0x5cbf50(_0x34c9cd,'avatar')),_0x9a759b[_0xf350b2(0x5fa)]&&_0x5cbf50(_0x9a759b['preferences'],_0xf350b2(0xc38)),_0x9a759b[_0xf350b2(0x175)]&&_0x9a759b['friendCircles']['forEach'](_0x19e53d=>{const _0x41f371=_0xf350b2;if(_0x41f371(0x916)!==_0x41f371(0x916))_0x299a40[_0x41f371(0xdeb)]=![];else{if(_0x19e53d[_0x41f371(0xb6e)]){if(_0x41f371(0x8c1)!==_0x41f371(0x8c1)){_0x1df9a9[_0x41f371(0x6e4)]('好友圈档案柜是空的，无需净化。');return;}else _0x19e53d[_0x41f371(0xb6e)][_0x41f371(0x1dc)](_0x39b83a=>{const _0x25e8f1=_0x41f371;_0x5cbf50(_0x39b83a,'image'),_0x5cbf50(_0x39b83a,_0x25e8f1(0x4f6));});}}}),localStorage['setItem'](_0xf350b2(0xc6a),JSON[_0xf350b2(0xaf6)](_0x9a759b));}catch(_0x289d1f){console[_0xf350b2(0xc95)]('Failed\x20to\x20save\x20state\x20to\x20localStorage:',_0x289d1f),_0x198030(_0xf350b2(0xb2d));}else{const _0x5b5869=_0x5e0aee[_0xf350b2(0x277)][_0xf350b2(0x17f)](_0xb84392=>_0x3f53cb[_0xf350b2(0x52d)][_0xf350b2(0x394)](_0x5debb2=>_0x5debb2['id']===_0xb84392))[_0xf350b2(0x1a9)](_0x1eabdf)['map'](_0x5e2f8a=>_0xf350b2(0x2be)+_0x5e2f8a[_0xf350b2(0xe79)]+'\x0a'+_0x5e2f8a[_0xf350b2(0xb17)])[_0xf350b2(0x332)]('');if(_0x5b5869)_0x3bd04b=_0xf350b2(0xc4)+_0x5b5869;}}async function _0xf8d866(){const _0x898650=_0x57ab4d;if(!_0xa7652b['userProfiles']||_0xa7652b['userProfiles'][_0x898650(0x893)]===0x0)return;console[_0x898650(0x6e4)](_0x898650(0xa4));for(const _0x219c0e of _0xa7652b[_0x898650(0x932)]){if(_0x898650(0xb66)!==_0x898650(0xb66))_0xf9664b[_0x898650(0xc04)]('click',_0x332791=>{const _0x2b8aa3=_0x898650;if(_0x332791[_0x2b8aa3(0x63c)]['type']===_0x2b8aa3(0xbc7))return;const _0x42b079=_0xc4a7f7[_0x2b8aa3(0xa74)],_0x3ea66c=_0x541749[_0x2b8aa3(0x373)]('.category-toggle-arrow'),_0x2480d7=_0x42b079['classList']['contains']('expanded');_0x42b079[_0x2b8aa3(0x970)][_0x2b8aa3(0x401)](_0x2b8aa3(0x5b5),!_0x2480d7),_0x3ea66c[_0x2b8aa3(0x970)][_0x2b8aa3(0x401)]('expanded',!_0x2480d7);});else{if(!_0x219c0e[_0x898650(0x98f)])try{if(_0x898650(0xc20)===_0x898650(0x9e0))_0x390d42['reload']();else{const _0x62cc79=await _0xf3eefa(_0x898650(0x92f)+_0x219c0e['id']);if(_0x62cc79){if('qsSfT'!=='qsSfT'){const _0x52bf5b=_0x586e74[_0x898650(0xe7c)](_0x591d00/0x3c);if(_0x52bf5b<0x30)_0x20753f+=_0x898650(0xdf2)+_0x52bf5b+'小时前聊过，可以适当问候，不要直接继续之前的话题。';else _0x606669+=_0x898650(0x280)+_0x388791[_0x898650(0xe7c)](_0x52bf5b/0x18)+_0x898650(0xc8c);}else _0x219c0e[_0x898650(0x98f)]=await _0xbb85d0(_0x62cc79);}}}catch(_0x42bf85){console[_0x898650(0xc95)]('为用户\x20'+_0x219c0e[_0x898650(0xe79)]+'\x20('+_0x219c0e['id']+')\x20恢复头像失败:',_0x42bf85);}}}console[_0x898650(0x6e4)](_0x898650(0x1c0));}async function _0x18f850(){const _0x1b0f1d=_0x57ab4d;if(_0x1b0f1d(0x532)===_0x1b0f1d(0x532)){if(!_0xa7652b[_0x1b0f1d(0xbfe)]||_0xa7652b[_0x1b0f1d(0xbfe)][_0x1b0f1d(0x893)]===0x0){console[_0x1b0f1d(0x6e4)](_0x1b0f1d(0x7e1));return;}console[_0x1b0f1d(0x6e4)](_0x1b0f1d(0x5b2));for(const _0x562909 of _0xa7652b[_0x1b0f1d(0xbfe)]){if(!_0x562909['avatar']){if(_0x1b0f1d(0xbe4)===_0x1b0f1d(0xbce))_0x1ddfd4[_0x1b0f1d(0x706)]='';else try{if('bRQeB'!==_0x1b0f1d(0xc41)){const _0x5b231f=await _0xf3eefa(_0x1b0f1d(0x6ea)+_0x562909['id']);_0x5b231f&&(_0x562909[_0x1b0f1d(0x98f)]=await _0xbb85d0(_0x5b231f));}else{_0x206c77=!![];const _0x4e75e3=_0x2cb340[_0x1b0f1d(0x7a9)]('ul');_0x4e75e3[_0x1b0f1d(0x3e4)][_0x1b0f1d(0x38f)]=_0x1b0f1d(0x550),_0x4a311d['appendChild'](_0x4e75e3);}}catch(_0x1a9469){console[_0x1b0f1d(0xc95)](_0x1b0f1d(0xd20)+_0x562909[_0x1b0f1d(0xe79)]+'\x20('+_0x562909['id']+_0x1b0f1d(0x96a),_0x1a9469);}}}console[_0x1b0f1d(0x6e4)]('所有头像已恢复到运行时状态。');}else{if(_0x60eb3c['participantIds'][_0x1b0f1d(0x5c0)](_0x2d086f['id'])){const _0x46d603=_0x26d973(_0x361c44['id']);_0x46d603['forEach'](_0x447877=>{const _0x55b0f8=_0x1b0f1d;_0x447877[_0x55b0f8(0xb9f)]>=_0x10f333[_0x55b0f8(0x48e)]()&&_0x447877[_0x55b0f8(0xab8)]!==_0x55b0f8(0xaae)&&_0x447877[_0x55b0f8(0xb17)]&&_0x119409[_0x55b0f8(0x214)]({'timestamp':_0x447877[_0x55b0f8(0xb9f)],'type':_0x455adb(_0x147d4d),'content':'['+(_0x447877[_0x55b0f8(0xab8)]==='user'?_0x2ae995['name']:_0x22fd08[_0x55b0f8(0xe79)])+_0x55b0f8(0x7ec)+_0x447877[_0x55b0f8(0xb17)]});});}}}function _0x5956ff(){const _0x1211c7=_0x57ab4d;let _0x440bf4=null;try{_0x440bf4=localStorage[_0x1211c7(0xb34)](_0x1211c7(0xc6a));}catch(_0x16f92f){_0x1211c7(0x6ee)!=='Ysizz'?_0x1211c7(0xca3):console[_0x1211c7(0xc95)](_0x1211c7(0x96b),_0x16f92f);}if(_0x440bf4)try{const _0x182ca0=JSON[_0x1211c7(0x180)](_0x440bf4),_0x446716={..._0xa7652b},_0xfa2eb2={..._0x446716,..._0x182ca0};_0xfa2eb2[_0x1211c7(0x5fa)]={..._0x446716[_0x1211c7(0x5fa)],..._0x182ca0['preferences']||{}},_0xfa2eb2[_0x1211c7(0xb82)]={..._0x446716[_0x1211c7(0xb82)],..._0x182ca0['apiSettings']||{}},_0xfa2eb2[_0x1211c7(0x858)]=null,_0xfa2eb2['isGenerating']=![],Object[_0x1211c7(0x8b3)](_0xa7652b,_0xfa2eb2);}catch(_0x3f1889){_0x1211c7(0x70a)!==_0x1211c7(0x70a)?_0x560ac0[_0x1211c7(0x50a)]():(console[_0x1211c7(0xc95)](_0x1211c7(0x588),_0x3f1889),localStorage[_0x1211c7(0x863)]('appState'));}const _0x5a4330=_0xa7652b[_0x1211c7(0xbfe)][_0x1211c7(0x893)]===0x0;return!_0xa7652b[_0x1211c7(0x4ec)][_0x1211c7(0x394)](_0x1cc3ec=>_0x1cc3ec['id']===_0xa7652b[_0x1211c7(0xd5b)])&&(_0xa7652b['activeChatId']=_0xa7652b[_0x1211c7(0x4ec)][0x0]?.['id']||null),_0x440bf4&&(_0x1211c7(0x517)!==_0x1211c7(0xcb2)?_0x2e0417():_0x13aa18[_0x1211c7(0x932)][_0x1211c7(0x1dc)](_0x18ebe1=>_0x3fee03(_0x18ebe1,_0x1211c7(0x98f)))),_0xa7652b[_0x1211c7(0x696)]=0x32,_0x5a4330;}function _0x2c2648(){const _0x272564=_0x57ab4d;if(!_0xa7652b[_0x272564(0xd5b)])return;try{localStorage[_0x272564(0x29d)](_0x272564(0xd62)+_0xa7652b[_0x272564(0xd5b)],JSON[_0x272564(0xaf6)](_0xa7652b[_0x272564(0xdc0)]));}catch(_0x5a5c55){console['error'](_0x272564(0x818),_0x5a5c55),_0x198030(_0x272564(0xe19));}}function _0x10895d(){const _0x561812=_0x57ab4d;if('ErYyF'!==_0x561812(0x7f3)){if(!_0xa7652b[_0x561812(0xd5b)]){_0xa7652b[_0x561812(0xdc0)]=[],_0x1f1d12();return;}let _0x599838=null;try{_0x599838=localStorage[_0x561812(0xb34)](_0x561812(0xd62)+_0xa7652b[_0x561812(0xd5b)]);}catch(_0x8060d2){if(_0x561812(0xb91)===_0x561812(0x271)){if(_0x267689[_0x561812(0xab8)]==='user')return _0x134ab1[_0x561812(0xbcc)]?.[_0x561812(0xe79)]||_0x561812(0x725);if(_0x1c4684[_0x561812(0xb42)]){const _0x5f412=_0x5c2cd3(_0x45aca6['senderId']);return _0x5f412?.[_0x561812(0xe79)]||_0x561812(0x7ef);}if(_0x35b184?.[_0x561812(0x45c)]==='private'){const _0x3af9d8=_0x30b2fb(_0x14ff08['participantIds'][0x0]);return _0x3af9d8?.['name']||'AI';}return _0x561812(0x37d);}else console[_0x561812(0xc95)]('Failed\x20to\x20read\x20history\x20for\x20chat\x20'+_0xa7652b[_0x561812(0xd5b)],_0x8060d2);}let _0x43d1f8=[];if(_0x599838)try{if(_0x561812(0x942)===_0x561812(0x1b6))_0x566885(_0x396e1f),_0x177cca['removeEventListener'](_0x561812(0x442),_0x2f9b09),_0x32c7b7[_0x561812(0x50e)]('error',_0x29e09d),_0x246139[_0x561812(0x706)]='',_0x1df5c5['remove']();else{const _0x2e2477=JSON['parse'](_0x599838);if(Array[_0x561812(0x8aa)](_0x2e2477)){if('GOnVi'!==_0x561812(0x3a7))_0x43d1f8=_0x2e2477['filter'](_0x4aa953=>_0x4aa953&&typeof _0x4aa953===_0x561812(0x26a)&&typeof _0x4aa953['role']===_0x561812(0xdab)&&typeof _0x4aa953[_0x561812(0xb17)]!==_0x561812(0xacc));else{const _0x22caf9=_0x39f118[_0x561812(0x373)](_0x561812(0xe71)+_0x28573f+_0x561812(0x1f1)+_0x543f02+_0x561812(0x353))?.[_0x561812(0x6f0)];_0x22caf9&&(_0xad2e60[_0x561812(0x6f0)]=_0x22caf9);}}}}catch(_0xbd56f8){console[_0x561812(0xc95)](_0x561812(0x371)+_0xa7652b[_0x561812(0xd5b)]+',\x20resetting.',_0xbd56f8);try{'CPqCL'===_0x561812(0x953)?(_0x204e80[_0x561812(0xd27)](),_0x1ee746()):localStorage[_0x561812(0x863)](_0x561812(0xd62)+_0xa7652b[_0x561812(0xd5b)]);}catch(_0x601f61){console[_0x561812(0xc95)]('Failed\x20to\x20remove\x20corrupted\x20history\x20from\x20localStorage:',_0x601f61);}}_0xa7652b[_0x561812(0xdc0)]=_0x43d1f8;}else _0x3ecf50();}async function _0xc54223(){const _0x41d0bc=_0x57ab4d,_0x55e80b=document['getElementById'](_0x41d0bc(0x2d8));if(!_0x55e80b){console['error'](_0x41d0bc(0x621));return;}try{let _0x529766=await _0xf3eefa('wallpaper_main');if(!_0x529766){const _0x461096=localStorage[_0x41d0bc(0xb34)](_0x41d0bc(0xd13));_0x461096&&('YMNDM'===_0x41d0bc(0x148)?(_0x4df7ad[_0x41d0bc(0x3e4)][_0x41d0bc(0x1df)]=_0x41d0bc(0x2a3),_0x1f61ef[_0x41d0bc(0x3e4)][_0x41d0bc(0x1df)]=_0x41d0bc(0x4a6),_0x222e40(()=>{const _0x30e01f=_0x41d0bc,_0x504ccf=_0x5e3074[_0x30e01f(0x373)]('#message-anchor');_0x504ccf?_0x504ccf['scrollIntoView']({'behavior':_0x30e01f(0x524),'block':_0x30e01f(0xaaa)}):_0x4eb133[_0x30e01f(0xc55)]=_0x1a2fed[_0x30e01f(0x251)];},0x32)):(console[_0x41d0bc(0x6e4)](_0x41d0bc(0xb18)),_0x529766=await _0x530eb9(_0x461096),await _0x1366c1('wallpaper_main',_0x529766),localStorage[_0x41d0bc(0x863)](_0x41d0bc(0xd13))));}_0x529766?(_0x55e80b[_0x41d0bc(0x3e4)]['backgroundImage']=_0x41d0bc(0x548)+URL['createObjectURL'](_0x529766)+')',_0x55e80b[_0x41d0bc(0x3e4)][_0x41d0bc(0x209)]=_0x41d0bc(0xdd5),_0x55e80b[_0x41d0bc(0x3e4)][_0x41d0bc(0xcb8)]='center'):_0x55e80b['style'][_0x41d0bc(0x16b)]='';}catch(_0x3da354){if(_0x41d0bc(0x8cb)==='rSBnQ'){const _0x5c12ec=_0x176544[_0x41d0bc(0x63c)][_0x41d0bc(0xdc7)];_0xd66e93[_0x41d0bc(0x6e4)](_0x41d0bc(0x1f5)+_0x5c12ec[_0x41d0bc(0x313)]+_0x41d0bc(0x8f1)),!_0x5c12ec[_0x41d0bc(0x147)]['contains'](_0x33983d)&&(_0x4d0a1e[_0x41d0bc(0x6e4)](_0x41d0bc(0x198)+_0x1c3d9a),_0x5c12ec[_0x41d0bc(0x1ac)](_0x37da6f,{'keyPath':'id'})),!_0x5c12ec[_0x41d0bc(0x147)][_0x41d0bc(0x85f)](_0x41d0bc(0x319))&&(_0x931cae[_0x41d0bc(0x6e4)](_0x41d0bc(0x472)),_0x5c12ec['createObjectStore'](_0x41d0bc(0x319),{'keyPath':'id'})),!_0x5c12ec[_0x41d0bc(0x147)][_0x41d0bc(0x85f)](_0x3758fe)&&(_0x50a494[_0x41d0bc(0x6e4)](_0x41d0bc(0x198)+_0x549f77),_0x5c12ec[_0x41d0bc(0x1ac)](_0x11194e,{'keyPath':'id'}));}else console['error']('加载壁纸失败:',_0x3da354),_0x55e80b&&(_0x55e80b[_0x41d0bc(0x3e4)][_0x41d0bc(0x16b)]='');}}function _0x54334a(){const _0x868813=_0x57ab4d,_0x575c23=localStorage[_0x868813(0xb34)](_0x868813(0x8c3));_0x575c23?document['getElementById'](_0x868813(0x20d))[_0x868813(0x3e4)]['setProperty'](_0x868813(0x297),'url('+_0x575c23+')'):document['getElementById'](_0x868813(0x20d))['style'][_0x868813(0xd2c)]('--feed-bg-image',_0x868813(0x4a6));}async function _0x3a87bc(_0x433c96){const _0x4210f8=_0x57ab4d;if(_0x4210f8(0x9d)!==_0x4210f8(0x9d))return'刚才';else try{await _0x1366c1(_0x4210f8(0xe08),_0x433c96),await _0xc54223(),_0x198030('壁纸已更换！');}catch(_0x44a357){if(_0x4210f8(0xbd)!==_0x4210f8(0xbd)){const _0x5c6ccc=_0x152c59[_0x4210f8(0x72f)](),_0x55b2fb=_0x3e20d0(_0x5c30ab[_0x4210f8(0xc57)]()+0x1)[_0x4210f8(0x2c8)](0x2,'0'),_0x28c889=_0x4c8c01(_0x2e0ed4[_0x4210f8(0x947)]())[_0x4210f8(0x2c8)](0x2,'0');return _0x5c6ccc+'-'+_0x55b2fb+'-'+_0x28c889;}else console[_0x4210f8(0xc95)](_0x4210f8(0x554),_0x44a357),_0x198030(_0x4210f8(0xe02)+_0x44a357[_0x4210f8(0xe32)]);}}function _0x539549(_0x2f150a){const _0x181000=_0x57ab4d,_0x1629c4={'quotedMessage':null,'content':_0x2f150a},_0x6a45e0=_0x2f150a[_0x181000(0x41c)](/^\[引用\|(.*?)\|(.*?)\]\s*/);return _0x6a45e0&&(_0x181000(0x3ea)!==_0x181000(0x3ea)?_0x2e6891(_0xfd3af6['id']):(_0x1629c4[_0x181000(0x115)]={'sender':_0x6a45e0[0x1][_0x181000(0x8eb)](),'content':_0x6a45e0[0x2]['trim']()},_0x1629c4[_0x181000(0xb17)]=_0x2f150a[_0x181000(0x825)](_0x6a45e0[0x0][_0x181000(0x893)])[_0x181000(0x8eb)]())),_0x1629c4;}const _0x233fde=document['getElementById'](_0x57ab4d(0x88d)),_0x1617b0=document[_0x57ab4d(0x473)]('message-action-backdrop'),_0x389081=document[_0x57ab4d(0x473)]('edit-message-button'),_0x23daf7=document[_0x57ab4d(0x473)](_0x57ab4d(0x7d7)),_0x164c8e=document['getElementById']('cancel-action-button'),_0xbc3d1f=document[_0x57ab4d(0x473)]('quote-message-button'),_0x4eaaf0=document[_0x57ab4d(0x473)]('edit-message-modal'),_0xbc3298=document[_0x57ab4d(0x473)](_0x57ab4d(0xdf1)),_0x2bc92b=document['getElementById'](_0x57ab4d(0x39e)),_0x5aeb3d=document[_0x57ab4d(0x473)](_0x57ab4d(0xd26)),_0x3ccdf2=document[_0x57ab4d(0x473)]('cancel-edit-button');let _0x4e3392=null;function _0x282605(_0x117b68){_0x4e3392=_0x117b68,_0x233fde['classList']['add']('show');}function _0x5e6219(){const _0x307fdb=_0x57ab4d;_0x233fde[_0x307fdb(0x970)][_0x307fdb(0x702)]('show');}function _0x155b4a(){_0x5e6219(),_0x4e3392=null;}function _0x5e990d(){const _0x325ae0=_0x57ab4d;if(_0x4e3392===null)return;_0xa7652b['conversationHistory'][_0x325ae0(0x197)](_0x4e3392,0x1),_0x2c2648(),_0x42b406(),_0x155b4a();}function _0x294ca3(){const _0x1b855d=_0x57ab4d;if(_0x4e3392===null)return;const _0x37a209=_0xa7652b[_0x1b855d(0xdc0)][_0x4e3392];if(!_0x37a209)return;_0x2bc92b[_0x1b855d(0x2d4)]=_0x37a209[_0x1b855d(0xb17)],_0x5e6219(),_0x4eaaf0[_0x1b855d(0x970)][_0x1b855d(0xddb)](_0x1b855d(0x348)),_0x2bc92b[_0x1b855d(0x190)]();}function _0x18fc9a(){const _0x3d9b30=_0x57ab4d;if(_0x3d9b30(0x87e)==='SQHBX'){if(_0x4e3392===null)return;const _0x197de8=_0x2bc92b[_0x3d9b30(0x2d4)][_0x3d9b30(0x8eb)]();if(_0x197de8===''){_0x2719ce();return;}const _0x1e3ea7=_0xa7652b['conversationHistory'][_0x4e3392];_0x1e3ea7&&(_0x1e3ea7[_0x3d9b30(0xb17)]=_0x197de8,_0x2c2648(),_0x42b406()),_0x4eaaf0[_0x3d9b30(0x970)][_0x3d9b30(0x702)](_0x3d9b30(0x348)),_0x4e3392=null;}else{_0x19b133(_0x3d9b30(0x726));return;}}function _0x2719ce(){const _0x107472=_0x57ab4d;if('ihixB'===_0x107472(0x160))try{const _0x506832=_0x1850ca[_0x107472(0xb34)](_0x107472(0xd62)+_0x1980c6),_0x42ae95=_0x3a672f['parse'](_0x506832||'[]');return _0x33ceb1[_0x107472(0x8aa)](_0x42ae95)?_0x42ae95:[];}catch{return[];}else _0x4eaaf0[_0x107472(0x970)][_0x107472(0x702)](_0x107472(0x348)),_0x4e3392=null;}_0x1617b0['addEventListener']('click',_0x155b4a),_0x164c8e[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x155b4a),_0x23daf7['addEventListener']('click',_0x5e990d),_0x389081['addEventListener'](_0x57ab4d(0x493),_0x294ca3),_0xbc3d1f['addEventListener'](_0x57ab4d(0x493),_0x315ecd),_0x1dba74[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0xb7052),_0x5aeb3d[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x18fc9a),_0x3ccdf2['addEventListener'](_0x57ab4d(0x493),_0x2719ce),_0xbc3298['addEventListener'](_0x57ab4d(0x493),_0x2719ce);function _0x315ecd(){const _0x3289ec=_0x57ab4d;if(_0x4e3392===null)return;const _0x41a43d=_0xa7652b[_0x3289ec(0xdc0)][_0x4e3392];if(!_0x41a43d)return;const _0x143b2d=_0x41c782();let _0x116892='未知';if(_0x41a43d[_0x3289ec(0xab8)]===_0x3289ec(0xea1)){const _0x494b24=_0x2e35cc(_0xa7652b[_0x3289ec(0xd5b)]);_0x116892=_0x494b24[_0x3289ec(0xe79)]||'我';}else{if(_0x3289ec(0x3bf)===_0x3289ec(0xd6f))_0x165598[_0x3289ec(0x115)]={..._0x3fc0a['activeQuote']};else{const _0x1c9489=_0x41a43d[_0x3289ec(0xb42)]||_0x143b2d?.['participantIds'][0x0],_0x2fe058=_0x1238ea(_0x1c9489);_0x116892=_0x2fe058?_0x2fe058[_0x3289ec(0xe79)]:'角色';}}let _0x91f412=_0x41a43d[_0x3289ec(0xb17)]||'';if(_0x41a43d['displayUrl'])_0x91f412='[表情]';if(_0x41a43d['image'])_0x91f412=_0x3289ec(0x32c);if(_0x91f412[_0x3289ec(0x893)]>0x32)_0x91f412=_0x91f412[_0x3289ec(0x825)](0x0,0x32)+'...';_0xa7652b[_0x3289ec(0xc40)]={'sender':_0x116892,'content':_0x91f412},_0x3eb530(),_0x155b4a(),_0x41f290[_0x3289ec(0x190)]();}function _0x3eb530(){const _0x5d121d=_0x57ab4d;if(_0x5d121d(0x350)==='JSjWG')_0x5942d7(_0x331869[_0x5d121d(0xbfa)],_0x27eeb6[_0x5d121d(0x3a1)]);else{if(!_0xa7652b[_0x5d121d(0xc40)])return;_0x4f41bd[_0x5d121d(0x226)]=_0x5d121d(0x42d)+_0xa7652b[_0x5d121d(0xc40)][_0x5d121d(0x39d)],_0x4bae36[_0x5d121d(0x226)]=_0xa7652b[_0x5d121d(0xc40)][_0x5d121d(0xb17)],_0x27b996[_0x5d121d(0x3e4)]['display']=_0x5d121d(0x2a3);}}function _0xb7052(){const _0x4f6048=_0x57ab4d;_0xa7652b[_0x4f6048(0xc40)]=null,_0x27b996['style']['display']=_0x4f6048(0x4a6);}function _0xffff1f(_0x323144,_0x3c5369){const _0x58f368=_0x57ab4d;if(_0x58f368(0xa11)!==_0x58f368(0xb35)){const _0x3d2bdb=document[_0x58f368(0x473)](_0x58f368(0xc91));if(_0x3d2bdb){if(_0x58f368(0x8d8)===_0x58f368(0x8d8)){if(_0x323144===_0x58f368(0xbd6)){if(_0x58f368(0x877)===_0x58f368(0x877))_0x3d2bdb[_0x58f368(0x3e4)][_0x58f368(0x1df)]=_0x58f368(0x8c8);else{const _0x58f26d=_0x32b107[_0x58f368(0x2d4)][_0x58f368(0x8eb)]();if(!_0x58f26d)return;const _0x32bb15=_0x1eb0ba(_0x59e496[_0x58f368(0xd5b)]),_0x1a7a59={'type':_0x58f368(0xc85),'user':_0x32bb15[_0x58f368(0xe79)]||'我','content':_0x58f26d,'isUser':!![]};_0x23ea18(_0x1a7a59),_0x12e8ed[_0x58f368(0x700)][_0x58f368(0x214)](_0x1a7a59),_0xa65e82['currentLivestreamLog']['push'](_0x1a7a59),_0x555ec6[_0x58f368(0x2d4)]='';}}else{if(_0x58f368(0xe17)!==_0x58f368(0xe17)){const _0x1999e7=_0x568a23[_0x58f368(0x473)](_0x58f368(0x23a)),_0x5a03e0=_0x5eba63['createElement'](_0x58f368(0x527));_0x5a03e0[_0x58f368(0xd04)]=_0x58f368(0x338);_0x170f25[_0x58f368(0x988)]&&_0x5a03e0[_0x58f368(0x970)][_0x58f368(0xddb)](_0x58f368(0x5b0));const _0xa5da51=_0x237f91['content']||_0x1fcc48[_0x58f368(0xdf3)]||'';_0x5a03e0[_0x58f368(0x6f0)]=_0x58f368(0xc4c)+_0x588830[_0x58f368(0xea1)]+_0x58f368(0x48c)+_0xa5da51+'</span>',_0x1999e7[_0x58f368(0x206)](_0x5a03e0);}else _0x3d2bdb[_0x58f368(0x3e4)][_0x58f368(0x1df)]='none';}}else _0x20ced3[_0x58f368(0x730)][_0x58f368(0x650)]('beforeend','<style\x20id\x20=\x20\x22snoop-temp-style\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.snoop\x20-\x20avatar\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2030px;\x20height:\x2030px;\x20border-\x20radius:\x2050\x20%;\x20background:\x20#e5e7eb;\x20color:\x20#4b5563;\x0a\x20\x20\x20\x20display:\x20flex;\x20align\x20-\x20items:\x20center;\x20justify\x20-\x20content:\x20center;\x20font\x20-\x20weight:\x20500;\x0a\x20\x20\x20\x20margin:\x200\x208px;\x20flex\x20-\x20shrink:\x200;\x20align\x20-\x20self:\x20flex\x20-\x20end;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style\x20>\x20');}_0x28d032=_0x3c5369||null,Object[_0x58f368(0x664)](_0x5046d9)[_0x58f368(0x1dc)](_0x80dbc2=>_0x80dbc2[_0x58f368(0x970)][_0x58f368(0x702)](_0x58f368(0x4b2)));if(_0x5046d9[_0x323144]){if(_0x58f368(0x1a4)!==_0x58f368(0x52b))_0x5046d9[_0x323144]['classList'][_0x58f368(0xddb)](_0x58f368(0x4b2));else{const _0x95fd9c=_0x309fa4(_0x5804e[_0x58f368(0x584)][0x0]);return _0x95fd9c?.[_0x58f368(0xe79)]||'AI';}}_0x323144!==_0x58f368(0x771)&&(_0xe58441['classList']['add']('transitioning'),_0xe58441[_0x58f368(0x970)][_0x58f368(0x702)](_0x58f368(0xa8c)),setTimeout(()=>{const _0xb961b4=_0x58f368;if(_0xb961b4(0x3a3)!==_0xb961b4(0x585))_0xe58441[_0xb961b4(0x970)][_0xb961b4(0x702)]('transitioning');else{const _0x9145b2=_0x4897e1[_0xb961b4(0x2d4)][_0xb961b4(0x8eb)]()[_0xb961b4(0x5c0)](_0x3031dd);_0x331c8d[_0xb961b4(0xdeb)]=_0x9145b2;}},0x190));}else _0x3f77e6(),_0x126d3f(_0x58f368(0x208),_0x58f368(0x784));}function _0x467fe1(_0x1ce597){const _0x223968=_0x57ab4d;console[_0x223968(0x6e4)](_0x223968(0x10d)+_0x1ce597+_0x223968(0x513)+_0xe58441[_0x223968(0x970)][_0x223968(0x85f)]('transitioning'));if(_0xe58441[_0x223968(0x970)]['contains'](_0x223968(0x58e))){console[_0x223968(0x591)](_0x223968(0x7fd));return;}_0xe58441[_0x223968(0x970)]['add'](_0x223968(0x58e)),_0xe58441[_0x223968(0x3e4)][_0x223968(0x738)]=_0x223968(0x4a6),_0x1ce597?_0xe58441[_0x223968(0x970)]['add'](_0x223968(0xa8c)):_0xe58441[_0x223968(0x970)][_0x223968(0x702)](_0x223968(0xa8c)),setTimeout(()=>{const _0x4b8d2e=_0x223968;_0x4b8d2e(0x7e2)===_0x4b8d2e(0x3ad)?_0x240efd['error'](_0x4b8d2e(0xdd4)+_0x5554ff[_0x4b8d2e(0xd5b)],_0x437cc8):(_0xe58441[_0x4b8d2e(0x970)]['remove'](_0x4b8d2e(0x58e)),_0xe58441[_0x4b8d2e(0x3e4)]['pointerEvents']='',console[_0x4b8d2e(0x6e4)]('showChatView\x20transition\x20finished\x20for\x20show='+_0x1ce597+'.'));},0x1c2);}async function _0xa7d798(){const _0x583548=_0x57ab4d;if('sCTdL'!==_0x583548(0xc3c)){_0x1baa8d[_0x583548(0x6f0)]='';const _0x1e26b5=_0xa7652b[_0x583548(0x4ec)]['map'](_0x367495=>{const _0x796ff0=_0x583548;if(_0x367495['type']===_0x796ff0(0x722)){if(_0x796ff0(0x3e9)!=='vgSbj')_0x25aa56[_0x796ff0(0x72d)]=_0x23e9bb,_0x20829e=!![];else{const _0x3c9c10=_0x1238ea(_0x367495['participantIds'][0x0]);return _0x3c9c10?_0xf3eefa(_0x796ff0(0x6ea)+_0x3c9c10['id']):Promise['resolve'](null);}}else{if(_0x796ff0(0xbf6)!=='DmZrM')_0x354210[_0x796ff0(0x702)]();else return _0xf3eefa(_0x796ff0(0x639)+_0x367495['id']);}}),_0x12ee98=await Promise[_0x583548(0xc1d)](_0x1e26b5);_0xa7652b[_0x583548(0x4ec)][_0x583548(0x1dc)]((_0x2209a2,_0x38dd25)=>{const _0x2f025e=_0x583548;if(_0x2f025e(0x8ef)!==_0x2f025e(0x71e)){const _0x40c75f=document[_0x2f025e(0x7a9)]('li');_0x40c75f['className']=_0x2f025e(0x4b0),_0x40c75f[_0x2f025e(0x9c6)]['id']=_0x2209a2['id'];let _0x35b32e=_0x96c08e,_0xc81197='群聊',_0x1109de='';const _0x3d5f13=_0x12ee98[_0x38dd25];_0x3d5f13&&(_0x35b32e=URL['createObjectURL'](_0x3d5f13));if(_0x2209a2['type']==='private'){if(_0x2f025e(0x35c)!==_0x2f025e(0x35c)){_0x466983['value']='';return;}else{const _0x32fe8b=_0x1238ea(_0x2209a2[_0x2f025e(0x584)][0x0]);if(_0x32fe8b){if('jGKYD'!==_0x2f025e(0x9b7)){const _0x49f85d={};for(let _0x29cab2=0x0;_0x29cab2<_0x81bad7['length'];_0x29cab2++){const _0x3fb99a=_0xef0376['key'](_0x29cab2);_0x3fb99a&&(_0x49f85d[_0x3fb99a]=_0x176374[_0x2f025e(0xb34)](_0x3fb99a));}const _0x277188={},_0x24f85f={'localStorageData':_0x49f85d,'preferencesData':_0x277188,'exportVersion':_0x2f025e(0x56e)},_0x4b3289=_0x2a5a33[_0x2f025e(0xaf6)](_0x24f85f),_0x532074=_0x2f025e(0x308)+_0x3c5380+_0x2f025e(0xd0f),_0xebc141=new _0xe64a75([_0x4b3289],{'type':'application/json'});_0x1457af(_0xebc141,_0x532074),_0x28bbbe(_0x2f025e(0x4bc));}else!_0x3d5f13&&(_0x35b32e=_0x32fe8b['avatar']||_0x96c08e),_0xc81197=_0x32fe8b[_0x2f025e(0xe79)]||_0x2f025e(0xa39),_0x1109de=_0x32fe8b[_0x2f025e(0x759)]||'私聊';}else _0xc81197=_0x2f025e(0x4ad),_0x1109de=_0x2f025e(0x3e1);}}else _0xc81197=_0x2209a2[_0x2f025e(0xe79)]||'未命名群聊',_0x1109de=_0x2209a2['participantIds'][_0x2f025e(0x893)]+'\x20个成员';_0x40c75f[_0x2f025e(0x6f0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x35b32e+_0x2f025e(0x729)+_0xc81197+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>'+_0x1109de+_0x2f025e(0xc03),_0x40c75f[_0x2f025e(0x373)](_0x2f025e(0x18a))[_0x2f025e(0xc04)](_0x2f025e(0x493),()=>{_0xc494e4(_0x2209a2['id']);}),_0x1baa8d[_0x2f025e(0xced)](_0x40c75f);}else _0x3be0e5=_0x3a8285[_0x2f025e(0x932)][0x0];});}else{const _0x879fb3=_0x2c8d84(_0x524d88),_0x52906e=_0x2f3ca8[_0x583548(0x473)](_0x583548(0x326));_0x52906e[_0x583548(0x3e4)][_0x583548(0x16b)]='';let _0x1bc858=_0x4bca80[_0x583548(0x473)](_0x583548(0x361)+_0x21655d);if(_0x1bc858)_0x1bc858['innerHTML']='';if(!_0x879fb3)return;_0x879fb3[_0x583548(0x5ab)]&&(_0x52906e[_0x583548(0x3e4)][_0x583548(0x16b)]='url(\x27'+_0x879fb3[_0x583548(0x5ab)]+'\x27)',_0x52906e[_0x583548(0x3e4)]['backgroundSize']=_0x583548(0xdd5),_0x52906e['style'][_0x583548(0xcb8)]=_0x583548(0x88f));if(_0x879fb3[_0x583548(0xe46)]){let _0x527edc=_0x5b742c['getElementById'](_0x583548(0x361)+_0x879fb3['id']);!_0x527edc&&(_0x527edc=_0x4c608a[_0x583548(0x7a9)](_0x583548(0x3e4)),_0x527edc['id']='style-'+_0x879fb3['id'],_0x59b67d[_0x583548(0x730)][_0x583548(0xced)](_0x527edc));const _0x581a21=_0x879fb3[_0x583548(0xe46)],_0x88516b=_0x581a21[_0x583548(0x833)](/\.bubble\.sent/g,'.bubble-'+_0x879fb3['id']+'.message.user')[_0x583548(0x833)](/\.bubble\.received/g,_0x583548(0xd6e)+_0x879fb3['id']+_0x583548(0x491));_0x527edc[_0x583548(0x6f0)]=_0x88516b;}}}function _0x34a3d4(){const _0x3e314a=_0x57ab4d,_0x41cdfc=document[_0x3e314a(0x473)](_0x3e314a(0xd96));_0x41cdfc[_0x3e314a(0x6f0)]='';const _0x269186=_0xa7652b[_0x3e314a(0xbfe)][_0x3e314a(0x1a9)](_0x467020=>_0xa7652b[_0x3e314a(0x4ec)][_0x3e314a(0x691)](_0x412a55=>_0x412a55[_0x3e314a(0x45c)]===_0x3e314a(0x722)&&_0x412a55[_0x3e314a(0x584)][_0x3e314a(0x5c0)](_0x467020['id'])));if(_0x269186[_0x3e314a(0x893)]===0x0){_0x41cdfc['innerHTML']=_0x3e314a(0x6e9);return;}_0x269186[_0x3e314a(0x1dc)](_0x269221=>{const _0x4a84b6=_0x3e314a,_0x536e60=document[_0x4a84b6(0x7a9)]('li');_0x536e60['className']=_0x4a84b6(0x4b0),_0x536e60[_0x4a84b6(0x9c6)][_0x4a84b6(0xa48)]=_0x269221['id'],_0x536e60[_0x4a84b6(0x6f0)]=_0x4a84b6(0xa3d)+(_0x269221[_0x4a84b6(0x98f)]||_0x96c08e)+_0x4a84b6(0x729)+_0x269221[_0x4a84b6(0xe79)]+_0x4a84b6(0x6be)+(_0x269221[_0x4a84b6(0x759)]||'私聊')+_0x4a84b6(0xc03),_0x536e60['addEventListener'](_0x4a84b6(0x493),()=>{_0x3daa4f(_0x269221['id']);}),_0x41cdfc[_0x4a84b6(0xced)](_0x536e60);});}async function _0x3daa4f(_0x540768){const _0x39f829=_0x57ab4d;if(_0x39f829(0xc61)===_0x39f829(0x5fd))_0x584dab('图片预览失败:\x20'+_0x3463cb['message']);else{const _0x43ab25=_0x1238ea(_0x540768);if(!_0x43ab25)return;_0xa7652b['activeMeetingCharId']=_0x540768,document[_0x39f829(0x473)](_0x39f829(0x8bf))['textContent']=_0x43ab25['name'];const _0x1e9180=document[_0x39f829(0x473)](_0x39f829(0x2e4));_0x1e9180['style']['backgroundImage']=_0x39f829(0x4a6),document['getElementById'](_0x39f829(0x90f))[_0x39f829(0x6f0)]='<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x2050px\x20auto;\x22></div>',document[_0x39f829(0x473)](_0x39f829(0x5e4))[_0x39f829(0x226)]=_0x39f829(0x37b),document[_0x39f829(0x473)]('galgame-speaker')[_0x39f829(0x226)]='旁白',document[_0x39f829(0x473)](_0x39f829(0x367))['src']='',_0xffff1f(_0x39f829(0x534),_0x39f829(0xb20)),setTimeout(async()=>{const _0x118706=_0x39f829;try{if(_0x118706(0xda9)!=='Sphnt'){const _0x181547=await _0xf3eefa(_0x118706(0x4ed)+_0x540768);_0x181547&&(_0x118706(0x7aa)!==_0x118706(0xb0e)?(_0x1e9180['style'][_0x118706(0x16b)]='url(\x27'+URL[_0x118706(0xc18)](_0x181547)+'\x27)',_0x1e9180[_0x118706(0x3e4)][_0x118706(0x209)]=_0x118706(0xdd5),_0x1e9180[_0x118706(0x3e4)][_0x118706(0xcb8)]=_0x118706(0x88f)):_0x25c757[_0x118706(0x214)]({'timestamp':_0x43fb63,'type':_0x118706(0xe73)+_0x28bd38+']','content':_0x2f954f[_0x118706(0xaf6)](_0x51d43)}));const _0x1b1f0e=_0xa7652b['chats'][_0x118706(0x394)](_0x39df15=>_0x39df15[_0x118706(0x45c)]==='private'&&_0x39df15[_0x118706(0x584)][_0x118706(0x5c0)](_0x540768));_0x1b1f0e?(_0xa7652b[_0x118706(0xd5b)]=_0x1b1f0e['id'],_0x2e0417(),_0x10895d()):'ZZXrn'===_0x118706(0x766)?_0xa7652b[_0x118706(0xdc0)]=[]:(_0x2e2f69[_0x118706(0x3e4)]['position']=_0x118706(0x7ca),_0x478395[_0x118706(0x3e4)][_0x118706(0x5d8)]=_0x118706(0x3f1),_0xf37eaf[_0x118706(0x3e4)][_0x118706(0x855)]=_0x118706(0x71b),_0xb15507[_0x118706(0x3e4)]['transform']=_0x118706(0x547),_0x44a1d0[_0x118706(0x3e4)][_0x118706(0x1df)]='block');_0x1ec822(_0x540768),_0x5b1d9e(),_0x71e0ad();if(_0x423d88)clearInterval(_0x423d88);_0x42bf35(),_0x423d88=setInterval(_0x42bf35,0x2710),document[_0x118706(0x473)](_0x118706(0x409))[_0x118706(0x3e4)][_0x118706(0x1df)]=_0x118706(0x2a3);}else _0x1f3d9e[_0x118706(0x3e4)][_0x118706(0x16b)]='url(\x27'+_0x5bd2a2[_0x118706(0xc18)](_0x322112)+'\x27)',_0x2353bb[_0x118706(0x3e4)]['backgroundSize']=_0x118706(0xdd5),_0x24f553['style']['backgroundPosition']=_0x118706(0x88f);}catch(_0x3d90c3){if(_0x118706(0xd1f)!==_0x118706(0xa0d))console[_0x118706(0xc95)](_0x118706(0xbcd),_0x3d90c3),document[_0x118706(0x473)](_0x118706(0x90f))[_0x118706(0x6f0)]=_0x118706(0xa67);else throw new _0x3c9363(_0x118706(0x1b0));}},0x32);}}function _0x71e0ad(){const _0x2243c8=_0x57ab4d;if('CsMTO'!==_0x2243c8(0x307)){const _0x14ceae=document[_0x2243c8(0x473)]('meeting-scene-view');_0x14ceae['innerHTML']='';const _0x2e7f5e=_0x14ceae[_0x2243c8(0x373)](_0x2243c8(0xbc5));if(_0x2e7f5e)_0x2e7f5e[_0x2243c8(0x702)]();_0xa7652b['conversationHistory']&&_0xa7652b[_0x2243c8(0xdc0)]['forEach']((_0x27da6b,_0x527d48)=>{const _0x27afea=_0x2243c8;if(!_0x27da6b['isOffline']||_0x27da6b[_0x27afea(0xab8)]===_0x27afea(0xaae))return;const _0x461c8a=_0x27da6b[_0x27afea(0xb17)][_0x27afea(0x833)](/\n/g,_0x27afea(0x435)),_0x17931f=_0x2e35cc(_0xa7652b[_0x27afea(0xd5b)]);let _0x40d7a9='',_0x115d7b='',_0x2b1b11='';if(_0x27da6b['role']===_0x27afea(0xea1))_0x40d7a9=_0x17931f[_0x27afea(0xe79)]||'我',_0x115d7b='speaker-user';else{if(_0x27da6b[_0x27afea(0xab8)]===_0x27afea(0x815)){const _0x298eda=_0x1238ea(_0x27da6b['senderId']||_0xa7652b[_0x27afea(0xbfa)]);_0x40d7a9=_0x298eda?.[_0x27afea(0xe79)]||'角色',_0x115d7b=_0x27afea(0x7a8);}}if(_0x40d7a9){if(_0x27afea(0xb3f)==='egTbr')_0x2b1b11=_0x27afea(0x4eb)+_0x115d7b+_0x27afea(0xb5a)+_0x527d48+_0x27afea(0xba2)+_0x40d7a9+_0x27afea(0xaca)+_0x461c8a+_0x27afea(0x770);else{if(_0x2597b2)_0x24092d(_0xc08e99);}}else _0x2b1b11='<p\x20class=\x22narrator\x22\x20data-history-index=\x22'+_0x527d48+'\x22>'+_0x461c8a+_0x27afea(0x45a);_0x14ceae[_0x27afea(0x6f0)]+=_0x2b1b11;});if(_0xa7652b[_0x2243c8(0x89f)]){let _0x4aa87e=_0x14ceae[_0x2243c8(0x373)](_0x2243c8(0x821));!_0x4aa87e&&(_0x4aa87e=document[_0x2243c8(0x7a9)]('p'),_0x4aa87e[_0x2243c8(0xd04)]=_0x2243c8(0xc83),_0x4aa87e['textContent']=_0x2243c8(0x3ff),_0x14ceae['appendChild'](_0x4aa87e));}const _0x47b4df=document[_0x2243c8(0x7a9)](_0x2243c8(0x527));_0x47b4df['id']=_0x2243c8(0x505),_0x14ceae[_0x2243c8(0xced)](_0x47b4df),setTimeout(()=>{const _0x442df3=_0x2243c8;if(_0x442df3(0xd1c)!==_0x442df3(0x96))_0x47b4df['scrollIntoView']({'behavior':'auto','block':'end'});else{const _0x21cbd0=_0x3e499a[_0x442df3(0xb42)]?_0x3b04b8(_0x4b20ae[_0x442df3(0xb42)]):null;return _0x21cbd0?.['name']||'Unknown';}},0x32);}else{_0x86feb6[_0x2243c8(0x591)]('updateProfileQuick:\x20没有提供角色ID，跳过档案更新');return;}}function _0x42b406(){const _0x612c2f=_0x57ab4d,_0x477cef=document[_0x612c2f(0x373)](_0x612c2f(0xc0f));if(!_0x477cef)return;_0x477cef['id']==='meeting-view-screen'?_0x612c2f(0x98a)===_0x612c2f(0x98a)?_0x71e0ad():_0xff4f8a[_0x612c2f(0xc49)]('images/'+_0x42ff81['id'],_0x8ecc26['blob']):_0x1f1d12();}function _0x1f1d12(){const _0x418727=_0x57ab4d;if(_0x418727(0xb49)==='mLiYx')_0x1dd0f1[_0x418727(0x706)]=_0x5a99fc[_0x418727(0xc18)](_0x379ac2),_0x317959['style'][_0x418727(0x1df)]=_0x418727(0x2a3),_0x5f41ea['style'][_0x418727(0x9b4)]='none',_0x55a0d6[_0x418727(0x3e4)][_0x418727(0x391)]=_0x418727(0xad5);else{const _0xeef43e=_0xa7652b[_0x418727(0xdc0)]['filter'](_0x475b87=>!_0x475b87[_0x418727(0xaba)]&&_0x475b87[_0x418727(0xab8)]!==_0x418727(0xaae)),_0xb2b3b=_0x37b09b[_0x418727(0x373)](_0x418727(0xbc5));if(_0xb2b3b)_0xb2b3b[_0x418727(0x702)]();if(_0xeef43e['length']>_0xa7652b[_0x418727(0x696)]){if('oerBa'!=='oerBa'){_0x4a1c41=_0x326b3d(_0xe9b513);if(!_0x4d7698)throw new _0x415e93(_0x418727(0xe5d));_0x585581[_0x418727(0x6e4)]('兼容模式成功，已将\x20'+_0x2079e2['id']+_0x418727(0x414));}else{let _0x5ee706=_0x37b09b['querySelector'](_0x418727(0x3b6));if(!_0x5ee706){if('HbaqF'!==_0x418727(0x555))_0x5ee706=document[_0x418727(0x7a9)](_0x418727(0x849)),_0x5ee706[_0x418727(0x226)]=_0x418727(0x60b),_0x5ee706[_0x418727(0xd04)]='form-button\x20load-more-btn',_0x5ee706['style'][_0x418727(0xc5d)]=_0x418727(0x524),_0x5ee706[_0x418727(0x3e4)]['margin']=_0x418727(0x4db),_0x5ee706['style'][_0x418727(0x1e1)]=_0x418727(0xce9),_0x5ee706[_0x418727(0x4e9)]=()=>{const _0x4e1c25=_0x418727;if(_0x4e1c25(0x9fe)===_0x4e1c25(0x7f9)){const _0x55d59d=_0x1817c4(_0x1d310a['participantIds'][0x0]);_0x4df969[_0x4e1c25(0x226)]=_0x55d59d?_0x55d59d['name']:_0x4e1c25(0x4ad);}else{const _0x368d01=_0x37b09b,_0x3f990f=_0x368d01[_0x4e1c25(0x251)],_0x16824f=_0x368d01[_0x4e1c25(0xc55)];_0xa7652b[_0x4e1c25(0x696)]+=0x32,_0x1f1d12(),requestAnimationFrame(()=>{const _0x26faae=_0x4e1c25;if(_0x26faae(0x26b)!==_0x26faae(0xa97)){const _0x2d11c5=_0x368d01[_0x26faae(0x251)];_0x368d01[_0x26faae(0xc55)]=_0x16824f+(_0x2d11c5-_0x3f990f);}else{_0x5b5b4a(_0x26faae(0x46d));return;}});}},_0x37b09b[_0x418727(0x32a)]?_0x37b09b[_0x418727(0x546)](_0x5ee706,_0x37b09b[_0x418727(0x32a)]):_0x37b09b[_0x418727(0xced)](_0x5ee706);else{const _0x52ae34=_0x1b7bcc[_0x418727(0x473)](_0x418727(0x2cc));_0x52ae34['innerHTML']='';if(_0xec4cc3[_0x418727(0x175)]['length']===0x0){_0x52ae34[_0x418727(0x6f0)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>还没有好友圈，点击右上角“+”创建第一个吧。</p>';return;}_0x4754d4[_0x418727(0x175)]['forEach'](_0x420f1a=>{const _0x5e4aea=_0x418727,_0x2a2ff8=_0x3be101[_0x5e4aea(0x932)][_0x5e4aea(0x394)](_0x1faf6b=>_0x1faf6b['id']===_0x420f1a['boundUserProfileId'])||{'name':'未知用户'},_0x323638=_0x504cb9[_0x5e4aea(0x7a9)](_0x5e4aea(0x527));_0x323638['className']=_0x5e4aea(0x522),_0x323638[_0x5e4aea(0x9c6)]['id']=_0x420f1a['id'],_0x323638[_0x5e4aea(0x6f0)]=_0x5e4aea(0xb38)+_0x420f1a[_0x5e4aea(0xe79)]+_0x5e4aea(0xb13)+_0x2a2ff8[_0x5e4aea(0xe79)]+_0x5e4aea(0x5e2)+_0x420f1a[_0x5e4aea(0x84a)]['length']+'\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x323638[_0x5e4aea(0xc04)]('click',()=>_0x4c9f29(_0x420f1a['id'])),_0x52ae34[_0x5e4aea(0xced)](_0x323638);});}}}}else{if(_0x418727(0x69e)!=='DcXsE')_0x246521[_0x418727(0x3e4)]['opacity']='1';else{const _0x44beed=_0x37b09b[_0x418727(0x373)](_0x418727(0x3b6));if(_0x44beed)_0x44beed['remove']();}}Array[_0x418727(0x90a)](_0x37b09b[_0x418727(0x964)])['forEach'](_0xc86ffb=>{const _0x24cc39=_0x418727;'GaYop'!=='cFWVP'?!_0xc86ffb[_0x24cc39(0x970)][_0x24cc39(0x85f)](_0x24cc39(0x749))&&_0xc86ffb[_0x24cc39(0x702)]():(_0x32d61f={'characterId':_0x1c982a,'entries':[]},_0x1c77af[_0x24cc39(0x65b)][_0x24cc39(0x214)](_0x494c07));});const _0x3979bb=_0xeef43e[_0x418727(0x1de)](-_0xa7652b[_0x418727(0x696)]);_0x3979bb[_0x418727(0x1dc)](_0x1fe8d4=>{const _0x39cc09=_0x418727,_0x5561c1=_0xa7652b['conversationHistory'][_0x39cc09(0x740)](_0x1fe8d4);_0x5561c1>-0x1&&_0xbe0f59(_0x1fe8d4,_0x5561c1);});if(_0xa7652b[_0x418727(0x89f)]){if(_0x418727(0x7c8)!==_0x418727(0x7c8))_0x538fc5[_0x418727(0xdeb)]=![],_0x5906c4[_0x418727(0x226)]='获取';else{let _0x25ed27=document[_0x418727(0x373)](_0x418727(0x4cd));if(!_0x25ed27){_0x25ed27=document['createElement']('div'),_0x25ed27[_0x418727(0xd04)]=_0x418727(0x912);const _0x189589=_0x41c782();_0x25ed27[_0x418727(0x226)]=_0x189589&&_0x189589[_0x418727(0x45c)]==='group'?_0x418727(0x528):'对方正在输入...',document[_0x418727(0x473)](_0x418727(0x326))[_0x418727(0xced)](_0x25ed27);}}}const _0x25ee26=document[_0x418727(0x7a9)](_0x418727(0x527));_0x25ee26['id']='message-anchor',_0x37b09b[_0x418727(0xced)](_0x25ee26),setTimeout(()=>{const _0x4b21ed=_0x418727;if('queSL'===_0x4b21ed(0x199)){const _0x453b61=_0x3f03f0(_0x2441f7[_0x4b21ed(0x9ed)]);_0x453b61&&(delete _0x453b61[_0x4b21ed(0x682)],_0xf91d09(),_0x4de534(_0x453b61['id'],_0x4b21ed(0x177)),_0x5a9d89(_0x4b21ed(0x5df)),_0x3087e0(!![]));}else _0x25ee26['scrollIntoView']({'behavior':_0x4b21ed(0x524),'block':'end'});},0x32);}}function _0xbe0f59(_0x1b9cfb,_0x25d358){const _0x43940f=_0x57ab4d,{role:_0x184218,content:_0x325265,displayUrl:_0x36b20e,image:_0x482849,senderId:_0xf6788c}=_0x1b9cfb,_0x1e3db9=document[_0x43940f(0x473)](_0x43940f(0xd81)),_0xe75e91=_0x325265&&_0x325265[_0x43940f(0x8eb)]()[_0x43940f(0x324)](_0x43940f(0x3c2))&&_0x325265[_0x43940f(0x8eb)]()[_0x43940f(0x6ec)](_0x43940f(0x28d));if(_0xe75e91){if(_0x43940f(0xdef)!=='pKlHD'){const _0x4e274c=_0x4689f2[_0x43940f(0x7a9)]('li');_0x4e274c['className']='character-item',_0x4e274c[_0x43940f(0x9c6)][_0x43940f(0xa48)]=_0x1e0ba9['id'],_0x4e274c[_0x43940f(0x6f0)]=_0x43940f(0xb4f)+(_0x9e38ff['avatar']||_0x438abd)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x1a8b83[_0x43940f(0xe79)]+_0x43940f(0x336),_0x4e274c[_0x43940f(0xc04)]('click',()=>{_0x286d31(_0x432af5['id']);}),_0x5d19ef[_0x43940f(0xced)](_0x4e274c);}else{const _0x3f86da=document['createElement'](_0x43940f(0x527));return _0x3f86da['className']='full-width-module-container',_0x3f86da[_0x43940f(0x9c6)][_0x43940f(0x9a3)]=_0x25d358,_0x3f86da[_0x43940f(0x6f0)]=_0x325265,_0x1e3db9[_0x43940f(0xced)](_0x3f86da),_0x3f86da;}}const _0x4071ec=_0x184218==='assistant'?'ai':_0x184218,_0x26bbc4=_0x41c782(),_0x4158cd=document[_0x43940f(0x7a9)]('div');_0x4158cd[_0x43940f(0x970)]['add'](_0x43940f(0xc8d),_0x4071ec),_0x4158cd[_0x43940f(0x9c6)][_0x43940f(0x9a3)]=_0x25d358;const _0x4f34cb=document[_0x43940f(0x7a9)](_0x43940f(0x527));_0x4f34cb[_0x43940f(0xd04)]=_0x43940f(0x132);let _0x351b16='',_0x119e28='',_0x1ca457=null;if(_0x184218===_0x43940f(0xea1)){if(_0x43940f(0xdba)!==_0x43940f(0x4b8)){const _0x5b96eb=_0x2e35cc(_0xa7652b[_0x43940f(0xd5b)]);_0x351b16=_0x5b96eb[_0x43940f(0x98f)]||_0x395f0f;const _0xeeceb9=_0x1238ea(_0x26bbc4?.[_0x43940f(0x584)][0x0]);_0xeeceb9&&(_0x119e28=_0xeeceb9[_0x43940f(0x210)]||'');}else{_0x284c03(_0x43940f(0x447),_0x43940f(0x7b6));const _0x589eb1=_0x22000f[_0x43940f(0x473)](_0x43940f(0x5e0));_0x589eb1['innerHTML']='',_0x48c536[_0x43940f(0x22a)]['forEach'](_0x38b062=>{const _0x51adb9=_0x43940f,_0x3bcc17=_0x39a778['createElement']('option');_0x3bcc17[_0x51adb9(0x2d4)]=_0x38b062['id'],_0x3bcc17[_0x51adb9(0x226)]=_0x38b062[_0x51adb9(0xe79)],_0x589eb1[_0x51adb9(0xced)](_0x3bcc17);});if(_0x184298){const _0x5091e2=_0x5b0c9d[_0x43940f(0x52d)][_0x43940f(0x394)](_0x143fd0=>_0x143fd0['id']===_0x1081b3);if(!_0x5091e2)return;_0x49553f[_0x43940f(0x473)](_0x43940f(0xdc6))['value']=_0x5091e2['id'],_0x3d3911['getElementById']('world-book-editor-title')[_0x43940f(0x226)]=_0x43940f(0xa21),_0x1d09e2[_0x43940f(0x473)](_0x43940f(0x599))[_0x43940f(0x2d4)]=_0x5091e2[_0x43940f(0xe79)],_0x1ae9a2[_0x43940f(0x473)](_0x43940f(0xe6c))[_0x43940f(0x2d4)]=_0x5091e2[_0x43940f(0xb17)],_0x589eb1[_0x43940f(0x2d4)]=_0x5091e2['categoryId']||_0x43940f(0x46b);}else _0x1ae61a[_0x43940f(0x473)](_0x43940f(0xdc6))[_0x43940f(0x2d4)]='',_0x32a2e8['getElementById'](_0x43940f(0x3cd))[_0x43940f(0x226)]=_0x43940f(0xac5),_0x5e7645[_0x43940f(0x473)]('world-book-edit-name')[_0x43940f(0x2d4)]='',_0x267906[_0x43940f(0x473)](_0x43940f(0xe6c))['value']='',_0x589eb1[_0x43940f(0x2d4)]=_0x4e21a1['activeWorldBookCategoryId'];}}else{if(_0x26bbc4?.[_0x43940f(0x45c)]===_0x43940f(0x722))'NPBih'===_0x43940f(0x7ce)?_0x1ca457=_0x1238ea(_0x26bbc4[_0x43940f(0x584)][0x0]):_0x6cce59[_0x43940f(0x214)](_0x43940f(0x33c)+_0x43db53+_0x43940f(0x8da));else{if(_0x26bbc4?.[_0x43940f(0x45c)]==='group'&&_0xf6788c){if(_0x43940f(0x11f)===_0x43940f(0x1f7)){const _0x5a99dd=_0x5de2e4['parse'](_0x5ac37c[_0x43940f(0xb34)](_0x43940f(0xb19))||'{}'),_0x16170a={..._0x5a99dd,..._0x312103};_0x42f25f[_0x43940f(0x29d)]('badgeState',_0x148144['stringify'](_0x16170a));}else _0x1ca457=_0x1238ea(_0xf6788c);}}_0x351b16=_0x1ca457?.[_0x43940f(0x98f)]||_0x96c08e,_0x119e28=_0x1ca457?.[_0x43940f(0xa0b)]||'';}const _0x4f5e37=_0x49ca4a(_0x351b16,_0x119e28);if(_0x184218!==_0x43940f(0xea1)&&_0x1ca457){const _0x38a52e=_0x4f5e37['querySelector']('.avatar');_0xf3eefa(_0x43940f(0x6ea)+_0x1ca457['id'])['then'](_0x556381=>{const _0x3d71aa=_0x43940f;if(_0x3d71aa(0x9be)!==_0x3d71aa(0x9be)){const _0x2bcd8f=_0x238550[_0x3d71aa(0x45c)]===_0x3d71aa(0x995)?_0x3d71aa(0x5f4):'待办';return _0x3d71aa(0x375)+_0x2bcd8f+']\x20'+_0x4f48f2[_0x3d71aa(0x382)]+':\x20'+_0x5d0d65[_0x3d71aa(0xb17)];}else _0x556381&&(_0x38a52e[_0x3d71aa(0x706)]=URL[_0x3d71aa(0xc18)](_0x556381));});}const _0x500f91=document[_0x43940f(0x7a9)](_0x43940f(0x527));_0x500f91[_0x43940f(0x970)][_0x43940f(0xddb)](_0x43940f(0xe32),_0x4071ec);if(_0x26bbc4?.['type']===_0x43940f(0x722)){if(_0x43940f(0xe09)==='puRap')_0x513606[_0x43940f(0x3e4)][_0x43940f(0x3b7)]=_0x43940f(0x4c1),_0x422cd0['style'][_0x43940f(0x5cf)]='0',_0x27c018(()=>_0x3db643[_0x43940f(0x702)](),0x7d0);else{const _0x5c4a9f=_0x26bbc4[_0x43940f(0x584)][0x0];_0x500f91[_0x43940f(0x970)][_0x43940f(0xddb)](_0x43940f(0xe8b)+_0x5c4a9f);}}if(_0x1b9cfb[_0x43940f(0x115)]){const _0x158d27=document[_0x43940f(0x7a9)](_0x43940f(0x527));_0x158d27[_0x43940f(0xd04)]='quoted-message-in-bubble',_0x158d27[_0x43940f(0x6f0)]=_0x43940f(0x6e2)+_0x1b9cfb['quotedMessage'][_0x43940f(0x39d)]+_0x43940f(0xe85)+_0x1b9cfb[_0x43940f(0x115)][_0x43940f(0xb17)]+_0x43940f(0x661),_0x500f91[_0x43940f(0xced)](_0x158d27);}if(_0x36b20e)_0x500f91[_0x43940f(0x970)][_0x43940f(0xddb)](_0x43940f(0x83a)),_0x500f91['innerHTML']+=_0x43940f(0xaf9)+_0x36b20e+'\x22\x20class=\x22sticker-content\x22>';else{if(_0x1b9cfb[_0x43940f(0x72d)]||_0x1b9cfb['imageId']){if('UzGTB'!==_0x43940f(0xdc8)){_0x500f91['classList'][_0x43940f(0xddb)](_0x43940f(0x72d));const _0x3ca1ac=document['createElement'](_0x43940f(0x222));_0x3ca1ac[_0x43940f(0x970)][_0x43940f(0xddb)]('message-image-content'),_0x500f91[_0x43940f(0xced)](_0x3ca1ac);if(_0x1b9cfb['image']){if(_0x43940f(0x3ce)!==_0x43940f(0x3ce)){const _0x38af52=_0x31e616[_0x43940f(0x277)][_0x43940f(0x17f)](_0x28b34d=>_0x5060bc[_0x43940f(0x52d)][_0x43940f(0x394)](_0x3a94e0=>_0x3a94e0['id']===_0x28b34d))[_0x43940f(0x1a9)](_0x12c5f2)[_0x43940f(0x17f)](_0xa3f3f3=>_0x43940f(0x2be)+_0xa3f3f3[_0x43940f(0xe79)]+'\x0a'+_0xa3f3f3['content'])[_0x43940f(0x332)]('');_0x38af52&&(_0x1f147b=_0x43940f(0x610)+_0x38af52);}else _0x3ca1ac[_0x43940f(0x706)]=_0x1b9cfb[_0x43940f(0x72d)];}else _0x3ca1ac[_0x43940f(0x706)]=_0x43940f(0xd53),_0xf3eefa(_0x1b9cfb[_0x43940f(0x70f)])[_0x43940f(0xcae)](_0x138358=>{const _0x24fad6=_0x43940f;if(_0x138358)_0x3ca1ac[_0x24fad6(0x706)]=URL[_0x24fad6(0xc18)](_0x138358);else _0x3ca1ac[_0x24fad6(0x658)]=_0x24fad6(0x1bb);})[_0x43940f(0xbb7)](()=>_0x3ca1ac['alt']=_0x43940f(0x1bb));_0x325265&&(_0x500f91['innerHTML']+=_0x43940f(0x53d)+_0x325265+_0x43940f(0x45a));}else _0x51c62f[_0x43940f(0xc95)]('保存徽章状态失败',_0x5bbd8a);}else{if(_0x1b9cfb[_0x43940f(0x45c)]===_0x43940f(0x99f)){if('QpbyK'==='ZBqYY')_0x66c2ea(![]);else{_0x500f91[_0x43940f(0x970)][_0x43940f(0xddb)](_0x43940f(0x99f));const _0x4407b3=_0x1b9cfb['role']==='user'?_0x2e35cc(_0xa7652b[_0x43940f(0xd5b)]):_0x1238ea(_0x1b9cfb[_0x43940f(0xb42)]),_0x484cd4=_0x1b9cfb[_0x43940f(0x827)]===_0x2e35cc(_0xa7652b[_0x43940f(0xd5b)])['id']?_0x2e35cc(_0xa7652b[_0x43940f(0xd5b)]):_0x1238ea(_0x1b9cfb['recipientId']),_0x4b766c=_0x4407b3?.['name']?_0x4407b3[_0x43940f(0xe79)]+'的转账':'转账',_0x3b9741=_0x484cd4?.[_0x43940f(0xe79)]?_0x43940f(0x4bd)+_0x484cd4['name']:'转账';_0x500f91[_0x43940f(0x6f0)]+=_0x43940f(0xc92)+_0x4b766c+_0x43940f(0x782)+_0x1b9cfb['amount'][_0x43940f(0x684)](0x2)+_0x43940f(0x92)+_0x3b9741+'</div>\x0a\x20\x20\x20\x20\x20\x20</div>';}}else{if(_0x1b9cfb[_0x43940f(0x45c)]===_0x43940f(0xc5a)){if(_0x43940f(0x4b1)!=='VKGUW')_0x4ec2cc['conversationHistory']=[];else{_0x500f91[_0x43940f(0x970)][_0x43940f(0xddb)](_0x43940f(0x784));const _0x299e4c=document[_0x43940f(0x7a9)](_0x43940f(0x527));_0x299e4c['className']=_0x43940f(0x4ca);const _0x244308=_0x1b9cfb[_0x43940f(0xab8)]==='user'?_0x2e35cc(_0xa7652b[_0x43940f(0xd5b)])[_0x43940f(0xe79)]||'你':_0x1238ea(_0x1b9cfb[_0x43940f(0xb42)])?.[_0x43940f(0xe79)]||'TA',_0x513253=_0x43940f(0xb30)+_0x1b9cfb[_0x43940f(0xb9f)],_0x28e9c4=_0x43940f(0x4c7)+_0x513253+_0x43940f(0xbdb)+_0x96c08e+'\x22>';_0x1b9cfb[_0x43940f(0x6c4)]?_0x299e4c['innerHTML']='<div\x20class=\x22listen-together-header\x22\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22><span\x20style=\x22flex-grow:\x201;\x20text-align:\x20center;\x22>🎵\x20已连接，正在一起听\x20🎵</span><span\x20class=\x22lt-end-session-btn\x22\x20title=\x22结束一起听\x22>×</span></div><div\x20class=\x22listen-together-song\x22>'+_0x28e9c4+_0x43940f(0x99)+_0x1b9cfb['songName']+_0x43940f(0x57b)+_0x1b9cfb['artist']+_0x43940f(0xc9):_0x299e4c[_0x43940f(0x6f0)]=_0x43940f(0xaef)+_0x244308+_0x43940f(0x5d9)+_0x28e9c4+_0x43940f(0x99)+_0x1b9cfb[_0x43940f(0xb6d)]+_0x43940f(0x57b)+_0x1b9cfb[_0x43940f(0x6e3)]+_0x43940f(0xe72)+_0x1b9cfb[_0x43940f(0xd59)]+_0x43940f(0x37e),_0x500f91['appendChild'](_0x299e4c),_0x1b9cfb['coverId']&&(_0x43940f(0x844)===_0x43940f(0x844)?setTimeout(()=>{const _0xd2b7e0=_0x43940f;if('fEhvO'!==_0xd2b7e0(0x20b))_0xf3eefa(_0x1b9cfb[_0xd2b7e0(0x4f9)])[_0xd2b7e0(0xcae)](_0x297d8a=>{const _0x1e35c1=_0xd2b7e0,_0x3ed528=document[_0x1e35c1(0x473)](_0x513253);if(_0x3ed528&&_0x297d8a)_0x3ed528[_0x1e35c1(0x706)]=URL['createObjectURL'](_0x297d8a);});else{const _0x5964d2=_0x56e76e(_0x1c4cd3[_0xd2b7e0(0xa2)][_0xd2b7e0(0xa48)]);_0x5964d2&&(_0x52db9f=_0xd2b7e0(0xcad)+_0x5964d2[_0xd2b7e0(0x98f)]+_0xd2b7e0(0x65f)+_0x5964d2[_0xd2b7e0(0xe79)]+_0xd2b7e0(0xa0)+_0x5bb26c['review'][_0xd2b7e0(0x51c)]+'</div></div></div>');}},0x0):_0x3e636c[_0x43940f(0xc95)](_0x43940f(0x157)+_0x11b397[_0x43940f(0xe79)]+_0x43940f(0x15e),_0x237e5e));}}else{if(_0x1b9cfb[_0x43940f(0x45c)]==='music'&&_0x1b9cfb[_0x43940f(0xb6d)]){if(_0x43940f(0x3b4)!==_0x43940f(0x972)){_0x500f91['classList']['add'](_0x43940f(0x784));const _0x26ac57=document['createElement'](_0x43940f(0x527));_0x26ac57[_0x43940f(0xd04)]=_0x43940f(0x69a),_0x26ac57['dataset'][_0x43940f(0x6ef)]='msg_'+_0x1b9cfb['timestamp'];const _0x553cfa=_0x43940f(0xb30)+_0x1b9cfb[_0x43940f(0xb9f)];let _0x249788='<img\x20src=\x22'+_0x96c08e+_0x43940f(0xba1)+_0x553cfa+'\x22\x20class=\x22music-share-cover\x22>';_0x26ac57['innerHTML']=_0x43940f(0x6f3)+_0x249788+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-share-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>'+_0x1b9cfb[_0x43940f(0xb6d)]+_0x43940f(0xe90)+_0x1b9cfb['artist']+_0x43940f(0xe86)+(_0x1b9cfb['playableUrl']?'▶':'⚠')+_0x43940f(0x28d),_0x500f91[_0x43940f(0xced)](_0x26ac57),setTimeout(()=>{const _0x175d87=_0x43940f;if('XDQeM'!==_0x175d87(0x6df))_0xb2611e(_0x42bffa['id']);else{const _0xab29bc=document[_0x175d87(0x473)](_0x553cfa);if(!_0xab29bc)return;if(_0x1b9cfb['coverId'])_0xf3eefa(_0x1b9cfb[_0x175d87(0x4f9)])[_0x175d87(0xcae)](_0x382c4a=>{const _0x9b9880=_0x175d87;if(_0x382c4a)_0xab29bc[_0x9b9880(0x706)]=URL[_0x9b9880(0xc18)](_0x382c4a);});else _0x1b9cfb[_0x175d87(0x4f6)]&&(_0xab29bc[_0x175d87(0x706)]=_0x1b9cfb['coverUrl']);}},0x0),_0x1b9cfb[_0x43940f(0x5c4)]&&_0x26ac57[_0x43940f(0xc04)](_0x43940f(0x493),function(){const _0x5bfe2c=_0x43940f,_0x57167e=document['getElementById'](_0x5bfe2c(0x8f7)),_0x102965=document['querySelectorAll'](_0x5bfe2c(0xa9f)),_0x1237dc=this[_0x5bfe2c(0x373)](_0x5bfe2c(0x385)),_0x50925d=_0x57167e[_0x5bfe2c(0x706)][_0x5bfe2c(0x5c0)](_0x1b9cfb[_0x5bfe2c(0x5c4)])&&!_0x57167e[_0x5bfe2c(0xae2)];_0x102965[_0x5bfe2c(0x1dc)](_0x378660=>{const _0x2bc6fe=_0x5bfe2c;_0x378660!==_0x1237dc&&(_0x378660[_0x2bc6fe(0x226)]='▶');}),!_0x50925d&&document['getElementById'](_0x5bfe2c(0x40e))['pause'](),_0x50925d?_0x5bfe2c(0x83c)!==_0x5bfe2c(0x83c)?_0x567e06[_0x5bfe2c(0x214)](_0x51952f):(_0x57167e['pause'](),_0x1237dc['textContent']='▶'):(_0x57167e['src']=_0x1b9cfb[_0x5bfe2c(0x5c4)],_0x57167e['play'](),_0x1237dc['textContent']='❚❚');});}else _0x129343['error'](_0x43940f(0x2b8),_0x2cb63d[_0x43940f(0x63c)][_0x43940f(0xc95)]),_0x581fc2(_0xef5faa['target']['error']);}else{if(_0x325265){if(_0x43940f(0x869)===_0x43940f(0x935)){const _0x52b7ba=_0x4f2329(_0x47230d[_0x43940f(0xbfa)]);if(!_0x52b7ba)return;const _0x4fbd80=_0x1b956c(_0xf876b5[_0x43940f(0x473)](_0x43940f(0x2ab))[_0x43940f(0x2d4)]),_0x582436=_0x29a109(_0x500831[_0x43940f(0x473)]('sprite-slider-y')[_0x43940f(0x2d4)]),_0x1753eb=_0x28597f(_0x1da827[_0x43940f(0x473)](_0x43940f(0x636))['value'])/0x64;_0x52b7ba[_0x43940f(0x5ad)]={'x':_0x4fbd80,'y':_0x582436,'scale':_0x1753eb},_0x1e2712(),_0x22519b(_0x43940f(0x59a)),_0xf57379(!![]);}else{const _0x288e13=document[_0x43940f(0x7a9)]('p');_0x288e13[_0x43940f(0x6f0)]=_0x325265,_0x288e13[_0x43940f(0x3e4)][_0x43940f(0xc08)]='0',_0x500f91[_0x43940f(0xced)](_0x288e13);}}}}}}}_0x4071ec===_0x43940f(0xea1)?(_0x4f34cb['appendChild'](_0x500f91),_0x4f34cb[_0x43940f(0xced)](_0x4f5e37)):'GZoMO'!==_0x43940f(0x999)?(_0x4f34cb[_0x43940f(0xced)](_0x4f5e37),_0x4f34cb[_0x43940f(0xced)](_0x500f91)):_0x315375[_0x43940f(0xdd0)]?_0x17b56b():_0x3dda83();_0x4158cd[_0x43940f(0xced)](_0x4f34cb);const _0x551ecc=document[_0x43940f(0x7a9)]('div');return _0x551ecc[_0x43940f(0xd04)]=_0x43940f(0xb9f),_0x551ecc['textContent']=_0x54c76a(_0x1b9cfb[_0x43940f(0xb9f)]),_0x4158cd[_0x43940f(0xced)](_0x551ecc),_0x1e3db9[_0x43940f(0xced)](_0x4158cd),_0x4158cd;}let _0x46e79d=null;function _0x192674(_0x13c99a){const _0x2f0459=_0x57ab4d;if('KDRTA'!==_0x2f0459(0x390))_0x23380e=_0x11a2c4[_0x2f0459(0xe79)]||'我',_0x295e50=_0x2f0459(0xd34);else{if(window[_0x2f0459(0x6d7)]()['toString']()||_0x13c99a['button']!==0x0){if(_0x2f0459(0xdd3)!=='SRaCi')return;else _0x4f313e(_0x592fea[_0x2f0459(0x584)][0x0]);}const _0x108d51=_0x13c99a[_0x2f0459(0x63c)][_0x2f0459(0x4a0)](_0x2f0459(0xe6a)),_0x1d8e02=_0x13c99a[_0x2f0459(0x63c)][_0x2f0459(0x4a0)](_0x2f0459(0x8e0));if(!_0x108d51||_0x1d8e02)return;const _0x26147c=parseInt(_0x108d51[_0x2f0459(0x9c6)][_0x2f0459(0x9a3)],0xa);if(isNaN(_0x26147c))return;const _0x354c09=()=>{const _0x1f8656=_0x2f0459;_0x1f8656(0xf9)==='scaaD'?(clearTimeout(_0x46e79d),document[_0x1f8656(0x50e)](_0x1f8656(0x241),_0x354c09),document[_0x1f8656(0x50e)](_0x1f8656(0xcf0),_0x354c09),document[_0x1f8656(0x50e)](_0x1f8656(0x1d3),_0x354c09),document[_0x1f8656(0x50e)](_0x1f8656(0x36a),_0x354c09)):_0x436c44[_0x1f8656(0x21b)]({'behavior':_0x1f8656(0x524),'block':_0x1f8656(0xaaa)});},_0x23a0a7=()=>{const _0x2a83bc=_0x2f0459;'dAwSr'!==_0x2a83bc(0x5b7)?(_0x354c09(),_0x46e79d=setTimeout(()=>{const _0x240a9b=_0x2a83bc;if(_0x240a9b(0xe87)!==_0x240a9b(0xe87)){_0x2ed2be=_0x209404['createElement'](_0x240a9b(0x527)),_0x4867d5[_0x240a9b(0xd04)]=_0x240a9b(0x912);const _0x11a047=_0x3fc92a();_0x369608['textContent']=_0x11a047&&_0x11a047['type']===_0x240a9b(0x4b5)?'群友正在输入...':_0x240a9b(0xa4b),_0x385fda[_0x240a9b(0x473)](_0x240a9b(0x326))[_0x240a9b(0xced)](_0x3d0d40);}else _0x282605(_0x26147c);},0x258),document['addEventListener']('mouseup',_0x354c09),document['addEventListener']('touchend',_0x354c09),document[_0x2a83bc(0xc04)]('touchcancel',_0x354c09),document['addEventListener'](_0x2a83bc(0x36a),_0x354c09)):_0x4dcf05[_0x2a83bc(0x214)](_0x2a83bc(0x6a9)+_0x30684f[_0x2a83bc(0x38c)][_0x2a83bc(0x631)]);};_0x23a0a7();}}const _0xc8892d=document[_0x57ab4d(0x473)](_0x57ab4d(0xd81));_0xc8892d&&(_0xc8892d[_0x57ab4d(0xc04)]('mousedown',_0x192674),_0xc8892d[_0x57ab4d(0xc04)](_0x57ab4d(0x69c),_0x192674,{'passive':![]}),_0xc8892d[_0x57ab4d(0xc04)](_0x57ab4d(0x1d0),_0x7dfa8f=>_0x7dfa8f[_0x57ab4d(0xd27)]()));function _0x5296c9(){const _0x49a9c0=_0x57ab4d;if(_0x49a9c0(0xe40)!==_0x49a9c0(0xa63)){const _0x240848=_0x41c782();if(!_0x240848){_0x1d26fc[_0x49a9c0(0x226)]=_0x49a9c0(0x961);return;}if(_0x240848[_0x49a9c0(0x45c)]===_0x49a9c0(0x722)){const _0x28a8b3=_0x1238ea(_0x240848['participantIds'][0x0]);_0x1d26fc['textContent']=_0x28a8b3?_0x28a8b3['name']:_0x49a9c0(0x4ad);}else _0x1d26fc['textContent']=_0x240848['name']||_0x49a9c0(0x34c)+_0x240848['participantIds'][_0x49a9c0(0x893)]+')';}else _0x27a585(![]),_0xe180a1[_0x49a9c0(0x63c)][_0x49a9c0(0x2d4)]='';}function _0x58e0d1(_0x333644){const _0x3671f3=_0x57ab4d;if(_0x3671f3(0x45b)!==_0x3671f3(0x27b)){const _0x753b6b=document['querySelector']('#chat-view-pane\x20>\x20.typing-indicator');_0x753b6b&&_0x753b6b[_0x3671f3(0x702)]();const _0x882f7b=document['querySelector'](_0x3671f3(0xc0f));if(_0x882f7b&&(_0x882f7b['id']===_0x3671f3(0x2e9)||_0x882f7b['id']==='chat-screen'))_0x42b406();else{const _0x2469b8=document[_0x3671f3(0xe54)]('.typing-indicator');_0x2469b8['forEach'](_0x3e6f2d=>_0x3e6f2d[_0x3671f3(0x702)]());}}else{const _0x355ac5={'promptTokens':_0x43fdcc[_0x3671f3(0x323)]||0x0,'completionTokens':_0x44a242[_0x3671f3(0xa6e)]||0x0,'totalTokens':_0x3a4a9e['totalTokenCount']||0x0,'timestamp':_0x1c794c[_0x3671f3(0x144)](),'chatId':_0x48fb73[_0x3671f3(0xd5b)],'model':_0x55daaa};_0xa8ed81[_0x3671f3(0xba4)][_0x3671f3(0x468)]=_0x355ac5,_0x1b6923[_0x3671f3(0xba4)][_0x3671f3(0x692)][_0x3671f3(0x214)](_0x355ac5),_0x4bb234[_0x3671f3(0xba4)][_0x3671f3(0x692)]['length']>0x64&&_0x20cd1e[_0x3671f3(0xba4)][_0x3671f3(0x692)][_0x3671f3(0xd4e)]();}}function _0x16b50b(){const _0x529a75=_0x57ab4d;_0xa7652b['isGenerating']&&_0xa7652b[_0x529a75(0x858)]&&(_0x529a75(0xc4e)!=='uQZTs'?(console[_0x529a75(0x6e4)]('用户操作中断了\x20AI\x20响应。'),typeof _0xa7652b[_0x529a75(0x858)]['abort']===_0x529a75(0x26d)?_0xa7652b[_0x529a75(0x858)][_0x529a75(0x760)](_0x529a75(0x807)):console[_0x529a75(0x591)](_0x529a75(0x457)),_0xa7652b[_0x529a75(0x858)]=null):(_0x3261de['style'][_0x529a75(0x31d)]=_0x529a75(0x7ca),_0x4f96e4[_0x529a75(0x3e4)][_0x529a75(0x5d8)]='35%',_0x262abf[_0x529a75(0x3e4)][_0x529a75(0x855)]=_0x529a75(0x71b),_0x589a01[_0x529a75(0x3e4)][_0x529a75(0x3b7)]=_0x529a75(0x547),_0x3882df[_0x529a75(0x3e4)][_0x529a75(0x1df)]='inline-block')),_0xa7652b[_0x529a75(0x89f)]=![],_0x58e0d1(![]);}function _0x41c782(){const _0x4278b7=_0x57ab4d;return _0xa7652b['chats'][_0x4278b7(0x394)](_0xc8cb9c=>_0xc8cb9c['id']===_0xa7652b[_0x4278b7(0xd5b)]);}function _0x1238ea(_0x29e633){return _0xa7652b['characters']['find'](_0xc24307=>_0xc24307['id']===_0x29e633);}function _0x159b06(_0x2da0af){const _0x5931cf=_0x57ab4d;if(_0x5931cf(0x9b3)===_0x5931cf(0x9b3)){_0xa7652b[_0x5931cf(0xbfe)]=_0xa7652b[_0x5931cf(0xbfe)][_0x5931cf(0x1a9)](_0x424375=>_0x424375['id']!==_0x2da0af),_0xa7652b['chats'][_0x5931cf(0x1dc)](_0x118e6a=>{const _0x220519=_0x5931cf;_0x118e6a[_0x220519(0x45c)]===_0x220519(0x4b5)&&('ZsPQY'!==_0x220519(0xc10)?_0x118e6a[_0x220519(0x584)]=_0x118e6a['participantIds'][_0x220519(0x1a9)](_0x2b5e00=>_0x2b5e00!==_0x2da0af):(_0x48f58a[_0x220519(0x115)]={'sender':_0x5b29a0[0x1][_0x220519(0x8eb)](),'content':_0x14342a[0x2][_0x220519(0x8eb)]()},_0x596757[_0x220519(0xb17)]=_0x1b2b96[_0x220519(0x825)](_0x308304[0x0][_0x220519(0x893)])['trim']()));});const _0x3af685=_0xa7652b['chats'][_0x5931cf(0x394)](_0x1a9ffa=>_0x1a9ffa[_0x5931cf(0x45c)]===_0x5931cf(0x722)&&_0x1a9ffa[_0x5931cf(0x584)][_0x5931cf(0x5c0)](_0x2da0af));if(_0x3af685){if(_0x5931cf(0x3e2)==='chTfD')return{'type':_0x5931cf(0x83a),'name':_0x12c2fb[0x1]['trim']()};else _0x163f84(_0x3af685['id']);}_0xa7652b[_0x5931cf(0x4ec)]=_0xa7652b[_0x5931cf(0x4ec)]['filter'](_0x320360=>_0x320360[_0x5931cf(0x45c)]!==_0x5931cf(0x4b5)||_0x320360[_0x5931cf(0x584)]['length']>0x1),_0x2e0417(),_0xa7d798();}else{if(!_0x3c5c43[_0x5931cf(0xdd0)])return;const {charId:_0x531d9c}=_0xa43483[_0x5931cf(0xdd0)],_0x215c6a=_0x3ffc6a(_0x531d9c);if(!_0x215c6a)return;const _0x2796a6=_0x4cb2a2['getElementById'](_0x5931cf(0xa56)),_0x2e3481=_0x2f6691[_0x5931cf(0x473)](_0x5931cf(0x574));_0x2e3481[_0x5931cf(0x226)]=_0x5931cf(0xa12)+_0x215c6a[_0x5931cf(0xe79)]+_0x5931cf(0x605),_0x414605[_0x5931cf(0x473)](_0x5931cf(0xe14))[_0x5931cf(0x2d4)]=_0x5931cf(0x754),_0x26edd3[_0x5931cf(0x473)](_0x5931cf(0xb40))[_0x5931cf(0x3e4)][_0x5931cf(0x1df)]=_0x5931cf(0x4a6),_0x366433[_0x5931cf(0x473)]('refinement-controls-footer')[_0x5931cf(0x3e4)][_0x5931cf(0x1df)]=_0x5931cf(0x5c9),_0x50fb11[_0x5931cf(0x473)](_0x5931cf(0x163))['style'][_0x5931cf(0x1df)]='none',_0x451208['getElementById'](_0x5931cf(0x7eb))[_0x5931cf(0x3e4)]['display']=_0x5931cf(0x4a6),_0x2796a6[_0x5931cf(0x970)][_0x5931cf(0xddb)](_0x5931cf(0x348)),_0x345756();}}function _0x163f84(_0x3409d6){const _0xe61ae5=_0x57ab4d;_0xa7652b[_0xe61ae5(0x4ec)]=_0xa7652b['chats']['filter'](_0x3b4c81=>_0x3b4c81['id']!==_0x3409d6);try{localStorage[_0xe61ae5(0x863)](_0xe61ae5(0xd62)+_0x3409d6);}catch(_0x12a5a8){if('ukLIN'==='HNOlA'){const _0x1ea789=_0x2badf4(_0x4a7a54[_0xe61ae5(0xb42)]);return _0x1ea789?.[_0xe61ae5(0xe79)]||_0xe61ae5(0x7ef);}else console[_0xe61ae5(0xc95)](_0xe61ae5(0x24e)+_0x3409d6,_0x12a5a8);}_0xa7652b[_0xe61ae5(0xd5b)]===_0x3409d6&&('ECfby'!==_0xe61ae5(0x7cd)?_0x4cf5f4+='-\x20'+_0x41cf33[_0xe61ae5(0xaf6)](_0x4585f9)+'\x20\x0a':(_0xa7652b[_0xe61ae5(0xd5b)]=_0xa7652b[_0xe61ae5(0x4ec)][0x0]?.['id']||null,_0xc494e4(_0xa7652b[_0xe61ae5(0xd5b)]))),_0x2e0417();}async function _0xc494e4(_0x42b8d1){const _0x44819e=_0x57ab4d;_0x1c928d&&(clearTimeout(_0x1c928d),_0x1c928d=null);const _0x7f6a3e=document[_0x44819e(0x473)](_0x44819e(0x42e)),_0xb90e30=document[_0x44819e(0x473)]('chat-messages'),_0x49ac5c=document[_0x44819e(0x473)](_0x44819e(0x326));_0x49ac5c&&(_0x49ac5c[_0x44819e(0x3e4)][_0x44819e(0x919)]='',_0x49ac5c['style'][_0x44819e(0x3b7)]='');_0x7f6a3e[_0x44819e(0x970)][_0x44819e(0x702)](_0x44819e(0xa8c)),_0x7f6a3e[_0x44819e(0x970)]['remove'](_0x44819e(0x58e));_0xa7652b[_0x44819e(0xd5b)]!==_0x42b8d1&&(_0x16b50b(),_0xa7652b[_0x44819e(0x696)]=0x32);if(!_0x42b8d1){if(_0x44819e(0xafa)==='rIIiV')_0x2db93d(_0x53d441['id']),_0x33dab0('群聊已解散。'),_0x56829f('chat'),_0x1ee409(![]);else{_0xa7652b[_0x44819e(0xd5b)]=null,_0x2e0417(),_0xb90e30[_0x44819e(0x6f0)]='',_0x14788b=![];return;}}_0x14788b=!![],_0xa7652b['activeChatId']=_0x42b8d1,_0x2e0417(),_0x5296c9(),_0xb90e30[_0x44819e(0x6f0)]='',_0xb90e30[_0x44819e(0x3e4)][_0x44819e(0x5cf)]='0',_0x27a15c(!![],_0x44819e(0x67b)),void _0x49ac5c['offsetWidth'],setTimeout(async()=>{const _0x485193=_0x44819e;if(_0x485193(0x9a7)!==_0x485193(0x9a7)){const _0x497134=_0x2aeecc(_0x5433d5['id']);if(!_0x497134||!_0x497134['id'])return _0x25e6ef['error'](_0x485193(0x7ae)),null;_0x7f57ee[_0x485193(0x50b)][_0x485193(0x214)]({'id':_0x485193(0x91a)+_0x94e8c3[_0x485193(0x144)](),'date':_0x3108cd[_0x485193(0x9ce)],'type':_0x2ad2b1['eventType'],'content':_0x49cb2b[_0x485193(0x159)],'userId':_0x497134['id'],'createdBy':'ai'}),_0x5d375e(),_0x296e20(),_0x179f27();const _0x408b98=_0x496f1a(_0x58de31['id']);_0x408b98&&_0x4e8353[_0x485193(0x987)]===_0x485193(0x995)&&_0x229215(_0x485193(0xcfc)+_0x408b98[_0x485193(0xe79)]+_0x485193(0x446)+_0x41ea5f['eventContent']);return{'role':'assistant','senderId':_0x306543['id'],'timestamp':_0x5de8dd['now'](),'isOffline':_0xb43be0,'content':null};return{'role':'assistant','senderId':_0x1776ae['id'],'timestamp':_0x4346a6[_0x485193(0x144)](),'isOffline':_0x398536,'content':null};}else try{if(_0x485193(0x345)===_0x485193(0x345)){_0x10895d();const _0x745b98=_0x41c782();_0x49ac5c['style'][_0x485193(0x16b)]='';if(_0x745b98){if('RqeHV'==='RqeHV'){let _0x4ff029=null;if(_0x745b98[_0x485193(0x45c)]===_0x485193(0x722)){if(_0x485193(0x7b1)!==_0x485193(0x7b1)){const _0xe34307=_0x3e5b38[_0x485193(0x41c)](/start_time:\s*"?([^"\n]+)"?/),_0x571aee=_0x331145['match'](/theme:\s*"?([^"\n]+)"?/),_0xae885d=_0xe34307?_0xe34307[0x1]:_0x485193(0xf0),_0x1dbc89=_0x1ae133[_0x485193(0x7a9)]('div');_0x1dbc89[_0x485193(0xd04)]=_0x485193(0x9c5),_0x1dbc89[_0x485193(0x6f0)]='\x0a<div\x20class=\x22replay-icon\x22\x20style=\x22font-size:\x201.5rem;\x22>\x0a\x20\x20\x20\x20<span>📼</span>\x0a</div>\x0a<div\x20class=\x22replay-info\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22theme\x22>'+(_0x571aee?_0x571aee[0x1]:_0x485193(0x47b))+_0x485193(0x7c6)+_0xae885d+_0x485193(0xa15),_0x1dbc89[_0x485193(0xc04)](_0x485193(0x493),()=>_0x327bc1(_0xa5b78c)),_0x1dbc89[_0x485193(0xc04)](_0x485193(0xc32),_0x5eac97=>{_0x5eac97['button']===0x0&&_0x51d152(_0x5eac97,_0x3c5e85,_0x19bc97);}),_0x1dbc89[_0x485193(0xc04)](_0x485193(0x69c),_0x5890d1=>_0x33f5b4(_0x5890d1,_0x210722,_0x29f2fc),{'passive':![]}),_0x1dbc89[_0x485193(0xc04)](_0x485193(0x1d0),_0x59cf01=>_0x59cf01[_0x485193(0xd27)]()),_0x1dbc89[_0x485193(0xc04)](_0x485193(0x1d0),_0xc24457=>_0xc24457[_0x485193(0xd27)]()),_0x12396f['appendChild'](_0x1dbc89);}else{const _0x20c872=_0x745b98[_0x485193(0x584)][0x0];_0xa37c80(_0x20c872),_0x4ff029=await _0xf3eefa(_0x485193(0x3c9)+_0x20c872);}}else{if(_0x485193(0x5ac)===_0x485193(0x5ac))_0x4ff029=await _0xf3eefa(_0x485193(0x478)+_0x745b98['id']);else{_0x3f5ed6=![];const _0x79a400=_0x710a02[_0x485193(0x8ff)](/:(.*)/s);_0x3a07bd=_0x79a400[0x0][_0x485193(0x8eb)]();let _0x5a0b0c=(_0x79a400[0x1]||'')[_0x485193(0x8eb)]()['replace'](/^"|"$/g,'');const _0x5777ae={'start_time':_0x485193(0x3b3),'duration':_0x485193(0xc30),'theme':_0x485193(0x489),'streamer_mood':_0x485193(0x755),'audience_mood':'观众氛围','key_events':_0x485193(0xadf),'dm_interaction_summary':'私信互动'},_0x214228=_0x1c7360[_0x485193(0x7a9)]('h4');_0x214228[_0x485193(0x226)]=_0x5777ae[_0x240761]||_0x724631,_0x214228[_0x485193(0x3e4)][_0x485193(0x96d)]='1px\x20solid\x20var(--border-color)',_0x214228['style'][_0x485193(0x3dc)]=_0x485193(0xb2c),_0x214228['style'][_0x485193(0x600)]='20px',_0x39781d['appendChild'](_0x214228);if(_0x5a0b0c){const _0x54d664=_0x42d37a[_0x485193(0x7a9)]('p');_0x54d664[_0x485193(0x226)]=_0x5a0b0c,_0x54d664[_0x485193(0x3e4)][_0x485193(0x9ca)]='1.6',_0x3239e4[_0x485193(0xced)](_0x54d664);}else{_0x49d5e=!![];const _0x147141=_0x1a0073['createElement']('ul');_0x147141[_0x485193(0x3e4)][_0x485193(0x38f)]=_0x485193(0x550),_0x72ced8[_0x485193(0xced)](_0x147141);}}}_0x4ff029&&(_0x49ac5c[_0x485193(0x3e4)][_0x485193(0x16b)]=_0x485193(0x6cb)+URL[_0x485193(0xc18)](_0x4ff029)+'\x27)',_0x49ac5c[_0x485193(0x3e4)]['backgroundSize']=_0x485193(0xdd5),_0x49ac5c[_0x485193(0x3e4)][_0x485193(0xcb8)]=_0x485193(0x88f));}else _0x37c625[_0x485193(0x706)]&&(_0x491589['paused']?_0x3e6f20[_0x485193(0x50a)]():_0x3aa81d['pause']());}_0x1f1d12(),requestAnimationFrame(()=>{const _0x4b77c4=_0x485193;_0x4b77c4(0xdda)===_0x4b77c4(0x26e)?_0x258d2d[_0x4b77c4(0xbe7)]&&_0x5ba8a1[_0x4b77c4(0xbe7)]['isActive']&&(_0x291a47[_0x4b77c4(0x3e4)][_0x4b77c4(0x1df)]='flex',_0x4b468e(()=>_0x355f5a['classList'][_0x4b77c4(0xddb)]('show'),0xa)):requestAnimationFrame(()=>{const _0x42ac30=_0x4b77c4;if(_0x42ac30(0x3b2)!==_0x42ac30(0xb51))_0x27a15c(![]),_0x467fe1(!![]),setTimeout(()=>{const _0x43075c=_0x42ac30;_0xb90e30[_0x43075c(0x3e4)][_0x43075c(0x773)]='opacity\x200.25s\x20ease',_0xb90e30['style']['opacity']='1';},0x64),setTimeout(()=>{const _0x4611ef=_0x42ac30;'FHDmM'!==_0x4611ef(0x8a6)?(_0x3527f3[_0x4611ef(0x584)]['forEach'](_0xb78734=>{const _0x32403b=_0x4611ef,_0x2ad06e=_0x53d396(_0xb78734);if(_0x2ad06e){const _0x2d5815=_0x7bccd5[_0x32403b(0x7a9)]('option');_0x2d5815[_0x32403b(0x2d4)]=_0x2ad06e['id'],_0x2d5815[_0x32403b(0x226)]=_0x2ad06e[_0x32403b(0xe79)],_0xdeb5c2['appendChild'](_0x2d5815);}}),_0x1076c8[_0x4611ef(0x3e4)][_0x4611ef(0x1df)]='block'):_0x14788b=![];},0x1c2);else{const _0x2bd1f8=_0x196f8c[_0x42ac30(0x5bf)]['map'](_0x5a10fe=>_0x31fe4b(_0x5a10fe)?.[_0x42ac30(0xe79)]||'未知')['join']('、'),_0x3f6060=_0x42ac30(0x9e3);_0x12e9d7=_0x42ac30(0xb28)+_0x3f6060+'\x20'+_0x2bd1f8+_0x42ac30(0x28d);}});});}else _0x4b25e8[_0x485193(0xc04)](_0x485193(0x493),_0x4e26d3);}catch(_0x401e3a){_0x485193(0xc88)===_0x485193(0x8d9)?_0x565c6c(_0x485193(0x212)):(console[_0x485193(0xc95)](_0x485193(0x56b),_0x401e3a),_0x27a15c(![]),_0x14788b=![]);}},0x32);}async function _0x3bda1f(){const _0x2af5d2=_0x57ab4d;if(_0xa7652b[_0x2af5d2(0x89f)]){_0x198030('正在构思中，请稍候...');return;}const _0x4661f7=_0xa7652b[_0x2af5d2(0xdc0)];if(_0x4661f7['length']===0x0)return;let _0x33c524=-0x1;for(let _0x4e44fe=_0x4661f7[_0x2af5d2(0x893)]-0x1;_0x4e44fe>=0x0;_0x4e44fe--){if(_0x2af5d2(0xbb0)==='YTqUF'){if(_0x4661f7[_0x4e44fe][_0x2af5d2(0xab8)]===_0x2af5d2(0xea1)){if(_0x2af5d2(0x13e)===_0x2af5d2(0x13e)){_0x33c524=_0x4e44fe;break;}else{const _0xdb0d7c=_0x298df0(_0x7656d5[_0x2af5d2(0xb17)]);_0x2d335b[_0x2af5d2(0x8b3)](_0x32d09b,{'content':_0xdb0d7c[_0x2af5d2(0xb17)],'quotedMessage':_0xdb0d7c[_0x2af5d2(0x115)]});}}}else{if(typeof _0x42c756===_0x2af5d2(0xdab))_0x2a01da[_0x2af5d2(0x214)](_0x2b0018);}}if(_0x33c524===-0x1||_0x33c524===_0x4661f7[_0x2af5d2(0x893)]-0x1){_0x198030(_0x2af5d2(0x9f4));return;}_0x4661f7[_0x2af5d2(0x197)](_0x33c524+0x1),_0xa7652b[_0x2af5d2(0xb1e)]=[],_0x2c2648(),_0x71e0ad(),_0x1ec822(_0xa7652b['activeMeetingCharId']),setTimeout(()=>{_0x4821dd();},0x64);}async function _0x473cd4(){const _0x3e8728=_0x57ab4d;if(_0x3e8728(0x1d5)===_0x3e8728(0x1d5)){if(_0xa7652b['isGenerating']){if('BzsyH'!==_0x3e8728(0x7e5)){const _0x381a3c=_0x1368eb['dataset'][_0x3e8728(0x45e)],_0x469f1a=_0x36174f['querySelectorAll']('.wb-entry-item\x20input[data-category-id=\x22'+_0x381a3c+'\x22]'),_0x465753=_0x26fa41[_0x3e8728(0xe54)](_0x3e8728(0x83d)+_0x381a3c+'\x22]:checked');_0x465753[_0x3e8728(0x893)]>0x0&&_0x465753[_0x3e8728(0x893)]<_0x469f1a[_0x3e8728(0x893)]&&(_0x3ce43a['indeterminate']=!![]);}else{_0x198030('正在生成中，请稍候...');return;}}const _0x3f13c1=_0xa7652b[_0x3e8728(0xdc0)];if(_0x3f13c1[_0x3e8728(0x893)]===0x0)return;let _0x3e8c4d=-0x1;for(let _0x3d5fbb=_0x3f13c1[_0x3e8728(0x893)]-0x1;_0x3d5fbb>=0x0;_0x3d5fbb--){if('xYzJO'===_0x3e8728(0xbab))_0x1a2cb1*=_0x5ca1dd/_0x4e46b5,_0x364641=_0x17abe3;else{if(_0x3f13c1[_0x3d5fbb][_0x3e8728(0xab8)]===_0x3e8728(0xea1)){if('jbfjP'!==_0x3e8728(0xcf4)){_0x3e8c4d=_0x3d5fbb;break;}else{const _0x316d49=_0x119102[_0x3e8728(0x740)]('{'),_0x3c4f31=_0x529c37[_0x3e8728(0x29c)]('}');if(_0x316d49>=0x0&&_0x3c4f31>_0x316d49)return _0x5c4ab3[_0x3e8728(0x1de)](_0x316d49,_0x3c4f31+0x1);return _0x1ad15c;}}}}if(_0x3e8c4d===-0x1||_0x3e8c4d===_0x3f13c1[_0x3e8728(0x893)]-0x1){if(_0x3e8728(0xd29)==='vVdNh'){const _0x14dbc6=_0x5001bf(_0x4a794b['id']);if(_0x14dbc6&&_0x14dbc6[_0x3e8728(0x893)]>0x0){const _0x3fa28f=_0x14dbc6[_0x14dbc6[_0x3e8728(0x893)]-0x1];(!_0x30ec7b||_0x3fa28f[_0x3e8728(0xb9f)]>_0x3267ff[_0x3e8728(0xb9f)])&&(_0x3fdc46=_0x3fa28f);}}else{_0x198030('还没有我的回复可以重新生成哦。');return;}}_0x3f13c1[_0x3e8728(0x197)](_0x3e8c4d+0x1),_0x2c2648(),_0x42b406(),setTimeout(()=>{_0x4821dd();},0x64);}else return'';}async function _0x5bae04(_0x15e9e4=null){const _0xccbf72=_0x57ab4d;if(_0xccbf72(0xc6e)==='HbwOW'){const _0x43ee37=_0x15e9e4??_0x41f290[_0xccbf72(0x2d4)][_0xccbf72(0x8eb)]();if(_0x43ee37===''||!_0xa7652b['activeChatId'])return;const _0x434d62=document['querySelector'](_0xccbf72(0xc0f)),_0x519466=_0x434d62['id']===_0xccbf72(0x2e9),_0x404683={'role':'user','content':_0x43ee37,'timestamp':Date[_0xccbf72(0x144)](),'isOffline':_0x519466};_0xa7652b[_0xccbf72(0xc40)]&&(_0x404683[_0xccbf72(0x115)]={..._0xa7652b['activeQuote']});_0xa7652b[_0xccbf72(0xdc0)][_0xccbf72(0x214)](_0x404683);const _0x3d31bc=_0xbe0f59(_0x404683,_0xa7652b[_0xccbf72(0xdc0)][_0xccbf72(0x893)]-0x1);_0x3d31bc&&(_0x37b09b[_0xccbf72(0xc55)]=_0x37b09b[_0xccbf72(0x251)]);_0x2c2648(),_0x41f290[_0xccbf72(0x2d4)]='',_0xb7052();const _0x4afae6=_0x41c782();if(_0x4afae6?.[_0xccbf72(0x45c)]===_0xccbf72(0x722)){const _0x5c1546=_0x4afae6['participantIds'][0x0];_0x59eeb1(_0x43ee37,_0x5c1546)[_0xccbf72(0xbb7)](_0x3bf6fe=>{const _0x476393=_0xccbf72;console[_0x476393(0xc95)](_0x476393(0xc1b),_0x3bf6fe);});}}else _0x59b3bd(),_0x1df700[_0xccbf72(0x6e4)](_0xccbf72(0xcb3));}function _0x462a98(_0x32fea8){const _0xd6e092=_0x57ab4d;if(_0xd6e092(0x3fd)===_0xd6e092(0x3fd)){if(!_0x32fea8||!_0xa7652b[_0xd6e092(0xd5b)])return;const _0x32abea={'role':_0xd6e092(0xea1),'content':_0xd6e092(0x507)+_0x32fea8[_0xd6e092(0xe79)]+']','displayUrl':_0x32fea8['url'],'timestamp':Date[_0xd6e092(0x144)]()};_0xa7652b['conversationHistory'][_0xd6e092(0x214)](_0x32abea),_0xbe0f59(_0x32abea,_0xa7652b[_0xd6e092(0xdc0)][_0xd6e092(0x893)]-0x1),_0x2c2648(),_0x177eb9[_0xd6e092(0x970)][_0xd6e092(0x702)](_0xd6e092(0x348));}else _0x18ff40(!![]);}async function _0x2f8406(_0x44d9cd){const _0xec9dea=_0x57ab4d;if(_0xec9dea(0x438)!==_0xec9dea(0x84d)){const _0x300d8c=_0x44d9cd[_0xec9dea(0x63c)][_0xec9dea(0xcf5)][0x0];if(!_0x300d8c||!_0xa7652b['activeChatId'])return;_0x27a15c(!![],'正在处理图片...');try{if(_0xec9dea(0x62b)!=='kvLRY'){const _0xcd4cb7=await _0x40bef0(_0x300d8c,0x320,0.8,!![]),_0x58db3d=_0xec9dea(0xc2a)+Date[_0xec9dea(0x144)]();await _0x1366c1(_0x58db3d,_0xcd4cb7);const _0x593772=_0x41f290[_0xec9dea(0x2d4)][_0xec9dea(0x8eb)]();_0x41f290[_0xec9dea(0x2d4)]='';const _0x5a387c={'role':'user','content':_0x593772,'imageId':_0x58db3d,'timestamp':Date[_0xec9dea(0x144)]()};_0xa7652b[_0xec9dea(0xdc0)][_0xec9dea(0x214)](_0x5a387c),_0xbe0f59(_0x5a387c,_0xa7652b['conversationHistory']['length']-0x1),_0x2c2648();}else _0x27ea0f(![]);}catch(_0x393edb){if('BblDu'!==_0xec9dea(0x944))_0x198030(_0xec9dea(0x7f8)+_0x393edb[_0xec9dea(0xe32)]);else return null;}finally{'ofuRJ'===_0xec9dea(0x994)?(_0x27a15c(![]),_0x44d9cd[_0xec9dea(0x63c)][_0xec9dea(0x2d4)]=''):_0x2ca9d3['assign'](_0x3eb2df,{'songName':_0x7ba8ec,'artist':_0xfbef2,'coverUrl':null,'playableUrl':null});}}else _0x56f56d[_0xec9dea(0x9d1)]=!![],_0x273a28();}async function _0x8a4770(){const _0x17d7eb=_0x57ab4d;if(_0x17d7eb(0x2e7)!==_0x17d7eb(0x9ec)){if(!_0xa7652b[_0x17d7eb(0xd5b)])return;const _0x39525d=await _0x5f088a();if(!_0x39525d)return;_0x198030(_0x17d7eb(0x9d2));try{const _0x125373=await _0x2576ae(_0x39525d[_0x17d7eb(0xb6d)],_0x39525d['artist']),_0x782c39={'role':_0x17d7eb(0xea1),'type':_0x17d7eb(0x784),'content':_0x17d7eb(0x795)+_0x39525d[_0x17d7eb(0xb6d)]+_0x17d7eb(0x6d6)+_0x39525d['artist']+']','songName':_0x39525d[_0x17d7eb(0xb6d)],'artist':_0x39525d[_0x17d7eb(0x6e3)],'coverUrl':_0x125373[_0x17d7eb(0xdd5)],'playableUrl':_0x125373[_0x17d7eb(0x17c)],'timestamp':Date[_0x17d7eb(0x144)]()};_0xa7652b[_0x17d7eb(0xdc0)][_0x17d7eb(0x214)](_0x782c39),_0x2c2648(),_0x1f1d12();}catch(_0x471965){'ijPHO'==='NdclJ'?_0x382eea[_0x17d7eb(0x226)]=_0x3e78f0[_0x17d7eb(0x90a)](_0x3bea9d)[_0x17d7eb(0x17f)](_0x1ce7ab=>_0x1ce7ab[_0x17d7eb(0x80e)][_0x17d7eb(0x226)][_0x17d7eb(0x8eb)]())[_0x17d7eb(0x332)]('、'):(console['error']('用户分享音乐失败:',_0x471965),_0x198030(_0x17d7eb(0x462)+_0x471965[_0x17d7eb(0xe32)]));}}else _0x16b3b2[_0x17d7eb(0xc95)](_0x17d7eb(0x676),_0x56e824),_0x3f4fa9(_0x17d7eb(0xa61)+_0x441932[_0x17d7eb(0xe32)]),_0x160c29['getElementById'](_0x17d7eb(0x4b4))['style'][_0x17d7eb(0x1df)]=_0x17d7eb(0x2a3),_0x480638[_0x17d7eb(0x473)](_0x17d7eb(0xd93))['style'][_0x17d7eb(0x1df)]=_0x17d7eb(0x4a6);}function _0x4da06c(_0x2d7411,_0x1a45aa=0x78){const _0x5b157b=_0x57ab4d,_0x458be9=_0x58790b=>{const _0x3cd68a=_0x20c5;if(_0x3cd68a(0x977)===_0x3cd68a(0xe88))_0x4d5903[_0x3cd68a(0x863)]('chatHistory_'+_0x33899d[_0x3cd68a(0xd5b)]);else{if(_0x58790b['role']===_0x3cd68a(0xea1))return _0xa7652b['userProfile']?.['name']||'User';if(_0x58790b[_0x3cd68a(0xb42)]){const _0x201606=_0x1238ea(_0x58790b[_0x3cd68a(0xb42)]);return _0x201606?.[_0x3cd68a(0xe79)]||_0x3cd68a(0x7ef);}if(_0x2d7411?.[_0x3cd68a(0x45c)]===_0x3cd68a(0x722)){const _0x4ed414=_0x1238ea(_0x2d7411[_0x3cd68a(0x584)][0x0]);return _0x4ed414?.['name']||'AI';}return'Assistant';}},_0xf4838d=_0xa7652b[_0x5b157b(0xdc0)]['slice'](-_0x1a45aa),_0x481c5d=[];for(const _0x336726 of _0xf4838d){if(_0x336726[_0x5b157b(0xd17)])_0x481c5d[_0x5b157b(0x214)]('['+_0x458be9(_0x336726)+_0x5b157b(0x80d)+(_0x336726[_0x5b157b(0xb17)]?.[_0x5b157b(0x41c)](/：(.+?)]/)?.[0x1]||'表情')+']');else{if(_0x336726['image']){const _0x579716=_0x336726[_0x5b157b(0xb17)]?'\x20'+_0x336726['content']:'';_0x481c5d[_0x5b157b(0x214)]('['+_0x458be9(_0x336726)+_0x5b157b(0x6a2)+_0x579716);}else _0x336726[_0x5b157b(0xb17)]&&_0x481c5d['push']('['+_0x458be9(_0x336726)+']\x20'+_0x336726[_0x5b157b(0xb17)]);}}return _0x481c5d[_0x5b157b(0x332)]('\x0a');}function _0x22883e(_0x281894,_0x2eae3a){const _0x6bc55a=_0x57ab4d;if(!_0x281894||!_0x2eae3a)return null;const _0x4717ce=_0x2eae3a[_0x6bc55a(0x41c)](/@([^\s:：,，。!?]+)/);if(!_0x4717ce)return null;const _0x1d4499=_0x4717ce[0x1][_0x6bc55a(0x52f)]();for(const _0x350228 of _0x281894[_0x6bc55a(0x584)]){const _0x11a519=_0x1238ea(_0x350228);if(!_0x11a519?.[_0x6bc55a(0xe79)])continue;if(_0x11a519['name'][_0x6bc55a(0x52f)]()===_0x1d4499)return _0x11a519;if(_0x11a519[_0x6bc55a(0xe79)]['toLowerCase']()[_0x6bc55a(0x324)](_0x1d4499))return _0x11a519;}return null;}function _0x8665d9(_0x32a957){const _0x540230=_0x57ab4d;if('kaIZR'===_0x540230(0x93c)){const _0x3633b3=_0xbfc3a5[_0x540230(0x52f)](),_0x8f7711=_0x4d85cc[_0x540230(0x52f)]();if(_0x3633b3[_0x540230(0x324)](_0x540230(0x461)))return _0x540230(0x502);if(_0x8f7711[_0x540230(0x5c0)](_0x540230(0x896)))return _0x540230(0x502);if(_0x8f7711[_0x540230(0x5c0)](_0x540230(0xb96)))return _0x540230(0x20a);if(_0x3633b3[_0x540230(0x324)](_0x540230(0x20a)))return _0x540230(0x20a);return _0x540230(0xe6b);}else{const _0x3e9da7=_0x32a957['indexOf']('{'),_0x4cfe82=_0x32a957['lastIndexOf']('}');if(_0x3e9da7>=0x0&&_0x4cfe82>_0x3e9da7)return _0x32a957[_0x540230(0x1de)](_0x3e9da7,_0x4cfe82+0x1);return _0x32a957;}}function _0x3e1fca(_0x51b756,_0x5aea23,_0x32f2b2){const _0x9e45d7=_0x57ab4d,_0x461a96=new Map(_0x5aea23[_0x9e45d7(0x17f)](_0x2ddb04=>[String(_0x2ddb04['id']),_0x2ddb04])),_0x22bc68=_0x1c4df3=>String(_0x1c4df3||'')[_0x9e45d7(0x52f)]()[_0x9e45d7(0x833)](/\s+/g,''),_0x3e5f3d=new Map(_0x5aea23[_0x9e45d7(0x17f)](_0x1ccb37=>[_0x22bc68(_0x1ccb37['name']),_0x1ccb37])),_0x1eca51=new Set(_0x32f2b2),_0x302eae={'events':[]};for(const _0x253bb4 of _0x51b756?.[_0x9e45d7(0x694)]||[]){const _0x1b7427=_0x253bb4[_0x9e45d7(0xb42)]??_0x253bb4[_0x9e45d7(0x39d)]??_0x253bb4[_0x9e45d7(0xff)]??_0x253bb4['speaker']??_0x253bb4[_0x9e45d7(0xab8)]??_0x253bb4[_0x9e45d7(0xe79)];if(!_0x1b7427)continue;let _0x11f620=_0x461a96['get'](String(_0x1b7427))||_0x3e5f3d[_0x9e45d7(0x470)](_0x22bc68(_0x1b7427));if(!_0x11f620)continue;const _0x3aa50a=(_0x253bb4[_0x9e45d7(0x8e9)]||_0x253bb4[_0x9e45d7(0x45c)]||_0x9e45d7(0x51c))[_0x9e45d7(0x52f)]();if(_0x3aa50a===_0x9e45d7(0x83a)){if('DfadG'===_0x9e45d7(0x75e)){const _0x4b25cc=(_0x253bb4['sticker']??_0x253bb4['emoji']??_0x253bb4[_0x9e45d7(0xa2c)]??_0x253bb4[_0x9e45d7(0x99c)])?.[_0x9e45d7(0x8eb)]();if(_0x4b25cc&&_0x1eca51['has'](_0x4b25cc))_0x302eae[_0x9e45d7(0x694)][_0x9e45d7(0x214)]({'senderId':_0x11f620['id'],'kind':_0x9e45d7(0x83a),'sticker':_0x4b25cc});else{const _0x745b78=String(_0x253bb4['content']??_0x253bb4[_0x9e45d7(0x51c)]??'')['trim']()||'[sticker:'+(_0x4b25cc||_0x9e45d7(0x6c9))+']';if(_0x745b78)_0x302eae[_0x9e45d7(0x694)][_0x9e45d7(0x214)]({'senderId':_0x11f620['id'],'kind':_0x9e45d7(0x51c),'content':_0x745b78});}}else return _0x9e45d7(0x4d0)+_0x306296;}else{if(_0x3aa50a===_0x9e45d7(0x784)&&_0x253bb4[_0x9e45d7(0xb6d)]&&_0x253bb4[_0x9e45d7(0x6e3)])_0x9e45d7(0x33b)!==_0x9e45d7(0x333)?_0x302eae[_0x9e45d7(0x694)][_0x9e45d7(0x214)]({'senderId':_0x11f620['id'],'kind':_0x9e45d7(0x784),'songName':_0x253bb4[_0x9e45d7(0xb6d)],'artist':_0x253bb4[_0x9e45d7(0x6e3)]}):_0x165c4d[_0x9e45d7(0x214)]('语气:\x20'+_0x1ba84a[_0x9e45d7(0x38c)][_0x9e45d7(0xe52)]);else{if('QKzLU'!==_0x9e45d7(0x2e0)){const _0xbc92f3=String(_0x253bb4[_0x9e45d7(0xb17)]??_0x253bb4[_0x9e45d7(0x51c)]??_0x253bb4[_0x9e45d7(0xe32)]??'')['trim']();if(_0xbc92f3)_0x302eae[_0x9e45d7(0x694)][_0x9e45d7(0x214)]({'senderId':_0x11f620['id'],'kind':'text','content':_0xbc92f3});}else throw new _0x6aa662('文件格式不正确，不是一个有效的备份文件。');}}}return _0x302eae;}async function _0x148420(_0x11fa00){const _0x11d43f=_0x57ab4d;if(!_0x11fa00||!Array['isArray'](_0x11fa00[_0x11d43f(0x694)])||_0x11fa00[_0x11d43f(0x694)][_0x11d43f(0x893)]===0x0)return;const _0x22c30d=_0x2feb6d=>_0x2feb6d+Math[_0x11d43f(0xe7c)](Math[_0x11d43f(0x1c6)]()*0x190);let _0x2ca810=0x1f4;for(const _0x5ba9dc of _0x11fa00[_0x11d43f(0x694)]){await new Promise(_0x185c41=>setTimeout(_0x185c41,_0x22c30d(_0x2ca810))),_0x2ca810=0x2bc;const _0x189062=_0xa7652b[_0x11d43f(0xdc0)]['at'](-0x1)?.['isOffline']??![],_0x275703={'role':_0x11d43f(0x815),'senderId':_0x5ba9dc[_0x11d43f(0xb42)],'timestamp':Date['now'](),'isOffline':_0x189062};if(_0x5ba9dc[_0x11d43f(0x8e9)]===_0x11d43f(0x5d0)){Object['assign'](_0x275703,{'type':_0x11d43f(0x5d0),'content':_0x5ba9dc['content']}),_0xbe0f59(_0x275703,-0x1),_0x37b09b['scrollTop']=_0x37b09b[_0x11d43f(0x251)];continue;}if(_0x5ba9dc[_0x11d43f(0x8e9)]===_0x11d43f(0x83a)){const _0x42ca81=_0xb4768c[_0x11d43f(0x394)](_0x199f26=>_0x199f26['name']===_0x5ba9dc[_0x11d43f(0x83a)]);_0x42ca81&&(Object[_0x11d43f(0x8b3)](_0x275703,{'content':_0x11d43f(0xcde)+_0x42ca81[_0x11d43f(0xe79)]+']','displayUrl':_0x42ca81['url']}),_0xa7652b[_0x11d43f(0xdc0)][_0x11d43f(0x214)](_0x275703),_0x2c2648(),_0xbe0f59(_0x275703,_0xa7652b[_0x11d43f(0xdc0)][_0x11d43f(0x893)]-0x1),_0x37b09b[_0x11d43f(0xc55)]=_0x37b09b[_0x11d43f(0x251)]);continue;}if(_0x5ba9dc[_0x11d43f(0x8e9)]===_0x11d43f(0x784)&&_0x5ba9dc[_0x11d43f(0xb6d)]&&_0x5ba9dc[_0x11d43f(0x6e3)]){const {songName:_0x534b8e,artist:_0x9dcc2b}=_0x5ba9dc;Object[_0x11d43f(0x8b3)](_0x275703,{'type':_0x11d43f(0x784),'content':_0x11d43f(0xd41)+_0x534b8e+_0x11d43f(0x6d6)+_0x9dcc2b+']','songName':_0x534b8e,'artist':_0x9dcc2b});try{if(_0x11d43f(0x874)==='pncYJ')_0x591c51[_0x11d43f(0x6d1)](),_0xa2e09c[_0x11d43f(0x9e)][_0x11d43f(0x234)](_0x371b40[_0x11d43f(0x2d4)])[_0x11d43f(0xcae)](()=>{const _0x4aeaba=_0x11d43f;_0x43aa2e(_0x4aeaba(0xcf3));})[_0x11d43f(0xbb7)](_0x4e223f=>{const _0x26a873=_0x11d43f;_0x801e3f(_0x26a873(0x212));});else{const _0x565fae=await _0x2576ae(_0x534b8e,_0x9dcc2b);_0x275703[_0x11d43f(0x4f6)]=_0x565fae[_0x11d43f(0xdd5)],_0x275703[_0x11d43f(0x5c4)]=_0x565fae[_0x11d43f(0x17c)];}}catch(_0x3e4517){}_0xa7652b[_0x11d43f(0xdc0)][_0x11d43f(0x214)](_0x275703),_0x2c2648(),_0x42b406();continue;}if(_0x5ba9dc[_0x11d43f(0x8e9)]===_0x11d43f(0x51c)){const _0x1b5ebd=(_0x5ba9dc[_0x11d43f(0xb17)]||'')[_0x11d43f(0x41c)](/^\[引用\|(.*?)\|(.*?)\]\s*/);let _0x2f1011=_0x5ba9dc[_0x11d43f(0xb17)]||'';_0x1b5ebd&&(_0x275703[_0x11d43f(0x115)]={'sender':_0x1b5ebd[0x1]['trim'](),'content':_0x1b5ebd[0x2]['trim']()},_0x2f1011=_0x5ba9dc[_0x11d43f(0xb17)]['substring'](_0x1b5ebd[0x0][_0x11d43f(0x893)])[_0x11d43f(0x8eb)]());const _0x2ddfe0=_0x487935(_0x2f1011)['slice'](0x0,0x3);for(let _0xc08a18=0x0;_0xc08a18<_0x2ddfe0[_0x11d43f(0x893)];_0xc08a18++){_0xc08a18>0x0&&(_0x11d43f(0x5ea)===_0x11d43f(0x5ea)?(await new Promise(_0xe7f67e=>setTimeout(_0xe7f67e,_0x22c30d(0x190))),delete _0x275703['quotedMessage']):_0x4c64f6[_0x11d43f(0x226)]=_0x11d43f(0x94a)),_0x275703[_0x11d43f(0xb17)]=_0x2ddfe0[_0xc08a18],_0xa7652b['conversationHistory']['push']({..._0x275703}),_0x2c2648(),_0x42b406();}}}}async function _0x2be474(_0x1015de,{force:force=![],delayMs:delayMs=0x0}={}){const _0x1058d0=_0x57ab4d;await new Promise(_0x4b8e67=>setTimeout(_0x4b8e67,0xa));if(!_0xa7652b['apiSettings'][_0x1058d0(0x4f5)]||!_0xa7652b[_0x1058d0(0xb82)]['key']||!_0xa7652b[_0x1058d0(0xb82)][_0x1058d0(0x7fa)]){if(_0x1058d0(0x486)===_0x1058d0(0xddf))_0x2a1196=_0x1efd1b[_0x1058d0(0x277)][_0x1058d0(0x17f)](_0x503474=>_0x20a57d[_0x1058d0(0x52d)][_0x1058d0(0x394)](_0x20d41f=>_0x20d41f['id']===_0x503474))[_0x1058d0(0x1a9)](_0x1c131f)['map'](_0x1b401e=>_0x1058d0(0x4b3)+_0x1b401e['name']+']:\x20'+_0x1b401e[_0x1058d0(0xb17)])[_0x1058d0(0x332)]('');else return _0x198030('请先在\x22设置\x22中配置你的\x20API\x20信息。'),![];}const _0x574d12=_0x41c782();if(!_0x574d12||!_0x1015de)return![];const _0x2a5ba9=_0x2e35cc(_0x574d12['id']),_0x52adb5=_0xa7652b[_0x1058d0(0xdc0)]['at'](-0x1)?.[_0x1058d0(0xab8)]===_0x1058d0(0xea1);if(!force&&!_0x52adb5)return![];const _0x4f4e4=_0xa7652b['conversationHistory']['at'](-0x1)?.[_0x1058d0(0xaba)]??![];if(delayMs)await new Promise(_0x1658d1=>setTimeout(_0x1658d1,delayMs));_0x4f4e4?document[_0x1058d0(0x473)]('galgame-text')['textContent']='（正在构思中...）':_0x58e0d1(!![]);let _0x2dbbbb='';const _0x2bcefa=_0x41c782();if(_0x2bcefa?.[_0x1058d0(0x2a0)]?.[_0x1058d0(0x46e)]){const _0x1cb49a=_0x2bcefa['activeListenSession'],_0x971fac=await _0xea989e(_0x1cb49a[_0x1058d0(0xd59)]);if(_0x971fac&&_0x971fac[_0x1058d0(0x996)]){const _0x4bdf86=_0x3d9c57(_0x971fac[_0x1058d0(0x996)]);if(_0x4bdf86[_0x1058d0(0x893)]>0x0){const _0x346efd=_0x5552f1['currentTime'];let _0x5c2a07=-0x1;for(let _0xfb98=0x0;_0xfb98<_0x4bdf86[_0x1058d0(0x893)];_0xfb98++){if(_0x346efd>=_0x4bdf86[_0xfb98][_0x1058d0(0x128)])_0x5c2a07=_0xfb98;else break;}const _0x5d342f=_0x4bdf86['map']((_0x30b761,_0x2b2f40)=>{const _0x377423=_0x1058d0,_0x14a21a=_0x2b2f40===_0x5c2a07?_0x377423(0x4e0):'';return''+_0x14a21a+_0x30b761[_0x377423(0x51c)];})[_0x1058d0(0x332)]('\x0a'),_0x2edd71=_0x4bdf86[_0x1058d0(0x17f)](_0x9f2afb=>_0x9f2afb[_0x1058d0(0x51c)])['join']('\x0a'),_0xa88ef5=_0x5c2a07>-0x1?_0x4bdf86[_0x5c2a07][_0x1058d0(0x51c)]:_0x1058d0(0x4a8);_0x2dbbbb=('\x0a#\x20当前活动：一起听歌\x0a\x0a你们正在一起听\x20'+_0x1cb49a['artist']+'\x20的《'+_0x1cb49a[_0x1058d0(0xb6d)]+_0x1058d0(0xa80)+_0x2edd71+_0x1058d0(0xe4)+_0xa88ef5+'\x22**\x0a\x0a请结合【整首歌的意境】和【当前唱到的这一句】，与用户展开自然的对话。\x0a\x20\x20\x20')[_0x1058d0(0x8eb)]();}}}let _0x40500f='',_0x19bd96='';const _0x512e0d=_0xa7652b['conversationHistory'][_0x1058d0(0x893)];if(_0x512e0d>0x1){if(_0x1058d0(0xdf8)!==_0x1058d0(0xdf8))_0x3b0ae0[_0x1058d0(0xc95)](_0x1058d0(0x239)+_0x254bab[_0x1058d0(0xe79)]+'\x20('+_0x13723b['id']+_0x1058d0(0x96a),_0x533071);else{const _0x32188e=_0xa7652b[_0x1058d0(0xdc0)][_0x512e0d-0x2],_0xf20c17=_0xa7652b[_0x1058d0(0xdc0)][_0x512e0d-0x1];if(_0x32188e['isOffline']===![]&&_0xf20c17[_0x1058d0(0xaba)]===!![])_0x19bd96=_0x1058d0(0xe07)+_0x2a5ba9[_0x1058d0(0xe79)]+'”用手机聊天，现在Ta出现在了你面前。请根据这前后的时间差，判断Ta现在出现的合理性（例如，时间很长——Ta可能是过来找你玩了，你可以感到惊喜或者别的，又或者，时间非常短——Ta可能是突然出现的，你会有点震惊，结合上下文，也会有别的反应），并作出恰当的反应。，现在，切换到【见面】模式（使用JSON格式，必须有旁白）。';else{if(_0x32188e[_0x1058d0(0xaba)]===!![]&&_0xf20c17[_0x1058d0(0xaba)]===![]){if(_0x1058d0(0x86f)==='tzkZT')_0x19bd96=_0x1058d0(0xc65)+_0x2a5ba9[_0x1058d0(0xe79)]+'”面对面，Ta现在掏出手机给你发了这条消息。请根据这前后的时间差，判断Ta发送消息的合理性，你应该结合上下文对此发表评论（例如，根据上下文，Ta已经和你分开了，没用面对面了，那么发手机消息非常正常，自然接话就好，但是如果判断得出你们还在见面状态，那么，你可以适当吐槽为什么两个人见面还要发手机消息），现在，切换到【手机聊天】模式（纯文本气泡，不要有旁白）。';else{_0x4b38b4(_0x1058d0(0x464));return;}}}}}if(_0x4f4e4){if(_0x1058d0(0x142)==='nWsZA'){const _0x3afdbb='normal,\x20happy,\x20angry,\x20sad,\x20shy';_0x40500f=_0x1058d0(0x1bd)+_0x2a5ba9[_0x1058d0(0xe79)]+'”面对面交流。你的回复必须是【视觉小说剧本】格式。\x0a\x20\x20-\x20**输出格式**:\x20你的回复**必须**是一个完整的、语法正确的JSON数组。每一个数组元素都是一个对象，代表一句台词或旁白，结构如下:\x0a\x20\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x22speaker\x22:\x20\x22角色名或narrator\x22,\x0a\x20\x20\x20\x20\x22emotion\x22:\x20\x22从['+_0x3afdbb+_0x1058d0(0x488)+_0x1015de[_0x1058d0(0xe79)]+'”；如果是环境或动作描写，就用“narrator”。\x0a\x20\x20\x20\x202.\x20\x20`emotion`字段：**必须**从\x20['+_0x3afdbb+']\x20这五个词中选择一个。旁白的emotion应尽量与上一句台词的情绪保持一致，以避免角色立绘表情突变。2.\x20\x20`emotion`字段：**必须**根据台词的【核心情感】，精准地从\x20['+_0x3afdbb+_0x1058d0(0xbc0);}else _0x3e11fc['friendCircles']=_0x1f62f2['friendCircles'][_0x1058d0(0x1a9)](_0x34511a=>_0x34511a['id']!==_0x204824),_0x46b9db['activeFriendCircleId']===_0x4e6b07&&(_0x4b0442[_0x1058d0(0x4fd)]=null),_0x58a225(),_0x24161a(_0x1058d0(0x65a)),_0x449af4(),_0x12e2e5('friendCircleList','friendCircleEdit');}else _0x1058d0(0xca3);const {omniText:_0x2c2ebd}=_0x32429c(_0x1015de['id'],_0x574d12['id']),_0x55bf1e=_0x4649bb(),_0x4316ba=_0x322f26(_0x1015de['id']),_0x48a5cd=_0x3f0d67(_0x1015de['id']),_0x3d8067=_0x2a2946(_0x1015de['id']),_0x1d771e=await _0xa63707(_0x1015de['id']);let _0x18b6c7=null;const _0x22db0c=_0x1058d0(0x710)+_0x1015de['id'];try{const {value:_0x4df29b}=await Capacitor['Plugins'][_0x1058d0(0x68c)][_0x1058d0(0x470)]({'key':_0x22db0c});if(_0x4df29b){if(_0x1058d0(0x117)!==_0x1058d0(0x117)){_0x558e9a(_0x1058d0(0x510));return;}else _0x18b6c7=JSON['parse'](_0x4df29b);}}catch(_0x2f48c3){console[_0x1058d0(0xc95)](_0x1058d0(0x913),_0x2f48c3);}const _0x5abc11=_0xa7652b[_0x1058d0(0xdc0)][_0x1058d0(0x1de)](-0x5),_0x794a98=_0x18b6c7?_0x195515(_0x5abc11,_0x18b6c7):'',_0x140a95=await _0x222c2d(_0x1015de['id']),_0x1cee20=_0x140a95?_0x1058d0(0x61a)+_0x2a5ba9[_0x1058d0(0xe79)]+'\x22对你的整体印象（摘要）\x0a'+_0x140a95:'',_0x23922e=''+_0x1cee20+_0x794a98+'\x0a\x0a**【人类反应模拟协议\x20v2.0\x20-\x20强化版】**：\x0a1.\x20**【最高优先级】小抄优先**:\x20如果上面的\x22重点关注\x22部分有内容，你**必须**优先根据这些【具体细节】来调整你的回应！\x0a2.\x20**察言观色**:\x20结合【整体印象摘要】和【重点关注细节】，推测TA当前的真实情绪和潜在需求。\x0a3.\x20**基于理解的反应**:\x0a\x20\x20\x20-\x20**必须**避开\x22讨厌\x22和\x22敏感点\x22中明确提到的内容！\x0a\x20\x20\x20-\x20在合适时机**主动**结合\x22喜欢\x22的内容。\x0a\x20\x20\x20-\x20留意并回应\x22压力信号\x22或\x22最近变化\x22。\x0a\x20\x20\x20-\x20你的语气和互动方式要贴合用户的\x22互动风格\x22。\x0a4.\x20**隐秘运用**:\x20绝不复述档案内容，要自然体现理解。\x0a5.\x20**动态更新**:\x20对话中继续观察，验证或修正你对TA的认知。\x0a\x0a***【【最高优先级：反常行为应对协议\x20v1.0】】***\x0a核心目标：当用户的行为、情绪或观点与你档案中记录的长期印象【显著不符】时，你【必须】展现出真诚的好奇与关心，而不是忽视或敷衍。这对于建立深度连接至关重要！\x0a\x0a触发条件：当你注意到\x22整体印象摘要\x22或\x22重点关注：用户档案相关细节\x22中提到了\x22最近变化(observed_changes)\x22或描述了与核心印象矛盾的行为时。\x0a\x0a**行动指令：**\x0a1.\x20**【禁止忽视】**：你【绝对不能】对这些\x22反常\x22视而不见，或仅仅进行\x20superficial\x20(表面的)\x20回应！\x0a2.\x20**【表达关注】**：你的【首要反应】必须是，结合你的角色性格，表达出自然的【惊讶、好奇或关心】。\x0a3.\x20**【探索原因】**：尝试【引导性地】询问原因，展现出你想要理解这种变化的意愿。\x0a4.\x20**【优先级提升】**：在探测到显著反常行为时，上述反应的优先级【高于】普通的闲聊、推进话题或维持轻松氛围！你需要先处理这个\x22异常信号\x22。\x0a\x0a**回应范例（你需要根据自己的性格进行演绎）：**\x0a*\x20（发现平时乐观的用户突然很丧）->\x20\x22咦？['+_0x2a5ba9[_0x1058d0(0xe79)]+_0x1058d0(0x7ed)+_0x2a5ba9[_0x1058d0(0xe79)]+_0x1058d0(0x9c7)+_0x2a5ba9[_0x1058d0(0xe79)]+_0x1058d0(0x805),_0x43df65=typeof _0x3b64ab===_0x1058d0(0xdab)?_0x3b64ab['replaceAll'](_0x1058d0(0x9b1),_0x1015de[_0x1058d0(0xe79)])[_0x1058d0(0x17d)](_0x1058d0(0x9f9),_0x2a5ba9[_0x1058d0(0xe79)]||'用户'):'',_0x3d6eb1=_0x4281c0()['map'](_0x49ca9e=>_0x49ca9e[_0x1058d0(0xe79)])[_0x1058d0(0x332)](',\x20');let _0x5462a3='';if(_0x1015de[_0x1058d0(0x277)]&&_0x1015de[_0x1058d0(0x277)]['length']>0x0){const _0x2b2d64=_0x1015de[_0x1058d0(0x277)][_0x1058d0(0x17f)](_0x3e5865=>_0xa7652b['worldBooks'][_0x1058d0(0x394)](_0x4e6ccc=>_0x4e6ccc['id']===_0x3e5865))[_0x1058d0(0x1a9)](Boolean)[_0x1058d0(0x17f)](_0x1cd86f=>_0x1058d0(0x2be)+_0x1cd86f[_0x1058d0(0xe79)]+'\x0a'+_0x1cd86f[_0x1058d0(0xb17)])[_0x1058d0(0x332)]('');if(_0x2b2d64)_0x5462a3='\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守以下设定)\x0a'+_0x2b2d64;}const _0x43eea4=_0x2a5ba9[_0x1058d0(0x171)]?_0x1058d0(0x587)+_0x2a5ba9['name']+_0x1058d0(0x3c8)+_0x2a5ba9[_0x1058d0(0x171)]:'';let _0x3d612e='';const _0x5a52f0=new Date(),_0x34bef3=_0x3a3aa1(_0x1015de['id']);_0x3d612e='\x0a#\x20时间锚点\x20(你必须参考此信息进行回复)\x0a',_0x3d612e+=_0x1058d0(0xa87)+_0x5a52f0[_0x1058d0(0x1f3)](_0x1058d0(0xbbe),{'dateStyle':'full','timeStyle':'short'})+'\x0a';if(_0x34bef3){const _0x4fc256=new Date(_0x34bef3[_0x1058d0(0xb9f)]),_0x2f01e1=_0x420848(_0x4fc256);_0x3d612e+='-\x20**你们最后一次互动是在**:\x20'+_0x2f01e1+'\x0a';const _0x59aab6=_0x5a52f0[_0x1058d0(0xc8e)](),_0x145a5f=_0x4fc256[_0x1058d0(0xc8e)](),_0x17e05b=new Date();_0x17e05b['setDate'](_0x5a52f0[_0x1058d0(0x947)]()-0x1);const _0x3f721e=_0x17e05b[_0x1058d0(0xc8e)]();if(_0x59aab6===_0x145a5f){if('ydRkh'!==_0x1058d0(0x43a)){const _0x5709ba=(_0x5a52f0-_0x4fc256)/(0x3e8*0x3c);if(_0x5709ba<0x3c){if(_0x1058d0(0x71f)!=='wlMKu')_0x3d612e+=_0x1058d0(0xb92);else return;}else _0x3d612e+=_0x1058d0(0x8b8)+Math[_0x1058d0(0xe81)](_0x5709ba/0x3c)+'小时前），可以简单问候一下对方现在的状态。\x0a';}else _0x148c59['tokenStats'][_0x1058d0(0x692)][_0x1058d0(0xd4e)]();}else{if(_0x3f721e===_0x145a5f)_0x1058d0(0x703)==='XBHVo'?_0x24b1a5[_0x1058d0(0x473)](_0x1058d0(0xcaf))[_0x1058d0(0xc04)](_0x1058d0(0x493),async()=>{_0x2d3e55(_0xf57014,_0x1db70f,!![]);}):_0x3d612e+=_0x1058d0(0xe37);else{const _0x286876=Math['round']((_0x5a52f0-_0x4fc256)/(0x3e8*0x3c*0x3c*0x18));_0x3d612e+=_0x1058d0(0xcb4)+_0x286876+'\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a';}}}else _0x1058d0(0x8cf)!=='DlqQv'?_0x2e23c2[_0x1058d0(0x5c0)](_0x1fe81b[_0x1058d0(0x52f)]())&&_0x17ccde[_0x1058d0(0x893)]<_0x5981f9&&_0x44f06e[_0x1058d0(0x214)](_0x1058d0(0x75c)+_0x422c22+_0x1058d0(0x9e7)):_0x3d612e+=_0x1058d0(0x13c);const _0x379f36=('\x0a'+_0x40500f+_0x1058d0(0x3ed)+_0x1015de[_0x1058d0(0xe79)]+_0x1058d0(0xc33)+_0x1015de[_0x1058d0(0xe79)]+_0x1058d0(0xde)+_0x1015de['name']+_0x1058d0(0x3e8)+_0x3d6eb1+_0x1058d0(0x4da)+_0x43df65+'\x0a')[_0x1058d0(0x8eb)](),_0x2480f4=[{'role':_0x1058d0(0xaae),'content':_0x379f36}],_0x26f621=(_0x1058d0(0xccb)+(_0x1015de[_0x1058d0(0x171)]||_0x1058d0(0x3f4))+'\x0a'+_0x43eea4+'\x20\x0a'+_0x23922e+'\x0a'+_0x2c2ebd+'\x0a'+_0x55bf1e+'\x0a'+_0x4316ba+'\x0a'+_0x48a5cd+_0x1058d0(0x9dd)+_0x3d8067+_0x1058d0(0x6a4)+_0x1d771e+_0x1058d0(0x92c)+_0x2dbbbb+'\x0a'+_0x3d612e+'\x0a'+_0x5462a3+'\x0a')[_0x1058d0(0x8eb)]();_0x26f621[_0x1058d0(0x833)](/#.*|\s/g,'')&&(_0x2480f4[_0x1058d0(0x214)]({'role':_0x1058d0(0xea1),'content':_0x26f621}),_0x2480f4[_0x1058d0(0x214)]({'role':_0x1058d0(0x815),'content':_0x1058d0(0x31a)}));const _0x36cd97=_0xa7652b['preferences']?.[_0x1058d0(0xa9a)]??0x64,_0x1480d8=_0xa7652b['conversationHistory'][_0x1058d0(0x1de)](-_0x36cd97);for(const _0x467c85 of _0x1480d8){if('EdFOe'!==_0x1058d0(0x88a)){const _0x5d8d0b=_0x467c85[_0x1058d0(0xab8)]==='ai'||_0x467c85['role']===_0x1058d0(0x815)?_0x1058d0(0x815):_0x1058d0(0xea1);let _0xb208a9={'role':_0x5d8d0b,'content':_0x467c85[_0x1058d0(0xb17)]},_0x51569e=!!_0x467c85['content'];if(_0x467c85[_0x1058d0(0xd17)]&&_0x467c85[_0x1058d0(0xb17)][_0x1058d0(0x5c0)]('表情')){const _0x4451b4=_0x467c85[_0x1058d0(0xb17)][_0x1058d0(0x41c)](/：(.*?)]$/);_0xb208a9[_0x1058d0(0xb17)]=_0x1058d0(0x384)+(_0x4451b4?_0x4451b4[0x1]:_0x1058d0(0x6c9))+']',_0x2480f4[_0x1058d0(0x214)](_0xb208a9);}else{let _0x2c12a2=null;if(_0x467c85['image'])_0x2c12a2=_0x467c85[_0x1058d0(0x72d)];else{if(_0x467c85['imageId'])try{if(_0x1058d0(0x1fa)!==_0x1058d0(0x200)){const _0x37223a=await _0xf3eefa(_0x467c85[_0x1058d0(0x70f)]);_0x37223a&&(_0x1058d0(0xcc6)!==_0x1058d0(0xcc6)?(_0x21e7da[_0x1058d0(0x3e4)][_0x1058d0(0x16b)]='url('+_0x19702e+')',_0x77a82f['style'][_0x1058d0(0x209)]=_0x1058d0(0xdd5),_0x554551[_0x1058d0(0x3e4)][_0x1058d0(0xcb8)]=_0x1058d0(0x88f),_0x2a3852['style'][_0x1058d0(0x1ba)]=_0x1058d0(0x828),_0x5c9e9a[_0x1058d0(0xe54)]('.widget-info\x20>\x20div')[_0x1058d0(0x1dc)](_0x2610ee=>{const _0x243f13=_0x1058d0;_0x2610ee[_0x243f13(0x3e4)][_0x243f13(0x85b)]=_0x243f13(0x13f);})):_0x2c12a2=await _0xbb85d0(_0x37223a));}else _0x5db819+=_0x1058d0(0x8b8)+_0xd965f9[_0x1058d0(0xe81)](_0x18ed56/0x3c)+'小时前），可以简单问候一下对方现在的状态。\x0a';}catch(_0x5783a2){console[_0x1058d0(0xc95)](_0x1058d0(0xab1),_0x5783a2);}}_0x2c12a2&&(_0x1058d0(0x417)==='VpENH'?_0x2c9404[_0x1058d0(0x5c0)](_0x5c8fe0[_0x1058d0(0x52f)]())&&_0x2f1dc9[_0x1058d0(0x893)]<_0x9e4deb&&_0x6853e9[_0x1058d0(0x214)](_0x1058d0(0x33c)+_0x52ccc0+_0x1058d0(0x8da)):(_0xb208a9[_0x1058d0(0x72d)]=_0x2c12a2,_0x51569e=!![])),_0x51569e&&(_0x1058d0(0x285)!=='UgUrD'?_0x51384f(_0x1058d0(0x812)+_0x421e9a['message']):_0x2480f4['push'](_0xb208a9));}}else _0x1a1125=_0x454391['createElement'](_0x1058d0(0x3e4)),_0x28563d['id']='live-preview-style',_0x277cea['head'][_0x1058d0(0xced)](_0x890be8);}try{const _0x5a5601=await _0x56b292(_0x2480f4);if(!_0x5a5601)return![];if(_0x4f4e4)try{let _0x1883d1=_0x5a5601[_0x1058d0(0x8eb)]();const _0x1dee52=_0x1883d1['match'](/(\[[\s\S]*\])/);_0x1dee52&&(_0x1883d1=_0x1dee52[0x1]);const _0x24e6b3=JSON[_0x1058d0(0x180)](_0x1883d1);if(Array[_0x1058d0(0x8aa)](_0x24e6b3)){if(_0x1058d0(0xa4c)!==_0x1058d0(0x335)){_0xa7652b['activeMeetingScriptQueue']=[..._0x24e6b3],_0xa7652b[_0x1058d0(0xd9c)][_0x1015de['id']]=[..._0x24e6b3],_0x4f49e4();const _0x528205=_0x24e6b3[_0x1058d0(0x17f)](_0xeb3f22=>_0xeb3f22[_0x1058d0(0x9a4)]==='narrator'?_0xeb3f22['line']:_0xeb3f22[_0x1058d0(0x9a4)]+':\x20'+_0xeb3f22[_0x1058d0(0x5b1)])['join']('\x0a\x0a');_0xa7652b['conversationHistory'][_0x1058d0(0x214)]({'role':_0x1058d0(0x815),'senderId':_0x1015de['id'],'timestamp':Date[_0x1058d0(0x144)](),'isOffline':!![],'content':_0x528205});}else{_0x331a70(![]),_0x15b92c(_0x1058d0(0x751));return;}}}catch(_0x14e0dd){_0x1058d0(0x64b)!==_0x1058d0(0xbbf)?(console['error'](_0x1058d0(0x293),_0x14e0dd,_0x1058d0(0xbad),_0x5a5601),_0xa7652b[_0x1058d0(0xdc0)]['push']({'role':_0x1058d0(0x815),'senderId':_0x1015de['id'],'timestamp':Date[_0x1058d0(0x144)](),'isOffline':!![],'content':'[AI返回了无法解析的剧本:\x20'+_0x5a5601+']'})):_0x56f09a['src']=_0x375c81[_0x1058d0(0xc18)](_0x3bdb0a);}else{if(_0x1058d0(0xcd8)===_0x1058d0(0x9dc))_0x288cf9();else{const {bubbles:_0x23e674,schedules:_0x1198b1}=_0x1393f6(_0x5a5601),_0x25bc26=_0x23e674[_0x1058d0(0x17f)](_0x4f4aeb=>{const _0x3cb93a=_0x1058d0;if(_0x3cb93a(0x400)!==_0x3cb93a(0x400))_0x33226a['stopPropagation'](),_0x7c21f2[_0x3cb93a(0x970)][_0x3cb93a(0x401)](_0x3cb93a(0x9cb)),_0xfb89b0[_0x3cb93a(0x970)]['toggle'](_0x3cb93a(0x5b5));else{const _0x7d7385=_0x4f4aeb['trim'](),_0x400218=_0x7d7385[_0x3cb93a(0x41c)](/^\[sticker:(.*?)\]$/),_0x196047=_0x7d7385['match'](/^\[transfer:([\d.]+)\|(.*?)\]$/),_0x17ed10=_0x7d7385[_0x3cb93a(0x41c)](/^\[music:(.*?)\|(.*?)\]$/),_0x571d79=_0x7d7385[_0x3cb93a(0x41c)](/^\[create_event:(.*?)\|(.*?)\|(.*?)\]$/),_0x59a4f5=_0x7d7385[_0x3cb93a(0x41c)](/^\[html\]([\s\S]*)\[\/html\]$/);if(_0x59a4f5){if('gtfHk'===_0x3cb93a(0xbf5))return{'type':_0x3cb93a(0x5d0),'content':_0x59a4f5[0x1]['trim']()};else _0x322b1e=_0x1a6e01[_0x3cb93a(0x180)](_0x57de35['getItem'](_0x585ecf)||'{}');}else{if(_0x17ed10)return{'type':_0x3cb93a(0x784),'songName':_0x17ed10[0x1]['trim'](),'artist':_0x17ed10[0x2][_0x3cb93a(0x8eb)]()};else{if(_0x400218){if(_0x3cb93a(0x19b)===_0x3cb93a(0x19b))return{'type':_0x3cb93a(0x83a),'name':_0x400218[0x1][_0x3cb93a(0x8eb)]()};else _0x2ed8c0['addEventListener'](_0x3cb93a(0x493),_0x53cf07);}else{if(_0x571d79)return{'type':'create_event','eventType':_0x571d79[0x1]['trim'](),'eventDate':_0x571d79[0x2]['trim'](),'eventContent':_0x571d79[0x3][_0x3cb93a(0x8eb)]()};else{if(_0x196047){const _0x4e62f9=parseFloat(_0x196047[0x1]),_0x3ed5cc=_0x196047[0x2][_0x3cb93a(0x8eb)](),_0x455551=_0x2e35cc(_0xa7652b[_0x3cb93a(0xd5b)]);let _0xba22b4=null;if(_0x3ed5cc===_0x455551['name'])_0xba22b4=_0x455551['id'];else{const _0x6ccda=_0x41c782();if(_0x6ccda[_0x3cb93a(0x45c)]===_0x3cb93a(0x4b5)){if(_0x3cb93a(0x34f)!==_0x3cb93a(0x1c1)){const _0xf90204=_0xa7652b[_0x3cb93a(0xbfe)]['find'](_0x21fff2=>_0x6ccda['participantIds'][_0x3cb93a(0x5c0)](_0x21fff2['id'])&&_0x21fff2[_0x3cb93a(0xe79)]===_0x3ed5cc);if(_0xf90204)_0xba22b4=_0xf90204['id'];}else _0x12ae7d[_0x3cb93a(0x3e4)][_0x3cb93a(0x1df)]=_0x3cb93a(0x4a6);}}if(_0xba22b4)return{'type':_0x3cb93a(0x99f),'amount':_0x4e62f9,'recipientId':_0xba22b4,'senderId':_0x1015de['id']};else return{'type':_0x3cb93a(0x51c),'content':_0x3cb93a(0x30c)+_0x3ed5cc+_0x3cb93a(0xf2)};}else{if(_0x7d7385){if(_0x3cb93a(0x2cb)===_0x3cb93a(0x2cb))return{'type':_0x3cb93a(0x51c),'content':_0x7d7385};else{const _0x5796dc={'id':_0x3cb93a(0x4a2)+_0x4f0925[_0x3cb93a(0x144)](),'name':_0x3cab5c[_0x3cb93a(0x8eb)]()};_0x166092[_0x3cb93a(0x22a)][_0x3cb93a(0x214)](_0x5796dc),_0x54bd5d[_0x3cb93a(0x365)]=_0x5796dc['id'],_0x481d14(),_0x256db6();}}}}}}}return null;}})[_0x1058d0(0x1a9)](Boolean),_0x391edb=async _0x4363ad=>{const _0x1db562=_0x1058d0;if(_0x1db562(0xa88)!==_0x1db562(0xc2d)){const _0x419cd2={'role':_0x1db562(0x815),'senderId':_0x1015de['id'],'timestamp':Date[_0x1db562(0x144)](),'isOffline':_0x4f4e4};if(_0x4363ad['type']===_0x1db562(0x784)){if(_0x1db562(0xbfd)==='YKmEK'){const {songName:_0x4872ff,artist:_0x156320}=_0x4363ad;_0x419cd2[_0x1db562(0x45c)]='music',_0x419cd2[_0x1db562(0xb17)]=_0x1db562(0xd41)+_0x4872ff+_0x1db562(0x6d6)+_0x156320+']';try{if(_0x1db562(0xadc)!=='vZVUa')_0x492bf1(_0x5c037e+0x1);else{const _0x417240=await _0x2576ae(_0x4872ff,_0x156320);Object[_0x1db562(0x8b3)](_0x419cd2,{'songName':_0x4872ff,'artist':_0x156320,'coverUrl':_0x417240[_0x1db562(0xdd5)],'playableUrl':_0x417240[_0x1db562(0x17c)]});}}catch(_0x45e407){Object[_0x1db562(0x8b3)](_0x419cd2,{'songName':_0x4872ff,'artist':_0x156320,'coverUrl':null,'playableUrl':null});}}else{const _0x3f40a4=_0x1e2e8c(_0x171739['id']);_0x3f40a4[_0x1db562(0x1dc)](_0x19c90d=>{const _0xca5fc5=_0x1db562;_0x19c90d[_0xca5fc5(0xb9f)]>=_0x4717fb[_0xca5fc5(0x48e)]()&&_0x19c90d[_0xca5fc5(0xab8)]!==_0xca5fc5(0xaae)&&_0x19c90d[_0xca5fc5(0xb17)]&&_0x3d1267['push']({'timestamp':_0x19c90d[_0xca5fc5(0xb9f)],'type':_0x493c1c(_0x3bda60),'content':'['+(_0x19c90d['role']===_0xca5fc5(0xea1)?_0x30574a[_0xca5fc5(0xe79)]:_0x5274ef[_0xca5fc5(0xe79)])+']:\x20'+_0x19c90d[_0xca5fc5(0xb17)]});});}}else{if(_0x4363ad[_0x1db562(0x45c)]==='sticker'){if('uciRO'!==_0x1db562(0x46c)){const _0x160282=_0x30e2ef(_0x104585[_0x1db562(0x9ed)]);_0x160282&&(_0x160282['livestreamSpriteTransform']=_0x173e61,_0x28b9fb(_0x8e36bb[_0x1db562(0x9ed)],_0x1db562(0x177)));}else{const _0x4d1bcb=_0xb4768c['find'](_0x43b6bb=>_0x43b6bb[_0x1db562(0xe79)]===_0x4363ad[_0x1db562(0xe79)]);if(_0x4d1bcb)Object[_0x1db562(0x8b3)](_0x419cd2,{'content':'[AI发送了表情：'+_0x4d1bcb[_0x1db562(0xe79)]+']','displayUrl':_0x4d1bcb[_0x1db562(0x17c)]});else _0x419cd2['content']='[sticker:'+_0x4363ad['name']+']';}}else{if(_0x4363ad[_0x1db562(0x45c)]==='transfer'){const _0x1723eb=_0x4363ad[_0x1db562(0x827)]===_0x2e35cc(_0xa7652b['activeChatId'])['id']?_0x2e35cc(_0xa7652b[_0x1db562(0xd5b)]):_0x1238ea(_0x4363ad['recipientId']);Object[_0x1db562(0x8b3)](_0x419cd2,{'type':_0x1db562(0x99f),'amount':_0x4363ad[_0x1db562(0xd1d)],'recipientId':_0x4363ad[_0x1db562(0x827)],'content':'[AI向\x20'+(_0x1723eb?.[_0x1db562(0xe79)]||'未知')+_0x1db562(0xb90)+_0x4363ad[_0x1db562(0xd1d)]+']'});}else{if(_0x4363ad[_0x1db562(0x45c)]===_0x1db562(0x213)){if(_0x1db562(0xd8c)!==_0x1db562(0x6fb)){const _0x5dfbf7=_0x2e35cc(_0x574d12['id']);if(!_0x5dfbf7||!_0x5dfbf7['id'])return console[_0x1db562(0xc95)](_0x1db562(0x7ae)),null;_0xa7652b[_0x1db562(0x50b)]['push']({'id':_0x1db562(0x91a)+Date[_0x1db562(0x144)](),'date':_0x4363ad[_0x1db562(0x9ce)],'type':_0x4363ad['eventType'],'content':_0x4363ad[_0x1db562(0x159)],'userId':_0x5dfbf7['id'],'createdBy':'ai'}),_0x2e0417(),_0x172357(),_0x10243a();const _0x2398fc=_0x1238ea(_0x1015de['id']);_0x2398fc&&_0x4363ad[_0x1db562(0x987)]==='important'&&_0x198030(_0x1db562(0xcfc)+_0x2398fc[_0x1db562(0xe79)]+'\x20添加了新的纪念日：'+_0x4363ad[_0x1db562(0x159)]);return{'role':_0x1db562(0x815),'senderId':_0x1015de['id'],'timestamp':Date['now'](),'isOffline':_0x4f4e4,'content':null};return{'role':_0x1db562(0x815),'senderId':_0x1015de['id'],'timestamp':Date[_0x1db562(0x144)](),'isOffline':_0x4f4e4,'content':null};}else{const _0x6193e3=_0x165ac8[_0x1db562(0x420)]['filter'](_0x479827=>_0x479827['author']===_0x1db562(0xea1))[_0x1db562(0xa5)]();_0x6193e3&&(_0x484dc5=_0x6193e3['content']);}}else{if(_0x1db562(0x165)===_0x1db562(0x165)){const _0x19b2cc=_0x539549(_0x4363ad[_0x1db562(0xb17)]);Object[_0x1db562(0x8b3)](_0x419cd2,{'content':_0x19b2cc[_0x1db562(0xb17)],'quotedMessage':_0x19b2cc[_0x1db562(0x115)]});}else _0x2a8f88['spriteTransform']=_0x32dce8,_0x2aa02c(_0x1992c6[_0x1db562(0xbfa)],_0x1db562(0x177));}}}}return _0x419cd2;}else{if(!_0x2c1a52)return;const _0x491702=_0x3e6454(_0x2aa852[_0x1db562(0x473)](_0x1db562(0xaf1))[_0x1db562(0x2d4)]),_0x254ac3=_0x43be5b(_0x338976[_0x1db562(0x473)]('livestream-sprite-slider-y')[_0x1db562(0x2d4)]),_0x3f8512=_0x3e903f(_0x2028b5['getElementById'](_0x1db562(0x4d2))[_0x1db562(0x2d4)])/0x64,_0x406798=_0x4b5d7a[_0x1db562(0x473)](_0x1db562(0xaaf));_0x406798&&(_0x406798[_0x1db562(0x3e4)]['height']=0x55*_0x3f8512+'%',_0x406798[_0x1db562(0x3e4)]['width']=0x55*_0x3f8512+'%',_0x406798[_0x1db562(0x3e4)][_0x1db562(0x855)]=_0x491702+'%',_0x406798[_0x1db562(0x3e4)][_0x1db562(0x5d8)]=_0x254ac3+'%',_0x406798['style'][_0x1db562(0x3b7)]='translate(-50%,\x20-100%)');}},_0x57a173=await Promise[_0x1058d0(0xc1d)](_0x25bc26[_0x1058d0(0x17f)](_0x391edb));for(const _0x402562 of _0x57a173){if(_0x1058d0(0x981)!==_0x1058d0(0xea2)){if(_0x402562[_0x1058d0(0x45c)]===_0x1058d0(0x5d0))_0xbe0f59(_0x402562,-0x1),_0x37b09b[_0x1058d0(0xc55)]=_0x37b09b[_0x1058d0(0x251)];else(_0x402562[_0x1058d0(0xb17)]||_0x402562['displayUrl']||_0x402562[_0x1058d0(0x45c)]==='music'||_0x402562['quotedMessage'])&&(await new Promise(_0x599638=>setTimeout(_0x599638,0x12c+Math['random']()*0x190)),_0xa7652b[_0x1058d0(0xdc0)]['push'](_0x402562),_0xbe0f59(_0x402562,_0xa7652b['conversationHistory'][_0x1058d0(0x893)]-0x1),_0x37b09b['scrollTop']=_0x37b09b[_0x1058d0(0x251)]);}else{const _0x29e3e0=_0x524e40[0x0][_0x1058d0(0x8eb)](),_0x22052c=_0x509cd4[0x1][_0x1058d0(0x8eb)]()[_0x1058d0(0x833)](/^"|"$/g,'');_0x1bc313[_0x29e3e0]=_0x22052c;}}}}return _0x2c2648(),!![];}catch(_0x5b6262){if(_0x1058d0(0x25e)===_0x1058d0(0xca0))_0x509fd5(![]),_0xe477ae[_0x1058d0(0x89f)]=![];else{if(_0x5b6262['name']!==_0x1058d0(0x983)){if(_0x1058d0(0x625)===_0x1058d0(0x625)){console[_0x1058d0(0xc95)]('生成失败:\x20',_0x5b6262);const _0x4c7c90={'role':_0x1058d0(0x815),'content':_0x1058d0(0xd33)+_0x5b6262[_0x1058d0(0xe32)],'senderId':_0x1015de['id'],'isOffline':_0x4f4e4};_0xa7652b[_0x1058d0(0xdc0)][_0x1058d0(0x214)](_0x4c7c90),_0x42b406();}else _0x773dbc[_0x1058d0(0xabb)]=![];}return![];}}finally{_0x58e0d1(![]),_0xa7652b[_0x1058d0(0x89f)]=![],_0x42b406();}}async function _0x4c0102(){const _0x35a7e2=_0x57ab4d;if(_0x35a7e2(0xe0b)==='Snehb'){const _0x4f5ae4=_0x41c782();if(!_0x4f5ae4||_0x4f5ae4[_0x35a7e2(0x45c)]!==_0x35a7e2(0x722)){if(_0x35a7e2(0x6f8)!==_0x35a7e2(0x8de)){_0x198030(_0x35a7e2(0xa54));return;}else _0x429f66[_0x35a7e2(0xc95)](_0x35a7e2(0x8b9));}if(_0xa7652b['isGenerating']){if(_0x35a7e2(0xa7d)!==_0x35a7e2(0xa7d))_0x4ecdac['posts'][_0x35a7e2(0x1dc)](_0xb39327=>{const _0x3b81e2=_0x35a7e2;_0x24bc33(_0xb39327,'image'),_0x26ef74(_0xb39327,_0x3b81e2(0x4f6));});else{_0x198030('我正在说话呢，别打岔！');return;}}const _0x37049e=await _0x410108(_0x35a7e2(0xae9));if(!_0x37049e)return;_0x27a15c(!![],'正在连接全域记忆数据库...'),_0x64eac8[_0x35a7e2(0x2d4)]='',_0x4adeda[_0x35a7e2(0x970)][_0x35a7e2(0xddb)](_0x35a7e2(0x348)),_0xa7652b[_0x35a7e2(0x89f)]=!![];try{if(_0x35a7e2(0x66f)!==_0x35a7e2(0x66f))_0x24a231(_0x279dfb[_0x35a7e2(0x402)]),_0x5a20a5[_0x35a7e2(0x50e)](_0x35a7e2(0x241),_0x13b1c4),_0x47ab21[_0x35a7e2(0x50e)](_0x35a7e2(0x718),_0x150d7c),_0xeceb0c[_0x35a7e2(0x50e)](_0x35a7e2(0xcf0),_0x1260b7),_0x58ff47['removeEventListener'](_0x35a7e2(0x1d3),_0x5a00ba);else{const _0xc740bc=_0x1238ea(_0x4f5ae4[_0x35a7e2(0x584)][0x0]),_0x434002=_0x2e35cc(_0x4f5ae4['id']),_0x4ace46=_0x3828cf(_0x4f5ae4['id']);if(_0x4ace46[_0x35a7e2(0x893)]===0x0){if(_0x35a7e2(0xddd)===_0x35a7e2(0xddd)){_0x64eac8[_0x35a7e2(0x2d4)]=_0x35a7e2(0x51d);return;}else _0x45bca2(_0x35a7e2(0xc02));}const _0x14177d=new Date(_0x4ace46[0x0][_0x35a7e2(0xb9f)]);_0x14177d['setHours'](0x0,0x0,0x0,0x0),_0x27a15c(!![],_0x35a7e2(0x541));let _0x5444b2=[];_0xa7652b['chats'][_0x35a7e2(0x1dc)](_0x1facc5=>{const _0x19795c=_0x35a7e2;if(_0x1facc5[_0x19795c(0x584)]['includes'](_0xc740bc['id'])){if('gGaOZ'===_0x19795c(0x794))_0x4332a6[_0x19795c(0x682)]=_0x3064e3,_0x5236fc(_0x4bc848['activeLivestreamCharId'],'normal');else{const _0x58d86e=_0x3828cf(_0x1facc5['id']);_0x58d86e['forEach'](_0x56a15b=>{const _0x2e8226=_0x19795c;if(_0x2e8226(0x6da)===_0x2e8226(0x6da)){if(_0x56a15b[_0x2e8226(0xb9f)]>=_0x14177d[_0x2e8226(0x48e)]()&&_0x56a15b[_0x2e8226(0xab8)]!==_0x2e8226(0xaae)&&_0x56a15b[_0x2e8226(0xb17)]){if(_0x2e8226(0x340)!==_0x2e8226(0x340)){const _0x91325a=_0x456880[_0x2e8226(0x473)]('lock-screen-overlay');_0x91325a&&(_0x91325a['classList'][_0x2e8226(0x702)](_0x2e8226(0xae6)),_0x91325a[_0x2e8226(0x3e4)][_0x2e8226(0x3b7)]='',_0x91325a[_0x2e8226(0x3e4)][_0x2e8226(0x5cf)]='');}else _0x5444b2[_0x2e8226(0x214)]({'timestamp':_0x56a15b[_0x2e8226(0xb9f)],'type':_0x2f5518(_0x1facc5),'content':'['+(_0x56a15b[_0x2e8226(0xab8)]===_0x2e8226(0xea1)?_0x434002[_0x2e8226(0xe79)]:_0xc740bc[_0x2e8226(0xe79)])+_0x2e8226(0x7ec)+_0x56a15b['content']});}}else{const _0x495766=_0xc6388b(_0x25c58f)['trim']();if(_0x495766[_0x2e8226(0x324)](_0x2e8226(0x3c2))&&_0x495766[_0x2e8226(0x6ec)](_0x2e8226(0x28d)))return[_0x495766];const _0x429722=_0x495766[_0x2e8226(0x8ff)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x2e8226(0x17f)](_0x5b8c0c=>_0x5b8c0c[_0x2e8226(0x8eb)]())[_0x2e8226(0x1a9)](_0x387d4d);if(_0x429722[_0x2e8226(0x893)]>0x0)return _0x429722[_0x2e8226(0x1de)](0x0,0xc);return[_0x495766]['filter'](_0x4f7610);}});}}});const _0x5a3f84=_0xa7652b[_0x35a7e2(0x65b)][_0x35a7e2(0x394)](_0xd9982e=>_0xd9982e[_0x35a7e2(0x3b1)]===_0xc740bc['id']);if(_0x5a3f84&&_0x5a3f84['entries']){if('zxCTB'===_0x35a7e2(0x94d)){const _0x13ab75=_0x3ddd73[_0x35a7e2(0x473)](_0x35a7e2(0x9ba)),_0x53d76a=_0x24bf01[_0x35a7e2(0x473)](_0x35a7e2(0xf5)),_0x20068b=new _0x268869();_0x20068b['setHours'](0x0,0x0,0x0,0x0);const _0x3713a2=_0x3e48bb[_0x35a7e2(0x50b)][_0x35a7e2(0x1a9)](_0x5b519e=>_0x5b519e['type']===_0x35a7e2(0x995)&&new _0x3af880(_0x5b519e['date']+_0x35a7e2(0x6e1))>=_0x20068b)[_0x35a7e2(0x84c)]((_0x161b07,_0x49d9cb)=>new _0x550062(_0x161b07[_0x35a7e2(0x382)])-new _0x4c1d83(_0x49d9cb[_0x35a7e2(0x382)]));if(_0x3713a2[_0x35a7e2(0x893)]>0x0){const _0x169f0a=_0x3713a2[0x0],_0x291de=new _0x53e44f(_0x169f0a[_0x35a7e2(0x382)]+_0x35a7e2(0x6e1)),_0x49bb55=_0x291de-_0x20068b,_0x5d842e=_0x105857[_0x35a7e2(0x54d)](_0x49bb55/(0x3e8*0x3c*0x3c*0x18));_0x13ab75[_0x35a7e2(0x226)]=_0x35a7e2(0x9b5)+_0x169f0a['content']+'」',_0x53d76a[_0x35a7e2(0x6f0)]=_0x35a7e2(0x4fa)+_0x5d842e+_0x35a7e2(0x99d);}else _0x13ab75['textContent']=_0x35a7e2(0xa09),_0x53d76a['innerHTML']=_0x35a7e2(0x51f);}else _0x5a3f84['entries'][_0x35a7e2(0x1dc)](_0x968ad7=>{const _0x2d5345=_0x35a7e2;_0x968ad7[_0x2d5345(0xb9f)]>=_0x14177d['getTime']()&&_0x5444b2[_0x2d5345(0x214)]({'timestamp':_0x968ad7[_0x2d5345(0xb9f)],'type':'交换日记','content':'['+(_0x968ad7['author']===_0x2d5345(0xea1)?_0x434002[_0x2d5345(0xe79)]:_0xc740bc[_0x2d5345(0xe79)])+']:\x20'+_0x968ad7['content']});});}const _0x11711d=['gallery','whispers',_0x35a7e2(0x492),_0x35a7e2(0x42b),_0x35a7e2(0xae3),_0x35a7e2(0x65c),_0x35a7e2(0x8d0)];for(const _0x1a4dbc of _0x11711d){const _0x1543ba=_0x35a7e2(0x882)+_0xc740bc['id']+'_'+_0x1a4dbc,_0xf4cd01=await _0x3d41c4(_0x1543ba);if(_0xf4cd01)try{if(_0x35a7e2(0x720)!==_0x35a7e2(0xd5f)){let _0x3fcae4=JSON[_0x35a7e2(0x180)](_0xf4cd01);Array[_0x35a7e2(0x8aa)](_0x3fcae4)&&_0x3fcae4[_0x35a7e2(0x1dc)](_0x4e98f1=>{const _0x51148c=_0x35a7e2,_0x2528a9=new Date(_0x4e98f1[_0x51148c(0xb9f)]||_0x4e98f1[_0x51148c(0x42c)])[_0x51148c(0x48e)]();_0x2528a9>=_0x14177d[_0x51148c(0x48e)]()&&_0x5444b2['push']({'timestamp':_0x2528a9,'type':_0x51148c(0xe73)+_0x1a4dbc+']','content':JSON[_0x51148c(0xaf6)](_0x4e98f1)});});}else _0x224363[_0x35a7e2(0x214)](..._0x32946e(_0x915861));}catch(_0x2d4067){}}const _0x595407=_0xa7652b['livestreamReplays'][_0xc740bc['id']]||[];_0x595407[_0x35a7e2(0x1dc)](_0x3993a9=>{const _0x2b33ae=_0x35a7e2,_0x35866f=_0x3993a9[_0x2b33ae(0x41c)](/start_time:\s*"?([^"\n]+)"?/);if(_0x35866f){const _0x1d24d9=new Date(_0x35866f[0x1])[_0x2b33ae(0x48e)]();_0x1d24d9&&_0x1d24d9>=_0x14177d[_0x2b33ae(0x48e)]()&&_0x5444b2[_0x2b33ae(0x214)]({'timestamp':_0x1d24d9,'type':_0x2b33ae(0xa86),'content':_0x3993a9});}});if(_0x5444b2[_0x35a7e2(0x893)]===0x0){if('xgCyV'!==_0x35a7e2(0x3d9))_0x121535[_0x35a7e2(0x706)]=_0x3a61d2?_0x41379d['createObjectURL'](_0x36d262):_0x55e08c;else{_0x64eac8['value']='#\x20在指定时间线内没有发现任何可供总结的记忆。';return;}}_0x27a15c(!![],_0x35a7e2(0x3ec)),_0x5444b2[_0x35a7e2(0x84c)]((_0x323a3f,_0x25d3dc)=>_0x323a3f[_0x35a7e2(0xb9f)]-_0x25d3dc['timestamp']);const _0x4f4718=_0x5444b2[_0x35a7e2(0x59d)]((_0x205e55,_0x565e73)=>{const _0x382b6d=_0x35a7e2,_0x51071c=new Date(_0x565e73[_0x382b6d(0xb9f)])[_0x382b6d(0xa8d)]()[_0x382b6d(0x8ff)]('T')[0x0];return!_0x205e55[_0x51071c]&&(_0x205e55[_0x51071c]=[]),_0x205e55[_0x51071c][_0x382b6d(0x214)](_0x382b6d(0x90b)+_0x565e73['type']+']\x20'+_0x565e73[_0x382b6d(0xb17)]),_0x205e55;},{});let _0x487e0c='';for(const _0x543df3 in _0x4f4718){_0x487e0c+='\x0a##\x20日期:\x20'+_0x543df3+'\x0a'+_0x4f4718[_0x543df3][_0x35a7e2(0x332)]('\x0a');}_0x27a15c(!![],'正在整理记忆...');const _0x472b9f=_0x35a7e2(0xd02)+_0xc740bc[_0x35a7e2(0xe79)]+'”。你正在回忆你和“'+_0x434002['name']+_0x35a7e2(0x683)+_0xc740bc[_0x35a7e2(0xe79)]+'做了什么”、“'+_0x434002['name']+'说了什么”）。\x0a\x20\x20\x20\x20-\x20你【绝对禁止】使用中立、客观、AI或档案管理员的语气。\x0a\x20\x20\x20\x20-\x20你的产出【必须】听起来像是“我”（'+_0xc740bc[_0x35a7e2(0xe79)]+_0x35a7e2(0x940)+_0xc740bc[_0x35a7e2(0xe79)]+_0x35a7e2(0x714)+_0x434002['name']+_0x35a7e2(0x6aa)+_0x434002[_0x35a7e2(0xe79)]+_0x35a7e2(0xe3d)+_0x434002[_0x35a7e2(0xe79)]+_0x35a7e2(0x883)+_0x434002[_0x35a7e2(0xe79)]+_0x35a7e2(0x433)+_0x434002['name']+_0x35a7e2(0xbe2)+_0xc740bc['name']+_0x35a7e2(0x957),_0x3800ce=[{'role':_0x35a7e2(0xaae),'content':_0x472b9f},{'role':'user','content':_0x35a7e2(0xba0)+_0x487e0c}],_0x25d81f=await _0x56b292(_0x3800ce);_0x64eac8[_0x35a7e2(0x2d4)]=_0x25d81f||_0x35a7e2(0x6bf),_0x64eac8['scrollTop']=0x0;}}catch(_0x85e482){console[_0x35a7e2(0xc95)]('深度总结失败:',_0x85e482),_0x64eac8['value']=_0x35a7e2(0x133)+_0x85e482[_0x35a7e2(0xe32)];}finally{_0x35a7e2(0xc22)!==_0x35a7e2(0x182)?(_0x27a15c(![]),_0xa7652b[_0x35a7e2(0x89f)]=![]):_0x35177f[_0x35a7e2(0x473)](_0x35a7e2(0x20d))[_0x35a7e2(0x3e4)]['setProperty'](_0x35a7e2(0x297),_0x35a7e2(0x548)+_0x4202bc+')');}}else{const _0x4d42be=_0x5990e1[_0x35a7e2(0x180)](_0x545f41);_0x4d42be['candidates']&&_0x4d42be[_0x35a7e2(0x184)][0x0]&&_0x4d42be[_0x35a7e2(0x184)][0x0]['content']&&_0x4d42be['candidates'][0x0][_0x35a7e2(0xb17)][_0x35a7e2(0x7d5)]&&_0x4d42be[_0x35a7e2(0x184)][0x0][_0x35a7e2(0xb17)]['parts'][0x0]&&(_0x1a7b5a+=_0x4d42be[_0x35a7e2(0x184)][0x0][_0x35a7e2(0xb17)][_0x35a7e2(0x7d5)][0x0][_0x35a7e2(0x51c)]||''),_0x4d42be[_0x35a7e2(0x17a)]&&(_0x24b8e8=_0x4d42be[_0x35a7e2(0x17a)],_0x26d91c[_0x35a7e2(0x6e4)](_0x35a7e2(0x3dd),_0x1af076));}}async function _0x4821dd(){const _0x1453c7=_0x57ab4d;console['log']('---\x20开始AI回复流程\x20---');if(!_0xa7652b[_0x1453c7(0xb82)]['endpoint']||!_0xa7652b[_0x1453c7(0xb82)][_0x1453c7(0x834)]||!_0xa7652b['apiSettings'][_0x1453c7(0x7fa)]){_0x198030(_0x1453c7(0x810));return;}const _0x116e1c=_0xa7652b['conversationHistory']['at'](-0x1)?.[_0x1453c7(0xab8)]==='user';if(!_0x116e1c||_0xa7652b[_0x1453c7(0x89f)])return;const _0x556521=_0x41c782();if(!_0x556521)return;_0xa7652b[_0x1453c7(0x89f)]=!![],_0x58e0d1(!![]);try{if('JzZDP'==='JzZDP'){if(_0x556521[_0x1453c7(0x45c)]===_0x1453c7(0x722)){const _0x3d7b1f=_0x1238ea(_0x556521[_0x1453c7(0x584)][0x0]);console[_0x1453c7(0x6e4)](_0x1453c7(0xc87));if(_0x3d7b1f)await _0x2be474(_0x3d7b1f,{'force':!![]});}else{const _0x3be86e=await _0x1933b7();if(_0x3be86e&&_0x3be86e[_0x1453c7(0x694)]?.[_0x1453c7(0x893)]){if('ByMsH'===_0x1453c7(0x24c))await _0x148420(_0x3be86e);else{const _0x43f9e3=_0x4a1ba2(_0x212088[_0x1453c7(0xb17)]??_0x447269[_0x1453c7(0x51c)]??_0x50d029[_0x1453c7(0xe32)]??'')[_0x1453c7(0x8eb)]();if(_0x43f9e3)_0x364b3c[_0x1453c7(0x694)][_0x1453c7(0x214)]({'senderId':_0x439792['id'],'kind':_0x1453c7(0x51c),'content':_0x43f9e3});}}else{console[_0x1453c7(0x591)](_0x1453c7(0x111));const _0x5d92ea=_0x556521[_0x1453c7(0x584)][_0x1453c7(0x17f)](_0x1238ea)[_0x1453c7(0x1a9)](Boolean);if(!_0x5d92ea[_0x1453c7(0x893)])return;let _0x1849d4=0x0;for(const _0x580dd6 of _0x5d92ea){_0x2be474(_0x580dd6,{'force':!![],'delayMs':_0x1849d4}),_0x1849d4+=0x1f4;}}}}else _0x4e0cf1[_0x1453c7(0xc95)](_0x1453c7(0xb6),_0x5c4d00);}catch(_0x29e7a5){_0x29e7a5[_0x1453c7(0xe79)]!==_0x1453c7(0x983)&&(_0x1453c7(0xa33)!==_0x1453c7(0xa33)?_0xc8bc29+='<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x20padding-top:\x2020px;\x22>没有对话记录。</p>':(console[_0x1453c7(0xc95)](_0x1453c7(0x90e),_0x29e7a5),_0xbe0f59({'role':_0x1453c7(0x815),'content':_0x1453c7(0xd33)+_0x29e7a5[_0x1453c7(0xe32)]},_0xa7652b[_0x1453c7(0xdc0)][_0x1453c7(0x893)]-0x1)));}finally{_0xa7652b[_0x1453c7(0x89f)]=![],_0x58e0d1(![]);}}function _0x11121c(_0x99682e,_0x40a653){const _0x2ef225=_0x57ab4d,_0x133e47=_0x40a653[_0x2ef225(0x52f)](),_0x38fffd=_0x99682e['toLowerCase']();if(_0x133e47[_0x2ef225(0x324)](_0x2ef225(0x461)))return'anthropic';if(_0x38fffd['includes'](_0x2ef225(0x896)))return _0x2ef225(0x502);if(_0x38fffd[_0x2ef225(0x5c0)]('googleapis.com'))return _0x2ef225(0x20a);if(_0x133e47[_0x2ef225(0x324)](_0x2ef225(0x20a)))return _0x2ef225(0x20a);return _0x2ef225(0xe6b);}async function _0x56b292(_0x3f1039,_0x1cf7b8={}){const _0x5becb2=_0x57ab4d;if('yZxsk'!==_0x5becb2(0xafc)){_0xa7652b[_0x5becb2(0x858)]&&('eWhib'!==_0x5becb2(0xb86)?_0xa7652b[_0x5becb2(0x858)][_0x5becb2(0x760)](_0x5becb2(0x444)):(_0x23501c[_0x5becb2(0xdaf)]=![],_0x4eab7f[_0x5becb2(0x970)][_0x5becb2(0x702)]('has-new')));_0xa7652b['currentAbortController']=new AbortController();const _0x4879f4=_0xa7652b[_0x5becb2(0x858)][_0x5becb2(0xdb3)],{endpoint:_0x19008d,key:_0x589ad2,model:_0x320585}=_0xa7652b[_0x5becb2(0xb82)],_0x9c763f=!!_0x1cf7b8[_0x5becb2(0x102)],_0x2a681b=_0x11121c(_0x19008d,_0x320585);console['log'](_0x5becb2(0x577)+_0x2a681b);let _0x26fb8a='';try{switch(_0x2a681b){case'anthropic':{const _0x5c306a=_0x500681(_0x589ad2),_0x359a17=_0x3f1039[_0x5becb2(0x394)](_0x30ff00=>_0x30ff00['role']===_0x5becb2(0xaae))?.['content']||'',_0x467df9=_0x3f1039['filter'](_0x1b880a=>_0x1b880a[_0x5becb2(0xab8)]!=='system'),_0x7bca7f={'model':_0x320585,'system':_0x359a17,'messages':_0x467df9[_0x5becb2(0x17f)](_0x592f54=>({'role':_0x592f54[_0x5becb2(0xab8)],'content':[{'type':_0x5becb2(0x51c),'text':_0x592f54[_0x5becb2(0xb17)]}]})),'max_tokens':0x2000},_0x4cb7fc=await fetch(_0x19008d,{'method':_0x5becb2(0x4e1),'headers':{'Content-Type':_0x5becb2(0xb61),'x-api-key':_0x5c306a,'anthropic-version':_0x5becb2(0x110)},'body':JSON[_0x5becb2(0xaf6)](_0x7bca7f),'signal':_0x4879f4});if(!_0x4cb7fc['ok']){if(_0x5becb2(0xb8d)!=='hxZOm'){const _0xe04232=await _0x4cb7fc[_0x5becb2(0x102)]()[_0x5becb2(0xbb7)](()=>({}));throw new Error(_0x5becb2(0xd0e)+_0x4cb7fc['status']+_0x5becb2(0x6d6)+(_0xe04232[_0x5becb2(0xc95)]?.[_0x5becb2(0xe32)]||_0x4cb7fc[_0x5becb2(0x8bc)]));}else{const _0x232fc7=_0x3af181[_0x5becb2(0xb1e)][_0x5becb2(0xd4e)]();_0x301d6f[_0x5becb2(0x226)]=_0x232fc7[_0x5becb2(0x9a4)]===_0x5becb2(0xd5a)?'旁白':_0x232fc7['speaker'],_0x4a1453[_0x5becb2(0x226)]=_0x232fc7[_0x5becb2(0x5b1)],_0x232fc7['speaker']!==_0x5becb2(0xd5a)&&_0x23cccb(_0x31f2fb['activeMeetingCharId'],_0x232fc7['emotion']);}}const _0x2754f3=await _0x4cb7fc[_0x5becb2(0x102)]();_0x26fb8a=_0x2754f3[_0x5becb2(0xb17)]?.[0x0]?.[_0x5becb2(0x51c)]||'';if(_0x2754f3[_0x5becb2(0xa34)]){const _0x147270={'promptTokens':_0x2754f3[_0x5becb2(0xa34)]['input_tokens']||0x0,'completionTokens':_0x2754f3[_0x5becb2(0xa34)][_0x5becb2(0xd8b)]||0x0,'totalTokens':(_0x2754f3['usage'][_0x5becb2(0x28c)]||0x0)+(_0x2754f3[_0x5becb2(0xa34)][_0x5becb2(0xd8b)]||0x0),'timestamp':Date[_0x5becb2(0x144)](),'chatId':_0xa7652b[_0x5becb2(0xd5b)],'model':_0x320585};_0xa7652b[_0x5becb2(0xba4)]['currentChat']=_0x147270,_0xa7652b['tokenStats'][_0x5becb2(0x692)][_0x5becb2(0x214)](_0x147270),_0xa7652b[_0x5becb2(0xba4)]['history'][_0x5becb2(0x893)]>0x64&&_0xa7652b[_0x5becb2(0xba4)][_0x5becb2(0x692)][_0x5becb2(0xd4e)]();}break;}case _0x5becb2(0x20a):{const _0x45bbf8=_0x500681(_0x589ad2),_0x554b24=_0x19008d[_0x5becb2(0x5c0)](_0x5becb2(0xa7)),_0x4f4209=_0x16f725=>{const _0x2a04a6=_0x5becb2,_0x115f3c=[];if(_0x16f725['content'])_0x115f3c[_0x2a04a6(0x214)]({'text':_0x16f725[_0x2a04a6(0xb17)]});if(_0x16f725['image']){if(_0x2a04a6(0xca5)===_0x2a04a6(0x398)){let _0x1818e8=null;const _0x11b4be=_0x1575e4[_0x2a04a6(0x4ec)][_0x2a04a6(0x1a9)](_0x5d31c9=>_0x5d31c9[_0x2a04a6(0x584)][_0x2a04a6(0x5c0)](_0x490078));for(const _0x5c29cc of _0x11b4be){const _0x481918=_0x24337b(_0x5c29cc['id']);if(_0x481918&&_0x481918['length']>0x0){const _0xe6711f=_0x481918[_0x481918[_0x2a04a6(0x893)]-0x1];(!_0x1818e8||_0xe6711f['timestamp']>_0x1818e8[_0x2a04a6(0xb9f)])&&(_0x1818e8=_0xe6711f);}}return _0x1818e8;}else{const _0x1379cf=_0x16f725[_0x2a04a6(0x72d)][_0x2a04a6(0x8ff)](',')[0x1],_0x5c980d=_0x16f725[_0x2a04a6(0x72d)][_0x2a04a6(0x825)](_0x16f725[_0x2a04a6(0x72d)]['indexOf'](':')+0x1,_0x16f725[_0x2a04a6(0x72d)][_0x2a04a6(0x740)](';'))||_0x2a04a6(0x9f2);_0x115f3c[_0x2a04a6(0x214)]({'inline_data':{'mime_type':_0x5c980d,'data':_0x1379cf}});}}return _0x115f3c;},_0xa31e79=_0x3f1039[_0x5becb2(0x17f)](_0x4ab450=>({'role':_0x4ab450[_0x5becb2(0xab8)]===_0x5becb2(0x815)?_0x5becb2(0x7fa):_0x4ab450[_0x5becb2(0xab8)]===_0x5becb2(0xaae)?'user':_0x4ab450[_0x5becb2(0xab8)],'parts':_0x4f4209(_0x4ab450)}))[_0x5becb2(0x1a9)](_0x2b089a=>_0x2b089a['parts'][_0x5becb2(0x893)]>0x0),_0x584fb6={'contents':_0xa31e79};_0x9c763f&&_0x554b24&&(_0x584fb6[_0x5becb2(0x186)]={'response_mime_type':'application/json'});const _0x4abc99=_0x19008d+_0x5becb2(0x8ca)+_0x320585+':streamGenerateContent?key='+_0x45bbf8+_0x5becb2(0x314),_0x13fcb6=await fetch(_0x4abc99,{'method':_0x5becb2(0x4e1),'headers':{'Content-Type':_0x5becb2(0xb61)},'body':JSON[_0x5becb2(0xaf6)](_0x584fb6),'signal':_0x4879f4});if(!_0x13fcb6['ok'])throw new Error(_0x5becb2(0xdff)+_0x13fcb6[_0x5becb2(0xad6)]);const _0xaf6c39=_0x13fcb6['body'][_0x5becb2(0x4c0)](),_0x13df0e=new TextDecoder();let _0x24e358='',_0x5d090e=null;while(!![]){if(_0x4879f4[_0x5becb2(0xcf1)]){console[_0x5becb2(0x6e4)]('Gemini\x20stream\x20reading\x20aborted.'),_0xaf6c39[_0x5becb2(0x49a)]();break;}const {done:_0x158467,value:_0x3a5d92}=await _0xaf6c39[_0x5becb2(0x7f0)]();if(_0x158467)break;const _0x2d5ea1=_0x13df0e[_0x5becb2(0x6d2)](_0x3a5d92,{'stream':!![]}),_0x1819e7=_0x2d5ea1[_0x5becb2(0x8ff)]('\x0a')[_0x5becb2(0x1a9)](_0x415cb0=>_0x415cb0['trim']()[_0x5becb2(0x324)](_0x5becb2(0x23d)));for(const _0x477229 of _0x1819e7){const _0x25ada4=_0x477229[_0x5becb2(0x833)](_0x5becb2(0xcdd),'');if(_0x25ada4===_0x5becb2(0x8ab))break;try{const _0x528dea=JSON[_0x5becb2(0x180)](_0x25ada4);_0x528dea[_0x5becb2(0x184)]&&_0x528dea[_0x5becb2(0x184)][0x0]&&_0x528dea[_0x5becb2(0x184)][0x0][_0x5becb2(0xb17)]&&_0x528dea[_0x5becb2(0x184)][0x0][_0x5becb2(0xb17)]['parts']&&_0x528dea['candidates'][0x0][_0x5becb2(0xb17)]['parts'][0x0]&&(_0x5becb2(0x975)!==_0x5becb2(0x975)?(_0x151643[_0x5becb2(0x226)]=_0x25d4ee[_0x5becb2(0x5b1)],_0x3a32f8(_0x550746,_0xc8cea[_0x5becb2(0x3a1)])):_0x24e358+=_0x528dea[_0x5becb2(0x184)][0x0]['content'][_0x5becb2(0x7d5)][0x0][_0x5becb2(0x51c)]||''),_0x528dea[_0x5becb2(0x17a)]&&(_0x5d090e=_0x528dea[_0x5becb2(0x17a)],console[_0x5becb2(0x6e4)]('Gemini\x20usage\x20data:',_0x5d090e));}catch(_0x37e6db){console[_0x5becb2(0x591)](_0x5becb2(0xdae),_0x37e6db);}}}_0x26fb8a=_0x24e358;if(_0x5d090e){const _0x4a83e5={'promptTokens':_0x5d090e[_0x5becb2(0x323)]||0x0,'completionTokens':_0x5d090e['candidatesTokenCount']||0x0,'totalTokens':_0x5d090e['totalTokenCount']||0x0,'timestamp':Date[_0x5becb2(0x144)](),'chatId':_0xa7652b['activeChatId'],'model':_0x320585};_0xa7652b[_0x5becb2(0xba4)][_0x5becb2(0x468)]=_0x4a83e5,_0xa7652b[_0x5becb2(0xba4)]['history']['push'](_0x4a83e5),_0xa7652b[_0x5becb2(0xba4)][_0x5becb2(0x692)][_0x5becb2(0x893)]>0x64&&_0xa7652b[_0x5becb2(0xba4)][_0x5becb2(0x692)][_0x5becb2(0xd4e)]();}break;}case _0x5becb2(0xe6b):default:{const _0x4a4341=_0x500681(_0x589ad2),_0x3533da=_0x19008d[_0x5becb2(0x833)](/\/+$/,'')+_0x5becb2(0x525),_0x3db2c2=_0x3f1039['map'](_0x5ac18a=>{const _0xf84f08=_0x5becb2;if(_0xf84f08(0x6bb)===_0xf84f08(0x6bb)){if(_0x5ac18a['role']===_0xf84f08(0xea1)&&_0x5ac18a[_0xf84f08(0x72d)]){if(_0xf84f08(0x7e6)!=='aeakh')return{'role':_0xf84f08(0xea1),'content':[{'type':_0xf84f08(0x51c),'text':_0x5ac18a[_0xf84f08(0xb17)]||'\x20'},{'type':_0xf84f08(0x354),'image_url':{'url':_0x5ac18a[_0xf84f08(0x72d)],'detail':_0xf84f08(0x261)}}]};else _0x225a3f['click']();}return{'role':_0x5ac18a[_0xf84f08(0xab8)],'content':_0x5ac18a['content']};}else{const _0xf02e79={'quotedMessage':null,'content':_0x3777f8},_0xa7af6a=_0x5be5d9[_0xf84f08(0x41c)](/^\[引用\|(.*?)\|(.*?)\]\s*/);return _0xa7af6a&&(_0xf02e79[_0xf84f08(0x115)]={'sender':_0xa7af6a[0x1][_0xf84f08(0x8eb)](),'content':_0xa7af6a[0x2]['trim']()},_0xf02e79[_0xf84f08(0xb17)]=_0x19fa76[_0xf84f08(0x825)](_0xa7af6a[0x0][_0xf84f08(0x893)])[_0xf84f08(0x8eb)]()),_0xf02e79;}})[_0x5becb2(0x1a9)](_0x590ba0=>_0x590ba0['content']),_0x2be06f={'model':_0x320585,'messages':_0x3db2c2,'max_tokens':0x2000,'stream':!![],..._0x9c763f?{'response_format':{'type':_0x5becb2(0xc5b)}}:{}},_0x8d937b=await fetch(_0x3533da,{'method':_0x5becb2(0x4e1),'headers':{'Content-Type':_0x5becb2(0xb61),'Authorization':_0x5becb2(0x216)+_0x4a4341},'body':JSON[_0x5becb2(0xaf6)](_0x2be06f),'signal':_0x4879f4});if(!_0x8d937b['ok']){const _0x5bc907=await _0x8d937b[_0x5becb2(0x102)]()['catch'](()=>({}));throw new Error(_0x5becb2(0xb7e)+_0x8d937b['status']+_0x5becb2(0x6d6)+(_0x5bc907[_0x5becb2(0xc95)]?.[_0x5becb2(0xe32)]||_0x8d937b[_0x5becb2(0x8bc)]));}const _0x2163ee=_0x8d937b[_0x5becb2(0x5ef)][_0x5becb2(0x4c0)](),_0xe86ef9=new TextDecoder();let _0x3d61a4='',_0x20c117=null;while(!![]){if(_0x4879f4[_0x5becb2(0xcf1)]){if(_0x5becb2(0x604)===_0x5becb2(0x604)){console[_0x5becb2(0x6e4)]('OpenAI\x20stream\x20reading\x20aborted.'),_0x2163ee[_0x5becb2(0x49a)]();throw new Error(_0x5becb2(0xa03));}else _0x372afe[_0x5becb2(0x63c)][_0x5becb2(0x2d4)]='';}const {done:_0x26717d,value:_0x9a7ba6}=await _0x2163ee[_0x5becb2(0x7f0)]();if(_0x26717d)break;const _0x58f803=_0xe86ef9['decode'](_0x9a7ba6,{'stream':!![]}),_0x132921=_0x58f803[_0x5becb2(0x8ff)]('\x0a');for(const _0x43f130 of _0x132921){if(_0x43f130[_0x5becb2(0x324)]('data:\x20')){const _0xf0d7db=_0x43f130[_0x5becb2(0x825)](0x6);if(_0xf0d7db==='[DONE]')break;try{const _0x4fb51b=JSON['parse'](_0xf0d7db);_0x4fb51b[_0x5becb2(0x4f2)]&&_0x4fb51b[_0x5becb2(0x4f2)][0x0]&&_0x4fb51b[_0x5becb2(0x4f2)][0x0][_0x5becb2(0x93e)]&&(_0x5becb2(0x8a8)===_0x5becb2(0x8a8)?_0x3d61a4+=_0x4fb51b[_0x5becb2(0x4f2)][0x0][_0x5becb2(0x93e)][_0x5becb2(0xb17)]||'':(_0x18618d['style'][_0x5becb2(0x3b7)]=_0x5becb2(0x6c0),_0x2ca7c8[_0x5becb2(0x3e4)][_0x5becb2(0x919)]=_0x5becb2(0x519))),_0x4fb51b[_0x5becb2(0xa34)]&&(_0x20c117=_0x4fb51b[_0x5becb2(0xa34)]);}catch(_0x233434){}}}}_0x26fb8a=_0x3d61a4;if(_0x20c117){const _0x1276e2={'promptTokens':_0x20c117[_0x5becb2(0xe29)]||0x0,'completionTokens':_0x20c117[_0x5becb2(0x2df)]||0x0,'totalTokens':_0x20c117['total_tokens']||0x0,'timestamp':Date['now'](),'chatId':_0xa7652b[_0x5becb2(0xd5b)],'model':_0x320585};_0xa7652b['tokenStats'][_0x5becb2(0x468)]=_0x1276e2,_0xa7652b[_0x5becb2(0xba4)][_0x5becb2(0x692)][_0x5becb2(0x214)](_0x1276e2),_0xa7652b['tokenStats'][_0x5becb2(0x692)][_0x5becb2(0x893)]>0x64&&(_0x5becb2(0x6d4)!==_0x5becb2(0x6d4)?(_0x1076b8['stopPropagation'](),_0x7f1360(_0x37f07b['id'])):_0xa7652b[_0x5becb2(0xba4)][_0x5becb2(0x692)][_0x5becb2(0xd4e)]());}break;}}return _0x26fb8a;}catch(_0x2c292a){if('tSQyO'!==_0x5becb2(0x6de)){if(_0x2c292a['name']===_0x5becb2(0x983)){if('aSIgU'!==_0x5becb2(0xc7a))_0x707595[_0x5becb2(0x473)](_0x5becb2(0x8f2))[_0x5becb2(0x970)][_0x5becb2(0x702)]('show');else return console[_0x5becb2(0x6e4)](_0x5becb2(0xa03)),'';}throw _0x2c292a;}else{const _0x47f875=_0xa9a43f[_0x5becb2(0x7a9)](_0x5becb2(0x527));_0x47f875[_0x5becb2(0xd04)]=_0x5becb2(0x2b7),_0x47f875[_0x5becb2(0x6f0)]='<span\x20class=\x22description\x22>'+_0x25ed65[_0x5becb2(0xd76)]+_0x5becb2(0x39c)+_0x1adec3['amount'][_0x5becb2(0x684)](0x2)+_0x5becb2(0x80f)+_0xc35e24['id']+'\x22>&times;</button></div>',_0x49bc76[_0x5becb2(0xced)](_0x47f875);}}finally{_0xa7652b[_0x5becb2(0x858)]&&_0xa7652b[_0x5becb2(0x858)]['signal']===_0x4879f4&&(_0xa7652b[_0x5becb2(0x858)]=null);}}else return;}async function _0x27422f(){const _0x20d5d5=_0x57ab4d;if('iJdiV'!==_0x20d5d5(0x4e5)){_0x41fd27[_0x20d5d5(0xc95)](_0x20d5d5(0x764),_0x48c3fa);const _0x51f487={'role':_0x20d5d5(0x815),'content':_0x20d5d5(0xd33)+_0x5bf7fc['message'],'senderId':_0x42d563['id'],'isOffline':_0x4eca6a};_0x34785e[_0x20d5d5(0xdc0)][_0x20d5d5(0x214)](_0x51f487),_0xc5c6be();}else{const _0x1e33af=_0x5046d9[_0x20d5d5(0x852)][_0x20d5d5(0x970)][_0x20d5d5(0x85f)](_0x20d5d5(0x4b2)),_0x43fdcf=_0x1e33af?_0x56309d['value']:null;let _0x2f2c78=null,_0x26a6b2='';if(_0x1e33af&&_0x43fdcf){_0x2f2c78=_0xa7652b[_0x20d5d5(0x4ec)][_0x20d5d5(0x394)](_0x368180=>_0x368180[_0x20d5d5(0x45c)]===_0x20d5d5(0x722)&&_0x368180['participantIds'][_0x20d5d5(0x5c0)](_0x43fdcf));const _0x2f9172=_0x1238ea(_0x43fdcf);_0x26a6b2=_0x2f9172?_0x2f9172[_0x20d5d5(0xe79)]:_0x20d5d5(0xe2c);}else{if(_0xa7652b[_0x20d5d5(0xd5b)]){_0x2f2c78=_0x41c782();const _0x2e1d34=document[_0x20d5d5(0x473)](_0x20d5d5(0x752))['textContent'];_0x26a6b2=_0x2e1d34||_0x20d5d5(0x829);}}if(!_0x2f2c78){_0x198030('找不到要清空的聊天记录。');return;}const _0x1bc661=await _0x410108('确定要清空\x22'+_0x26a6b2+_0x20d5d5(0xa82));if(!_0x1bc661)return;if(_0x2f2c78['id']===_0xa7652b[_0x20d5d5(0xd5b)]){if(_0x20d5d5(0x77e)!==_0x20d5d5(0x695))_0x16b50b(),_0xa7652b[_0x20d5d5(0xdc0)]=[],_0x1f1d12();else{const _0x48d5bf=_0x18bafd[_0x20d5d5(0x277)][_0x20d5d5(0x17f)](_0x5acbae=>_0x2fee0b[_0x20d5d5(0x52d)]['find'](_0x1de5bc=>_0x1de5bc['id']===_0x5acbae))['filter'](_0x51fc25)[_0x20d5d5(0x17f)](_0x4e390a=>_0x20d5d5(0x862)+_0x4e390a[_0x20d5d5(0xe79)]+'\x0a'+_0x4e390a[_0x20d5d5(0xb17)])['join']('');_0x48d5bf&&(_0xc08c05=_0x20d5d5(0xa0a)+_0x48d5bf);}}try{'dCiQj'!==_0x20d5d5(0x9e9)?localStorage[_0x20d5d5(0x863)](_0x20d5d5(0xd62)+_0x2f2c78['id']):_0x41b4bb['style'][_0x20d5d5(0x1df)]=_0x20d5d5(0x8c8);}catch(_0x2daf83){console[_0x20d5d5(0xc95)](_0x20d5d5(0x24e)+_0x2f2c78['id'],_0x2daf83);}_0x198030('\x22'+_0x26a6b2+'\x22\x20的聊天记录已清空。');}}const _0x51a54a=document[_0x57ab4d(0x473)](_0x57ab4d(0x4d3)),_0x3a8b13=document[_0x57ab4d(0x473)](_0x57ab4d(0xc8)),_0x22ede7=document[_0x57ab4d(0x473)](_0x57ab4d(0xd2b));function _0x1718fb(_0x430626){const _0x1cad0a=_0x57ab4d;let _0x774d98='';const _0xe1c364=_0x430626[_0x1cad0a(0xd14)];for(let _0x3c473b=0x0;_0x3c473b<_0xe1c364;_0x3c473b++){if(_0x1cad0a(0xab2)!==_0x1cad0a(0xab2)){const _0x6b8e53=_0x161a30[_0x1cad0a(0xaf6)](_0x42d4c4[_0x1cad0a(0x6e4)]||[])[_0x1cad0a(0x833)](/'/g,'&apos;')[_0x1cad0a(0x833)](/"/g,_0x1cad0a(0x705)),_0x42e007=_0x305dad['contact_name']||'未知联系人';return _0x1cad0a(0x538)+(_0x9fa3b3<_0x34e722[_0x1cad0a(0x893)]-0x1?_0x1cad0a(0x9f5):'')+_0x1cad0a(0x1e3)+_0x6b8e53+_0x1cad0a(0xdbc)+_0x42e007+_0x1cad0a(0x4bb)+_0x55c72b+_0x1cad0a(0x2f4)+_0x42e007[_0x1cad0a(0x512)](0x0)+_0x1cad0a(0x9fb)+_0x42e007+_0x1cad0a(0xa06)+(_0x1b3d15[_0x1cad0a(0x240)]||'')+_0x1cad0a(0x73d);}else _0x774d98+=String[_0x1cad0a(0x1fd)](_0x430626[_0x3c473b]);}return btoa(_0x774d98);}document['getElementById'](_0x57ab4d(0x817))['addEventListener'](_0x57ab4d(0x493),async()=>{const _0x48846c=_0x57ab4d,_0x1907c9=new Date()[_0x48846c(0xa8d)]()['split']('T')[0x0];_0x27a15c(!![],_0x48846c(0x77b));try{if(_0x48846c(0x106)!==_0x48846c(0x432)){const _0x9e6291={};for(let _0x40c7af=0x0;_0x40c7af<localStorage['length'];_0x40c7af++){const _0x4096f0=localStorage[_0x48846c(0x834)](_0x40c7af);_0x4096f0&&(_0x48846c(0x9d8)==='GdETk'?_0x3ceb74(_0x276f56,_0x46992a):_0x9e6291[_0x4096f0]=localStorage[_0x48846c(0xb34)](_0x4096f0));}const _0x1d366a={},_0x3d90a0={'localStorageData':_0x9e6291,'preferencesData':_0x1d366a,'exportVersion':_0x48846c(0x56e)},_0x442645=JSON[_0x48846c(0xaf6)](_0x3d90a0),_0x389034='Noir_Backup_Data_'+_0x1907c9+_0x48846c(0xd0f),_0x52689b=new Blob([_0x442645],{'type':_0x48846c(0xb61)});_0x4ccc22(_0x52689b,_0x389034),_0x198030('核心数据已导出！请继续导出图片和杂项。');}else _0x30dd01=![];}catch(_0x12949c){'qgjnn'===_0x48846c(0xad)?_0x609d64[_0x48846c(0x970)]['remove']('show'):(console[_0x48846c(0xc95)](_0x48846c(0xd1a),_0x12949c),_0x198030(_0x48846c(0xdbf)+_0x12949c[_0x48846c(0xe32)]));}finally{_0x27a15c(![]);}}),document['getElementById']('export-images-data-btn')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0x45629c=_0x57ab4d;if(_0x45629c(0x42f)===_0x45629c(0x227))_0x3b79dd['innerHTML']=_0x45629c(0x6ae);else{const _0x595c4d=new Date()[_0x45629c(0xa8d)]()[_0x45629c(0x8ff)]('T')[0x0];_0x27a15c(!![],_0x45629c(0xfa));try{const _0x28b9b8=new JSZip(),_0x3bcad0=await _0x90829d,_0x3e257b=_0x3bcad0['transaction'](_0x45629c(0xd8a),'readonly'),_0x2f3eb4=_0x3e257b['objectStore']('images'),_0x593d31=await new Promise((_0xa68395,_0x186f3a)=>{const _0x2fd110=_0x45629c;if(_0x2fd110(0xab7)!==_0x2fd110(0xab7))_0x92203e['preferences'][_0x2fd110(0xc38)]=null,_0x3f95db(),_0x2152db(),_0x41bf36(_0x2fd110(0x423));else{const _0x36f4a0=_0x2f3eb4['getAll']();_0x36f4a0[_0x2fd110(0x7ad)]=()=>_0xa68395(_0x36f4a0[_0x2fd110(0xdc7)]),_0x36f4a0[_0x2fd110(0x835)]=()=>_0x186f3a(_0x36f4a0[_0x2fd110(0xc95)]);}});if(_0x593d31[_0x45629c(0x893)]===0x0){if('PikCw'!==_0x45629c(0xa7b)){_0x27a15c(![]),_0x198030(_0x45629c(0x6e8));return;}else _0x58ae78(()=>{_0x3cb911(![]),_0x47d3af(!![]),_0x1b77aa(()=>{const _0x1fd1f3=_0x20c5;_0x4ecddb[_0x1fd1f3(0x3e4)]['transition']=_0x1fd1f3(0x836),_0x4c8eae[_0x1fd1f3(0x3e4)][_0x1fd1f3(0x5cf)]='1';},0x64),_0x4ce009(()=>{_0x2079f7=![];},0x1c2);});}_0x27a15c(!![],_0x45629c(0x963)+_0x593d31['length']+'\x20张图片...');for(const _0x360e07 of _0x593d31){_0x28b9b8[_0x45629c(0xc49)]('images/'+_0x360e07['id'],_0x360e07[_0x45629c(0x5c1)]);}const _0x11c407=_0x45629c(0x7c2)+_0x595c4d+_0x45629c(0x9aa),_0x2ba72d=await _0x28b9b8[_0x45629c(0x497)]({'type':_0x45629c(0x5c1),'streamFiles':!![]});_0x4ccc22(_0x2ba72d,_0x11c407),_0x198030(_0x45629c(0xe44));}catch(_0x3a1745){console[_0x45629c(0xc95)](_0x45629c(0x152),_0x3a1745),_0x198030('导出失败:\x20'+_0x3a1745[_0x45629c(0xe32)]);}finally{_0x27a15c(![]);}}}),document[_0x57ab4d(0x473)]('export-misc-data-btn')[_0x57ab4d(0xc04)]('click',async()=>{const _0x54b227=_0x57ab4d;if(_0x54b227(0x15f)!==_0x54b227(0x15f))_0x5b0308['error']('保存播放器状态失败，真是没用。',_0x64c337);else{const _0x50046d=new Date()[_0x54b227(0xa8d)]()[_0x54b227(0x8ff)]('T')[0x0];_0x27a15c(!![],_0x54b227(0xdcc));try{const _0x59885a=new JSZip(),_0x19e86c=await _0x90829d,_0x52b48b=_0x19e86c['transaction'](_0x54b227(0x319),_0x54b227(0xe51)),_0x18848a=_0x52b48b[_0x54b227(0xb9d)]('music_library'),_0x30cc9d=await new Promise((_0x49ab82,_0x2b51d7)=>{const _0x38ed5d=_0x54b227,_0x1ebec1=_0x18848a[_0x38ed5d(0xc86)]();_0x1ebec1[_0x38ed5d(0x7ad)]=()=>_0x49ab82(_0x1ebec1['result']),_0x1ebec1[_0x38ed5d(0x835)]=()=>_0x2b51d7(_0x1ebec1[_0x38ed5d(0xc95)]);});if(_0x30cc9d[_0x54b227(0x893)]>0x0){_0x27a15c(!![],_0x54b227(0x22b)+_0x30cc9d[_0x54b227(0x893)]+_0x54b227(0x9e6));for(const _0x5e97fc of _0x30cc9d){const _0x19959d=_0x59885a[_0x54b227(0x229)](_0x54b227(0x33a)+_0x5e97fc['id']);_0x19959d[_0x54b227(0xc49)](_0x54b227(0x188),JSON[_0x54b227(0xaf6)](_0x5e97fc[_0x54b227(0x70d)]));if(_0x5e97fc['audio'])_0x19959d[_0x54b227(0xc49)]('audio',_0x5e97fc[_0x54b227(0xd12)]);if(_0x5e97fc[_0x54b227(0xdd5)])_0x19959d['file'](_0x54b227(0xdd5),_0x5e97fc[_0x54b227(0xdd5)]);if(_0x5e97fc[_0x54b227(0x996)])_0x19959d[_0x54b227(0xc49)](_0x54b227(0x8fc),_0x5e97fc['lyrics']);}}const _0x387a8c=_0x19e86c[_0x54b227(0xdb0)]('snoop_cache',_0x54b227(0xe51)),_0x3dbc5f=_0x387a8c['objectStore'](_0x54b227(0xee)),_0x116af4=await new Promise((_0x2dc479,_0x2da3c1)=>{const _0x497a35=_0x54b227,_0x40bfb7=_0x3dbc5f['getAll']();_0x40bfb7[_0x497a35(0x7ad)]=()=>_0x2dc479(_0x40bfb7['result']),_0x40bfb7['onerror']=()=>_0x2da3c1(_0x40bfb7[_0x497a35(0xc95)]);});_0x116af4[_0x54b227(0x893)]>0x0&&_0x59885a[_0x54b227(0xc49)](_0x54b227(0x958),JSON[_0x54b227(0xaf6)](_0x116af4));if(_0x30cc9d[_0x54b227(0x893)]===0x0&&_0x116af4[_0x54b227(0x893)]===0x0){_0x27a15c(![]),_0x198030(_0x54b227(0x751));return;}const _0x17cb15='Noir_Backup_Misc_'+_0x50046d+_0x54b227(0x9aa);_0x27a15c(!![],_0x54b227(0xb5));const _0x5aaa0a=await _0x59885a[_0x54b227(0x497)]({'type':'blob','streamFiles':!![]});_0x4ccc22(_0x5aaa0a,_0x17cb15),_0x198030(_0x54b227(0x1ce));}catch(_0x361528){if(_0x54b227(0x279)==='ICgbv'){const _0x1e1bff=_0x59616c[_0x54b227(0xb42)]||_0x402ea7?.[_0x54b227(0x584)][0x0],_0x5d257f=_0x41a52f(_0x1e1bff);_0x2fdfbf=_0x5d257f?_0x5d257f[_0x54b227(0xe79)]:'角色';}else console[_0x54b227(0xc95)](_0x54b227(0x1e2),_0x361528),_0x198030(_0x54b227(0xdbf)+_0x361528[_0x54b227(0xe32)]);}finally{if('YkrmC'!==_0x54b227(0x357))_0x27a15c(![]);else{if(!_0x4ad5b5['isArray'](_0x5b0236))return'<p>格式错误</p>';if(_0x229492['length']===0x0)return _0x54b227(0xd70);return _0x1927c0[_0x54b227(0x84c)]((_0x2b0285,_0x2ae0a0)=>new _0x3e810d(_0x2ae0a0[_0x54b227(0xb9f)])-new _0x3e82fc(_0x2b0285['timestamp'])),_0x4415a8[_0x54b227(0x17f)](_0x4c46f1=>{const _0x5aa637=_0x54b227,_0x5aff58=(_0x4c46f1['items']||[])[_0x5aa637(0x17f)](_0x420a57=>'<div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>'+_0x420a57+_0x5aa637(0x7de))[_0x5aa637(0x332)]('');return _0x5aa637(0x597)+(_0x4c46f1[_0x5aa637(0xb2a)]||_0x5aa637(0xbe0))+_0x5aa637(0xc9d)+(_0x4c46f1[_0x5aa637(0xb9f)]||'')+_0x5aa637(0x412)+(_0x4c46f1[_0x5aa637(0xad6)]||_0x5aa637(0x920))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22order-items-container\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x204px;\x20margin-bottom:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5aff58+_0x5aa637(0x421)+(_0x4c46f1[_0x5aa637(0x44e)]||0x0)[_0x5aa637(0x684)](0x2)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20';})[_0x54b227(0x332)]('');}}}}),_0x3a8b13[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0xe24),_0x57ab4d(0x59f))),_0x47b03c[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x473cd4),_0x22ede7[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),_0x24e3d2=>{const _0x509879=_0x57ab4d;if(_0x509879(0x657)!==_0x509879(0x9df)){const _0x564219=_0x24e3d2[_0x509879(0x63c)][_0x509879(0xcf5)][0x0];if(!_0x564219)return;_0x410108(_0x509879(0x7fc))[_0x509879(0xcae)](_0x53d5df=>{const _0x1d0a23=_0x509879;if(_0x1d0a23(0x60a)!==_0x1d0a23(0x60a)){const _0x44ed48={'promptTokens':_0x195f04[_0x1d0a23(0xa34)][_0x1d0a23(0x28c)]||0x0,'completionTokens':_0x5ac6a6[_0x1d0a23(0xa34)][_0x1d0a23(0xd8b)]||0x0,'totalTokens':(_0x3e770a[_0x1d0a23(0xa34)][_0x1d0a23(0x28c)]||0x0)+(_0x5d09bf['usage'][_0x1d0a23(0xd8b)]||0x0),'timestamp':_0x27f1be['now'](),'chatId':_0x2cef6f['activeChatId'],'model':_0xac3701};_0x2bd95a[_0x1d0a23(0xba4)][_0x1d0a23(0x468)]=_0x44ed48,_0x361038[_0x1d0a23(0xba4)]['history'][_0x1d0a23(0x214)](_0x44ed48),_0xa60270[_0x1d0a23(0xba4)]['history'][_0x1d0a23(0x893)]>0x64&&_0x5dd40e['tokenStats'][_0x1d0a23(0x692)][_0x1d0a23(0xd4e)]();}else{if(!_0x53d5df){if('UxPbc'===_0x1d0a23(0x537)){_0x22ede7[_0x1d0a23(0x2d4)]='';return;}else _0x49dfb5(),_0x158d23('snoopList',_0x1d0a23(0xbd6));}_0x27a15c(!![],_0x1d0a23(0xa1c));const _0x173bc6=new FileReader();_0x173bc6[_0x1d0a23(0x3c6)]=async _0x21ea57=>{const _0x330fc6=_0x1d0a23;if(_0x330fc6(0x410)===_0x330fc6(0x1aa))_0x91b926[_0x330fc6(0x226)]=_0x330fc6(0x94a);else try{if(_0x330fc6(0x32e)!==_0x330fc6(0x32e))_0x407db9[_0x330fc6(0x3e4)][_0x330fc6(0x16b)]='url(\x27'+_0x44c282[_0x330fc6(0x5ab)]+'\x27)',_0x1d0261[_0x330fc6(0x3e4)]['backgroundSize']=_0x330fc6(0xdd5),_0x1b8c9f[_0x330fc6(0x3e4)][_0x330fc6(0xcb8)]='center';else{const _0x43899b=JSON['parse'](_0x21ea57[_0x330fc6(0x63c)][_0x330fc6(0xdc7)]),_0x1310fc=_0x43899b[_0x330fc6(0x90c)]===_0x330fc6(0x56e);if(!_0x43899b[_0x330fc6(0xce0)])throw new Error('文件格式不正确，不是一个有效的备份文件。');_0x27a15c(!![],'正在准备图片数据...');const _0x38ee52=[];if(_0x43899b['indexedDBData']){if(_0x330fc6(0x8a2)!==_0x330fc6(0x8a2)){_0xa7a89c[_0x330fc6(0x6f0)]=_0x330fc6(0x6f1);return;}else{const _0x2518fb=await Promise[_0x330fc6(0xc1d)](Object[_0x330fc6(0xd79)](_0x43899b['indexedDBData'])[_0x330fc6(0x17f)](async _0x3378bb=>{const _0x44f635=_0x330fc6,_0x1cd974=_0x43899b[_0x44f635(0x55e)][_0x3378bb];if(typeof _0x1cd974===_0x44f635(0xdab)&&_0x1cd974['startsWith'](_0x44f635(0x23d))){const _0x2b1c3a=await _0x530eb9(_0x1cd974);return{'id':_0x3378bb,'blob':_0x2b1c3a};}return null;}));_0x38ee52[_0x330fc6(0x214)](..._0x2518fb['filter'](Boolean));}}const _0x54651d=[];if(_0x43899b[_0x330fc6(0x351)]){_0x27a15c(!![],_0x330fc6(0x6fc));const _0x5545dc=_0x43899b[_0x330fc6(0x351)][_0x330fc6(0x17f)](async _0x5caa43=>{const _0xf804d1=_0x330fc6,_0x2a6c45={..._0x5caa43};if(_0x5caa43[_0xf804d1(0xd12)])_0x2a6c45[_0xf804d1(0xd12)]=await _0x530eb9(_0x5caa43[_0xf804d1(0xd12)]);if(_0x5caa43[_0xf804d1(0xdd5)])_0x2a6c45[_0xf804d1(0xdd5)]=await _0x530eb9(_0x5caa43[_0xf804d1(0xdd5)]);return _0x2a6c45;});_0x54651d['push'](...await Promise[_0x330fc6(0xc1d)](_0x5545dc));}_0x27a15c(!![],_0x330fc6(0xacf)),localStorage['clear']();for(const _0x34e74f in _0x43899b[_0x330fc6(0xce0)]){localStorage[_0x330fc6(0x29d)](_0x34e74f,_0x43899b['localStorageData'][_0x34e74f]);}if(_0x1310fc&&_0x43899b[_0x330fc6(0xb0)]){_0x27a15c(!![],_0x330fc6(0x246));try{let _0x2574b2=0x0;for(const _0x5bdb77 in _0x43899b[_0x330fc6(0xb0)]){await Capacitor[_0x330fc6(0x4be)]['Preferences'][_0x330fc6(0x803)]({'key':_0x5bdb77,'value':_0x43899b[_0x330fc6(0xb0)][_0x5bdb77]}),_0x2574b2++;}console[_0x330fc6(0x6e4)](_0x330fc6(0x923)+_0x2574b2+_0x330fc6(0xbdc));}catch(_0x5b67cc){if(_0x330fc6(0x8d1)===_0x330fc6(0x61c)){const _0xc14e92=_0x1b1bd7[_0x330fc6(0x7a9)]('li');_0xc14e92['textContent']=_0x3640cf['substring'](0x2),_0xc14e92[_0x330fc6(0x3e4)]['marginBottom']=_0x330fc6(0xa5c),_0x26040f['lastChild'][_0x330fc6(0xced)](_0xc14e92);}else console[_0x330fc6(0xc95)](_0x330fc6(0xb6),_0x5b67cc),_0x198030(_0x330fc6(0x633));}}_0x27a15c(!![],_0x330fc6(0xd9e));const _0x4a6cbb=await _0x90829d,_0x37fe56=_0x4a6cbb['transaction']([_0x3ddffa,_0x22c071,_0x13337f],'readwrite'),_0x5a9c0b=_0x37fe56[_0x330fc6(0xb9d)](_0x3ddffa),_0x679bfa=_0x37fe56['objectStore'](_0x22c071),_0xf7c430=_0x37fe56[_0x330fc6(0xb9d)](_0x13337f);_0x5a9c0b[_0x330fc6(0xd46)](),_0x679bfa[_0x330fc6(0xd46)](),_0xf7c430[_0x330fc6(0xd46)]();const _0x32433f=[];for(const _0x34bfc9 of _0x38ee52){_0x32433f[_0x330fc6(0x214)](_0x5a9c0b[_0x330fc6(0x5d6)](_0x34bfc9));}for(const _0x2bb35c of _0x54651d){_0x32433f[_0x330fc6(0x214)](_0x679bfa['put'](_0x2bb35c));}if(_0x43899b[_0x330fc6(0xc74)]&&Array['isArray'](_0x43899b[_0x330fc6(0xc74)])){console['log'](_0x330fc6(0x3a4));for(const _0x329468 of _0x43899b[_0x330fc6(0xc74)]){_0x32433f['push'](_0xf7c430[_0x330fc6(0x5d6)](_0x329468));}}console[_0x330fc6(0x6e4)](_0x330fc6(0x347)+_0x38ee52['length']+_0x330fc6(0x419)+_0x54651d[_0x330fc6(0x893)]+_0x330fc6(0xd7e)),await new Promise((_0x4f2289,_0x567149)=>{const _0x2efb98=_0x330fc6;_0x2efb98(0xde8)!=='lmwtF'?(_0x37fe56[_0x2efb98(0x4f1)]=()=>{const _0x4939bf=_0x2efb98;console[_0x4939bf(0x6e4)]('所有数据已成功写入！'),_0x4f2289();},_0x37fe56[_0x2efb98(0x835)]=_0x402f85=>{const _0x2fa411=_0x2efb98;console[_0x2fa411(0xc95)]('事务失败:',_0x402f85['target'][_0x2fa411(0xc95)]),_0x567149(_0x402f85['target'][_0x2fa411(0xc95)]);}):_0x225dc8[_0x2efb98(0x226)]='▶';}),_0x27a15c(![]),_0x198030(_0x330fc6(0xb95)),setTimeout(()=>location[_0x330fc6(0xb97)](),0x640);}}catch(_0x349d68){if(_0x330fc6(0x126)===_0x330fc6(0x126))_0x27a15c(![]),console[_0x330fc6(0xc95)](_0x330fc6(0xd6b),_0x349d68),_0x198030('导入失败:\x20'+_0x349d68[_0x330fc6(0xe32)]);else{const _0x1b8505=_0x1862e7[_0x330fc6(0x4ec)]['find'](_0x3f569e=>_0x3f569e[_0x330fc6(0x45c)]===_0x330fc6(0x722)&&_0x3f569e[_0x330fc6(0x584)][_0x330fc6(0x5c0)](_0x28b494['id'])),_0x61c4b5=_0x5a891a[_0x330fc6(0x932)][_0x330fc6(0x394)](_0x1f515a=>_0x1f515a['id']===(_0x1b8505?.[_0x330fc6(0x8f5)]||_0x396e9e[_0x330fc6(0xa4f)]))||{'id':_0x330fc6(0x46b),'name':'你'};let _0x5aeb9d='';return _0x427303[_0x330fc6(0x277)]&&_0x3e16b5['linkedWorldBookIds']['length']>0x0&&(_0x5aeb9d=_0x39c9e6[_0x330fc6(0x277)]['map'](_0x2f353d=>_0x2706a4[_0x330fc6(0x52d)]['find'](_0x2a78b0=>_0x2a78b0['id']===_0x2f353d))[_0x330fc6(0x1a9)](_0x550f4a)[_0x330fc6(0x17f)](_0x1c058f=>_0x330fc6(0x4b3)+_0x1c058f['name']+']:\x20'+_0x1c058f['content'])[_0x330fc6(0x332)]('')),'\x20\x20-\x20角色ID:\x20'+_0x26084a['id']+_0x330fc6(0xe4d)+_0x5db5e2[_0x330fc6(0xe79)]+_0x330fc6(0xc16)+_0x4bed3c['persona']+'\x0a\x20\x20\x20\x20绑定用户:\x20'+_0x61c4b5[_0x330fc6(0xe79)]+_0x330fc6(0x89d)+_0x61c4b5['id']+')\x0a'+_0x5aeb9d;}}finally{'uqLdR'!==_0x330fc6(0xa51)?_0x22ede7['value']='':_0xf8efa2();}},_0x173bc6[_0x1d0a23(0xa8a)](_0x564219);}});}else _0x1bb285={'speaker':_0x34d3ee[_0x509879(0xe79)],'line':_0x108832[_0x509879(0xb17)],'emotion':_0x509879(0x177)};});function _0x5efd67(){const _0x3582c3=_0x57ab4d;_0x3582c3(0x292)!==_0x3582c3(0x292)?(_0x2116a6[_0x3582c3(0x970)]['remove'](_0x3582c3(0x4b2)),_0xb9cda3[_0x3582c3(0x970)][_0x3582c3(0xddb)](_0x3582c3(0x4b2)),_0x26cf75()):(_0x1216b5['value']=_0xa7652b[_0x3582c3(0xb82)][_0x3582c3(0x4f5)]||'',_0x260f75[_0x3582c3(0x2d4)]=_0xa7652b[_0x3582c3(0xb82)]['key']||'',_0x4ce00a[_0x3582c3(0x2d4)]=_0xa7652b[_0x3582c3(0xb82)]['model']||'',_0x2288d6['value']=String(_0xa7652b['preferences']?.[_0x3582c3(0xa9a)]??0x64),document[_0x3582c3(0x473)]('api-provider')[_0x3582c3(0x2d4)]=_0xa7652b[_0x3582c3(0xb82)][_0x3582c3(0x54f)]||_0x3582c3(0xe6b));}function _0x380c6f(){const _0x4bd364=_0x57ab4d;if(_0x4bd364(0xe4a)===_0x4bd364(0xe4a)){_0xa7652b[_0x4bd364(0xb82)]['endpoint']=_0x1216b5['value'][_0x4bd364(0x8eb)](),_0xa7652b[_0x4bd364(0xb82)][_0x4bd364(0x834)]=_0x260f75[_0x4bd364(0x2d4)][_0x4bd364(0x8eb)](),_0xa7652b[_0x4bd364(0xb82)]['model']=_0x4ce00a['value'][_0x4bd364(0x8eb)](),_0xa7652b[_0x4bd364(0xb82)]['provider']=document[_0x4bd364(0x473)](_0x4bd364(0xdf6))[_0x4bd364(0x2d4)];const _0x5be40c=parseInt(_0x2288d6[_0x4bd364(0x2d4)],0xa);_0xa7652b[_0x4bd364(0x5fa)][_0x4bd364(0xa9a)]=Number[_0x4bd364(0xe33)](_0x5be40c)&&_0x5be40c>0x0?_0x5be40c:0x64,_0x2e0417(),_0x198030(_0x4bd364(0xd74));}else{let _0x516561=0x0,_0xc2bd84=0x0,_0x4efb7b=0x0;if(_0x39b891[_0x4bd364(0x893)]==0x4)_0x516561='0x'+_0x53d3cd[0x1]+_0x39bed4[0x1],_0xc2bd84='0x'+_0x3e3e2d[0x2]+_0x2f1361[0x2],_0x4efb7b='0x'+_0x5db7d1[0x3]+_0x1d124b[0x3];else _0x252b50[_0x4bd364(0x893)]==0x7&&(_0x516561='0x'+_0x8a852d[0x1]+_0x37e37f[0x2],_0xc2bd84='0x'+_0x127a7d[0x3]+_0x15b986[0x4],_0x4efb7b='0x'+_0x4e2b64[0x5]+_0x53e880[0x6]);_0x516561/=0xff,_0xc2bd84/=0xff,_0x4efb7b/=0xff;let _0x478bd5=_0x276711[_0x4bd364(0x7e9)](_0x516561,_0xc2bd84,_0x4efb7b),_0x1b1f2c=_0x2d4cb4[_0x4bd364(0x272)](_0x516561,_0xc2bd84,_0x4efb7b),_0x5cded3=_0x1b1f2c-_0x478bd5,_0x47f22e=0x0,_0x4c58cf=0x0,_0xbb84f3=0x0;if(_0x5cded3==0x0)_0x47f22e=0x0;else{if(_0x1b1f2c==_0x516561)_0x47f22e=(_0xc2bd84-_0x4efb7b)/_0x5cded3%0x6;else{if(_0x1b1f2c==_0xc2bd84)_0x47f22e=(_0x4efb7b-_0x516561)/_0x5cded3+0x2;else _0x47f22e=(_0x516561-_0xc2bd84)/_0x5cded3+0x4;}}_0x47f22e=_0x3c298f[_0x4bd364(0xe81)](_0x47f22e*0x3c);if(_0x47f22e<0x0)_0x47f22e+=0x168;return _0xbb84f3=(_0x1b1f2c+_0x478bd5)/0x2,_0x4c58cf=_0x5cded3==0x0?0x0:_0x5cded3/(0x1-_0x127e37[_0x4bd364(0xd5e)](0x2*_0xbb84f3-0x1)),_0x4c58cf=+(_0x4c58cf*0x64)['toFixed'](0x1),_0xbb84f3=+(_0xbb84f3*0x64)[_0x4bd364(0x684)](0x1),{'h':_0x47f22e,'s':_0x4c58cf,'l':_0xbb84f3};}}function _0x2cef1e(){const _0x4e1f48=_0x57ab4d;if(_0x4e1f48(0x7cb)!==_0x4e1f48(0x7cb)){if(!_0x34c346['activeQuote'])return;_0x5a5a21[_0x4e1f48(0x226)]='回复\x20'+_0x498be0[_0x4e1f48(0xc40)][_0x4e1f48(0x39d)],_0x59f3dd[_0x4e1f48(0x226)]=_0x266c8e[_0x4e1f48(0xc40)][_0x4e1f48(0xb17)],_0x1e87f8['style'][_0x4e1f48(0x1df)]=_0x4e1f48(0x2a3);}else _0x1a1e12[_0x4e1f48(0x2d4)]=_0xa7652b[_0x4e1f48(0xbcc)][_0x4e1f48(0xe79)]||'',_0x4333b7[_0x4e1f48(0x706)]=_0xa7652b[_0x4e1f48(0xbcc)][_0x4e1f48(0x98f)]||_0x395f0f,_0x2047a6[_0x4e1f48(0x2d4)]=_0xa7652b[_0x4e1f48(0xbcc)]['persona']||'';}async function _0x143667(_0x1f6dd0=null){const _0x46ada8=_0x57ab4d;_0xffff1f('characterEdit',_0x28d032),_0x11139b(_0x46ada8(0xa1f));const _0x5e2140=_0x1f6dd0?_0xa7652b[_0x46ada8(0xbfe)][_0x46ada8(0x394)](_0x3fd57b=>_0x3fd57b['id']===_0x1f6dd0):null;_0x2e1a2f(_0x46ada8(0x4a9),_0x5e2140?_0x5e2140[_0x46ada8(0x277)]||[]:[]);const _0xb0ffc3=document[_0x46ada8(0x473)](_0x46ada8(0x641)),_0x627024=document[_0x46ada8(0x473)](_0x46ada8(0x33f));_0x5412b2[_0x46ada8(0x706)]=_0x96c08e,_0x19d06d[_0x46ada8(0x2d4)]='',_0x2965c6[_0x46ada8(0x3e4)][_0x46ada8(0x16b)]='',_0x2a4b9c[_0x46ada8(0x2d4)]='',_0x3ca6e1[_0x46ada8(0x3e4)][_0x46ada8(0x16b)]='',_0x2c30b1[_0x46ada8(0x2d4)]='';const _0x139057=[_0x46ada8(0x177),_0x46ada8(0xbea),'angry',_0x46ada8(0xac6),_0x46ada8(0xaa7)];_0x139057[_0x46ada8(0x1dc)](_0x32e370=>{const _0x36dbc1=_0x46ada8;document['getElementById'](_0x36dbc1(0xc7e)+_0x32e370+_0x36dbc1(0x612))[_0x36dbc1(0x3e4)]['backgroundImage']='',document[_0x36dbc1(0x473)]('char-edit-sprite-'+_0x32e370+_0x36dbc1(0xab5))[_0x36dbc1(0x2d4)]='';});if(_0x1f6dd0){if(!_0x5e2140)return;_0x56309d[_0x46ada8(0x2d4)]=_0x5e2140['id'],_0xa842b1[_0x46ada8(0x226)]=_0x46ada8(0x971),_0xcf15ee['value']=_0x5e2140[_0x46ada8(0xe79)],_0x158973['value']=_0x5e2140[_0x46ada8(0x759)],_0x6446ef[_0x46ada8(0x2d4)]=_0x5e2140[_0x46ada8(0x171)],document[_0x46ada8(0x473)](_0x46ada8(0x64a))[_0x46ada8(0x2d4)]=_0x5e2140[_0x46ada8(0xe46)]||'',_0xb0ffc3[_0x46ada8(0x2d4)]=_0x5e2140[_0x46ada8(0xa0b)]||'',_0x627024[_0x46ada8(0x2d4)]=_0x5e2140[_0x46ada8(0x210)]||'';const _0x4d8537=_0xa7652b['chats'][_0x46ada8(0x394)](_0x42ae69=>_0x42ae69['type']==='private'&&_0x42ae69[_0x46ada8(0x584)][_0x46ada8(0x5c0)](_0x1f6dd0));document['getElementById'](_0x46ada8(0xa1f))[_0x46ada8(0x2d4)]=_0x4d8537?.[_0x46ada8(0x8f5)]||_0xa7652b[_0x46ada8(0xa4f)];try{const _0x40b8c2=await _0xf3eefa('char_avatar_'+_0x5e2140['id']);_0x5412b2[_0x46ada8(0x706)]=_0x40b8c2?URL[_0x46ada8(0xc18)](_0x40b8c2):_0x5e2140[_0x46ada8(0x98f)]||_0x96c08e;const _0x545084=await _0xf3eefa(_0x46ada8(0x3c9)+_0x5e2140['id']);if(_0x545084)_0x2965c6[_0x46ada8(0x3e4)]['backgroundImage']=_0x46ada8(0x6cb)+URL[_0x46ada8(0xc18)](_0x545084)+'\x27)';const _0x188357=await _0xf3eefa(_0x46ada8(0x4ed)+_0x5e2140['id']);if(_0x188357)_0x3ca6e1[_0x46ada8(0x3e4)][_0x46ada8(0x16b)]=_0x46ada8(0x6cb)+URL['createObjectURL'](_0x188357)+'\x27)';for(const _0x3f7dd9 of _0x139057){const _0x19a809=await _0xf3eefa(_0x46ada8(0x549)+_0x3f7dd9+'_'+_0x5e2140['id']);_0x19a809&&('gmVnW'!==_0x46ada8(0xda1)?document[_0x46ada8(0x473)](_0x46ada8(0xc7e)+_0x3f7dd9+_0x46ada8(0x612))[_0x46ada8(0x3e4)]['backgroundImage']='url(\x27'+URL['createObjectURL'](_0x19a809)+'\x27)':_0x30bea4=_0x43441d['at'](-0x1));}}catch(_0x5dd5eb){if('fFKDZ'!==_0x46ada8(0x2dc))throw _0x858f68;else console['error'](_0x46ada8(0xe26)+_0x5e2140['id']+_0x46ada8(0xe5c),_0x5dd5eb),_0x5412b2[_0x46ada8(0x706)]=_0x5e2140[_0x46ada8(0x98f)]||_0x96c08e;}}else _0x46ada8(0xe47)===_0x46ada8(0xe47)?(_0x56309d[_0x46ada8(0x2d4)]='',_0xa842b1[_0x46ada8(0x226)]=_0x46ada8(0x295),_0xcf15ee[_0x46ada8(0x2d4)]=_0x46ada8(0x91c)+(_0xa7652b[_0x46ada8(0xbfe)][_0x46ada8(0x893)]+0x1),_0x158973[_0x46ada8(0x2d4)]='',_0x6446ef['value']='你是一个乐于助人的AI助手。',document[_0x46ada8(0x473)](_0x46ada8(0x64a))['value']='',_0xb0ffc3[_0x46ada8(0x2d4)]='',_0x627024['value']=''):_0xf85438=_0x412965['parse'](_0x24841a);_0x2c5a72();const _0x562052=document[_0x46ada8(0x473)](_0x46ada8(0x64a));let _0x3db737=document[_0x46ada8(0x473)](_0x46ada8(0xbdd));!_0x3db737&&(_0x3db737=document[_0x46ada8(0x7a9)](_0x46ada8(0x3e4)),_0x3db737['id']=_0x46ada8(0xbdd),document[_0x46ada8(0x730)][_0x46ada8(0xced)](_0x3db737));const _0x557701=()=>{const _0x4c5691=_0x46ada8,_0x5de7d2=_0x562052[_0x4c5691(0x2d4)];let _0x2f7001=_0x5de7d2[_0x4c5691(0x833)](/\.bubble\.sent/g,'#bubble-preview-user')[_0x4c5691(0x833)](/\.bubble\.received/g,_0x4c5691(0x58b));_0x3db737[_0x4c5691(0x6f0)]=_0x2f7001;};_0x562052[_0x46ada8(0x50e)](_0x46ada8(0x1bf),_0x557701),_0x562052[_0x46ada8(0xc04)]('input',_0x557701),_0x557701();}async function _0x546690(){const _0x1d7edb=_0x57ab4d;_0x27a15c(!![],_0x1d7edb(0x8ce));try{const _0x42fb8e={'type':_0x1d7edb(0x9d5),'version':0x1,'timestamp':Date['now'](),'accountingData':_0xa7652b[_0x1d7edb(0xde6)],'accountingLedger':_0xa7652b[_0x1d7edb(0x9db)]},_0x487c20=JSON[_0x1d7edb(0xaf6)](_0x42fb8e,null,0x2),_0x1ec556=new Date(),_0x2e244d=_0x1ec556[_0x1d7edb(0x72f)]()+'-'+String(_0x1ec556['getMonth']()+0x1)['padStart'](0x2,'0')+'-'+String(_0x1ec556[_0x1d7edb(0x947)]())[_0x1d7edb(0x2c8)](0x2,'0'),_0x52a211=_0x1d7edb(0x19a)+_0x2e244d+_0x1d7edb(0xd0f),_0xeb0e0f=new Blob([_0x487c20],{'type':_0x1d7edb(0xb61)});_0x4ccc22(_0xeb0e0f,_0x52a211);}catch(_0x512b05){console[_0x1d7edb(0xc95)]('导出账本失败:',_0x512b05),_0x198030(_0x1d7edb(0x933)+_0x512b05[_0x1d7edb(0xe32)]);}finally{_0x27a15c(![]);}}function _0x52fd3c(_0x369226){const _0x3b57f3=_0x57ab4d,_0x598d0f=_0x369226[_0x3b57f3(0x63c)][_0x3b57f3(0xcf5)][0x0];if(!_0x598d0f)return;_0x410108('确定要导入账本文件吗？这将【覆盖】所有当前的记账和账单数据！')[_0x3b57f3(0xcae)](_0x2ddee1=>{const _0x24d4d8=_0x3b57f3;if(!_0x2ddee1){if(_0x24d4d8(0xcab)!==_0x24d4d8(0x2b2)){_0x369226[_0x24d4d8(0x63c)]['value']='';return;}else _0x417651[_0x24d4d8(0x546)](_0xc34204,_0x85addf[_0x24d4d8(0x32a)]);}_0x27a15c(!![],_0x24d4d8(0x2ad));const _0x1a6893=new FileReader();_0x1a6893['onload']=_0x51ccee=>{const _0x357056=_0x24d4d8;try{const _0x545f8c=JSON[_0x357056(0x180)](_0x51ccee[_0x357056(0x63c)][_0x357056(0xdc7)]);if(_0x545f8c[_0x357056(0x45c)]!=='NoirAccountingData'||!_0x545f8c[_0x357056(0xde6)]||!_0x545f8c[_0x357056(0x9db)])throw new Error(_0x357056(0x1b0));_0xa7652b[_0x357056(0xde6)]=_0x545f8c[_0x357056(0xde6)],_0xa7652b[_0x357056(0x9db)]=_0x545f8c[_0x357056(0x9db)],_0x2e0417(),_0x27a15c(![]),_0x198030(_0x357056(0x252)),_0x44a0de();}catch(_0x2cafc4){_0x357056(0x9b8)===_0x357056(0x9b8)?(_0x27a15c(![]),console[_0x357056(0xc95)](_0x357056(0xb41),_0x2cafc4),_0x198030(_0x357056(0xb1d)+_0x2cafc4[_0x357056(0xe32)])):_0x422a4c[_0x357056(0x226)]='已选择\x20'+_0x26721e[_0x357056(0x893)]+'\x20项';}finally{_0x357056(0x169)!==_0x357056(0x61f)?_0x369226[_0x357056(0x63c)][_0x357056(0x2d4)]='':_0x5a3a83('生成日记失败:\x20'+_0x231f40[_0x357056(0xe32)]);}},_0x1a6893['readAsText'](_0x598d0f);});}async function _0x3f2bdd(){const _0x1bfd0e=_0x57ab4d;if(_0x1bfd0e(0xd45)==='MbTob'){const _0x569748=_0x56309d['value'];if(!_0x569748){_0x198030(_0x1bfd0e(0xb14));return;}const _0x22ae84=_0x1238ea(_0x569748);if(!_0x22ae84)return;_0x27a15c(!![],_0x1bfd0e(0x26c)+_0x22ae84[_0x1bfd0e(0xe79)]+_0x1bfd0e(0xa1a));try{const _0x1fdea9={'type':_0x1bfd0e(0xe58),'version':0x1,'name':_0x22ae84['name'],'remark':_0x22ae84[_0x1bfd0e(0x759)],'persona':_0x22ae84['persona'],'bubbleCss':_0x22ae84[_0x1bfd0e(0xe46)],'avatar':null,'sprites':{},'worldBooks':[]},_0x5c0ecd=await _0xf3eefa('char_avatar_'+_0x22ae84['id']);if(_0x5c0ecd)_0x1fdea9[_0x1bfd0e(0x98f)]=await _0xbb85d0(_0x5c0ecd);const _0x1c866d=[_0x1bfd0e(0x177),_0x1bfd0e(0xbea),_0x1bfd0e(0xe39),'sad','shy'];for(const _0x5a2220 of _0x1c866d){if(_0x1bfd0e(0x7ee)!=='vASzg'){const _0x23c499=await _0xf3eefa(_0x1bfd0e(0x549)+_0x5a2220+'_'+_0x22ae84['id']);_0x23c499&&('wTJrc'!==_0x1bfd0e(0x2d9)?_0x4fb7c0[_0x1bfd0e(0xc04)](_0x1bfd0e(0x493),_0x52295e):_0x1fdea9[_0x1bfd0e(0x38a)][_0x5a2220]=await _0xbb85d0(_0x23c499));}else _0x3e018a['click']();}_0x22ae84[_0x1bfd0e(0x277)]&&_0x22ae84[_0x1bfd0e(0x277)]['length']>0x0&&(_0x1fdea9[_0x1bfd0e(0x52d)]=_0x22ae84[_0x1bfd0e(0x277)][_0x1bfd0e(0x17f)](_0x31f806=>_0xa7652b[_0x1bfd0e(0x52d)][_0x1bfd0e(0x394)](_0x58f976=>_0x58f976['id']===_0x31f806))[_0x1bfd0e(0x1a9)](Boolean)[_0x1bfd0e(0x17f)](_0x1f48d9=>({'name':_0x1f48d9[_0x1bfd0e(0xe79)],'content':_0x1f48d9['content'],'categoryId':_0x1f48d9[_0x1bfd0e(0x45e)]||_0x1bfd0e(0x46b)})));const _0x1cc116=new Set(_0x1fdea9[_0x1bfd0e(0x52d)][_0x1bfd0e(0x17f)](_0xf0f1d7=>_0xf0f1d7['categoryId']));_0x1fdea9[_0x1bfd0e(0x22a)]=_0xa7652b[_0x1bfd0e(0x22a)][_0x1bfd0e(0x1a9)](_0x538992=>_0x1cc116['has'](_0x538992['id']));const _0x306b18=JSON[_0x1bfd0e(0xaf6)](_0x1fdea9,null,0x2),_0x4dab56=_0x22ae84['name']+_0x1bfd0e(0x31f),_0x3034ee=new Blob([_0x306b18],{'type':_0x1bfd0e(0xb61)});_0x4ccc22(_0x3034ee,_0x4dab56);}catch(_0x5c881e){if(_0x1bfd0e(0xc1a)!==_0x1bfd0e(0x41d))console[_0x1bfd0e(0xc95)](_0x1bfd0e(0x81d),_0x5c881e),_0x198030(_0x1bfd0e(0x933)+_0x5c881e['message']);else{const _0xcd5cf3=_0x54aa3d['getItem'](_0x1bfd0e(0x997));_0xcd5cf3&&(_0x962c7=_0x21caa3[_0x1bfd0e(0x180)](_0xcd5cf3));}}finally{_0x27a15c(![]);}}else _0x2aa4ae[_0x1bfd0e(0x8f5)]=_0x2830db;}async function _0x38f45d(_0x2b932e){const _0x25d86b=_0x57ab4d;if('DhCEQ'===_0x25d86b(0x8ac))_0x20754d['appendChild'](_0x40b50b),_0x4a45db['appendChild'](_0x58f485);else{const _0x1979e2=_0x2b932e['target']['files'][0x0];if(!_0x1979e2)return;_0x27a15c(!![],_0x25d86b(0xd37));const _0x5b55c9=new FileReader();_0x5b55c9[_0x25d86b(0x3c6)]=async _0x592dc0=>{const _0x5b3ae1=_0x25d86b;try{if('ZrASN'!==_0x5b3ae1(0x48d))_0x5c9eb3[_0x5b3ae1(0xae2)]?_0x3f18f1['play']():_0x57ce1e['pause']();else{const _0x478196=JSON[_0x5b3ae1(0x180)](_0x592dc0[_0x5b3ae1(0x63c)][_0x5b3ae1(0xdc7)]);if(_0x478196[_0x5b3ae1(0x45c)]!=='NoirCharacterCard')throw new Error(_0x5b3ae1(0x232));const _0x5adce6=[];_0x478196[_0x5b3ae1(0x22a)]&&Array[_0x5b3ae1(0x8aa)](_0x478196['worldBookCategories'])&&_0x478196[_0x5b3ae1(0x22a)][_0x5b3ae1(0x1dc)](_0x443cf0=>{const _0x101472=_0x5b3ae1,_0x20aaf5=_0xa7652b[_0x101472(0x22a)][_0x101472(0x394)](_0x598cc3=>_0x598cc3[_0x101472(0xe79)]===_0x443cf0[_0x101472(0xe79)]);!_0x20aaf5&&_0xa7652b['worldBookCategories'][_0x101472(0x214)]({'id':_0x443cf0['id']||_0x101472(0x64c)+Date[_0x101472(0x144)](),'name':_0x443cf0[_0x101472(0xe79)]});});if(_0x478196['worldBooks']&&_0x478196[_0x5b3ae1(0x52d)][_0x5b3ae1(0x893)]>0x0)for(const _0x520732 of _0x478196[_0x5b3ae1(0x52d)]){if(_0x5b3ae1(0x288)!==_0x5b3ae1(0xb25)){let _0x1fb4ae=_0xa7652b[_0x5b3ae1(0x52d)][_0x5b3ae1(0x394)](_0x497217=>_0x497217[_0x5b3ae1(0xe79)]===_0x520732[_0x5b3ae1(0xe79)]&&(_0x497217[_0x5b3ae1(0x45e)]||_0x5b3ae1(0x46b))===(_0x520732[_0x5b3ae1(0x45e)]||_0x5b3ae1(0x46b)));if(_0x1fb4ae)_0x5adce6['push'](_0x1fb4ae['id']);else{const _0x340881={'id':_0x5b3ae1(0xe1c)+Date['now']()+'_'+Math[_0x5b3ae1(0x1c6)](),'name':_0x520732[_0x5b3ae1(0xe79)],'content':_0x520732[_0x5b3ae1(0xb17)],'categoryId':_0x520732[_0x5b3ae1(0x45e)]||_0x5b3ae1(0x46b)};_0xa7652b[_0x5b3ae1(0x52d)][_0x5b3ae1(0x214)](_0x340881),_0x5adce6[_0x5b3ae1(0x214)](_0x340881['id']);}}else _0x130dc4(_0x5b3ae1(0x9a8)+_0x32d0dc[_0x5b3ae1(0xe32)]);}const _0x52e742='char_'+Date['now']();let _0x27cc8a=null;if(_0x478196['avatar']){if('GlWyl'!==_0x5b3ae1(0x119)){const _0x3a8db1=_0x10980d[_0x5b3ae1(0x778)][_0x5b3ae1(0x1de)](0x0,0x2)[_0x5b3ae1(0x17f)](_0x1eeeb6=>{const _0x4afa37=_0x5b3ae1;if(typeof _0x1eeeb6==='string')return _0x1eeeb6;if(typeof _0x1eeeb6==='object'&&_0x1eeeb6!==null)return _0x256c6e[_0x4afa37(0x664)](_0x1eeeb6)['join'](_0x4afa37(0x6d6));return _0x4afa37(0xe6f);});_0x32e96c[_0x5b3ae1(0x214)](_0x5b3ae1(0xba3)+_0x3a8db1[_0x5b3ae1(0x332)]('；'));}else{const _0x28eb55=await _0x530eb9(_0x478196[_0x5b3ae1(0x98f)]);await _0x1366c1(_0x5b3ae1(0x6ea)+_0x52e742,_0x28eb55),_0x27cc8a=await _0xbb85d0(_0x28eb55);}}if(_0x478196[_0x5b3ae1(0x38a)])for(const _0xf61a in _0x478196[_0x5b3ae1(0x38a)]){const _0xb579f3=_0x478196[_0x5b3ae1(0x38a)][_0xf61a];if(_0xb579f3){const _0x2b0095=await _0x530eb9(_0xb579f3);await _0x1366c1(_0x5b3ae1(0x549)+_0xf61a+'_'+_0x52e742,_0x2b0095);}}const _0x2466a9={'id':_0x52e742,'name':_0x478196['name'],'remark':_0x478196[_0x5b3ae1(0x759)]||'','persona':_0x478196[_0x5b3ae1(0x171)],'avatar':_0x27cc8a,'linkedWorldBookIds':_0x5adce6,'bubbleCss':_0x478196['bubbleCss']||''};_0xa7652b[_0x5b3ae1(0xbfe)]['push'](_0x2466a9);const _0x5333d7={'id':_0x5b3ae1(0xa5e)+_0x52e742,'type':'private','participantIds':[_0x52e742],'boundUserProfileId':_0xa7652b[_0x5b3ae1(0xa4f)]};_0xa7652b[_0x5b3ae1(0x4ec)][_0x5b3ae1(0x214)](_0x5333d7),_0x2e0417(),await _0xa7d798(),_0x198030('“'+_0x2466a9[_0x5b3ae1(0xe79)]+'”已成功导入！');}}catch(_0x17362f){if(_0x5b3ae1(0x6cd)==='aVSst'){_0x5d7a12(_0x5b3ae1(0x3c0));return;}else console[_0x5b3ae1(0xc95)](_0x5b3ae1(0x86a),_0x17362f),_0x198030(_0x5b3ae1(0x134)+_0x17362f[_0x5b3ae1(0xe32)]);}finally{_0x27a15c(![]),_0x2b932e['target'][_0x5b3ae1(0x2d4)]='';}},_0x5b55c9[_0x25d86b(0xa8a)](_0x1979e2);}}function _0x2e1a2f(_0xe76d84,_0x5a529c=[]){const _0x188e48=_0x57ab4d;if(_0x188e48(0x9bc)!==_0x188e48(0xab0)){const _0x1c5be7=document[_0x188e48(0x473)](_0xe76d84);_0x1c5be7['innerHTML']='';const _0x341f15=_0xa7652b['worldBooks'][_0x188e48(0x59d)]((_0x5d0319,_0x19f910)=>{const _0x1b0b71=_0x188e48,_0x1a4603=_0x19f910[_0x1b0b71(0x45e)]||_0x1b0b71(0x46b);return!_0x5d0319[_0x1a4603]&&(_0x5d0319[_0x1a4603]=[]),_0x5d0319[_0x1a4603][_0x1b0b71(0x214)](_0x19f910),_0x5d0319;},{}),_0x22adce=()=>{const _0x1e6038=_0x188e48;_0xe76d84===_0x1e6038(0x4a9)?_0x2c5a72():_0x59b209();},_0x59cddb=[..._0xa7652b[_0x188e48(0x22a)]];if(_0x341f15[_0x188e48(0x46b)]&&!_0x59cddb[_0x188e48(0x394)](_0x4eee9e=>_0x4eee9e['id']===_0x188e48(0x46b))){if(_0x188e48(0x377)!==_0x188e48(0x377))return _0x343051[_0x188e48(0x6e4)]('Fetch\x20request\x20was\x20aborted.'),'';else{const _0x508146=_0xa7652b[_0x188e48(0x22a)][_0x188e48(0x691)](_0x2a6386=>_0x2a6386['id']===_0x188e48(0x46b));!_0x508146&&_0x59cddb['push']({'id':_0x188e48(0x46b),'name':_0x188e48(0x329)});}}_0x59cddb[_0x188e48(0x1dc)](_0xeff31a=>{const _0x205b3c=_0x188e48;if(_0x205b3c(0x5c3)===_0x205b3c(0x789))_0x39ff17[_0x205b3c(0xc95)](_0x205b3c(0xb0b),_0xc404fb),_0x3d5ebd(_0x205b3c(0x73e)+_0x36b03c[_0x205b3c(0xe32)]);else{const _0x3bb869=_0x341f15[_0xeff31a['id']]||[];if(_0x3bb869['length']===0x0)return;const _0x3399d2=document[_0x205b3c(0x7a9)](_0x205b3c(0x527));_0x3399d2['className']=_0x205b3c(0x78e);const _0x3b1d4a=_0x3bb869[_0x205b3c(0x82e)](_0x28eff8=>_0x5a529c[_0x205b3c(0x5c0)](_0x28eff8['id']));_0x3399d2['innerHTML']=_0x205b3c(0x578)+_0xeff31a['id']+'\x22\x20'+(_0x3b1d4a?_0x205b3c(0x3e3):'')+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22category-name\x22>'+_0xeff31a[_0x205b3c(0xe79)]+_0x205b3c(0x96e);const _0x30ec10=_0x3399d2[_0x205b3c(0x373)](_0x205b3c(0xe76));_0x3bb869[_0x205b3c(0x1dc)](_0x2780dc=>{const _0x1f1634=_0x205b3c,_0x1956d2=_0x5a529c[_0x1f1634(0x5c0)](_0x2780dc['id']),_0x4bcdf3=document[_0x1f1634(0x7a9)](_0x1f1634(0x2b1));_0x4bcdf3[_0x1f1634(0xd04)]=_0x1f1634(0xcc7),_0x4bcdf3[_0x1f1634(0x6f0)]=_0x1f1634(0x557)+_0x2780dc['id']+_0x1f1634(0x83f)+_0xeff31a['id']+'\x22\x20'+(_0x1956d2?_0x1f1634(0x3e3):'')+'>\x20'+_0x2780dc[_0x1f1634(0xe79)],_0x30ec10[_0x1f1634(0xced)](_0x4bcdf3);}),_0x1c5be7['appendChild'](_0x3399d2);}}),_0x1c5be7[_0x188e48(0xe54)](_0x188e48(0xd4f))['forEach'](_0x14e841=>{const _0x23c831=_0x188e48;_0x14e841[_0x23c831(0xc04)]('click',_0xd13552=>{const _0x3ccd61=_0x23c831;if(_0xd13552['target'][_0x3ccd61(0x45c)]===_0x3ccd61(0xbc7))return;const _0x2b4f5d=_0x14e841[_0x3ccd61(0xa74)],_0x2a5bc9=_0x14e841[_0x3ccd61(0x373)](_0x3ccd61(0x889)),_0x3f6974=_0x2b4f5d[_0x3ccd61(0x970)][_0x3ccd61(0x85f)](_0x3ccd61(0x5b5));_0x2b4f5d[_0x3ccd61(0x970)][_0x3ccd61(0x401)](_0x3ccd61(0x5b5),!_0x3f6974),_0x2a5bc9['classList'][_0x3ccd61(0x401)]('expanded',!_0x3f6974);});}),_0x1c5be7[_0x188e48(0xe54)](_0x188e48(0xb0d))[_0x188e48(0x1dc)](_0x36da83=>{const _0x572565=_0x188e48;_0x572565(0x3db)===_0x572565(0x7b9)?_0x2b2869():_0x36da83[_0x572565(0xc04)](_0x572565(0x493),_0x39a5dd=>{const _0x3f975a=_0x572565,_0x36781a=_0x39a5dd[_0x3f975a(0x63c)][_0x3f975a(0x9c6)][_0x3f975a(0x45e)],_0x26035e=_0x39a5dd[_0x3f975a(0x63c)]['checked'];_0x1c5be7[_0x3f975a(0xe54)](_0x3f975a(0x83d)+_0x36781a+'\x22]')[_0x3f975a(0x1dc)](_0x164d75=>{const _0x115d91=_0x3f975a;if(_0x115d91(0x61b)===_0x115d91(0x61b))_0x164d75[_0x115d91(0x3e3)]=_0x26035e;else{_0x158974[_0x115d91(0x2d4)]=_0x115d91(0x966);return;}}),_0x22adce();});}),_0x1c5be7[_0x188e48(0xe54)](_0x188e48(0xd22))['forEach'](_0x4dbd57=>{const _0x48088e=_0x188e48;_0x4dbd57[_0x48088e(0xc04)]('input',_0x57a7f9=>{const _0x2d1022=_0x48088e,_0x19c101=_0x57a7f9['target'][_0x2d1022(0x9c6)]['categoryId'],_0x44081f=_0x1c5be7[_0x2d1022(0xe54)]('.wb-entry-item\x20input[data-category-id=\x22'+_0x19c101+'\x22]'),_0x26bb41=_0x1c5be7[_0x2d1022(0xe54)](_0x2d1022(0x83d)+_0x19c101+'\x22]:checked'),_0x84335b=_0x1c5be7['querySelector'](_0x2d1022(0x5af)+_0x19c101+'\x22]');if(_0x26bb41[_0x2d1022(0x893)]===0x0)_0x84335b['checked']=![],_0x84335b[_0x2d1022(0x3e5)]=![];else{if(_0x26bb41[_0x2d1022(0x893)]===_0x44081f[_0x2d1022(0x893)]){if('VCChv'!=='cLkcc')_0x84335b[_0x2d1022(0x3e3)]=!![],_0x84335b[_0x2d1022(0x3e5)]=![];else{const _0x1f081b=_0x56a53a[_0x2d1022(0x2d4)];_0x2f173d['documentElement'][_0x2d1022(0x3e4)][_0x2d1022(0xd2c)](_0x2d1022(0x5f0),_0x1f081b+'%'),_0x5741a0[_0x2d1022(0x29d)](_0x2d1022(0xc21),_0x1f081b),_0x33fa53();}}else _0x84335b['indeterminate']=!![];}_0x22adce();});}),_0x1c5be7[_0x188e48(0xe54)](_0x188e48(0xb0d))[_0x188e48(0x1dc)](_0x514bc5=>{const _0x137dce=_0x188e48,_0x4de815=_0x514bc5[_0x137dce(0x9c6)]['categoryId'],_0x5d6ed2=_0x1c5be7[_0x137dce(0xe54)](_0x137dce(0x83d)+_0x4de815+'\x22]'),_0x4ab554=_0x1c5be7[_0x137dce(0xe54)]('.wb-entry-item\x20input[data-category-id=\x22'+_0x4de815+_0x137dce(0xc15));if(_0x4ab554['length']>0x0&&_0x4ab554[_0x137dce(0x893)]<_0x5d6ed2[_0x137dce(0x893)]){if('VBOGh'===_0x137dce(0xe74)){if(!_0xd812f7[_0x137dce(0xd5b)]){_0x2c0023(_0x137dce(0x6b3));return;}const _0x1f76dd=_0x327ba8[_0x137dce(0xba4)]['history'][_0x137dce(0x1a9)](_0x313ab7=>_0x313ab7[_0x137dce(0xb99)]===_0x2a7233[_0x137dce(0xd5b)]);if(_0x1f76dd['length']===0x0){_0xdf2854(_0x137dce(0x819));return;}const _0x2adf40=_0x1f76dd[_0x1f76dd[_0x137dce(0x893)]-0x1],_0x1a621c=new _0x39ce37(_0x2adf40[_0x137dce(0xb9f)])[_0x137dce(0x1f3)](_0x137dce(0xbbe)),_0x265aa2='📊\x20Token统计\x0a\x0a'+_0x137dce(0xdee)+(_0x137dce(0x539)+_0x1a621c+'\x0a')+('🤖\x20模型:\x20'+(_0x2adf40['model']||'未知')+'\x0a')+(_0x137dce(0x579)+_0x2adf40[_0x137dce(0x8f0)]+'\x0a')+('📥\x20回复:\x20'+_0x2adf40[_0x137dce(0x309)]+'\x0a')+('📊\x20总计:\x20'+_0x2adf40['totalTokens']);_0x2c6902(_0x265aa2);}else _0x514bc5['indeterminate']=!![];}});}else throw new _0x803bb8(_0x188e48(0xf4));}async function _0x1c3f22(){const _0x1257d3=_0x57ab4d,_0x3b6b1d=[_0x1257d3(0x177),_0x1257d3(0xbea),_0x1257d3(0xe39),_0x1257d3(0xac6),_0x1257d3(0xaa7)],_0x3e428a=_0x56309d[_0x1257d3(0x2d4)],_0x599537=document['getElementById'](_0x1257d3(0xa1f))['value'],_0x197802=_0x19d06d[_0x1257d3(0xcf5)][0x0],_0x5b3da4=_0x2a4b9c['files'][0x0],_0x4dc02f=_0x2c30b1[_0x1257d3(0xcf5)][0x0],_0x39825b=document[_0x1257d3(0xe54)](_0x1257d3(0x5a5)),_0x3e46c=Array[_0x1257d3(0x90a)](_0x39825b)[_0x1257d3(0x17f)](_0x3503b7=>_0x3503b7[_0x1257d3(0x2d4)]),_0x299992={'name':_0xcf15ee['value'][_0x1257d3(0x8eb)](),'remark':_0x158973[_0x1257d3(0x2d4)][_0x1257d3(0x8eb)](),'persona':_0x6446ef[_0x1257d3(0x2d4)][_0x1257d3(0x8eb)](),'linkedWorldBookIds':_0x3e46c,'bubbleCss':document[_0x1257d3(0x473)]('char-edit-css')['value'][_0x1257d3(0x8eb)](),'avatarFrameUrl':document[_0x1257d3(0x473)](_0x1257d3(0x641))['value'][_0x1257d3(0x8eb)](),'userAvatarFrameUrl':document[_0x1257d3(0x473)](_0x1257d3(0x33f))[_0x1257d3(0x2d4)][_0x1257d3(0x8eb)]()};if(!_0x299992[_0x1257d3(0xe79)]){if(_0x1257d3(0x8af)===_0x1257d3(0x450)){let _0x5c80ec=_0x2c2214[_0x1257d3(0x373)]('#chat-view-pane\x20>\x20.typing-indicator');if(!_0x5c80ec){_0x5c80ec=_0x2a4df7[_0x1257d3(0x7a9)](_0x1257d3(0x527)),_0x5c80ec['className']=_0x1257d3(0x912);const _0x55b74e=_0x861992();_0x5c80ec[_0x1257d3(0x226)]=_0x55b74e&&_0x55b74e[_0x1257d3(0x45c)]===_0x1257d3(0x4b5)?_0x1257d3(0x528):_0x1257d3(0xa4b),_0x4409ae[_0x1257d3(0x473)](_0x1257d3(0x326))['appendChild'](_0x5c80ec);}}else{_0x198030(_0x1257d3(0x510));return;}}try{if(_0x1257d3(0x1ff)!=='sUZNT'){const _0x1917ac=_0x1b1e58[_0x1257d3(0x9c6)][_0x1257d3(0x6ef)],_0x16a825=_0x4b111d[_0x1257d3(0x373)]('.music-post-play-icon,\x20.music-share-play-icon');if(!_0x16a825)return;_0x2886d4&&_0x1917ac===_0x324772['id']&&_0x2c3235?_0x16a825['textContent']='❚❚':_0x16a825[_0x1257d3(0x226)]='▶';}else{let _0x300679=_0x3e428a;if(_0x3e428a){if('IItZk'==='IItZk'){const _0x1caeb1=_0xa7652b[_0x1257d3(0xbfe)]['find'](_0x280c62=>_0x280c62['id']===_0x3e428a);_0x1caeb1&&Object[_0x1257d3(0x8b3)](_0x1caeb1,_0x299992);}else _0xab6c5f(_0x2afbec),_0xb87f9e(_0x1257d3(0x471),_0x1257d3(0xa25));}else{const _0x9c7854=_0x1257d3(0x7a5)+Date['now']();_0x300679=_0x9c7854;const _0x3c36d3={'id':_0x9c7854,..._0x299992};_0x3c36d3[_0x1257d3(0x98f)]=_0x197802?await _0x351f2f(_0x197802):_0x96c08e,_0xa7652b['characters'][_0x1257d3(0x214)](_0x3c36d3);const _0x2bff36={'id':'chat_'+_0x9c7854,'type':'private','participantIds':[_0x9c7854],'listenTogetherSession':null};_0xa7652b['chats'][_0x1257d3(0x214)](_0x2bff36),await _0x162e63(_0x9c7854),console[_0x1257d3(0x6e4)]('已为新角色\x20'+_0x299992[_0x1257d3(0xe79)]+'\x20初始化用户档案');}const _0x254dad=_0xa7652b['chats']['find'](_0x325d11=>_0x325d11[_0x1257d3(0x45c)]===_0x1257d3(0x722)&&_0x325d11[_0x1257d3(0x584)][_0x1257d3(0x5c0)](_0x300679));_0x254dad&&(_0x254dad['boundUserProfileId']=_0x599537);if(_0x197802)await _0x1366c1(_0x1257d3(0x6ea)+_0x300679,_0x197802);if(_0x5b3da4)await _0x1366c1(_0x1257d3(0x3c9)+_0x300679,_0x5b3da4);if(_0x4dc02f)await _0x1366c1(_0x1257d3(0x4ed)+_0x300679,_0x4dc02f);for(const _0x31aab7 of _0x3b6b1d){if(_0x1257d3(0x114)!==_0x1257d3(0xca1)){const _0x289490=document[_0x1257d3(0x473)](_0x1257d3(0xc7e)+_0x31aab7+_0x1257d3(0xab5))['files'][0x0];if(_0x289490)await _0x1366c1(_0x1257d3(0x549)+_0x31aab7+'_'+_0x300679,_0x289490);}else _0x26fae1+=_0x1257d3(0x511)+_0x4badba['query']+_0x1257d3(0x3cf)+(_0x12a4ab[_0x1257d3(0x3aa)]||'没有看到具体内容')+_0x1257d3(0x9a9);}_0x2e0417(),_0xa7d798(),_0x198030(_0x1257d3(0x434)),_0xffff1f(_0x1257d3(0x771),_0x1257d3(0x852));if(!_0x3e428a){const _0x18e02a='chat_'+_0x300679;_0xc494e4(_0x18e02a);}}}catch(_0x54e0fd){console[_0x1257d3(0xc95)]('保存角色失败:',_0x54e0fd),_0x198030(_0x1257d3(0x847)+_0x54e0fd[_0x1257d3(0xe32)]);}if(_0x197802||_0x5b3da4||_0x4dc02f||_0x3b6b1d['some'](_0x5b7c1b=>document[_0x1257d3(0x473)](_0x1257d3(0xc7e)+_0x5b7c1b+_0x1257d3(0xab5))['files'][0x0])){if('kgrsn'!=='FMRRB')_0x198030(_0x1257d3(0x652)),setTimeout(()=>location[_0x1257d3(0xb97)](),0x5dc);else{const _0x59d355=_0x137eb5[_0x1257d3(0x473)](_0x1257d3(0x40e)),_0x39820b=_0x5286ff[_0x1257d3(0x2bd)]['find'](_0x220944=>_0x220944['id']===_0x51b1ea['id']);if(!_0x39820b){_0x5237d6[_0x1257d3(0xc95)]('Noir\x27s\x20Note:\x20播放列表里找不到这首歌，你是不是又偷偷动了什么？\x20ID:',_0x578ad1['id']);return;}const _0x357e76=_0x59d355[_0x1257d3(0x706)][_0x1257d3(0x5c0)](_0x39820b[_0x1257d3(0x5c4)])&&!_0x59d355['paused'];_0x357e76?_0x59d355[_0x1257d3(0xb57)]():(_0x2fb573={'title':_0x39820b['songName'],'artist':_0x39820b['artist'],'cover':_0x39820b[_0x1257d3(0x4f6)]||(_0x39820b['coverId']?'db:'+_0x39820b[_0x1257d3(0x4f9)]:_0xf11f4e),'isFromLibrary':!![]},_0x59d355[_0x1257d3(0x706)]=_0x39820b[_0x1257d3(0x5c4)],_0x59d355[_0x1257d3(0x50a)](),_0x418012[_0x1257d3(0xd5d)]=_0x3df4b5[_0x1257d3(0x2bd)][_0x1257d3(0x6f6)](_0x5b1a85=>_0x5b1a85['id']===_0x886083['id']),_0x437a4d());}}else{_0xffff1f(_0x1257d3(0x771),_0x1257d3(0x852));if(!_0x3e428a){if('rrXSw'!==_0x1257d3(0xba9)){const _0x1a485c=_0x509066(_0x41cd4d['participantIds'][0x0]);return _0x1a485c?_0x778067(_0x1257d3(0x6ea)+_0x1a485c['id']):_0x2b2570['resolve'](null);}else{const _0x473d35='chat_char_'+Date[_0x1257d3(0x144)]();_0xc494e4(_0x473d35);}}}}function _0x483935(){const _0x418112=_0x57ab4d;_0x2d4f4e[_0x418112(0x2d4)]='',_0x68fc0e[_0x418112(0x6f0)]='';if(_0xa7652b[_0x418112(0xbfe)][_0x418112(0x893)]<0x2){_0x198030(_0x418112(0xdd2));return;}_0xa7652b['characters'][_0x418112(0x1dc)](_0x490227=>{const _0x2e71f7=_0x418112,_0x2246b6=document[_0x2e71f7(0x7a9)]('li');_0x2246b6[_0x2e71f7(0xd04)]='member-selection-item',_0x2246b6[_0x2e71f7(0x6f0)]=_0x2e71f7(0xc46)+_0x490227['id']+_0x2e71f7(0x6bd)+_0x490227['id']+_0x2e71f7(0xaea)+(_0x490227[_0x2e71f7(0x98f)]||_0x96c08e)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-'+_0x490227['id']+_0x2e71f7(0xcd5)+_0x490227[_0x2e71f7(0xe79)]+_0x2e71f7(0xc7f),_0x68fc0e[_0x2e71f7(0xced)](_0x2246b6);}),_0xffff1f(_0x418112(0x485),_0x418112(0xaf4));}function _0x477f25(){const _0x31d024=_0x57ab4d,_0x4c8639=_0x2d4f4e[_0x31d024(0x2d4)]['trim']();if(!_0x4c8639){_0x198030(_0x31d024(0xa73));return;}const _0x5f364b=Array[_0x31d024(0x90a)](_0x68fc0e[_0x31d024(0xe54)](_0x31d024(0x16a)))['map'](_0x3dc86c=>_0x3dc86c['dataset']['id']);if(_0x5f364b[_0x31d024(0x893)]<0x2){if('jKzXM'===_0x31d024(0xd25))_0x2fae76[_0x31d024(0x863)](_0x31d024(0xd62)+_0x15440c['id']),_0xe225c8('群聊\x22'+_0x419108[_0x31d024(0xe79)]+'\x22\x20的聊天记录已清空。');else{_0x198030(_0x31d024(0xb46));return;}}const _0x299b86={'id':_0x31d024(0xc2c)+Date[_0x31d024(0x144)](),'type':_0x31d024(0x4b5),'name':_0x4c8639,'participantIds':_0x5f364b};_0xa7652b[_0x31d024(0x4ec)][_0x31d024(0x214)](_0x299b86),_0xa7652b['activeChatId']=_0x299b86['id'],_0x2e0417(),_0xa7d798(),_0x5296c9(),_0x10895d(),_0x198030(_0x31d024(0xb29)+_0x4c8639+_0x31d024(0x608)),_0xffff1f('chat',_0x31d024(0x485));}_0x23c90b['addEventListener'](_0x57ab4d(0x493),()=>_0x39c25e[_0x57ab4d(0x493)]()),_0x791afc[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x5a0d22),_0x39c25e[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),_0x520a06),_0x1a6a06[_0x57ab4d(0xc04)]('click',_0x4c0102),_0x47f53d['addEventListener'](_0x57ab4d(0x493),()=>_0x4adeda[_0x57ab4d(0x970)]['remove'](_0x57ab4d(0x348))),_0x4bd97a['addEventListener'](_0x57ab4d(0x493),()=>_0x4adeda[_0x57ab4d(0x970)][_0x57ab4d(0x702)](_0x57ab4d(0x348))),_0xddeed3[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x3e6fd3=_0x57ab4d;_0x3e6fd3(0x83b)!==_0x3e6fd3(0x973)?(_0x64eac8[_0x3e6fd3(0x6d1)](),navigator[_0x3e6fd3(0x9e)][_0x3e6fd3(0x234)](_0x64eac8[_0x3e6fd3(0x2d4)])[_0x3e6fd3(0xcae)](()=>{const _0x430d49=_0x3e6fd3;_0x430d49(0x81c)!==_0x430d49(0x673)?_0x198030(_0x430d49(0xcf3)):(_0x3ede0b[_0x430d49(0x970)]['add'](_0x430d49(0xc0a)),_0x25c312[_0x430d49(0x970)]['add']('is-exiting-right'),_0x3a31a1[_0x430d49(0x970)][_0x430d49(0xddb)](_0x430d49(0x18c)),_0xda8a49(()=>{const _0x4f2ee6=_0x430d49;_0x45fbcf['classList'][_0x4f2ee6(0x702)](_0x4f2ee6(0x18c),_0x4f2ee6(0xe27)),_0xfbb3ca['classList'][_0x4f2ee6(0x702)](_0x4f2ee6(0xc0a)),_0x7a6f86[_0x4f2ee6(0x362)]=_0x9896b6,_0x49a69c(),_0x30c74a[_0x4f2ee6(0xabb)]=![];},0x2bc));})['catch'](_0x1d5ddb=>{const _0x213671=_0x3e6fd3;_0x198030(_0x213671(0x212));})):_0x24fa56[_0x3e6fd3(0x21b)]({'behavior':_0x3e6fd3(0x524),'block':_0x3e6fd3(0xaaa)});}),_0x4768e6[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x5289f4),_0x2449f9[_0x57ab4d(0xc04)]('click',_0x49fcb8),_0x3322b6[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x4bd376['classList'][_0x57ab4d(0x702)](_0x57ab4d(0x348))),_0x493a4a[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x4bd376[_0x57ab4d(0x970)]['remove']('show')),_0x2965c6[_0x57ab4d(0xc04)]('click',()=>_0x2a4b9c[_0x57ab4d(0x493)]()),_0x3ca6e1['addEventListener'](_0x57ab4d(0x493),()=>_0x2c30b1[_0x57ab4d(0x493)]()),_0x2a4b9c[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),_0x4b2407=>{const _0x223370=_0x57ab4d,_0x549f42=_0x4b2407[_0x223370(0x63c)]['files'][0x0];if(!_0x549f42)return;const _0x15d281=URL['createObjectURL'](_0x549f42);_0x2965c6[_0x223370(0x3e4)]['backgroundImage']=_0x223370(0x6cb)+_0x15d281+'\x27)';}),_0x2c30b1[_0x57ab4d(0xc04)]('change',_0x13f8b4=>{const _0x481632=_0x57ab4d,_0xd63401=_0x13f8b4[_0x481632(0x63c)][_0x481632(0xcf5)][0x0];if(!_0xd63401)return;const _0x50dc2a=URL[_0x481632(0xc18)](_0xd63401);_0x3ca6e1[_0x481632(0x3e4)][_0x481632(0x16b)]=_0x481632(0x6cb)+_0x50dc2a+'\x27)';}),_0x372af4[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x2c4ead[_0x57ab4d(0x493)]()),_0x5adb10[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x52ce55=_0x57ab4d;localStorage['removeItem'](_0x52ce55(0x8c3)),_0x54334a(),_0x198030(_0x52ce55(0xf8));}),_0x2c4ead['addEventListener'](_0x57ab4d(0x1c4),async _0x20df5c=>{const _0x313a1c=_0x57ab4d;if(_0x313a1c(0xc45)!==_0x313a1c(0xc45))_0x845986[_0x313a1c(0xc95)](_0x313a1c(0xdc1),_0x4651bd);else{const _0x3787a6=_0x20df5c[_0x313a1c(0x63c)][_0x313a1c(0xcf5)][0x0];if(!_0x3787a6)return;try{const _0x2e1e=await _0x351f2f(_0x3787a6);localStorage[_0x313a1c(0x29d)]('customFeedWallpaper',_0x2e1e),_0x54334a(),_0x198030(_0x313a1c(0xafb));}catch(_0x9b5f1a){_0x198030(_0x313a1c(0xd33)+_0x9b5f1a[_0x313a1c(0xe32)]);}}}),document[_0x57ab4d(0x473)](_0x57ab4d(0x838))['addEventListener']('click',()=>_0xffff1f(_0x57ab4d(0x771),_0x57ab4d(0x8a5))),document['getElementById'](_0x57ab4d(0xa27))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x97752c);const _0xe8c5d8=document[_0x57ab4d(0x473)](_0x57ab4d(0x2ac)),_0x559ebf=document['getElementById'](_0x57ab4d(0x9e8));_0xe8c5d8[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x559ebf['click']()),_0x559ebf[_0x57ab4d(0xc04)]('change',_0x5e2689=>{const _0x4efb9f=_0x57ab4d;if(_0x4efb9f(0x978)!==_0x4efb9f(0x15d)){const _0x1fc7a1=_0x5e2689[_0x4efb9f(0x63c)][_0x4efb9f(0xcf5)][0x0];if(!_0x1fc7a1)return;const _0x2459de=URL[_0x4efb9f(0xc18)](_0x1fc7a1);_0xe8c5d8['src']=_0x2459de,_0xe8c5d8['onload']=()=>{const _0x2c942b=_0x4efb9f;if('FouDp'!==_0x2c942b(0x37a))URL[_0x2c942b(0x906)](_0x2459de);else{_0x5bde95(_0x2c942b(0x6b3));return;}};}else{const _0x2b4312=_0x460344[_0x4482a8][_0x4efb9f(0x8eb)]();if(_0x2b4312[_0x4efb9f(0x324)](_0x4efb9f(0xdd))){const _0x228621=_0x2ff677(_0x2b4312);_0x228621&&_0x2d4b60[_0x4efb9f(0x214)](_0x228621);}else _0x33be05['push'](_0x2b4312);_0x5843f9++;}});const _0x14ccd2=document[_0x57ab4d(0x473)](_0x57ab4d(0xc43))[_0x57ab4d(0x80e)],_0x5bb149=document[_0x57ab4d(0x473)]('group-bg-input'),_0x51989b=document[_0x57ab4d(0x473)](_0x57ab4d(0xc43));_0x14ccd2[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x5bb149[_0x57ab4d(0x493)]()),_0x5bb149[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),_0x232aef=>{const _0x469ab9=_0x57ab4d,_0x487c60=_0x232aef[_0x469ab9(0x63c)][_0x469ab9(0xcf5)][0x0];if(!_0x487c60)return;const _0x3e17f0=URL['createObjectURL'](_0x487c60);document[_0x469ab9(0x473)](_0x469ab9(0xc43))['style'][_0x469ab9(0x16b)]='url(\x27'+_0x3e17f0+'\x27)';});const _0x334c9d=document[_0x57ab4d(0x373)]('#group-settings-screen\x20.select-box'),_0xd666c9=document['getElementById'](_0x57ab4d(0xa14));_0x334c9d['addEventListener'](_0x57ab4d(0x493),_0x2b0a1f=>{const _0x33afd6=_0x57ab4d;_0x2b0a1f[_0x33afd6(0x954)](),_0xd666c9[_0x33afd6(0x970)][_0x33afd6(0x401)](_0x33afd6(0x9cb)),_0x334c9d[_0x33afd6(0x970)][_0x33afd6(0x401)](_0x33afd6(0x5b5));}),_0xd666c9[_0x57ab4d(0xc04)]('change',_0x59b209),document[_0x57ab4d(0x473)](_0x57ab4d(0xd15))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x27422f),document['getElementById'](_0x57ab4d(0xdc4))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0x26c1da=_0x57ab4d;if(_0x26c1da(0xd61)===_0x26c1da(0xbe6))!_0x2ff9b7['contains'](_0x1c8149[_0x26c1da(0x63c)])&&_0x55a706[_0x26c1da(0x63c)]!==_0x533f57&&_0x24287a[_0x26c1da(0x63c)]!==_0x2f0a32&&_0x4bf7ab[_0x26c1da(0x970)][_0x26c1da(0x702)](_0x26c1da(0x348));else{const _0x5355d8=_0x41c782();if(!_0x5355d8||_0x5355d8[_0x26c1da(0x45c)]!=='group')return;const _0x58e8f5=await _0x410108(_0x26c1da(0xd09)+_0x5355d8[_0x26c1da(0xe79)]+'”吗？此操作不可撤销。');if(_0x58e8f5){if(_0x26c1da(0x59c)!==_0x26c1da(0xc53))_0x163f84(_0x5355d8['id']),_0x198030('群聊已解散。'),_0xffff1f(_0x26c1da(0x771)),_0x467fe1(![]);else{_0x2ceac3['innerHTML']=_0x26c1da(0x6e9);return;}}}});const _0xa4f958=document[_0x57ab4d(0x373)](_0x57ab4d(0x337)),_0x2ba6d9=document[_0x57ab4d(0x473)]('world-book-checkboxes-container');_0xa4f958[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x2cc29c=>{const _0x48a9aa=_0x57ab4d;_0x2cc29c['stopPropagation'](),_0x2ba6d9[_0x48a9aa(0x970)][_0x48a9aa(0x401)](_0x48a9aa(0x9cb)),_0xa4f958[_0x48a9aa(0x970)][_0x48a9aa(0x401)](_0x48a9aa(0x5b5));}),_0x2ba6d9['addEventListener']('change',_0x2c5a72),document[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x3d7356=>{const _0x6dcf4f=_0x57ab4d;if(!document['querySelector']('.custom-multiselect')[_0x6dcf4f(0x85f)](_0x3d7356[_0x6dcf4f(0x63c)])){if(_0x6dcf4f(0x24d)!==_0x6dcf4f(0x24d))return _0x1b1a30(_0xede5ec)[_0x6dcf4f(0xcae)](_0x1ad259=>_0x1ad259[_0x6dcf4f(0x5c1)]());else _0x2ba6d9['classList'][_0x6dcf4f(0x702)](_0x6dcf4f(0x9cb)),_0xa4f958['classList'][_0x6dcf4f(0x702)](_0x6dcf4f(0x5b5));}}),_0x405039[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0xa0d271=_0x57ab4d;if(_0xa0d271(0xabc)!==_0xa0d271(0x73f))_0x96d9f0(),_0xffff1f(_0xa0d271(0x7b6),_0xa0d271(0xbd6));else{const _0x2ff68b=_0x474d26['createElement']('li');_0x2ff68b[_0xa0d271(0xd04)]='character-item',_0x2ff68b[_0xa0d271(0x9c6)][_0xa0d271(0xa48)]=_0x33611d['id'],_0x2ff68b[_0xa0d271(0x6f0)]=_0xa0d271(0xa3d)+(_0x3cbdad['avatar']||_0x3a0754)+_0xa0d271(0x729)+_0x5b6ca9[_0xa0d271(0xe79)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>'+(_0x5ecce3['remark']||'私聊')+_0xa0d271(0xc03),_0x2ff68b[_0xa0d271(0xc04)](_0xa0d271(0x493),()=>{_0x3ae104(_0x512c56['id']);}),_0x5738b5['appendChild'](_0x2ff68b);}}),document[_0x57ab4d(0x473)](_0x57ab4d(0x697))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0xbd6),_0x57ab4d(0x7b6))),document[_0x57ab4d(0x473)](_0x57ab4d(0xce7))['addEventListener'](_0x57ab4d(0x493),()=>_0x4b2086()),document[_0x57ab4d(0x473)](_0x57ab4d(0x16f))['addEventListener']('click',()=>{const _0x4178f0=_0x57ab4d;if('GNlZJ'!==_0x4178f0(0xaa3))return _0x3d4a1e[_0x4178f0(0xc95)]('生成直播总结失败:',_0x406f6b),_0x2374d3(_0x4178f0(0x4f8)+_0x1b9fdc['message']),null;else _0x96d9f0(),_0xffff1f(_0x4178f0(0x7b6),_0x4178f0(0x447));}),document[_0x57ab4d(0x473)](_0x57ab4d(0xb11))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x59d463),document['getElementById'](_0x57ab4d(0x611))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x43b1fc),_0x1d3cdb[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0x772),_0x57ab4d(0xbd6))),_0x55ffa7[_0x57ab4d(0xc04)]('click',()=>_0xffff1f(_0x57ab4d(0xbd6),_0x57ab4d(0x772))),_0x34c2e6[_0x57ab4d(0xc04)]('click',()=>_0x39b5d3[_0x57ab4d(0x493)]()),_0x39b5d3[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),async _0x4b2aa0=>{const _0x2122a0=_0x57ab4d;if(_0x2122a0(0xcbb)===_0x2122a0(0xcbb)){const _0x50e776=_0x4b2aa0['target'][_0x2122a0(0xcf5)][0x0];if(!_0x50e776)return;await _0x3a87bc(_0x50e776);}else for(const _0xbd5140 of _0x45d246[_0x2122a0(0x52d)]){let _0xa9f5f4=_0x45d62d['worldBooks'][_0x2122a0(0x394)](_0x12441b=>_0x12441b[_0x2122a0(0xe79)]===_0xbd5140['name']&&(_0x12441b[_0x2122a0(0x45e)]||_0x2122a0(0x46b))===(_0xbd5140['categoryId']||'default'));if(_0xa9f5f4)_0x207d22[_0x2122a0(0x214)](_0xa9f5f4['id']);else{const _0x1bcd7c={'id':_0x2122a0(0xe1c)+_0x503c93[_0x2122a0(0x144)]()+'_'+_0x4c3f66['random'](),'name':_0xbd5140['name'],'content':_0xbd5140[_0x2122a0(0xb17)],'categoryId':_0xbd5140[_0x2122a0(0x45e)]||_0x2122a0(0x46b)};_0x53f5c2[_0x2122a0(0x52d)][_0x2122a0(0x214)](_0x1bcd7c),_0x2593dd[_0x2122a0(0x214)](_0x1bcd7c['id']);}}}),_0x4486c1['addEventListener'](_0x57ab4d(0x493),()=>{const _0xa95e15=_0x57ab4d;if(_0xa95e15(0x267)===_0xa95e15(0x267)){if(_0x14788b)return;_0x14788b=!![],_0xa7652b[_0xa95e15(0xd5b)]=null,document[_0xa95e15(0x473)](_0xa95e15(0x42e))[_0xa95e15(0x970)][_0xa95e15(0x702)](_0xa95e15(0xa8c)),_0xa7d798(),_0xffff1f(_0xa95e15(0x771),_0xa95e15(0xbd6)),setTimeout(()=>{const _0xef77ba=_0xa95e15;if(_0xef77ba(0x4d4)==='XxFHK')_0x14788b=![];else{const _0x4f7690=_0x3b3647===_0x1b90ec?'>>\x20':'';return''+_0x4f7690+_0x325ee4[_0xef77ba(0x51c)];}},0x190);}else _0xfdfcfe[_0xa95e15(0xdd0)]?_0x263e2a():_0x366aaf[_0xa95e15(0x970)]['remove'](_0xa95e15(0x348));}),_0x32d7f2[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x13477a=_0x57ab4d;if(_0x13477a(0xe0)===_0x13477a(0xe0)){_0x5efd67();const _0x48dcb6=(_0xa7652b['apiSettings'][_0x13477a(0x4f5)]||'')[_0x13477a(0x5c0)](_0x22c25a);_0x5bdcae[_0x13477a(0xdeb)]=_0x48dcb6,_0xffff1f('settings',_0x13477a(0xbd6));}else _0x595829[_0x13477a(0x63c)][_0x13477a(0x2d4)]='';}),_0x18375c[_0x57ab4d(0xc04)]('click',()=>_0xffff1f(_0x57ab4d(0xbd6),'settings')),_0x18375c['addEventListener'](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0xbd6),_0x57ab4d(0x59f)));const _0xa476dc=async _0x5811c2=>{const _0x4012c0=_0x57ab4d;if(_0x14788b)return;_0x14788b=!![],_0x27a15c(!![],_0x4012c0(0x4ac)),await new Promise(_0x3c1e5d=>setTimeout(_0x3c1e5d,0x32));try{_0x16b50b(),document[_0x4012c0(0x473)](_0x4012c0(0x5a9))[_0x4012c0(0x970)]['remove']('show');const _0x42cb24=document[_0x4012c0(0x473)]('quote-preview-area');if(_0x42cb24)_0x42cb24[_0x4012c0(0x3e4)]['display']=_0x4012c0(0x4a6);const _0xfd93c7=document[_0x4012c0(0x473)]('chat-messages');if(_0xfd93c7)_0xfd93c7['innerHTML']='';_0xa7652b[_0x4012c0(0xd5b)]=null,_0x2e0417();const _0xc831a7=document[_0x4012c0(0x473)](_0x4012c0(0x42e));_0xc831a7[_0x4012c0(0x970)][_0x4012c0(0x702)](_0x4012c0(0xa8c));const _0x2b9639=document[_0x4012c0(0x473)]('chat-view-pane');_0x2b9639&&(_0x2b9639[_0x4012c0(0x3e4)][_0x4012c0(0x3b7)]=_0x4012c0(0x6c0),_0x2b9639[_0x4012c0(0x3e4)][_0x4012c0(0x919)]=_0x4012c0(0x519)),_0x5811c2==='home'&&_0xffff1f('home',_0x4012c0(0x771));}catch(_0x4ab0d1){console[_0x4012c0(0xc95)](_0x4012c0(0xc98),_0x4ab0d1);}finally{setTimeout(()=>{const _0x29344f=_0x4012c0;_0x29344f(0x939)==='NMJxw'?(_0x27a15c(![]),_0x14788b=![]):(_0x30e574(),_0x13fbed(_0x29344f(0x1cf),_0x29344f(0xbcc)));},0x12c);}},_0x2ff67c=document[_0x57ab4d(0x473)](_0x57ab4d(0x86d)),_0x28c999=_0x2ff67c['cloneNode'](!![]);_0x2ff67c[_0x57ab4d(0x355)][_0x57ab4d(0x635)](_0x28c999,_0x2ff67c),_0x28c999[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x5d3058=_0x57ab4d;_0xa476dc(_0x5d3058(0xc02));});const _0x10945a=document['getElementById'](_0x57ab4d(0xe2f)),_0x419bff=_0x10945a['cloneNode'](!![]);_0x10945a[_0x57ab4d(0x355)][_0x57ab4d(0x635)](_0x419bff,_0x10945a),_0x419bff[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x412999=_0x57ab4d;_0xa476dc(_0x412999(0xbd6));}),_0x1d7fbc[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x4f293e=_0x57ab4d;_0xffff1f(_0x4f293e(0x771),_0x4f293e(0x852));}),_0x24d84a[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x19d31b=_0x57ab4d;'neHOQ'!=='PRazM'?_0x118a61['classList'][_0x19d31b(0xddb)](_0x19d31b(0x348)):_0x26308c[_0x19d31b(0x226)]=_0x3da92f;}),_0x2a9d76[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x5bae04()),_0x1c4420[_0x57ab4d(0xc04)]('click',_0x4821dd);function _0x2ac217(_0x1afaf3){const _0x5c7c4c=_0x57ab4d;if(!_0x1afaf3||_0x1afaf3[_0x5c7c4c(0x45c)]!==_0x5c7c4c(0x4b5))return;const _0x272dd8=_0x5c7c4c(0x57a);document[_0x5c7c4c(0x5ef)][_0x5c7c4c(0x650)]('beforeend',_0x272dd8);const _0xc54706=document[_0x5c7c4c(0x473)]('group-options-modal'),_0x145afd=_0xc54706[_0x5c7c4c(0x373)](_0x5c7c4c(0x5a8)),_0x31c7bf=document[_0x5c7c4c(0x473)](_0x5c7c4c(0x90d)),_0x4adbca=document[_0x5c7c4c(0x473)](_0x5c7c4c(0x80c)),_0x641f22=document[_0x5c7c4c(0x473)](_0x5c7c4c(0x4b7)),_0x1b349d=document[_0x5c7c4c(0x473)](_0x5c7c4c(0x758)),_0x8c27bf=document['getElementById'](_0x5c7c4c(0x9a1)),_0x5ad2d7=()=>_0xc54706[_0x5c7c4c(0x702)]();_0x31c7bf[_0x5c7c4c(0xc04)]('click',async()=>{const _0x4b62e7=_0x5c7c4c;_0x5ad2d7();const _0x57ddb0=await _0x410108(_0x4b62e7(0x41f)+_0x1afaf3['name']+_0x4b62e7(0xa82));if(_0x57ddb0){if(_0x4b62e7(0xd6c)!=='rvQeR')_0x1d65d4=_0x57fd13[_0x4b62e7(0x180)](_0x4a3fc3);else{_0x1afaf3['id']===_0xa7652b[_0x4b62e7(0xd5b)]&&(_0x4b62e7(0xbc6)!==_0x4b62e7(0xbc6)?_0x170617[_0x4b62e7(0x29d)](_0x54f1a1,_0x2f0d09[_0x4b62e7(0xaf6)](_0x55146b)):(_0x16b50b(),_0xa7652b['conversationHistory']=[],_0x1f1d12()));try{if('BbpPg'!=='BbpPg'){const _0x2ea242=_0xd08210();_0x2ea242&&_0x2ea242[_0x4b62e7(0x2a0)]&&_0x2ea242[_0x4b62e7(0x2a0)][_0x4b62e7(0x46e)]&&(_0x28c7b6[_0x4b62e7(0x3e4)]['display']='flex',_0x579fb5(()=>_0x130838[_0x4b62e7(0x970)][_0x4b62e7(0xddb)]('show'),0xa));}else localStorage[_0x4b62e7(0x863)](_0x4b62e7(0xd62)+_0x1afaf3['id']),_0x198030(_0x4b62e7(0x161)+_0x1afaf3[_0x4b62e7(0xe79)]+_0x4b62e7(0xb0f));}catch(_0x4a921b){console[_0x4b62e7(0xc95)](_0x4b62e7(0xbfc)+_0x1afaf3['id'],_0x4a921b),_0x198030('清空聊天记录失败。');}}}}),_0x4adbca['addEventListener'](_0x5c7c4c(0x493),()=>{const _0x3f7a71=_0x5c7c4c;_0x5ad2d7(),_0x198030(_0x3f7a71(0x595));}),_0x641f22[_0x5c7c4c(0xc04)](_0x5c7c4c(0x493),async()=>{const _0x31cad4=_0x5c7c4c;if(_0x31cad4(0xdce)===_0x31cad4(0x6d3))return _0x5354bf[_0x31cad4(0x6e4)](_0x31cad4(0x465)),0x0;else{_0x5ad2d7();const _0x3e0e9e=prompt(_0x31cad4(0xa05),_0x1afaf3[_0x31cad4(0xe79)]);_0x3e0e9e&&_0x3e0e9e[_0x31cad4(0x8eb)]()&&_0x3e0e9e!==_0x1afaf3[_0x31cad4(0xe79)]&&(_0x1afaf3[_0x31cad4(0xe79)]=_0x3e0e9e[_0x31cad4(0x8eb)](),_0x2e0417(),_0xa7d798(),_0x5296c9(),_0x198030(_0x31cad4(0x10b)+_0x1afaf3[_0x31cad4(0xe79)]+'\x22。'));}}),_0x1b349d[_0x5c7c4c(0xc04)](_0x5c7c4c(0x493),async()=>{const _0x455cbc=_0x5c7c4c;_0x5ad2d7();const _0x56aa46=await _0x410108('确定要删除群聊\x22'+_0x1afaf3[_0x455cbc(0xe79)]+_0x455cbc(0x194));_0x56aa46&&(_0x163f84(_0x1afaf3['id']),_0x198030(_0x455cbc(0x161)+_0x1afaf3[_0x455cbc(0xe79)]+_0x455cbc(0x8b1)),_0x467fe1(![]));}),_0x145afd[_0x5c7c4c(0xc04)](_0x5c7c4c(0x493),_0x5ad2d7),_0x8c27bf['addEventListener']('click',_0x5ad2d7);}_0x9a6149['addEventListener']('click',()=>{const _0x3ec76d=_0x57ab4d,_0x50b984=_0x41c782();if(_0x50b984&&_0x50b984[_0x3ec76d(0x45c)]===_0x3ec76d(0x722)){if('GcMoI'===_0x3ec76d(0xd77))_0x143667(_0x50b984[_0x3ec76d(0x584)][0x0]);else{const _0x99bde0=_0x339bd0(_0x2de37b);if(_0x99bde0){const _0x508524=_0x257967[_0x3ec76d(0x7a9)](_0x3ec76d(0xc37));_0x508524['value']=_0x99bde0['id'],_0x508524[_0x3ec76d(0x226)]=_0x99bde0[_0x3ec76d(0xe79)],_0x1fa2b4[_0x3ec76d(0xced)](_0x508524);}}}else{if(_0x50b984&&_0x50b984[_0x3ec76d(0x45c)]===_0x3ec76d(0x4b5)){if('NgQKE'===_0x3ec76d(0xd9d))_0x37bb4e(_0x50b984['id']);else{if(_0x54b656[_0x3ec76d(0x45c)]==='touchstart')_0x392d68[_0x3ec76d(0xd27)]();_0x1f2403(_0x117d4f(_0x4cf22f,0xa),_0x5ca53e);}}}}),document[_0x57ab4d(0x473)](_0x57ab4d(0xcec))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x941f45=_0x57ab4d;if(_0x941f45(0x2d0)!==_0x941f45(0x2d0)){const _0x54d729=_0x1c8893[_0x941f45(0xdb0)](_0x3f5a3b,_0x941f45(0x4a7)),_0xc9eb7c=_0x54d729[_0x941f45(0xb9d)](_0x2ac722),_0xd318bd=_0xc9eb7c[_0x941f45(0x5d6)]({'id':_0x27302e,'data':_0x1d3c47});_0xd318bd[_0x941f45(0x7ad)]=()=>_0x7527b(),_0xd318bd[_0x941f45(0x835)]=()=>_0x4e6c0a(_0xd318bd[_0x941f45(0xc95)]);}else{if(!_0xa7652b[_0x941f45(0xd5b)]){if(_0x941f45(0x48b)!==_0x941f45(0x48b))return[];else{_0x198030(_0x941f45(0x6b3));return;}}const _0x5e5a7a=_0xa7652b[_0x941f45(0xba4)]['history']['filter'](_0x33732b=>_0x33732b['chatId']===_0xa7652b[_0x941f45(0xd5b)]);if(_0x5e5a7a[_0x941f45(0x893)]===0x0){_0x198030('还没有API调用记录哦，先发送一条消息吧！');return;}const _0x15844c=_0x5e5a7a[_0x5e5a7a['length']-0x1],_0x1aa656=new Date(_0x15844c[_0x941f45(0xb9f)])['toLocaleString']('zh-CN'),_0x36830a=_0x941f45(0xb80)+'🕐\x20最近一次：\x0a'+(_0x941f45(0x539)+_0x1aa656+'\x0a')+(_0x941f45(0xb9a)+(_0x15844c['model']||'未知')+'\x0a')+(_0x941f45(0x579)+_0x15844c[_0x941f45(0x8f0)]+'\x0a')+('📥\x20回复:\x20'+_0x15844c[_0x941f45(0x309)]+'\x0a')+(_0x941f45(0x506)+_0x15844c[_0x941f45(0xaac)]);_0x410108(_0x36830a);}}),_0x41f290['addEventListener']('keydown',_0x86586f=>{const _0x331c8b=_0x57ab4d;_0x86586f[_0x331c8b(0x834)]==='Enter'&&!_0x86586f[_0x331c8b(0x90)]&&(_0x86586f[_0x331c8b(0xd27)](),_0x5bae04());});const _0x1004fd=()=>_0x118a61[_0x57ab4d(0x970)][_0x57ab4d(0x702)](_0x57ab4d(0x348));_0xd46ba6['addEventListener'](_0x57ab4d(0x493),_0x1004fd),_0x18ad23[_0x57ab4d(0xc04)]('click',_0x1004fd),_0x4550b3[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{_0x1004fd(),_0x143667();}),_0x6f0fa3[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{_0x1004fd(),_0x483935();}),_0x51bd40['addEventListener']('click',()=>{const _0x35cc3b=_0x57ab4d;_0xffff1f('chat',_0x35cc3b(0x485)),_0x467fe1(![]);}),_0x475fd3[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x477f25),_0x650a76['addEventListener'](_0x57ab4d(0x493),()=>{const _0xdfbcde=_0x57ab4d;_0x177eb9['classList'][_0xdfbcde(0x401)](_0xdfbcde(0x348)),_0x177eb9[_0xdfbcde(0x970)][_0xdfbcde(0x85f)]('show')&&(_0x37b09b[_0xdfbcde(0xc55)]=_0x37b09b['scrollHeight']);}),_0xe282ed[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x5e9404[_0x57ab4d(0x493)]());const _0x1d0fef=document['getElementById'](_0x57ab4d(0x7b5));_0x5e9404['addEventListener'](_0x57ab4d(0x1c4),_0x2f8406),_0x1d0fef['addEventListener'](_0x57ab4d(0x493),_0x8a4770);const _0x413834=document[_0x57ab4d(0x473)](_0x57ab4d(0xb2f)),_0x1db1f8=document[_0x57ab4d(0x473)](_0x57ab4d(0xa56)),_0x48ec00=document[_0x57ab4d(0x473)](_0x57ab4d(0xe14)),_0x304a43=document['getElementById'](_0x57ab4d(0x163)),_0x3fbf20=document[_0x57ab4d(0x473)]('copy-profile-button'),_0xd6f4d4=document['getElementById'](_0x57ab4d(0xb85)),_0x2bc4ad=document['getElementById'](_0x57ab4d(0x79d)),_0x8281fb=document[_0x57ab4d(0x473)]('profile-view-title');_0x413834&&_0x413834[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0x530b1f=_0x57ab4d;if(_0x530b1f(0x2bf)===_0x530b1f(0x99b)){const _0x31f9af=_0x261522[_0x530b1f(0x63c)][_0x530b1f(0xcf5)][0x0];if(!_0x31f9af)return;const _0x24b40c=_0x3b21b4['createObjectURL'](_0x31f9af);_0x5dc7e7[_0x530b1f(0x3e4)]['backgroundImage']=_0x530b1f(0x6cb)+_0x24b40c+'\x27)';}else{const _0x136106=_0x41c782();if(!_0x136106||_0x136106[_0x530b1f(0x45c)]!==_0x530b1f(0x722)){_0x198030(_0x530b1f(0x962));return;}const _0x2fc04d=_0x136106['participantIds'][0x0],_0x1c1a05=_0x1238ea(_0x2fc04d);if(!_0x1c1a05)return;try{_0x48ec00[_0x530b1f(0x2d4)]=_0x530b1f(0x34b),_0x1db1f8[_0x530b1f(0x970)][_0x530b1f(0xddb)](_0x530b1f(0x348)),_0x8281fb[_0x530b1f(0x226)]=_0x1c1a05[_0x530b1f(0xe79)]+_0x530b1f(0xb08);const _0x495111='nuomi_profile_tiaoTiao_'+_0x2fc04d,{value:_0xac02de}=await Capacitor[_0x530b1f(0x4be)]['Preferences']['get']({'key':_0x495111});if(_0xac02de){const _0x36feea=JSON[_0x530b1f(0x180)](_0xac02de),_0x222491=JSON[_0x530b1f(0xaf6)](_0x36feea,null,0x2);_0x48ec00[_0x530b1f(0x2d4)]=_0x222491;}else _0x530b1f(0x58a)!=='bcQsG'?_0x48ec00[_0x530b1f(0x2d4)]=_0x530b1f(0x4d6):(_0x182a34[_0x530b1f(0xc04)](_0x530b1f(0x493),()=>_0x2d34cf['click']()),_0x161441['addEventListener']('change',_0x1064c9));}catch(_0x45cbc6){console[_0x530b1f(0xc95)](_0x530b1f(0x1ee),_0x45cbc6),_0x48ec00['value']=_0x530b1f(0x876)+_0x45cbc6[_0x530b1f(0xe32)];}}});_0x304a43&&_0x304a43['addEventListener'](_0x57ab4d(0x493),()=>{const _0x503a35=_0x57ab4d;if(_0xa7652b['pendingProfileRefinement']){if(_0x503a35(0x51a)!=='QTDvP')_0x414c4a();else{const _0x370a5b=_0x321093[_0x503a35(0x19e)]?.[_0x503a35(0x581)]?.['正面']||[],_0x39238=_0x446199[_0x503a35(0x19e)]?.[_0x503a35(0x581)]?.['负面']||[];if(_0x370a5b['length']>0x0||_0x39238[_0x503a35(0x893)]>0x0){const _0x24bf3d=[];if(_0x370a5b[_0x503a35(0x893)]>0x0)_0x24bf3d[_0x503a35(0x214)](_0x503a35(0x553)+_0x370a5b[0x0]);if(_0x39238[_0x503a35(0x893)]>0x0)_0x24bf3d['push']('在意'+_0x39238[0x0]);_0x1f3f9b[_0x503a35(0x214)](_0x503a35(0x6a9)+_0x24bf3d[_0x503a35(0x332)]('，'));}}}else _0x1db1f8['classList'][_0x503a35(0x702)](_0x503a35(0x348));});_0x2bc4ad&&_0x2bc4ad[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x2082e3=_0x57ab4d;if('KDkQh'===_0x2082e3(0x671)){const _0x2be5fe=(_0x4db9aa[_0x2082e3(0x1ed)]||[])['map'](_0xc1d986=>'<div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>'+_0xc1d986+'</span>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x20')[_0x2082e3(0x332)]('');return _0x2082e3(0x597)+(_0x7c09d6[_0x2082e3(0xb2a)]||_0x2082e3(0xbe0))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>'+(_0x170a50[_0x2082e3(0xb9f)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#28a745;\x20font-weight:\x20500;\x22>'+(_0x372015[_0x2082e3(0xad6)]||_0x2082e3(0x920))+_0x2082e3(0x763)+_0x2be5fe+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20'+(_0x1e9eb4[_0x2082e3(0x44e)]||0x0)[_0x2082e3(0x684)](0x2)+_0x2082e3(0x131);}else{if(_0xa7652b[_0x2082e3(0xdd0)]){if(_0x2082e3(0x81e)!=='KSxbD'){_0x51ac46();const _0x126f8f=_0xd136f(_0x2082e3(0xa05),_0x256ede['name']);_0x126f8f&&_0x126f8f[_0x2082e3(0x8eb)]()&&_0x126f8f!==_0xb018fc[_0x2082e3(0xe79)]&&(_0x57bc2d[_0x2082e3(0xe79)]=_0x126f8f[_0x2082e3(0x8eb)](),_0x3f3fc5(),_0x4a3f4a(),_0x2deb75(),_0x33d446(_0x2082e3(0x10b)+_0x537b13[_0x2082e3(0xe79)]+'\x22。'));}else _0x414c4a();}else _0x1db1f8[_0x2082e3(0x970)]['remove']('show');}});_0x3fbf20&&(_0x57ab4d(0x1cc)!==_0x57ab4d(0xdc3)?_0x3fbf20['addEventListener']('click',()=>{const _0x40c3dc=_0x57ab4d;_0x48ec00[_0x40c3dc(0x6d1)](),navigator[_0x40c3dc(0x9e)]['writeText'](_0x48ec00[_0x40c3dc(0x2d4)])[_0x40c3dc(0xcae)](()=>{const _0x3e096c=_0x40c3dc;_0x3e096c(0x6b6)!==_0x3e096c(0xb02)?_0x198030(_0x3e096c(0xcf3)):(_0x40ef51=_0xd1c5cc[_0x3e096c(0xe79)]||_0x3e096c(0x156),_0x305541=_0x4e9259['participantIds'][_0x3e096c(0x893)]+_0x3e096c(0x75d));})[_0x40c3dc(0xbb7)](_0xb75c0=>{_0x198030('复制失败了，哼。');});}):_0x3c13e9(_0x57ab4d(0x6b7)+_0x455184[_0x57ab4d(0xe32)]));_0xd6f4d4&&('QzBsp'===_0x57ab4d(0x8c7)?_0xb45177[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x3b1d61=>{const _0x562311=_0x57ab4d,_0x4aad80=_0x3b1d61[_0x562311(0xa20)][_0x562311(0x9c6)][_0x562311(0x382)],_0x42f38c=_0x188a3f[_0x562311(0x9db)][_0x4aad80];_0x42f38c&&_0x5c171e(_0x42f38c,_0x4aad80);}):_0xd6f4d4['addEventListener'](_0x57ab4d(0x493),async()=>{const _0x3f1b60=_0x57ab4d,_0x33e46a=_0x41c782();if(!_0x33e46a||_0x33e46a[_0x3f1b60(0x45c)]!==_0x3f1b60(0x722))return;const _0x1040d1=_0x33e46a[_0x3f1b60(0x584)][0x0],_0x575cc4=_0x1238ea(_0x1040d1),_0x419bbb=await _0x410108(_0x3f1b60(0xc5f)+(_0x575cc4?.['name']||_0x3f1b60(0xe2c))+'对你的档案吗？\x0a\x0a这将清空TA对你的所有记忆和印象。');if(_0x419bbb)try{if('uigTD'===_0x3f1b60(0x1a8)){const _0xf0c55f=_0x3e991b[_0x3f1b60(0x473)](_0x3f1b60(0x207)),_0x312121=_0x504762[_0x3f1b60(0x473)]('organize-button-container'),_0x53807b=new _0x4b8ceb(),_0x343ab5=_0x376507[_0x3f1b60(0xde6)][_0x3f1b60(0x1a9)](_0x3888b0=>new _0x4b6866(_0x3888b0[_0x3f1b60(0xb9f)])['toDateString']()===_0x53807b['toDateString']());if(_0x343ab5['length']===0x0){_0xf0c55f['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>',_0x312121['innerHTML']='';return;}_0xf0c55f[_0x3f1b60(0x6f0)]='',_0x343ab5[_0x3f1b60(0x84c)]((_0x14d400,_0x412c98)=>_0x412c98[_0x3f1b60(0xb9f)]-_0x14d400[_0x3f1b60(0xb9f)])[_0x3f1b60(0x1dc)](_0x2636b7=>{const _0x174c58=_0x3f1b60,_0x45622c=_0x424788[_0x174c58(0x7a9)]('div');_0x45622c[_0x174c58(0xd04)]=_0x174c58(0x2b7),_0x45622c[_0x174c58(0x6f0)]=_0x174c58(0x36d)+_0x2636b7[_0x174c58(0xd76)]+_0x174c58(0x39c)+_0x2636b7['amount'][_0x174c58(0x684)](0x2)+_0x174c58(0x80f)+_0x2636b7['id']+_0x174c58(0xe94),_0xf0c55f[_0x174c58(0xced)](_0x45622c);}),_0x312121&&(_0x312121[_0x3f1b60(0x6f0)]=_0x3f1b60(0x9d9),_0x4b2d47[_0x3f1b60(0x473)]('organize-bill-button')[_0x3f1b60(0xc04)](_0x3f1b60(0x493),_0x1bf044));}else{const _0xa74eea=_0x3f1b60(0x710)+_0x1040d1,_0x16a4e2='nuomi_message_buffer_'+_0x1040d1;await Capacitor[_0x3f1b60(0x4be)]['Preferences']['remove']({'key':_0xa74eea}),await Capacitor[_0x3f1b60(0x4be)][_0x3f1b60(0x68c)]['remove']({'key':_0x16a4e2}),_0x198030(_0x3f1b60(0x150)),_0x1db1f8[_0x3f1b60(0x970)]['remove'](_0x3f1b60(0x348));}}catch(_0x4fd608){_0x198030(_0x3f1b60(0x9a8)+_0x4fd608[_0x3f1b60(0xe32)]);}}));const _0xe28b8f=document['getElementById'](_0x57ab4d(0x3f7));_0xe28b8f&&_0xe28b8f[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x414c4a);const _0x2feb7b=document[_0x57ab4d(0x473)](_0x57ab4d(0x403));_0x2feb7b&&(_0x57ab4d(0xd24)!=='mzCCB'?_0x2feb7b['addEventListener']('click',_0x22adbc):_0xcfae23(_0x819d9a));_0x31fc22[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x380c6f),_0xa49262[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x505658),_0x4e8cfa[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x1c3f22),_0x2e1309[_0x57ab4d(0xc04)]('click',_0x27422f),_0x10d802[_0x57ab4d(0xc04)]('click',async()=>{const _0xd38190=_0x57ab4d,_0x45b190=_0x56309d[_0xd38190(0x2d4)];if(!_0x45b190)return;const _0x3f3092=_0x1238ea(_0x45b190);if(!_0x3f3092)return;const _0x54f544=await _0x410108(_0xd38190(0xacb)+_0x3f3092[_0xd38190(0xe79)]+_0xd38190(0xb1a));_0x54f544&&(_0x159b06(_0x45b190),_0x198030('角色“'+_0x3f3092[_0xd38190(0xe79)]+_0xd38190(0xb4d)),_0xffff1f(_0xd38190(0x771),_0xd38190(0x852)),_0x467fe1(![]));}),_0x1216b5['addEventListener']('input',()=>{const _0x3778a4=_0x57ab4d,_0x301872=_0x1216b5[_0x3778a4(0x2d4)][_0x3778a4(0x8eb)]()[_0x3778a4(0x5c0)](_0x22c25a);_0x5bdcae[_0x3778a4(0xdeb)]=_0x301872;});async function _0x5ce8e7(){const _0x365475=_0x57ab4d,_0xec3c3b=_0x1216b5[_0x365475(0x2d4)][_0x365475(0x8eb)](),_0x116035=_0x260f75[_0x365475(0x2d4)][_0x365475(0x8eb)]();if(!_0xec3c3b||!_0x116035){_0x198030(_0x365475(0xbe8));return;}const _0x2616ae=_0xec3c3b['replace'](/\/+$/,''),_0x2c1230=_0x2616ae+_0x365475(0x396);_0x5bdcae[_0x365475(0xdeb)]=!![],_0x5bdcae[_0x365475(0x226)]=_0x365475(0x7e0),_0x26247d[_0x365475(0x970)][_0x365475(0x702)](_0x365475(0x348));try{const _0x3e0bfa=await fetch(_0x2c1230,{'headers':{'Authorization':_0x365475(0x216)+_0x500681(_0x116035)}});if(!_0x3e0bfa['ok'])throw new Error('服务器错误:\x20'+_0x3e0bfa['status']);const _0x42bf3a=await _0x3e0bfa[_0x365475(0x102)](),_0x304cab=(_0x42bf3a['data']||_0x42bf3a)[_0x365475(0x17f)](_0x222493=>_0x222493['id'])[_0x365475(0x84c)]();_0x304cab[_0x365475(0x893)]>0x0?'GXQRT'==='GXQRT'?(_0x26247d['innerHTML']='',_0x304cab['forEach'](_0x516cd7=>{const _0x43f106=_0x365475;if(_0x43f106(0x742)!==_0x43f106(0x998)){const _0x2ce0f7=document['createElement']('div');_0x2ce0f7[_0x43f106(0x226)]=_0x516cd7,_0x2ce0f7['addEventListener'](_0x43f106(0x493),()=>{const _0x170a72=_0x43f106;_0x170a72(0x4e4)===_0x170a72(0x282)?(_0x165438(![]),_0x3be3c3=![]):(_0x4ce00a[_0x170a72(0x2d4)]=_0x516cd7,_0x26247d[_0x170a72(0x970)][_0x170a72(0x702)]('show'));}),_0x26247d['appendChild'](_0x2ce0f7);}else _0x31bfc2[_0x43f106(0xd5b)]=_0x600c03[_0x43f106(0x4ec)][0x0]?.['id']||null,_0x391766(_0x1316d9[_0x43f106(0xd5b)]);}),_0x26247d['classList'][_0x365475(0xddb)](_0x365475(0x348)),_0x198030(_0x365475(0xa72)+_0x304cab[_0x365475(0x893)]+_0x365475(0xe91))):(_0x41787a(![]),_0x12aa0c(!![]),_0x208397(()=>{const _0x59e07f=_0x365475;_0xfd488b[_0x59e07f(0x3e4)][_0x59e07f(0x773)]=_0x59e07f(0x836),_0x1f4799['style'][_0x59e07f(0x5cf)]='1';},0x64),_0x46778f(()=>{_0x3a7eab=![];},0x1c2)):_0x365475(0x3b8)===_0x365475(0x3b8)?_0x198030(_0x365475(0xb8f)):(_0x4e9860[_0x365475(0x6e4)](_0x365475(0xaff)),_0x293cd5[_0x365475(0xdd0)]={'charId':_0x1518d9,'contextChatId':_0xa9d7c6[_0x365475(0xd5b)]},_0x481159());}catch(_0x51e725){'DvWXr'===_0x365475(0x7b3)?(_0x5f3879(_0x365475(0x771),_0x365475(0xbd6)),_0x55f305(()=>_0x247dea(),0x64)):_0x198030(_0x365475(0xa0e)+_0x51e725[_0x365475(0xe32)]+_0x365475(0x88b));}finally{_0x5bdcae[_0x365475(0xdeb)]=![],_0x5bdcae[_0x365475(0x226)]='获取';}}_0x5bdcae['addEventListener'](_0x57ab4d(0x493),_0x106afe=>{const _0x59eb30=_0x57ab4d;_0x59eb30(0x43e)!=='pXhng'?(_0x106afe[_0x59eb30(0x954)](),_0x5ce8e7()):_0x255fb5[_0x59eb30(0xabb)]=![];}),document[_0x57ab4d(0xc04)]('click',_0x52d9ed=>{const _0x4a836=_0x57ab4d;!_0x26247d['contains'](_0x52d9ed[_0x4a836(0x63c)])&&_0x52d9ed['target']!==_0x4ce00a&&_0x52d9ed[_0x4a836(0x63c)]!==_0x5bdcae&&_0x26247d[_0x4a836(0x970)][_0x4a836(0x702)](_0x4a836(0x348));});async function _0x351f2f(_0x165bcc){return await _0x40bef0(_0x165bcc,0x190,0.85);}_0x4333b7[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x274fdb[_0x57ab4d(0x493)]()),_0x274fdb[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),async _0x2556f5=>{const _0x432553=_0x57ab4d;if(_0x432553(0xb00)===_0x432553(0xb00)){const _0x25ccf7=_0x2556f5[_0x432553(0x63c)][_0x432553(0xcf5)][0x0];if(!_0x25ccf7)return;try{const _0x347622=await _0x351f2f(_0x25ccf7),_0x12c315=document[_0x432553(0x473)]('user-avatar-preview');_0x12c315[_0x432553(0x3e4)][_0x432553(0x16b)]=_0x432553(0x6cb)+_0x347622+'\x27)',_0x12c315[_0x432553(0x9c6)][_0x432553(0x73c)]=_0x347622;}catch(_0x20e27c){_0x198030('错误:\x20'+_0x20e27c[_0x432553(0xe32)]);}}else{const _0xeb99c7=_0x570ce6[_0x432553(0x72d)][_0x432553(0x8ff)](',')[0x1],_0x516a9a=_0x41c92d[_0x432553(0x72d)][_0x432553(0x825)](_0x10b278[_0x432553(0x72d)][_0x432553(0x740)](':')+0x1,_0x18a8cf['image']['indexOf'](';'))||'image/jpeg';_0x42011b[_0x432553(0x214)]({'inline_data':{'mime_type':_0x516a9a,'data':_0xeb99c7}});}}),_0x5412b2[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x19d06d[_0x57ab4d(0x493)]()),_0x19d06d[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),async _0x3c10de=>{const _0x10b02b=_0x57ab4d;if(_0x10b02b(0xcc)===_0x10b02b(0xcc)){const _0x221d7f=_0x3c10de['target'][_0x10b02b(0xcf5)][0x0];if(!_0x221d7f)return;try{_0x5412b2[_0x10b02b(0x706)]=await _0x351f2f(_0x221d7f);}catch(_0x3fbef9){_0x198030(_0x10b02b(0xd33)+_0x3fbef9['message']);}}else try{const _0x5b036a=_0x1e7905[_0x10b02b(0xc18)](_0x2af3d2),_0x5a294f='NoirCustomFont',_0x2e3dfe='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27'+_0x5a294f+'\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27'+_0x5b036a+'\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20';_0x5d30be[_0x10b02b(0x6f0)]=_0x2e3dfe,_0xd82d3b['documentElement'][_0x10b02b(0x3e4)][_0x10b02b(0xd2c)]('--custom-font-family','\x27'+_0x5a294f+'\x27'),_0x42735c['textContent']=_0x10b02b(0xb64);}catch(_0x4e04e4){_0x3b0e1c[_0x10b02b(0xc95)](_0x10b02b(0x71d),_0x4e04e4),_0x49e10b(_0x10b02b(0x224));}});function _0x37cfe0(){const _0x232b97=_0x57ab4d;if(_0x232b97(0x3f9)!=='lyZdR')_0x319111=_0x57f4da;else{const _0x28f27e=document['getElementById'](_0x232b97(0x5a9));_0x28f27e[_0x232b97(0x6f0)]='',_0xeb0acd=![];const _0x297a19=document[_0x232b97(0x7a9)](_0x232b97(0x527));_0x297a19['id']=_0x232b97(0x7e4),_0x297a19[_0x232b97(0x6f0)]=_0x232b97(0x662),_0x28f27e['appendChild'](_0x297a19);const _0x43ea00=document[_0x232b97(0x473)](_0x232b97(0x951)),_0x40e6d8=document['getElementById']('sticker-confirm-delete-btn'),_0x4c9ac2=document[_0x232b97(0x7a9)](_0x232b97(0x527));_0x4c9ac2[_0x232b97(0x3e4)][_0x232b97(0x1df)]=_0x232b97(0xe1f),_0x4c9ac2[_0x232b97(0x3e4)][_0x232b97(0x606)]='repeat(auto-fill,\x20minmax(60px,\x201fr))',_0x4c9ac2[_0x232b97(0x3e4)][_0x232b97(0xca4)]=_0x232b97(0x632),_0x4c9ac2[_0x232b97(0x3e4)][_0x232b97(0x1e1)]=_0x232b97(0x632),_0x4c9ac2['style'][_0x232b97(0x8f)]=_0x232b97(0xae0),_0x4c9ac2[_0x232b97(0x3e4)][_0x232b97(0x3df)]='auto',_0x28f27e[_0x232b97(0xced)](_0x4c9ac2);const _0x319704=_0x4281c0();_0x319704[_0x232b97(0x1dc)](_0x20d6f1=>{const _0x4f2d26=_0x232b97,_0x3ca8a6=document[_0x4f2d26(0x7a9)](_0x4f2d26(0x527));_0x3ca8a6[_0x4f2d26(0xd04)]=_0x4f2d26(0x1e5),_0x3ca8a6['dataset'][_0x4f2d26(0x8f6)]=_0x20d6f1[_0x4f2d26(0xe79)];const _0x1ddf34=document[_0x4f2d26(0x7a9)](_0x4f2d26(0x222));_0x1ddf34[_0x4f2d26(0x706)]=_0x20d6f1[_0x4f2d26(0x17c)],_0x1ddf34['loading']=_0x4f2d26(0xe77),_0x1ddf34[_0x4f2d26(0x136)]=_0x20d6f1[_0x4f2d26(0xe79)],_0x1ddf34[_0x4f2d26(0xd04)]='sticker-item',_0x3ca8a6[_0x4f2d26(0xced)](_0x1ddf34),_0x4c9ac2[_0x4f2d26(0xced)](_0x3ca8a6),_0x3ca8a6[_0x4f2d26(0xc04)]('click',()=>{const _0x5e0c9f=_0x4f2d26;if(_0xeb0acd){if(_0x5e0c9f(0x2c3)!==_0x5e0c9f(0x4ae)){_0x3ca8a6['classList']['toggle'](_0x5e0c9f(0xdfe));const _0x5d0d3d=_0x4c9ac2[_0x5e0c9f(0x373)]('.selected');_0x40e6d8[_0x5e0c9f(0x970)][_0x5e0c9f(0x401)]('active',!!_0x5d0d3d);}else{if(_0x39aaaa===null)return;_0x3f8005[_0x5e0c9f(0xdc0)][_0x5e0c9f(0x197)](_0x533459,0x1),_0x12b8e4(),_0x18b330(),_0x46afe2();}}else'XVyFf'!==_0x5e0c9f(0x437)?_0x29ef0b[_0x5e0c9f(0x858)]=null:_0x462a98(_0x20d6f1);});}),_0x43ea00[_0x232b97(0xc04)](_0x232b97(0x493),()=>{const _0x392c9e=_0x232b97;_0x392c9e(0x685)===_0x392c9e(0x127)?_0x3f3a0c[_0x392c9e(0x214)]('-\x20话题触及敏感点\x22'+_0x1b64c0+_0x392c9e(0x9e7)):(_0xeb0acd=!_0xeb0acd,_0x28f27e[_0x392c9e(0x970)][_0x392c9e(0x401)]('deletion-mode',_0xeb0acd),_0x43ea00['textContent']=_0xeb0acd?'完成':'管理',_0x40e6d8['style'][_0x392c9e(0x1df)]=_0xeb0acd?_0x392c9e(0x2a3):'none',!_0xeb0acd&&(_0x4c9ac2['querySelectorAll'](_0x392c9e(0x12e))['forEach'](_0x1c81b3=>_0x1c81b3[_0x392c9e(0x970)][_0x392c9e(0x702)]('selected')),_0x40e6d8[_0x392c9e(0x970)][_0x392c9e(0x702)](_0x392c9e(0x4b2))));}),_0x40e6d8[_0x232b97(0xc04)](_0x232b97(0x493),async()=>{const _0x30ad35=_0x232b97;if(_0x30ad35(0x6e6)!==_0x30ad35(0x49b)){const _0x495c19=_0x4c9ac2[_0x30ad35(0xe54)](_0x30ad35(0x12e));if(_0x495c19['length']===0x0)return;const _0x5d23cd=await _0x410108(_0x30ad35(0xb1b)+_0x495c19['length']+_0x30ad35(0x921));if(_0x5d23cd){const _0x1ea2ef=JSON['parse'](localStorage[_0x30ad35(0xb34)](_0x30ad35(0x648))||'[]');_0x495c19[_0x30ad35(0x1dc)](_0x46331e=>{const _0x4a0974=_0x30ad35,_0x1b7d83=_0x46331e['dataset']['stickerName'];!_0x1ea2ef[_0x4a0974(0x5c0)](_0x1b7d83)&&_0x1ea2ef[_0x4a0974(0x214)](_0x1b7d83);}),localStorage[_0x30ad35(0x29d)]('deletedStickers',JSON[_0x30ad35(0xaf6)](_0x1ea2ef)),_0xeb0acd=![],_0x37cfe0(),_0x198030(_0x30ad35(0xab6));}}else{const _0x37c891=_0x12ce92[_0x30ad35(0xbfe)][_0x30ad35(0x394)](_0x1b4f8e=>_0x1b4f8e['id']===_0x4f9ff5);_0x37c891&&_0x2f8444[_0x30ad35(0x8b3)](_0x37c891,_0x1aaef0);}}),_0x40e6d8[_0x232b97(0x3e4)]['display']=_0x232b97(0x4a6);const _0x5343bc=document[_0x232b97(0x473)]('chat-sticker-button'),_0x2697a6=new MutationObserver(()=>{const _0x249067=_0x232b97,_0x50085d=_0x28f27e[_0x249067(0x970)][_0x249067(0x85f)](_0x249067(0x348));_0x297a19[_0x249067(0x970)][_0x249067(0x401)](_0x249067(0x9cb),_0x50085d);if(!_0x50085d){if(_0x249067(0x112)!==_0x249067(0x112)){const _0xccefd4=_0x31ec80[_0x249067(0x473)](_0x249067(0xe14));_0xccefd4[_0x249067(0x6d1)](),_0x3d689e[_0x249067(0x296)](_0x249067(0xd9f)),_0x3ce863('档案内容已复制到剪贴板！');}else _0xeb0acd&&('rGANp'==='rGANp'?_0x43ea00[_0x249067(0x493)]():_0x39f17a[_0x249067(0xc95)](_0x249067(0xd20)+_0x2e9fec[_0x249067(0xe79)]+'\x20('+_0x1be4e5['id']+')\x20恢复头像失败:',_0xf93228));}});_0x2697a6[_0x232b97(0x716)](_0x28f27e,{'attributes':!![],'attributeFilter':[_0x232b97(0xe7a)]});}}function _0x4281c0(){const _0x4e8734=_0x57ab4d,_0x48889d=JSON[_0x4e8734(0x180)](localStorage[_0x4e8734(0xb34)](_0x4e8734(0x648))||'[]');if(_0x48889d['length']===0x0)return _0xb4768c;return _0xb4768c[_0x4e8734(0x1a9)](_0x475ac3=>!_0x48889d[_0x4e8734(0x5c0)](_0x475ac3[_0x4e8734(0xe79)]));}async function _0x3ac96f(_0x6e1141){const _0x557a70=_0x57ab4d,_0x1e5ce9=await _0x410108(_0x557a70(0x9b9));if(!_0x1e5ce9)return;const _0x36f878=_0xa7652b[_0x557a70(0x50b)][_0x557a70(0x6f6)](_0x1bce92=>_0x1bce92['id']===_0x6e1141);if(_0x36f878>-0x1){if(_0x557a70(0xdcd)===_0x557a70(0xdcd))_0xa7652b[_0x557a70(0x50b)][_0x557a70(0x197)](_0x36f878,0x1),_0x2e0417(),_0x342098(),_0x172357(),_0x10243a(),_0x198030('已经删掉了。');else{_0x25f24c=_0x2a6ea5(_0xebe32c[_0x557a70(0x996)]),_0xa2d29c[_0x557a70(0x6f0)]='';if(_0x13307f[_0x557a70(0x893)]===0x0){_0x47293c['innerHTML']=_0x557a70(0x767);return;}_0x4a5e15[_0x557a70(0x1dc)]((_0xcdf577,_0x594b22)=>{const _0xef1919=_0x557a70,_0x15b666=_0x17c3fb[_0xef1919(0x7a9)]('p');_0x15b666[_0xef1919(0x226)]=_0xcdf577[_0xef1919(0x51c)],_0x15b666['id']=_0xef1919(0x95d)+_0x594b22,_0xfa8754[_0xef1919(0xced)](_0x15b666);});}}}let _0xe300a2=null;function _0x2a6864(_0x2fa35){const _0x1708f5=_0x57ab4d;if('SWYHB'===_0x1708f5(0x926))_0x4db4da[_0x1708f5(0xc04)](_0x1708f5(0x493),_0x258602);else{if(_0xe300a2)clearTimeout(_0xe300a2);const _0x256179=_0x2fa35[_0x1708f5(0x63c)][_0x1708f5(0x4a0)]('.todo-item,\x20.important-day-item');if(!_0x256179)return;const _0x24fd0e=_0x256179[_0x1708f5(0x9c6)]['id'];if(!_0x24fd0e)return;const _0x1de7ec=()=>{const _0x57800d=_0x1708f5;'popGi'!=='TzFEc'?_0xe300a2=setTimeout(()=>{const _0x4526e5=_0x20c5;if(_0x2fa35['type']===_0x4526e5(0x69c))_0x2fa35['preventDefault']();_0x3ac96f(_0x24fd0e);},0x320):(_0x31680e['error'](_0x57800d(0x2d1),_0x22b5e9),_0x4f4205('保存失败:\x20'+_0x4996ad[_0x57800d(0xe32)]));},_0x6044cb=()=>{const _0x508f23=_0x1708f5;if('VlkIZ'!==_0x508f23(0x38e)){if(_0xe300a2)clearTimeout(_0xe300a2);}else _0x584426[_0x508f23(0x6e4)]('TODO:\x20结束直播并生成总结');};document[_0x1708f5(0xc04)](_0x1708f5(0x241),_0x6044cb,{'once':!![]}),document[_0x1708f5(0xc04)](_0x1708f5(0xcf0),_0x6044cb,{'once':!![]}),document[_0x1708f5(0xc04)](_0x1708f5(0x1d3),_0x6044cb,{'once':!![]}),document['addEventListener'](_0x1708f5(0x36a),_0x6044cb,{'once':!![]}),_0x1de7ec();}}function _0x2a2946(_0x5d4579){const _0x16d7d2=_0x57ab4d;if('wQdwS'!==_0x16d7d2(0x189)){const _0x559e19=_0xa7652b['chats']['find'](_0xc70582=>_0xc70582['participantIds'][_0x16d7d2(0x5c0)](_0x5d4579));if(!_0x559e19)return'';const _0x4aff40=_0x2e35cc(_0x559e19['id']),_0x476c29=_0xa7652b[_0x16d7d2(0x50b)][_0x16d7d2(0x1a9)](_0x104e69=>_0x104e69[_0x16d7d2(0x378)]===_0x4aff40['id']||!_0x104e69['userId']);if(_0x476c29[_0x16d7d2(0x893)]===0x0){if(_0x16d7d2(0x1c9)===_0x16d7d2(0xb9c))return;else return'';}const _0x559c30=_0x476c29[_0x16d7d2(0x17f)](_0x482f13=>{const _0x22af06=_0x16d7d2;if('wZytq'===_0x22af06(0x832)){const _0x3e67f6=_0x482f13[_0x22af06(0x45c)]==='important'?'纪念日':'待办';return _0x22af06(0x375)+_0x3e67f6+']\x20'+_0x482f13[_0x22af06(0x382)]+':\x20'+_0x482f13[_0x22af06(0xb17)];}else{let _0xcef983=_0x16373f[_0x22af06(0x8eb)]();const _0x18c741=_0xcef983[_0x22af06(0x41c)](/(\[[\s\S]*\])/);_0x18c741&&(_0xcef983=_0x18c741[0x1]);const _0x4af7a8=_0x247e31[_0x22af06(0x180)](_0xcef983);if(_0x51ec7d[_0x22af06(0x8aa)](_0x4af7a8)){_0x3755e4['activeMeetingScriptQueue']=[..._0x4af7a8],_0x118310[_0x22af06(0xd9c)][_0x521756['id']]=[..._0x4af7a8],_0x431e77();const _0x3867fb=_0x4af7a8[_0x22af06(0x17f)](_0x5c73e9=>_0x5c73e9[_0x22af06(0x9a4)]===_0x22af06(0xd5a)?_0x5c73e9['line']:_0x5c73e9['speaker']+':\x20'+_0x5c73e9[_0x22af06(0x5b1)])[_0x22af06(0x332)]('\x0a\x0a');_0x471135[_0x22af06(0xdc0)][_0x22af06(0x214)]({'role':_0x22af06(0x815),'senderId':_0x2b0ab3['id'],'timestamp':_0xd0de37['now'](),'isOffline':!![],'content':_0x3867fb});}}})[_0x16d7d2(0x332)]('\x0a');return _0x16d7d2(0x8c0)+_0x4aff40[_0x16d7d2(0xe79)]+'\x20记录)\x0a'+_0x559c30;}else{_0x5cd4c0[_0x16d7d2(0x6e4)]('Noir\x27s\x20Protocol:\x20Built-in\x20\x27HTML模块生成规则\x27\x20was\x20missing.\x20Adding\x20it\x20now.');const _0xc7225b=_0x16d7d2(0x43d),_0x4e4f0a={'id':_0x3c2a9b,'name':_0x16d7d2(0x968),'content':_0xc7225b,'categoryId':_0x1accdf['id']};_0x22af73[_0x16d7d2(0x52d)][_0x16d7d2(0x214)](_0x4e4f0a),_0x4b1463=!![];}}let _0x21c19a={'currentDate':new Date(),'selectedDate':_0x50fac2()};function _0x405d68(){const _0x1cb056=_0x57ab4d;if(_0x1cb056(0xb0c)!==_0x1cb056(0x82c)){document[_0x1cb056(0x473)]('app-calendar')['addEventListener'](_0x1cb056(0x493),()=>{const _0x3ac54c=_0x1cb056;_0x342098(),_0xffff1f('calendar',_0x3ac54c(0xbd6));}),document['getElementById'](_0x1cb056(0xa55))[_0x1cb056(0xc04)](_0x1cb056(0x493),()=>_0xffff1f(_0x1cb056(0xbd6),_0x1cb056(0xd3a))),document[_0x1cb056(0x473)](_0x1cb056(0x458))[_0x1cb056(0xc04)](_0x1cb056(0x493),()=>{const _0x46a692=_0x1cb056;_0x21c19a['currentDate']['setMonth'](_0x21c19a[_0x46a692(0x372)][_0x46a692(0xc57)]()-0x1),_0x342098();}),document[_0x1cb056(0x473)](_0x1cb056(0x12a))[_0x1cb056(0xc04)]('click',()=>{const _0x27b137=_0x1cb056;_0x21c19a[_0x27b137(0x372)]['setMonth'](_0x21c19a[_0x27b137(0x372)][_0x27b137(0xc57)]()+0x1),_0x342098();}),document['getElementById']('today-btn')[_0x1cb056(0xc04)](_0x1cb056(0x493),()=>{const _0x5797dd=_0x1cb056;_0x5797dd(0x686)!=='tOMMb'?(_0x21c19a[_0x5797dd(0x372)]=new Date(),_0x21c19a[_0x5797dd(0xd91)]=_0x50fac2(),_0x342098()):_0x420e95[_0x5797dd(0x186)]={'response_mime_type':_0x5797dd(0xb61)};}),document[_0x1cb056(0x473)](_0x1cb056(0xdaa))[_0x1cb056(0xc04)]('click',()=>{_0x3b5112(_0x21c19a['selectedDate']);}),document['getElementById'](_0x1cb056(0x4c4))[_0x1cb056(0xc04)](_0x1cb056(0x493),_0x2a457b),document[_0x1cb056(0x473)](_0x1cb056(0xc9c))[_0x1cb056(0xc04)](_0x1cb056(0x493),()=>document[_0x1cb056(0x473)](_0x1cb056(0x5c5))[_0x1cb056(0x970)][_0x1cb056(0x702)]('show')),document['getElementById'](_0x1cb056(0xd4c))[_0x1cb056(0xc04)](_0x1cb056(0x493),()=>document['getElementById'](_0x1cb056(0x5c5))[_0x1cb056(0x970)][_0x1cb056(0x702)]('show'));const _0x112cf3=document['getElementById'](_0x1cb056(0x18d));_0x112cf3[_0x1cb056(0xc04)](_0x1cb056(0xc32),_0x2a6864),_0x112cf3[_0x1cb056(0xc04)](_0x1cb056(0x69c),_0x2a6864,{'passive':![]});}else _0x18f13e='0x'+_0x1a3a66[0x1]+_0x53b831[0x1],_0x5af909='0x'+_0x3f8fe2[0x2]+_0x5c6513[0x2],_0x25e663='0x'+_0x5bf7be[0x3]+_0x165bad[0x3];}function _0x342098(){const _0x4e901b=_0x57ab4d,_0x22099b=_0x21c19a[_0x4e901b(0x372)][_0x4e901b(0x72f)](),_0xb2379=_0x21c19a['currentDate'][_0x4e901b(0xc57)]();document[_0x4e901b(0x473)](_0x4e901b(0xa5f))['textContent']=_0x22099b+'年\x20'+(_0xb2379+0x1)+'月',_0xd3da2e(_0x22099b,_0xb2379),_0x4efa85(_0x21c19a[_0x4e901b(0xd91)]);}function _0x10243a(){const _0x4ee52b=_0x57ab4d,_0x23b5c3=document[_0x4ee52b(0x473)](_0x4ee52b(0x596));if(!_0x23b5c3)return;const _0x3f832f=_0x50fac2(),_0xe3b745=_0xa7652b['calendarEvents'][_0x4ee52b(0x1a9)](_0x1e34c9=>_0x1e34c9['date']===_0x3f832f&&_0x1e34c9[_0x4ee52b(0x45c)]===_0x4ee52b(0x607));_0x23b5c3[_0x4ee52b(0x6f0)]='',_0xe3b745[_0x4ee52b(0x893)]>0x0?_0xe3b745['forEach'](_0x524f39=>{const _0x4c320d=_0x4ee52b;if('apgWl'===_0x4c320d(0xea)){const _0xaa36f4=document[_0x4c320d(0x7a9)](_0x4c320d(0x527));_0xaa36f4[_0x4c320d(0xd04)]=_0x4c320d(0x85a),_0xaa36f4[_0x4c320d(0x226)]=_0x524f39[_0x4c320d(0xb17)],_0x23b5c3['appendChild'](_0xaa36f4);}else{if(!_0x49d3fc[_0x4c320d(0xf7)])return _0x187729[_0x4c320d(0x932)][_0x4c320d(0x394)](_0xccfbd5=>_0xccfbd5['id']===_0x3c7280[_0x4c320d(0xa4f)])||_0xf3ddcb['userProfiles'][0x0];const _0x32cc43=_0x478d45[_0x4c320d(0x4ec)][_0x4c320d(0x394)](_0x310108=>_0x310108[_0x4c320d(0x45c)]===_0x4c320d(0x722)&&_0x310108[_0x4c320d(0x584)][_0x4c320d(0x5c0)](_0x4bc02a['activeDiaryCharacterId'])),_0x224422=_0x32cc43?.[_0x4c320d(0x8f5)]||_0x515e43[_0x4c320d(0xa4f)];return _0x52a11f[_0x4c320d(0x932)][_0x4c320d(0x394)](_0x5790c1=>_0x5790c1['id']===_0x224422)||_0xe145a5[_0x4c320d(0x932)][0x0];}}):_0x23b5c3[_0x4ee52b(0x6f0)]=_0x4ee52b(0x6ae);}function _0xd3da2e(_0x44bafb,_0x2c8d9c){const _0x27802b=_0x57ab4d,_0x3f793c=document[_0x27802b(0x473)](_0x27802b(0xc5e));_0x3f793c[_0x27802b(0x6f0)]='';const _0x41ceab=new Date(_0x44bafb,_0x2c8d9c,0x1)[_0x27802b(0x441)](),_0x49bbea=new Date(_0x44bafb,_0x2c8d9c+0x1,0x0)['getDate'](),_0x6dbc8e=_0x50fac2();for(let _0x90168e=0x0;_0x90168e<_0x41ceab;_0x90168e++){_0x3f793c[_0x27802b(0xced)](document[_0x27802b(0x7a9)]('div'));}for(let _0x13aa5d=0x1;_0x13aa5d<=_0x49bbea;_0x13aa5d++){const _0x97a902=document[_0x27802b(0x7a9)](_0x27802b(0x527));_0x97a902[_0x27802b(0xd04)]=_0x27802b(0x5f7);const _0x2c94d5=_0x44bafb+'-'+String(_0x2c8d9c+0x1)[_0x27802b(0x2c8)](0x2,'0')+'-'+String(_0x13aa5d)[_0x27802b(0x2c8)](0x2,'0');if(_0x2c94d5===_0x6dbc8e)_0x97a902[_0x27802b(0x970)][_0x27802b(0xddb)]('is-today');if(_0x2c94d5===_0x21c19a[_0x27802b(0xd91)])_0x97a902[_0x27802b(0x970)][_0x27802b(0xddb)](_0x27802b(0xcc2));const _0x1ab329=document[_0x27802b(0x7a9)](_0x27802b(0x868));_0x1ab329[_0x27802b(0xd04)]=_0x27802b(0x304),_0x1ab329[_0x27802b(0x226)]=_0x13aa5d,_0x97a902[_0x27802b(0xced)](_0x1ab329);const _0x44433a=_0xa7652b[_0x27802b(0x50b)][_0x27802b(0x1a9)](_0x4cc150=>_0x4cc150['date']===_0x2c94d5);if(_0x44433a[_0x27802b(0x893)]>0x0){if(_0x27802b(0xaab)===_0x27802b(0x601))_0x40c26a[_0x27802b(0x8f5)]=_0x2e637d['activeUserProfileId'];else{const _0x4a4896=document[_0x27802b(0x7a9)]('div');_0x4a4896[_0x27802b(0xd04)]='day-dot',_0x97a902[_0x27802b(0xced)](_0x4a4896);}}_0x97a902[_0x27802b(0xc04)]('click',()=>{const _0x3a8a36=_0x27802b;_0x3a8a36(0x129)!==_0x3a8a36(0x690)?(_0x21c19a[_0x3a8a36(0xd91)]=_0x2c94d5,_0x342098()):_0x40765c('错误:\x20'+_0x2dca3a[_0x3a8a36(0xe32)]);}),_0x3f793c[_0x27802b(0xced)](_0x97a902);}}function _0x4efa85(_0x128d2a){const _0x30b31a=_0x57ab4d,_0x2d9a62=document[_0x30b31a(0x473)](_0x30b31a(0x18d)),_0x4de2f4=document['getElementById']('todo-date-title');_0x2d9a62[_0x30b31a(0x6f0)]='';const _0x46b37e=new Date(_0x128d2a+_0x30b31a(0x6e1));_0x4de2f4['textContent']=_0x46b37e[_0x30b31a(0xc57)]()+0x1+'月'+_0x46b37e[_0x30b31a(0x947)]()+'日';const _0xdb682e=_0xa7652b['calendarEvents'][_0x30b31a(0x1a9)](_0x5fcfd7=>_0x5fcfd7['date']===_0x128d2a);if(_0xdb682e[_0x30b31a(0x893)]===0x0){if('BnguO'!==_0x30b31a(0x202)){_0xe731b7[_0x30b31a(0xc95)](_0x30b31a(0x178),_0x2b8d52['id']);return;}else{_0x2d9a62[_0x30b31a(0x6f0)]=_0x30b31a(0x245);return;}}_0xdb682e[_0x30b31a(0x1dc)](_0x2a60c3=>{const _0x2ca140=_0x30b31a,_0x2f8ade=document[_0x2ca140(0x7a9)]('div');_0x2f8ade[_0x2ca140(0xd04)]=_0x2a60c3[_0x2ca140(0x45c)]===_0x2ca140(0x995)?_0x2ca140(0x70b):_0x2ca140(0x3a6),_0x2f8ade['textContent']=_0x2a60c3[_0x2ca140(0xb17)],_0x2f8ade[_0x2ca140(0x9c6)]['id']=_0x2a60c3['id'],_0x2d9a62['appendChild'](_0x2f8ade);});}function _0x3b5112(_0x46b70d){const _0x159b52=_0x57ab4d;'QPmag'===_0x159b52(0x8e)?(document['getElementById'](_0x159b52(0x59b))[_0x159b52(0x226)]='为\x20'+_0x46b70d+_0x159b52(0x5e3),document[_0x159b52(0x473)](_0x159b52(0xe2a))[_0x159b52(0x2d4)]='',document[_0x159b52(0x473)](_0x159b52(0x8d5))['checked']=!![],document[_0x159b52(0x473)](_0x159b52(0x5c5))['classList'][_0x159b52(0xddb)](_0x159b52(0x348)),document['getElementById'](_0x159b52(0xe2a))[_0x159b52(0x190)]()):_0x4fe8ea['pendingProfileRefinement']?_0x3becb8():_0x980530();}function _0x2a457b(){const _0x34517c=_0x57ab4d,_0x398d2c=document[_0x34517c(0x473)](_0x34517c(0xe2a))[_0x34517c(0x2d4)][_0x34517c(0x8eb)](),_0x5acc27=document['querySelector'](_0x34517c(0xac0))['value'];if(!_0x398d2c){if(_0x34517c(0xddc)!==_0x34517c(0xddc)){const _0x697026=_0x34517c(0x5f5)+_0xebf89d[_0x34517c(0x144)]();_0x108b99(_0x697026);}else{_0x198030(_0x34517c(0x140));return;}}const _0x2713fc=_0xa7652b[_0x34517c(0x932)][_0x34517c(0x394)](_0x3c0682=>_0x3c0682['id']===_0xa7652b[_0x34517c(0xa4f)]);if(!_0x2713fc){_0x198030(_0x34517c(0xd49));return;}_0xa7652b[_0x34517c(0x50b)]['push']({'id':_0x34517c(0x9f1)+Date[_0x34517c(0x144)](),'date':_0x21c19a['selectedDate'],'type':_0x5acc27,'content':_0x398d2c,'userId':_0x2713fc['id']}),_0x2e0417(),_0x342098(),_0x172357(),_0x10243a(),document[_0x34517c(0x473)]('add-event-modal')[_0x34517c(0x970)][_0x34517c(0x702)](_0x34517c(0x348));}function _0x172357(){const _0x307b1c=_0x57ab4d,_0x4c15eb=document['getElementById'](_0x307b1c(0x9ba)),_0x15644b=document[_0x307b1c(0x473)](_0x307b1c(0xf5)),_0x581ad8=new Date();_0x581ad8[_0x307b1c(0x386)](0x0,0x0,0x0,0x0);const _0x35f195=_0xa7652b[_0x307b1c(0x50b)][_0x307b1c(0x1a9)](_0x425550=>_0x425550[_0x307b1c(0x45c)]===_0x307b1c(0x995)&&new Date(_0x425550[_0x307b1c(0x382)]+_0x307b1c(0x6e1))>=_0x581ad8)[_0x307b1c(0x84c)]((_0x4011b9,_0xf9506e)=>new Date(_0x4011b9['date'])-new Date(_0xf9506e[_0x307b1c(0x382)]));if(_0x35f195[_0x307b1c(0x893)]>0x0){const _0x102513=_0x35f195[0x0],_0x1b2035=new Date(_0x102513['date']+_0x307b1c(0x6e1)),_0x297995=_0x1b2035-_0x581ad8,_0x1452a3=Math[_0x307b1c(0x54d)](_0x297995/(0x3e8*0x3c*0x3c*0x18));_0x4c15eb[_0x307b1c(0x226)]=_0x307b1c(0x9b5)+_0x102513[_0x307b1c(0xb17)]+'」',_0x15644b[_0x307b1c(0x6f0)]='<span>'+_0x1452a3+'</span><span\x20class=\x22unit\x22>天</span>';}else _0x4c15eb[_0x307b1c(0x226)]='近期没有特别安排',_0x15644b['innerHTML']=_0x307b1c(0x51f);}function _0x50e4fb(){const _0x23f3d4=_0x57ab4d,_0x6041a=document[_0x23f3d4(0x473)](_0x23f3d4(0x707));_0x6041a['innerHTML']='';if(_0xa7652b[_0x23f3d4(0x932)][_0x23f3d4(0x893)]===0x0){_0x6041a['innerHTML']=_0x23f3d4(0x822);return;}_0xa7652b[_0x23f3d4(0x932)][_0x23f3d4(0x1dc)](_0x3319a3=>{const _0xdd07a9=_0x23f3d4;if('iziSn'==='iziSn'){const _0x17260f=document['createElement']('div');_0x17260f[_0xdd07a9(0xd04)]=_0xdd07a9(0x522),_0x17260f[_0xdd07a9(0x9c6)]['id']=_0x3319a3['id'];const _0x1f893a=_0x3319a3['id']===_0xa7652b[_0xdd07a9(0xa4f)]?_0xdd07a9(0x6ac):'';_0x17260f[_0xdd07a9(0x6f0)]=_0xdd07a9(0xb3e)+(_0x3319a3[_0xdd07a9(0x98f)]||_0x395f0f)+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3319a3[_0xdd07a9(0xe79)]+_0x1f893a+_0xdd07a9(0x57f)+_0x3319a3[_0xdd07a9(0x171)][_0xdd07a9(0x825)](0x0,0x64)+_0xdd07a9(0x9fc),_0x17260f['addEventListener'](_0xdd07a9(0x493),()=>_0x13e53d(_0x3319a3['id'])),_0x6041a[_0xdd07a9(0xced)](_0x17260f);}else _0x3fad3a(_0xdd07a9(0xceb),'musicUploadAltar');});}async function _0x13e53d(_0x5d3702=null){const _0x23ed68=_0x57ab4d;_0xffff1f(_0x23ed68(0xbcc),_0x23ed68(0x1cf));const _0x3a0a38=document[_0x23ed68(0x473)](_0x23ed68(0x576)),_0x569ffa=document[_0x23ed68(0x473)]('user-avatar-preview'),_0x325785=document[_0x23ed68(0x473)](_0x23ed68(0xa85));_0x569ffa[_0x23ed68(0x3e4)][_0x23ed68(0x16b)]=_0x23ed68(0x6cb)+_0x395f0f+'\x27)',_0x325785[_0x23ed68(0x2d4)]='';if(_0x5d3702){if(_0x23ed68(0x95a)==='Jusfj'){const _0x504b77=_0xa7652b['userProfiles']['find'](_0x5a54dd=>_0x5a54dd['id']===_0x5d3702);if(!_0x504b77)return;document['getElementById'](_0x23ed68(0xbd2))[_0x23ed68(0x2d4)]=_0x504b77['id'],document[_0x23ed68(0x473)](_0x23ed68(0x233))[_0x23ed68(0x226)]=_0x23ed68(0x23c),document['getElementById'](_0x23ed68(0xe45))[_0x23ed68(0x2d4)]=_0x504b77[_0x23ed68(0xe79)],document['getElementById'](_0x23ed68(0x352))[_0x23ed68(0x2d4)]=_0x504b77[_0x23ed68(0x171)];try{if(_0x23ed68(0x7a4)===_0x23ed68(0x850))_0x1fc863[_0x23ed68(0x2d4)]=_0x178676[_0x23ed68(0x17f)](_0x699632=>_0x699632[_0x23ed68(0xe79)]+'--'+_0x699632[_0x23ed68(0x17c)])['join']('\x0a');else{const _0x287c30=await _0xf3eefa(_0x23ed68(0x92f)+_0x504b77['id']);if(_0x287c30){if(_0x23ed68(0x917)!=='KAeCW'){_0x49c8a7(_0x23ed68(0xdb6));return;}else _0x569ffa[_0x23ed68(0x3e4)][_0x23ed68(0x16b)]=_0x23ed68(0x6cb)+URL['createObjectURL'](_0x287c30)+'\x27)';}}}catch(_0x12f0e5){console[_0x23ed68(0xc95)](_0x23ed68(0xc93),_0x12f0e5);}_0x3a0a38[_0x23ed68(0x3e4)][_0x23ed68(0x1df)]=_0x504b77['id']===_0xa7652b[_0x23ed68(0xa4f)]?'none':_0x23ed68(0x2a3),document[_0x23ed68(0x473)](_0x23ed68(0x95b))[_0x23ed68(0x3e4)][_0x23ed68(0x1df)]='block';}else _0x54510b[_0x23ed68(0x3e3)]=_0x5e64db;}else _0x23ed68(0xb9e)===_0x23ed68(0x6a5)?_0x333d75===_0x23ed68(0xbd6)?_0x548a45[_0x23ed68(0x3e4)][_0x23ed68(0x1df)]=_0x23ed68(0x8c8):_0x2a8a68[_0x23ed68(0x3e4)]['display']=_0x23ed68(0x4a6):(document[_0x23ed68(0x473)]('editing-user-id')[_0x23ed68(0x2d4)]='',document[_0x23ed68(0x473)](_0x23ed68(0x233))[_0x23ed68(0x226)]=_0x23ed68(0x809),document[_0x23ed68(0x473)](_0x23ed68(0xe45))[_0x23ed68(0x2d4)]='新用户\x20'+(_0xa7652b[_0x23ed68(0x932)][_0x23ed68(0x893)]+0x1),document[_0x23ed68(0x473)]('user-persona')[_0x23ed68(0x2d4)]='',_0x3a0a38[_0x23ed68(0x3e4)]['display']=_0x23ed68(0x4a6),document[_0x23ed68(0x473)](_0x23ed68(0x95b))[_0x23ed68(0x3e4)][_0x23ed68(0x1df)]=_0x23ed68(0x4a6));}async function _0x505658(){const _0x329393=_0x57ab4d,_0x28c8d8=document['getElementById'](_0x329393(0xbd2))[_0x329393(0x2d4)],_0x27ed64=document[_0x329393(0x473)]('user-avatar-input')[_0x329393(0xcf5)][0x0],_0x37904b={'name':document[_0x329393(0x473)]('user-name')[_0x329393(0x2d4)][_0x329393(0x8eb)](),'persona':document['getElementById'](_0x329393(0x352))[_0x329393(0x2d4)][_0x329393(0x8eb)]()};if(!_0x37904b[_0x329393(0xe79)]){_0x198030(_0x329393(0x510));return;}try{if(_0x329393(0xa65)!==_0x329393(0xa65))_0x186eb9[_0x329393(0xc95)]('图片导出失败:',_0x1c4e9e),_0x123dd8(_0x329393(0xdbf)+_0x423c3e[_0x329393(0xe32)]);else{let _0x324052=_0x28c8d8,_0x2f7754=![];if(_0x28c8d8){const _0x4adb17=_0xa7652b[_0x329393(0x932)][_0x329393(0x394)](_0x3900eb=>_0x3900eb['id']===_0x28c8d8);if(_0x4adb17)Object[_0x329393(0x8b3)](_0x4adb17,_0x37904b);}else{if(_0x329393(0x2e5)===_0x329393(0x2e5)){_0x2f7754=!![],_0x324052=_0x329393(0x4d1)+Date[_0x329393(0x144)]();const _0x369c13={'id':_0x324052,..._0x37904b};_0xa7652b[_0x329393(0x932)][_0x329393(0x214)](_0x369c13),!_0xa7652b[_0x329393(0xa4f)]&&(_0x329393(0x291)===_0x329393(0x291)?_0xa7652b['activeUserProfileId']=_0x324052:_0x1e5a4d[_0x329393(0x473)](_0x329393(0x787))[_0x329393(0x706)]=_0x27152f[_0x329393(0x98f)]||_0x3b457e);}else{const _0x4bf8bb=_0x47afc7[_0x3f35ee];if(typeof _0x4bf8bb===_0x329393(0xdab))_0x89bb59[_0x329393(0x214)](_0x4bf8bb);if(_0x2d7e90['isArray'](_0x4bf8bb))_0x4bf8bb[_0x329393(0x1dc)](_0x3d9bf7=>{const _0xe6d455=_0x329393;if(typeof _0x3d9bf7===_0xe6d455(0xdab))_0x3d6c33[_0xe6d455(0x214)](_0x3d9bf7);});}}_0x27ed64&&(await _0x1366c1(_0x329393(0x92f)+_0x324052,_0x27ed64),console[_0x329393(0x6e4)](_0x329393(0xd4b)+_0x324052+_0x329393(0x672)));_0x2e0417(),_0x198030(_0x329393(0xd9));if(_0x27ed64||_0x2f7754){if(_0x329393(0x56d)!==_0x329393(0x56d)){if(!_0x30954a||typeof _0x16d880!=='string')return null;const _0x4bebf3=_0x47e943[_0x329393(0x740)]('['),_0x2c4898=_0x3d849c[_0x329393(0x29c)](']');if(_0x4bebf3>-0x1&&_0x2c4898>_0x4bebf3)return _0x181323[_0x329393(0x825)](_0x4bebf3,_0x2c4898+0x1);return null;}else _0x198030('资料已更新，为了让所有变更完全生效，我来帮你刷新一下。'),setTimeout(()=>location['reload'](),0x5dc);}else _0x50e4fb(),_0xffff1f('userProfileList',_0x329393(0xbcc));}}catch(_0x331df5){if(_0x329393(0x75b)!==_0x329393(0x4d9))console[_0x329393(0xc95)](_0x329393(0xa26),_0x331df5),_0x198030(_0x329393(0x847)+_0x331df5[_0x329393(0xe32)]);else{const _0x4e9c78=_0x25cdac(_0xa2b5e7[_0x329393(0xa49)]())[_0x329393(0x2c8)](0x2,'0'),_0x481967=_0x12879e(_0x3fc97a[_0x329393(0x529)]())[_0x329393(0x2c8)](0x2,'0');_0x2d995d[_0x329393(0x226)]=_0x4e9c78+':'+_0x481967;const _0x514f0e=_0x3ed002[_0x329393(0xc57)]()+0x1,_0x1625b1=_0x57d592[_0x329393(0x947)](),_0x198086=[_0x329393(0x9d3),_0x329393(0xa00),'星期二',_0x329393(0x67a),_0x329393(0xc89),_0x329393(0xe4f),_0x329393(0x302)][_0x3c6d57[_0x329393(0x441)]()];_0x54c8fb['textContent']=_0x514f0e+'月'+_0x1625b1+'日\x20'+_0x198086;}}}async function _0x1bb867(){const _0x2603c7=_0x57ab4d,_0x5653e7=document['getElementById'](_0x2603c7(0xbd2))[_0x2603c7(0x2d4)];if(!_0x5653e7)return;if(_0xa7652b['userProfiles'][_0x2603c7(0x893)]<=0x1){if(_0x2603c7(0x8cd)!==_0x2603c7(0x8cd))_0x263317[_0x2603c7(0x3e4)][_0x2603c7(0x1df)]=_0x2603c7(0x4a6),_0x40fed7[_0x2603c7(0x3e4)][_0x2603c7(0x1df)]=_0x2603c7(0x2a3);else{_0x198030(_0x2603c7(0xbc));return;}}const _0x5e71d2=await _0x410108(_0x2603c7(0xaf5));if(_0x5e71d2){if('HEFdr'===_0x2603c7(0x3c1)){if(_0x8c3170[_0x2603c7(0x893)]===0x0)return;_0x157a21=(_0x5309b9-0x1+_0x4377b9['length'])%_0x5931fc[_0x2603c7(0x893)],_0x2c6fa6(_0x2720b8[_0x351ff3],_0x14e3d6);}else _0xa7652b[_0x2603c7(0x932)]=_0xa7652b[_0x2603c7(0x932)][_0x2603c7(0x1a9)](_0x11f1f9=>_0x11f1f9['id']!==_0x5653e7),_0xa7652b[_0x2603c7(0xa4f)]===_0x5653e7&&(_0xa7652b[_0x2603c7(0xa4f)]=_0xa7652b['userProfiles'][0x0]['id']),_0xa7652b[_0x2603c7(0x4ec)][_0x2603c7(0x1dc)](_0x3c58aa=>{const _0x43b9dc=_0x2603c7;_0x43b9dc(0x5f8)!==_0x43b9dc(0x1b4)?_0x3c58aa[_0x43b9dc(0x8f5)]===_0x5653e7&&(_0x3c58aa[_0x43b9dc(0x8f5)]=_0xa7652b[_0x43b9dc(0xa4f)]):_0x463fb2(![]);}),_0x2e0417(),_0x198030(_0x2603c7(0xcd2)),_0x50e4fb(),_0xffff1f(_0x2603c7(0x1cf),'userProfile');}}function _0x96d9f0(){const _0x5d9b55=_0x57ab4d;_0x5d9b55(0x3d5)!==_0x5d9b55(0x415)?(_0x5986fa(),_0x1dbfd7(_0xa7652b['activeWorldBookCategoryId'])):_0x55214f[_0x5d9b55(0x214)](_0x516ed7);}function _0x5986fa(){const _0x17a27a=_0x57ab4d,_0xc3310a=document[_0x17a27a(0x473)](_0x17a27a(0x118));_0xc3310a[_0x17a27a(0x6f0)]='',_0xa7652b[_0x17a27a(0x22a)][_0x17a27a(0x1dc)](_0x1fa710=>{const _0x131863=_0x17a27a,_0x33f16e=document[_0x131863(0x7a9)](_0x131863(0x527));_0x33f16e['textContent']=_0x1fa710[_0x131863(0xe79)],_0x33f16e[_0x131863(0x9c6)]['id']=_0x1fa710['id'],_0x33f16e[_0x131863(0x3e4)][_0x131863(0x1e1)]=_0x131863(0x1a2),_0x33f16e[_0x131863(0x3e4)]['borderRadius']=_0x131863(0xa5c),_0x33f16e[_0x131863(0x3e4)][_0x131863(0x31c)]=_0x131863(0x219),_0x33f16e[_0x131863(0x3e4)][_0x131863(0xe7b)]=_0x131863(0xb2c),_0x33f16e[_0x131863(0x3e4)][_0x131863(0x30d)]=_0x131863(0xad2);_0x1fa710['id']===_0xa7652b[_0x131863(0x365)]?_0x131863(0xa9d)!=='vNOLp'?(_0x33f16e[_0x131863(0x3e4)]['backgroundColor']=_0x131863(0xd00),_0x33f16e['style'][_0x131863(0x1ba)]=_0x131863(0x828)):(_0x2ba496[_0x131863(0x3e4)][_0x131863(0x1df)]=_0x131863(0x4a6),_0xa0bb43[_0x131863(0x473)](_0x131863(0x7f7))[_0x131863(0x3e4)][_0x131863(0x1df)]=_0x131863(0x5c9)):_0x131863(0xc6)!==_0x131863(0x7ac)?_0x33f16e['style'][_0x131863(0x1ba)]=_0x131863(0xd5c):(_0x13a128[_0x131863(0xc95)](_0x131863(0x104),_0x5acce8),_0x37fb88[_0x131863(0xc95)]('收到的原始、有问题的文本:',_0x5d2d00));_0x33f16e[_0x131863(0xc04)](_0x131863(0x493),()=>{const _0x3623f7=_0x131863;_0x3623f7(0x2e8)===_0x3623f7(0xe5e)?(_0x5de199[_0x3623f7(0x970)][_0x3623f7(0x702)](_0x3623f7(0xae6)),_0x22b71d[_0x3623f7(0x3e4)]['transform']='',_0x5cdee7['style'][_0x3623f7(0x5cf)]=''):(_0xa7652b[_0x3623f7(0x365)]=_0x1fa710['id'],_0x96d9f0());});let _0x149a48=null;const _0x1ca493=_0x3618bb=>{const _0x202014=_0x131863;if(_0x202014(0x734)!==_0x202014(0x1fb)){if(_0x1fa710['id']===_0x202014(0x46b))return;_0x149a48=setTimeout(()=>{const _0x39e694=_0x202014;if('TjJLq'===_0x39e694(0x37f)){_0xebb89b['innerHTML']=_0x39e694(0x767);return;}else{if(_0x3618bb['type']==='touchstart')_0x3618bb[_0x39e694(0xd27)]();_0x4fbc86(_0x1fa710['id'],_0x1fa710['name']);}},0x320);}else _0x1b6ea5['getElementById']('import-accounting-input')[_0x202014(0x493)]();},_0x459e68=()=>{clearTimeout(_0x149a48);};_0x33f16e[_0x131863(0xc04)](_0x131863(0xc32),_0x1ca493),_0x33f16e[_0x131863(0xc04)](_0x131863(0x241),_0x459e68),_0x33f16e[_0x131863(0xc04)](_0x131863(0x718),_0x459e68),_0x33f16e['addEventListener'](_0x131863(0x69c),_0x1ca493,{'passive':![]}),_0x33f16e[_0x131863(0xc04)](_0x131863(0xcf0),_0x459e68),_0x33f16e[_0x131863(0xc04)](_0x131863(0x1d3),_0x459e68),_0xc3310a[_0x131863(0xced)](_0x33f16e);});}async function _0x4fbc86(_0x992a32,_0x51a875){const _0x55fc71=_0x57ab4d,_0x37c6cf=await _0x410108(_0x55fc71(0x93a)+_0x51a875+_0x55fc71(0xbd7));if(!_0x37c6cf)return;const _0x11c926=_0xa7652b[_0x55fc71(0x52d)][_0x55fc71(0x1a9)](_0x2eb604=>_0x2eb604[_0x55fc71(0x45e)]===_0x992a32)[_0x55fc71(0x17f)](_0x3bcd17=>_0x3bcd17['id']);_0xa7652b[_0x55fc71(0x52d)]=_0xa7652b[_0x55fc71(0x52d)][_0x55fc71(0x1a9)](_0x19fcfd=>_0x19fcfd[_0x55fc71(0x45e)]!==_0x992a32),_0xa7652b['worldBooksCategories']=_0xa7652b[_0x55fc71(0x22a)][_0x55fc71(0x1a9)](_0x5c658a=>_0x5c658a['id']!==_0x992a32);_0xa7652b[_0x55fc71(0x365)]===_0x992a32&&(_0xa7652b[_0x55fc71(0x365)]='default');const _0x549438=[..._0xa7652b[_0x55fc71(0xbfe)],..._0xa7652b[_0x55fc71(0x4ec)]];_0x549438[_0x55fc71(0x1dc)](_0x3c4b19=>{const _0x40e34e=_0x55fc71;_0x40e34e(0x257)!==_0x40e34e(0x10f)?_0x3c4b19[_0x40e34e(0x277)]&&_0x3c4b19[_0x40e34e(0x277)]['length']>0x0&&(_0x3c4b19[_0x40e34e(0x277)]=_0x3c4b19['linkedWorldBookIds']['filter'](_0x1a2ac5=>!_0x11c926[_0x40e34e(0x5c0)](_0x1a2ac5))):_0x4a265b();}),_0x2e0417(),_0x96d9f0(),_0x198030('分类\x20“'+_0x51a875+'”\x20已被彻底清除。');}function _0x1dbfd7(_0x2c1e12){const _0x2aeeda=_0x57ab4d,_0x5d47d0=document[_0x2aeeda(0x473)](_0x2aeeda(0xd16));_0x5d47d0[_0x2aeeda(0x6f0)]='';const _0x3dd674=_0xa7652b[_0x2aeeda(0x52d)][_0x2aeeda(0x1a9)](_0x395b9d=>_0x395b9d[_0x2aeeda(0x45e)]===_0x2c1e12||_0x2c1e12===_0x2aeeda(0x46b)&&!_0x395b9d[_0x2aeeda(0x45e)]);if(_0x3dd674[_0x2aeeda(0x893)]===0x0){_0x5d47d0[_0x2aeeda(0x6f0)]=_0x2aeeda(0x6ba);return;}_0x3dd674[_0x2aeeda(0x1dc)](_0x1ee0e2=>{const _0x11358d=_0x2aeeda;if(_0x11358d(0x3f6)===_0x11358d(0x3f6)){const _0x2dff23=document[_0x11358d(0x7a9)]('div');_0x2dff23['className']=_0x11358d(0x522),_0x2dff23[_0x11358d(0x9c6)]['id']=_0x1ee0e2['id'],_0x2dff23[_0x11358d(0x6f0)]=_0x11358d(0xa38)+_0x1ee0e2[_0x11358d(0xe79)]+_0x11358d(0x138)+_0x1ee0e2[_0x11358d(0xb17)]['substring'](0x0,0x64)+_0x11358d(0x9fc),_0x2dff23['addEventListener'](_0x11358d(0x493),()=>_0x4b2086(_0x1ee0e2['id'])),_0x5d47d0[_0x11358d(0xced)](_0x2dff23);}else _0x460f64[_0x11358d(0xc95)]('Failed\x20to\x20clear\x20history\x20for\x20group\x20chat\x20'+_0x5caa26['id'],_0xb650d3),_0xc247d3(_0x11358d(0xc29));});}document[_0x57ab4d(0x473)](_0x57ab4d(0xa68))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0x47c88a=_0x57ab4d;if('kTHbr'!==_0x47c88a(0x1e9)){const _0x5ebc4d=prompt(_0x47c88a(0xdf0));if(_0x5ebc4d&&_0x5ebc4d[_0x47c88a(0x8eb)]()){if('natCd'===_0x47c88a(0x573)){const _0x3e97c8={'id':_0x47c88a(0x4a2)+Date[_0x47c88a(0x144)](),'name':_0x5ebc4d[_0x47c88a(0x8eb)]()};_0xa7652b['worldBookCategories'][_0x47c88a(0x214)](_0x3e97c8),_0xa7652b[_0x47c88a(0x365)]=_0x3e97c8['id'],_0x2e0417(),_0x96d9f0();}else _0x2e052c['assign'](_0x257819,{'content':'[AI发送了表情：'+_0x7111d9[_0x47c88a(0xe79)]+']','displayUrl':_0x2cee4c[_0x47c88a(0x17c)]}),_0x3a1749['conversationHistory'][_0x47c88a(0x214)](_0x3fc1a5),_0x19f13c(),_0x3309b4(_0x20ff36,_0x13cbec[_0x47c88a(0xdc0)][_0x47c88a(0x893)]-0x1),_0x5b09ee[_0x47c88a(0xc55)]=_0x46b706[_0x47c88a(0x251)];}}else _0x3afb9b=_0x48c5a3[_0x47c88a(0x180)](_0x19a5cc);});function _0x4b2086(_0x584768=null){const _0x3eb235=_0x57ab4d;_0xffff1f(_0x3eb235(0x447),_0x3eb235(0x7b6));const _0x5cf95d=document[_0x3eb235(0x473)]('world-book-edit-category');_0x5cf95d[_0x3eb235(0x6f0)]='',_0xa7652b[_0x3eb235(0x22a)][_0x3eb235(0x1dc)](_0x5d2eb4=>{const _0x28ee7f=_0x3eb235,_0x38e455=document[_0x28ee7f(0x7a9)](_0x28ee7f(0xc37));_0x38e455[_0x28ee7f(0x2d4)]=_0x5d2eb4['id'],_0x38e455[_0x28ee7f(0x226)]=_0x5d2eb4['name'],_0x5cf95d[_0x28ee7f(0xced)](_0x38e455);});if(_0x584768){const _0x1106d7=_0xa7652b[_0x3eb235(0x52d)][_0x3eb235(0x394)](_0x1fdfed=>_0x1fdfed['id']===_0x584768);if(!_0x1106d7)return;document['getElementById'](_0x3eb235(0xdc6))[_0x3eb235(0x2d4)]=_0x1106d7['id'],document[_0x3eb235(0x473)]('world-book-editor-title')[_0x3eb235(0x226)]=_0x3eb235(0xa21),document[_0x3eb235(0x473)](_0x3eb235(0x599))[_0x3eb235(0x2d4)]=_0x1106d7['name'],document['getElementById'](_0x3eb235(0xe6c))['value']=_0x1106d7[_0x3eb235(0xb17)],_0x5cf95d[_0x3eb235(0x2d4)]=_0x1106d7[_0x3eb235(0x45e)]||_0x3eb235(0x46b);}else document['getElementById'](_0x3eb235(0xdc6))[_0x3eb235(0x2d4)]='',document[_0x3eb235(0x473)]('world-book-editor-title')[_0x3eb235(0x226)]=_0x3eb235(0xac5),document[_0x3eb235(0x473)](_0x3eb235(0x599))[_0x3eb235(0x2d4)]='',document[_0x3eb235(0x473)](_0x3eb235(0xe6c))[_0x3eb235(0x2d4)]='',_0x5cf95d[_0x3eb235(0x2d4)]=_0xa7652b[_0x3eb235(0x365)];}function _0x59d463(){const _0x4687da=_0x57ab4d,_0x20bf3e=document['getElementById'](_0x4687da(0xdc6))[_0x4687da(0x2d4)],_0x314df6=document[_0x4687da(0x473)](_0x4687da(0x599))[_0x4687da(0x2d4)][_0x4687da(0x8eb)](),_0x148917=document[_0x4687da(0x473)](_0x4687da(0xe6c))[_0x4687da(0x2d4)][_0x4687da(0x8eb)](),_0x6e6ca4=document['getElementById'](_0x4687da(0x5e0))[_0x4687da(0x2d4)];if(!_0x314df6||!_0x148917){if(_0x4687da(0x7e3)===_0x4687da(0x7e3)){_0x198030(_0x4687da(0x726));return;}else{if(_0x5c6485[_0x4687da(0xab8)]===_0x4687da(0xea1))return _0x2102f5[_0x4687da(0xbcc)]?.['name']||_0x4687da(0x725);if(_0x1ac025[_0x4687da(0x45c)]===_0x4687da(0x4b5)){const _0x5a9ba2=_0x1a91ed[_0x4687da(0xb42)]?_0x5b87cd(_0x34fda4[_0x4687da(0xb42)]):null;return _0x5a9ba2?.[_0x4687da(0xe79)]||_0x4687da(0x7ef);}else{const _0x463ccd=_0x13aeb8(_0xe8accd['participantIds'][0x0]);return _0x463ccd?.[_0x4687da(0xe79)]||'AI';}}}if(_0x20bf3e){const _0x45c46d=_0xa7652b[_0x4687da(0x52d)][_0x4687da(0x394)](_0x445305=>_0x445305['id']===_0x20bf3e);_0x45c46d&&(_0x45c46d[_0x4687da(0xe79)]=_0x314df6,_0x45c46d[_0x4687da(0xb17)]=_0x148917,_0x45c46d[_0x4687da(0x45e)]=_0x6e6ca4);}else{const _0x3699c2={'id':'wb_'+Date[_0x4687da(0x144)](),'name':_0x314df6,'content':_0x148917,'categoryId':_0x6e6ca4};_0xa7652b[_0x4687da(0x52d)][_0x4687da(0x214)](_0x3699c2);}_0xa7652b[_0x4687da(0x365)]=_0x6e6ca4,_0x2e0417(),_0x198030(_0x4687da(0x74b)),_0x96d9f0(),_0xffff1f('worldBook',_0x4687da(0x447));}async function _0x43b1fc(){const _0x2f9151=_0x57ab4d,_0x745a9e=document[_0x2f9151(0x473)](_0x2f9151(0xdc6))[_0x2f9151(0x2d4)];if(!_0x745a9e)return;const _0x29bb12=await _0x410108(_0x2f9151(0x2e6));_0x29bb12&&(_0xa7652b['worldBooks']=_0xa7652b[_0x2f9151(0x52d)][_0x2f9151(0x1a9)](_0x3fa890=>_0x3fa890['id']!==_0x745a9e),_0xa7652b[_0x2f9151(0xbfe)][_0x2f9151(0x1dc)](_0x2dd61b=>{const _0x4fe95a=_0x2f9151;_0x2dd61b[_0x4fe95a(0x277)]&&(_0x2dd61b[_0x4fe95a(0x277)]=_0x2dd61b[_0x4fe95a(0x277)][_0x4fe95a(0x1a9)](_0x4738e7=>_0x4738e7!==_0x745a9e));}),_0x2e0417(),_0x198030('条目已删除。'),_0x96d9f0(),_0xffff1f(_0x2f9151(0x7b6),'worldBookEditor'));}function _0x2c5a72(){const _0x4c91f5=_0x57ab4d,_0x3c340c=document[_0x4c91f5(0x473)](_0x4c91f5(0x4a9)),_0x50afe0=_0x3c340c[_0x4c91f5(0xe54)](_0x4c91f5(0xe60)),_0x268c08=document[_0x4c91f5(0x373)](_0x4c91f5(0x790));if(_0x50afe0[_0x4c91f5(0x893)]===0x0)_0x268c08[_0x4c91f5(0x226)]=_0x4c91f5(0x94a);else _0x50afe0[_0x4c91f5(0x893)]>0x2?_0x268c08[_0x4c91f5(0x226)]=_0x4c91f5(0xe5a)+_0x50afe0[_0x4c91f5(0x893)]+'\x20项':_0x4c91f5(0x50f)!==_0x4c91f5(0x50f)?(_0x362334='0x'+_0x122c0b[0x1]+_0x4761e4[0x2],_0x12f72b='0x'+_0x3db3a1[0x3]+_0x55fee6[0x4],_0x2630fa='0x'+_0x1e58f4[0x5]+_0x52f750[0x6]):_0x268c08[_0x4c91f5(0x226)]=Array[_0x4c91f5(0x90a)](_0x50afe0)['map'](_0x3aef00=>_0x3aef00['parentElement'][_0x4c91f5(0x226)][_0x4c91f5(0x8eb)]())[_0x4c91f5(0x332)]('、');}async function _0x37bb4e(_0x19ee96){const _0x291ce7=_0x57ab4d,_0x445c6c=_0xa7652b[_0x291ce7(0x4ec)][_0x291ce7(0x394)](_0x4c6de0=>_0x4c6de0['id']===_0x19ee96);if(!_0x445c6c||_0x445c6c[_0x291ce7(0x45c)]!==_0x291ce7(0x4b5))return;document[_0x291ce7(0x473)](_0x291ce7(0x7bf))[_0x291ce7(0x2d4)]=_0x445c6c[_0x291ce7(0xe79)]||'',_0x11139b(_0x291ce7(0xa2b)),document['getElementById'](_0x291ce7(0xa2b))[_0x291ce7(0x2d4)]=_0x445c6c[_0x291ce7(0x8f5)]||_0xa7652b[_0x291ce7(0xa4f)],_0x2e1a2f(_0x291ce7(0xa14),_0x445c6c[_0x291ce7(0x277)]||[]),_0x59b209();const _0x5644fd=document['getElementById'](_0x291ce7(0x2ac)),_0x5272ca=document[_0x291ce7(0x473)](_0x291ce7(0xc43));_0x5272ca['style'][_0x291ce7(0x16b)]='',_0xf3eefa('group_avatar_'+_0x19ee96)[_0x291ce7(0xcae)](_0x4b70b6=>{const _0x1d329c=_0x291ce7;if('ZGHsg'==='OEHtH'){const _0x4dbc0c=_0x2f9623[_0x1d329c(0x932)][_0x1d329c(0x394)](_0x1731f0=>_0x1731f0['id']===_0x33d305[_0x1d329c(0xa4f)])||{'name':'你'},_0x3dbf75=_0x30a5f4[_0x1d329c(0x65b)]['find'](_0x15d284=>_0x15d284[_0x1d329c(0x3b1)]===_0x564a46);if(!_0x3dbf75||!_0x3dbf75[_0x1d329c(0x420)]||_0x3dbf75[_0x1d329c(0x420)][_0x1d329c(0x893)]===0x0)return'';const _0x107b26=_0x3dbf75[_0x1d329c(0x420)][_0x1d329c(0x1de)](-0x8),_0x1c7baf=_0x107b26[_0x1d329c(0x17f)](_0x265c66=>{const _0x102fc1=_0x1d329c,_0x15fe36=_0x265c66[_0x102fc1(0x689)]==='user'?_0x4dbc0c['name']:_0x2b2f3a(_0x265c66[_0x102fc1(0x689)])[_0x102fc1(0xe79)];return _0x102fc1(0x375)+new _0x23cf26(_0x265c66[_0x102fc1(0xb9f)])[_0x102fc1(0x647)]()+']\x20'+_0x15fe36+_0x102fc1(0xb1c)+_0x265c66['content'];})[_0x1d329c(0x332)]('\x0a');return'\x0a#\x20交换日记摘要\x20(你和\x20'+_0x4dbc0c['name']+_0x1d329c(0x908)+_0x1c7baf;}else _0x5644fd[_0x1d329c(0x706)]=_0x4b70b6?URL[_0x1d329c(0xc18)](_0x4b70b6):_0x96c08e;}),_0xf3eefa(_0x291ce7(0x478)+_0x19ee96)[_0x291ce7(0xcae)](_0x33d855=>{const _0x20c4f7=_0x291ce7;if('lRCuE'!==_0x20c4f7(0x69b))_0x503d55[_0x20c4f7(0xc95)](_0x20c4f7(0xd3),_0x2a8141),_0x241c8e('导出失败了，哼:\x20'+_0x4d9d45['message']);else{if(_0x33d855)_0x5272ca[_0x20c4f7(0x3e4)]['backgroundImage']=_0x20c4f7(0x6cb)+URL['createObjectURL'](_0x33d855)+'\x27)';}}),_0xffff1f('groupSettings','chat');}async function _0x97752c(){const _0x335c09=_0x57ab4d;if(_0x335c09(0x514)!==_0x335c09(0x801)){const _0x4f4d02=_0x41c782();if(!_0x4f4d02||_0x4f4d02[_0x335c09(0x45c)]!==_0x335c09(0x4b5))return;const _0x2752f1=document['getElementById']('group-settings-name')['value'][_0x335c09(0x8eb)]();if(!_0x2752f1){_0x198030('群聊名称不能为空！');return;}_0x4f4d02[_0x335c09(0xe79)]=_0x2752f1;const _0x4c0644=document[_0x335c09(0xe54)](_0x335c09(0x1b2));_0x4f4d02[_0x335c09(0x277)]=Array[_0x335c09(0x90a)](_0x4c0644)[_0x335c09(0x17f)](_0x26cb35=>_0x26cb35['value']),_0x4f4d02['boundUserProfileId']=document[_0x335c09(0x473)](_0x335c09(0xa2b))[_0x335c09(0x2d4)];const _0x3a4c51=document[_0x335c09(0x473)](_0x335c09(0x9e8))['files'][0x0],_0x5d7981=document[_0x335c09(0x473)](_0x335c09(0xdca))['files'][0x0];if(_0x3a4c51)await _0x1366c1('group_avatar_'+_0x4f4d02['id'],_0x3a4c51);if(_0x5d7981)await _0x1366c1(_0x335c09(0x478)+_0x4f4d02['id'],_0x5d7981);_0x2e0417(),_0x5296c9(),await _0xa7d798(),_0x198030('群聊设置已保存！'),_0xffff1f('chat',_0x335c09(0x8a5));}else _0x2e7f67(_0x435467,'normal');}function _0x59b209(){const _0x24ae9c=_0x57ab4d,_0x501962=document[_0x24ae9c(0x473)](_0x24ae9c(0xa14)),_0xb8fcbe=_0x501962[_0x24ae9c(0xe54)](_0x24ae9c(0xe60)),_0x5c3d0c=document[_0x24ae9c(0x373)]('#group-settings-screen\x20.selected-options-text');if(_0xb8fcbe[_0x24ae9c(0x893)]===0x0)_0x24ae9c(0x79b)===_0x24ae9c(0xc14)?(_0x4a9436['worldBooks']=_0xde2ffb['worldBooks']['filter'](_0x599f24=>_0x599f24['id']!==_0xc2cf07),_0x42e686[_0x24ae9c(0xbfe)][_0x24ae9c(0x1dc)](_0x24b88f=>{const _0x37a0c8=_0x24ae9c;_0x24b88f[_0x37a0c8(0x277)]&&(_0x24b88f[_0x37a0c8(0x277)]=_0x24b88f[_0x37a0c8(0x277)][_0x37a0c8(0x1a9)](_0x262917=>_0x262917!==_0x4c31cf));}),_0x12295d(),_0x2eefb9('条目已删除。'),_0x4cfb73(),_0x49cd54(_0x24ae9c(0x7b6),_0x24ae9c(0x447))):_0x5c3d0c['textContent']=_0x24ae9c(0x94a);else _0xb8fcbe[_0x24ae9c(0x893)]>0x2?_0x24ae9c(0x23e)!=='VZeoF'?_0x5c3d0c[_0x24ae9c(0x226)]=_0x24ae9c(0xe5a)+_0xb8fcbe[_0x24ae9c(0x893)]+'\x20项':(_0x27e2ab[_0x24ae9c(0x954)](),_0x456ece()):_0x5c3d0c[_0x24ae9c(0x226)]=Array[_0x24ae9c(0x90a)](_0xb8fcbe)['map'](_0x33e84e=>_0x33e84e[_0x24ae9c(0x80e)][_0x24ae9c(0x226)][_0x24ae9c(0x8eb)]())['join']('、');}async function _0x1933b7(){const _0x5c030a=_0x57ab4d,_0x316c91=_0x41c782(),_0x4351bd=(_0x316c91?.[_0x5c030a(0x584)]||[])[_0x5c030a(0x17f)](_0x1238ea)[_0x5c030a(0x1a9)](Boolean),_0x4ea17d=_0x2e35cc(_0x316c91['id']);if(!_0x316c91||_0x316c91['type']!==_0x5c030a(0x4b5)||_0x4351bd['length']<0x2)return null;const _0x1980bc=_0x316c91[_0x5c030a(0x277)]&&_0x316c91['linkedWorldBookIds']['length']>0x0?_0x5c030a(0x7ff)+_0x316c91[_0x5c030a(0x277)][_0x5c030a(0x17f)](_0x420744=>_0xa7652b[_0x5c030a(0x52d)][_0x5c030a(0x394)](_0xea1324=>_0xea1324['id']===_0x420744))[_0x5c030a(0x1a9)](Boolean)[_0x5c030a(0x17f)](_0x11eb1e=>'\x0a##\x20世界书条目:\x20'+_0x11eb1e[_0x5c030a(0xe79)]+'\x0a'+_0x11eb1e['content'])[_0x5c030a(0x332)](''):'',_0x4cc630=_0x4ea17d[_0x5c030a(0x171)]?'\x0a\x0a#\x20关于群聊参与者“'+_0x4ea17d['name']+'”的补充信息\x0a'+_0x4ea17d[_0x5c030a(0x171)]:'';let _0x2a87b4='';const _0x5c47be=new Date(),_0x18c0f0=_0xa7652b['conversationHistory']['at'](-0x1);_0x2a87b4+=_0x5c030a(0xcdb)+_0x5c47be[_0x5c030a(0x1f3)](_0x5c030a(0xbbe),{'dateStyle':'full','timeStyle':_0x5c030a(0x6b5)});if(_0x18c0f0){if(_0x5c030a(0x94c)!==_0x5c030a(0x94c)){_0x443c36(_0x5c030a(0x43c));return;}else{const _0x437332=new Date(_0x18c0f0[_0x5c030a(0xb9f)]),_0x3ef201=Math['floor']((_0x5c47be-_0x437332)/(0x3e8*0x3c));if(_0x3ef201<0x5)_0x2a87b4+='\x0a-\x20**对话状态**:\x20群里刚刚还在聊天。';else{if(_0x3ef201<0x78)_0x2a87b4+=_0x5c030a(0xdf2)+_0x3ef201+_0x5c030a(0x62e);else{const _0x44df21=Math[_0x5c030a(0xe7c)](_0x3ef201/0x3c);if(_0x44df21<0x30)_0x2a87b4+=_0x5c030a(0xdf2)+_0x44df21+_0x5c030a(0xbc4);else _0x2a87b4+=_0x5c030a(0x280)+Math[_0x5c030a(0xe7c)](_0x44df21/0x18)+'天没动静了。你的角色们应该发起新的问候或话题。';}}}}else _0x2a87b4+=_0x5c030a(0xd47);const _0x2f0e22=[..._0xa7652b['conversationHistory']][_0x5c030a(0x8d)]()[_0x5c030a(0x394)](_0x2b2ed3=>_0x2b2ed3[_0x5c030a(0xab8)]===_0x5c030a(0xea1))?.[_0x5c030a(0xb17)]||'',_0x454061=_0x22883e(_0x316c91,_0x2f0e22),_0x4fbf90=_0xa7652b[_0x5c030a(0xdc0)][_0x5c030a(0x1de)](-0x78),_0x2cebda=_0xb4768c['map'](_0x104305=>_0x104305['name']),_0x40ebf1=_0x4649bb(),_0x16944f=await Promise[_0x5c030a(0xc1d)](_0x4351bd[_0x5c030a(0x17f)](async _0x2e4942=>{const _0x5a551a=_0x5c030a;if('OBVnp'!==_0x5a551a(0xea3)){const _0x3876f3=_0x2d1f1d[_0x5a551a(0xdb0)](_0x2ea0b3,_0x5a551a(0x4a7)),_0x3fb7d6=_0x3876f3['objectStore'](_0x40f79a),_0x1eac24=_0x3fb7d6[_0x5a551a(0x5d6)]({'id':_0x4fb15f,'data':_0x1a1077});_0x1eac24[_0x5a551a(0x7ad)]=()=>_0x5a3c26(),_0x1eac24['onerror']=()=>_0x5b57f5(_0x1eac24[_0x5a551a(0xc95)]);}else{const {omniText:_0x23f7a2}=_0x32429c(_0x2e4942['id'],null),_0x397dae=_0x322f26(_0x2e4942['id']),_0xb674c4=await _0xa63707(_0x2e4942['id']),_0x1beb8e=_0x3f0d67(_0x2e4942['id']),_0x3b44b7=_0x2e4942[_0x5a551a(0x277)]&&_0x2e4942['linkedWorldBookIds']['length']>0x0?'\x0a\x0a#\x20'+_0x2e4942[_0x5a551a(0xe79)]+'的个人专属世界观设定\x0a'+_0x2e4942[_0x5a551a(0x277)][_0x5a551a(0x17f)](_0x216482=>_0xa7652b['worldBooks'][_0x5a551a(0x394)](_0x3718e2=>_0x3718e2['id']===_0x216482))['filter'](Boolean)[_0x5a551a(0x17f)](_0x2fee03=>'\x0a##\x20条目:\x20'+_0x2fee03[_0x5a551a(0xe79)]+'\x0a'+_0x2fee03[_0x5a551a(0xb17)])['join'](''):'';let _0x5bd53d='\x0a#\x20关于你\x20('+_0x2e4942[_0x5a551a(0xe79)]+')\x20的专属时间锚点\x0a';const _0x143571=_0x3a3aa1(_0x2e4942['id']),_0x4b0bb2=new Date();if(_0x143571){if('rSoMb'===_0x5a551a(0xcf8)){const _0xfee48d=new Date(_0x143571[_0x5a551a(0xb9f)]);_0x5bd53d+=_0x5a551a(0x1ea)+_0x4ea17d[_0x5a551a(0xe79)]+_0x5a551a(0x54a)+_0x420848(_0xfee48d)+'\x0a';}else return _0x52245d(_0x5a551a(0x810)),![];}else _0x5bd53d+='-\x20**状态提示**:\x20这是你和'+_0x4ea17d[_0x5a551a(0xe79)]+_0x5a551a(0xea4);let _0x528893=null;const _0x49cdf3='nuomi_profile_tiaoTiao_'+_0x2e4942['id'];try{const {value:_0x42f3bc}=await Capacitor[_0x5a551a(0x4be)]['Preferences'][_0x5a551a(0x470)]({'key':_0x49cdf3});_0x42f3bc&&(_0x528893=JSON[_0x5a551a(0x180)](_0x42f3bc));}catch(_0x246357){console[_0x5a551a(0xc95)](_0x5a551a(0x157)+_0x2e4942['name']+'\x20的用户档案失败:',_0x246357);}const _0x13c34f=_0xa7652b['conversationHistory'][_0x5a551a(0x1de)](-0x5),_0x569bc3=_0x528893?_0x195515(_0x13c34f,_0x528893):'',_0x153fc9=await _0x222c2d(_0x2e4942['id']),_0x103e7e=_0x153fc9?_0x5a551a(0xa98)+_0x4ea17d[_0x5a551a(0xe79)]+_0x5a551a(0x42a)+_0x153fc9:'',_0x41c18a=_0x528893?''+_0x103e7e+_0x569bc3+_0x5a551a(0xe50)+_0x4ea17d[_0x5a551a(0xe79)]+_0x5a551a(0x7ed)+_0x4ea17d[_0x5a551a(0xe79)]+']你刚才说喜欢A？...\x20这、这可不像你啊，发生什么特别的事了吗？\x22\x0a*\x20（发现平时话痨的用户突然沉默寡言）->\x20\x22......\x20['+_0x4ea17d['name']+_0x5a551a(0x805):'';return{'id':_0x2e4942['id'],'name':_0x2e4942['name'],'persona':_0x2e4942['persona']||_0x5a551a(0x94b),'memory':_0x23f7a2+_0x397dae+_0xb674c4+_0x1beb8e+_0x3b44b7+_0x5bd53d+_0x41c18a};}})),_0x34ca64=0x5,_0xc64c25=0xc,_0x5bc07c=_0x5c030a(0x566)['trim'](),_0x4ac9b4={'instruction':('\x0a-\x20你正在为一个名为“'+(_0x316c91[_0x5c030a(0xe79)]||'群聊')+'”的群聊规划角色们的下一步发言。\x0a-\x20与你们对话的人类用户名为“'+(_0x4ea17d['name']||'用户')+'”。在分析历史记录时，请记住这一点，并用此名称指代用户。\x0a-\x20【最重要】为\x20`personas`\x20列表中的【每一位】角色都规划至少一个事件(通常不少于2个)。不能遗漏任何角色。\x0a-\x20【新增规则】你可以规划\x20\x22kind\x22:\x20\x22music\x22\x20事件来分享音乐。此时，你【必须】同时提供\x20\x22songName\x22\x20和\x20\x22artist\x22\x20字段。\x0a-\x20你的首要任务是产出一个严格遵守SCHEMA、语法完全正确的、可被解析的JSON对象。\x0a-\x20若用户\x20`@`\x20了某个角色\x20(见\x20`mentioned`)，该角色应优先发言。\x0a-\x20事件总数必须控制在\x20'+_0x34ca64+_0x5c030a(0x166)+_0xc64c25+_0x5c030a(0xd66)+(_0x4ea17d[_0x5c030a(0xe79)]||'用户')+_0x5c030a(0x7d2)+_0x2a87b4+'\x20\x0a'+_0x4cc630+'\x0a'+_0x1980bc+'\x0a#\x20【新增群聊高级语法规则】\x0a-\x20如果你需要生成一个HTML模块（例如邀请卡），你【必须】将完整的HTML代码包裹在\x20\x20`html]\x20`\x20和\x20\x20`[/html]\x20`\x20这两个标签之间，并作为一个独立的事件（event）来规划。你的规划中必须包含一个独立的事件，其\x20\x22kind\x22\x20必须是\x20\x22html\x22，\x22content\x22\x20字段包含完整的HTML代码（例如\x20\x27<div\x20class=...>...</div>\x27）。【绝对禁止】将HTML代码放在\x20\x22kind\x22:\x20\x22text\x22\x20的事件里。\x0a#\x20最近的动态回顾\x20(供所有角色参考)\x0a'+_0x40ebf1+'\x0a')[_0x5c030a(0x8eb)](),'personas':_0x16944f,'mentioned':_0x454061?{'id':_0x454061['id'],'name':_0x454061[_0x5c030a(0xe79)]}:null,'stickerList':_0x2cebda},_0x2c16db={'type':_0x5c030a(0x26a),'properties':{'events':{'type':_0x5c030a(0xc99),'items':{'type':_0x5c030a(0x26a),'required':[_0x5c030a(0xb42),'kind'],'properties':{'senderId':{'type':_0x5c030a(0xdab)},'kind':{'type':_0x5c030a(0xdab),'enum':[_0x5c030a(0x51c),_0x5c030a(0x83a),'music']},'content':{'type':'string'},'sticker':{'type':_0x5c030a(0xdab)},'songName':{'type':'string'},'artist':{'type':_0x5c030a(0xdab)}}}}},'required':['events']},_0x4d6451=[{'role':'system','content':_0x5bc07c}];for(const _0x115daa of _0x4fbf90){const _0x58706d=_0x115daa['role']==='ai'||_0x115daa['role']===_0x5c030a(0x815)?_0x5c030a(0x815):_0x5c030a(0xea1);let _0x3b6f18={'role':_0x58706d,'content':_0x115daa[_0x5c030a(0xb17)]},_0x2b9497=!!_0x115daa[_0x5c030a(0xb17)],_0x4fa8ab=null;if(_0x115daa[_0x5c030a(0x72d)])_0x4fa8ab=_0x115daa['image'];else{if(_0x115daa[_0x5c030a(0x70f)])try{const _0x13fa99=await _0xf3eefa(_0x115daa[_0x5c030a(0x70f)]);if(_0x13fa99)_0x4fa8ab=await _0xbb85d0(_0x13fa99);}catch(_0x282789){console[_0x5c030a(0xc95)](_0x5c030a(0x124),_0x282789);}}if(_0x4fa8ab){if(_0x5c030a(0xae1)===_0x5c030a(0xae1))_0x3b6f18[_0x5c030a(0x72d)]=_0x4fa8ab,_0x2b9497=!![];else return{'type':_0x5c030a(0x51c),'content':_0x12697b};}if(_0x2b9497)_0x4d6451[_0x5c030a(0x214)](_0x3b6f18);}_0x4d6451[_0x5c030a(0x214)]({'role':_0x5c030a(0xea1),'content':'请严格按照以下SCHEMA返回一个JSON对象，不要包含任何额外文字。\x0aSCHEMA:\x0a'+JSON[_0x5c030a(0xaf6)](_0x2c16db)+'\x0a\x0aINPUT:\x0a'+JSON['stringify'](_0x4ac9b4)});try{const _0xd46c30=await _0x56b292(_0x4d6451,{'json':!![]});if(!_0xd46c30)return null;let _0x48a0a5=_0xd46c30[_0x5c030a(0x8eb)]();const _0x5f4c78=_0x48a0a5['match'](/```json([\s\S]*?)```/i);if(_0x5f4c78)_0x48a0a5=_0x5f4c78[0x1][_0x5c030a(0x8eb)]();_0x48a0a5=_0x8665d9(_0x48a0a5);let _0x1732bb=null;try{'qbjqV'===_0x5c030a(0x306)?_0x2145b6['events'][_0x5c030a(0x214)]({'senderId':_0x87916a['id'],'kind':_0x5c030a(0x784),'songName':_0x29792d[_0x5c030a(0xb6d)],'artist':_0x4403ac[_0x5c030a(0x6e3)]}):_0x1732bb=JSON['parse'](_0x48a0a5);}catch(_0x2beac4){console[_0x5c030a(0xc95)](_0x5c030a(0x104),_0x2beac4),console[_0x5c030a(0xc95)](_0x5c030a(0xa8),_0x48a0a5);}if(!_0x1732bb||!Array[_0x5c030a(0x8aa)](_0x1732bb[_0x5c030a(0x694)]))return null;return _0x1732bb=_0x3e1fca(_0x1732bb,_0x4351bd,_0x2cebda),_0x1732bb[_0x5c030a(0x694)]=_0x1732bb[_0x5c030a(0x694)]['slice'](0x0,_0xc64c25),_0x1732bb['events'][_0x5c030a(0x893)]?_0x1732bb:null;}catch(_0x58ac28){if(_0x5c030a(0x65d)!==_0x5c030a(0x5be))return _0x58ac28[_0x5c030a(0xe79)]!==_0x5c030a(0x983)&&console[_0x5c030a(0xc95)](_0x5c030a(0x78c),_0x58ac28),null;else _0x2192f1['getElementById'](_0x5c030a(0x20d))[_0x5c030a(0x3e4)]['setProperty']('--feed-bg-image',_0x5c030a(0x4a6));}}function _0x41fb97(){const _0x4d5795=_0x57ab4d,_0x37dacb=document[_0x4d5795(0x473)](_0x4d5795(0x2cc));_0x37dacb[_0x4d5795(0x6f0)]='';if(_0xa7652b['friendCircles'][_0x4d5795(0x893)]===0x0){_0x37dacb[_0x4d5795(0x6f0)]=_0x4d5795(0xcb9);return;}_0xa7652b[_0x4d5795(0x175)][_0x4d5795(0x1dc)](_0x337d2c=>{const _0x1cbc6f=_0x4d5795,_0x2c953c=_0xa7652b[_0x1cbc6f(0x932)][_0x1cbc6f(0x394)](_0x5e3e7b=>_0x5e3e7b['id']===_0x337d2c[_0x1cbc6f(0x8f5)])||{'name':_0x1cbc6f(0xcd9)},_0x4bd6b3=document['createElement']('div');_0x4bd6b3['className']=_0x1cbc6f(0x522),_0x4bd6b3[_0x1cbc6f(0x9c6)]['id']=_0x337d2c['id'],_0x4bd6b3[_0x1cbc6f(0x6f0)]=_0x1cbc6f(0xb38)+_0x337d2c[_0x1cbc6f(0xe79)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-preview\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20绑定的“我”:\x20'+_0x2c953c[_0x1cbc6f(0xe79)]+_0x1cbc6f(0x5e2)+_0x337d2c['memberCharacterIds']['length']+'\x20个成员\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x4bd6b3[_0x1cbc6f(0xc04)]('click',()=>_0x435a69(_0x337d2c['id'])),_0x37dacb[_0x1cbc6f(0xced)](_0x4bd6b3);});}function _0xce2fed(_0x27ea18=null){const _0x484f5f=_0x57ab4d;if(_0x484f5f(0xa75)!==_0x484f5f(0x1e8)){const _0x5c6312=document[_0x484f5f(0x473)](_0x484f5f(0x24b)),_0x1ebd11=document[_0x484f5f(0x473)]('friend-circle-edit-bind-user'),_0x269a7d=document[_0x484f5f(0x473)](_0x484f5f(0xb43)),_0x345f48=document[_0x484f5f(0x473)]('friend-circle-edit-title'),_0x3994c0=document[_0x484f5f(0x473)](_0x484f5f(0x263)),_0x5e9b35=document[_0x484f5f(0x473)](_0x484f5f(0xa3e));_0x11139b(_0x484f5f(0x1af)),_0x269a7d[_0x484f5f(0x6f0)]='',_0xa7652b[_0x484f5f(0xbfe)][_0x484f5f(0x1dc)](_0x109ff4=>{const _0x25f43c=_0x484f5f,_0x4172ab=document[_0x25f43c(0x7a9)]('div');_0x4172ab['className']=_0x25f43c(0x368),_0x4172ab[_0x25f43c(0x6f0)]=_0x25f43c(0x765)+_0x109ff4['id']+_0x25f43c(0x6bd)+_0x109ff4['id']+_0x25f43c(0xa2a)+(_0x109ff4[_0x25f43c(0x98f)]||_0x96c08e)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22member-select-'+_0x109ff4['id']+_0x25f43c(0xcd5)+_0x109ff4['name']+_0x25f43c(0xcc1),_0x269a7d[_0x25f43c(0xced)](_0x4172ab);});if(_0x27ea18){if('KVpYk'!=='xlSVQ'){const _0x53ca34=_0xa7652b[_0x484f5f(0x175)][_0x484f5f(0x394)](_0x4adfa6=>_0x4adfa6['id']===_0x27ea18);if(!_0x53ca34)return;_0x345f48[_0x484f5f(0x226)]=_0x484f5f(0xa1d),_0x3994c0['value']=_0x53ca34['id'],_0x5c6312[_0x484f5f(0x2d4)]=_0x53ca34[_0x484f5f(0xe79)],_0x1ebd11[_0x484f5f(0x2d4)]=_0x53ca34[_0x484f5f(0x8f5)],_0x5e9b35[_0x484f5f(0x3e4)][_0x484f5f(0x1df)]=_0x484f5f(0x2a3),_0x53ca34[_0x484f5f(0x84a)][_0x484f5f(0x1dc)](_0x2c6175=>{const _0x5a3b65=_0x484f5f,_0x20f148=_0x269a7d['querySelector']('#member-select-'+_0x2c6175);if(_0x20f148)_0x20f148[_0x5a3b65(0x3e3)]=!![];});}else{_0x16f808[_0x484f5f(0xc95)]('加载\x20'+_0x1aadd5+_0x484f5f(0x452),_0x36d33d);const _0xa13892=_0x26d136(_0x48f9d7),_0x146217='\x0a\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22\x20style=\x22color:\x20#d8000c;\x22>发生错误</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>'+_0xa13892[_0x484f5f(0xe79)]+_0x484f5f(0x26f);let _0x434f40=_0x484f5f(0x34a)+_0x35d03f['message']+_0x484f5f(0x19c);_0x3a6fbb&&(_0x434f40+=_0x484f5f(0xbf0)+_0x15b0b2(_0x14287e)+_0x484f5f(0xa2e)),_0x130214[_0x484f5f(0x6f0)]=_0x146217+(_0x484f5f(0xc24)+_0x434f40+_0x484f5f(0x28d)),_0x59ad99[_0x484f5f(0x473)](_0x484f5f(0x8d2))[_0x484f5f(0xc04)](_0x484f5f(0x493),()=>{const _0x2b4189=_0x484f5f;_0x53e155[_0x2b4189(0x3e4)][_0x2b4189(0x1df)]=_0x2b4189(0x4a6),_0x4d3614['getElementById'](_0x2b4189(0x7f7))[_0x2b4189(0x3e4)][_0x2b4189(0x1df)]='flex';});}}else _0x345f48[_0x484f5f(0x226)]=_0x484f5f(0x33d),_0x3994c0[_0x484f5f(0x2d4)]='',_0x5c6312[_0x484f5f(0x2d4)]=_0x484f5f(0x39a)+(_0xa7652b[_0x484f5f(0x175)][_0x484f5f(0x893)]+0x1),_0x1ebd11[_0x484f5f(0x2d4)]=_0xa7652b[_0x484f5f(0xa4f)],_0x5e9b35[_0x484f5f(0x3e4)][_0x484f5f(0x1df)]='none';_0xffff1f(_0x484f5f(0x5e8),_0x484f5f(0x208));}else _0xd62ca2[_0x484f5f(0x4fd)]&&_0x415d13(_0x5f4403['activeFriendCircleId']);}function _0x2ce7de(){const _0x33892a=_0x57ab4d,_0x477c48=document[_0x33892a(0x473)](_0x33892a(0x263))['value'],_0x12a02a=document['getElementById'](_0x33892a(0x24b))[_0x33892a(0x2d4)][_0x33892a(0x8eb)](),_0x30a427=document[_0x33892a(0x473)](_0x33892a(0x1af))[_0x33892a(0x2d4)],_0x58389c=Array[_0x33892a(0x90a)](document[_0x33892a(0xe54)](_0x33892a(0xb8)))[_0x33892a(0x17f)](_0x2d8888=>_0x2d8888[_0x33892a(0x9c6)]['id']);if(!_0x12a02a){if('hcgcO'!==_0x33892a(0x76e))_0x1f45e6['log'](_0x33892a(0xcc0)),_0x53499d[_0x33892a(0x29d)](_0x33892a(0xc6a),_0x16503f[_0x33892a(0xaf6)](_0x4a550d));else{_0x198030(_0x33892a(0x3c0));return;}}if(_0x58389c['length']===0x0){if(_0x33892a(0xbed)===_0x33892a(0x327)){const _0x225eff=_0x34bea7[_0x33892a(0x932)][_0x33892a(0x394)](_0x2b81f2=>_0x2b81f2['id']===_0x2f5e00[_0x33892a(0x8f5)])||{'name':_0x33892a(0xcd9)},_0x498377=_0x3c89be['createElement']('div');_0x498377['className']=_0x33892a(0x522),_0x498377[_0x33892a(0x9c6)]['id']=_0x1d6e79['id'],_0x498377[_0x33892a(0x6f0)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22>'+_0x16ac55['name']+_0x33892a(0xb13)+_0x225eff[_0x33892a(0xe79)]+_0x33892a(0x5e2)+_0x11a84a[_0x33892a(0x84a)][_0x33892a(0x893)]+_0x33892a(0x87a),_0x498377[_0x33892a(0xc04)]('click',()=>_0x272366(_0x4322e6['id'])),_0x1f01bf[_0x33892a(0xced)](_0x498377);}else{_0x198030('至少要选择一个圈内成员！');return;}}if(_0x477c48){const _0x185e59=_0xa7652b[_0x33892a(0x175)][_0x33892a(0x394)](_0x18eb3a=>_0x18eb3a['id']===_0x477c48);_0x185e59&&(_0x185e59[_0x33892a(0xe79)]=_0x12a02a,_0x185e59['boundUserProfileId']=_0x30a427,_0x185e59[_0x33892a(0x84a)]=_0x58389c);}else{const _0x413eab={'id':_0x33892a(0xbd8)+Date['now'](),'name':_0x12a02a,'boundUserProfileId':_0x30a427,'memberCharacterIds':_0x58389c,'posts':[]};_0xa7652b[_0x33892a(0x175)]['push'](_0x413eab);}_0x2e0417(),_0x198030(_0x33892a(0x121)),_0x41fb97(),_0xffff1f(_0x33892a(0x208),'friendCircleEdit');}async function _0x18b5d1(){const _0xe3dbe6=_0x57ab4d;if(_0xe3dbe6(0xd7b)!==_0xe3dbe6(0xd7b))_0x2bb9c0[_0xe3dbe6(0x45c)]===_0xe3dbe6(0xc85)&&_0xa9510(_0x3c450f);else{const _0x31984b=document[_0xe3dbe6(0x473)](_0xe3dbe6(0x263))[_0xe3dbe6(0x2d4)];if(!_0x31984b)return;const _0x5833ca=await _0x410108('确定要删除这个好友圈吗？此操作不可撤销。');if(_0x5833ca){if(_0xe3dbe6(0xace)!==_0xe3dbe6(0xbb5))_0xa7652b[_0xe3dbe6(0x175)]=_0xa7652b[_0xe3dbe6(0x175)][_0xe3dbe6(0x1a9)](_0x2e361e=>_0x2e361e['id']!==_0x31984b),_0xa7652b[_0xe3dbe6(0x4fd)]===_0x31984b&&(_0xa7652b[_0xe3dbe6(0x4fd)]=null),_0x2e0417(),_0x198030(_0xe3dbe6(0x65a)),_0x41fb97(),_0xffff1f(_0xe3dbe6(0x208),'friendCircleEdit');else{if(_0xe97641[_0xe3dbe6(0x7a6)])_0x4045d4(_0x593890['diaryPressTimer']);}}}}function _0x435a69(_0x4a7416){const _0x13bf9b=_0x57ab4d;_0x39837d();const _0x529c6f=_0xa7652b[_0x13bf9b(0x175)][_0x13bf9b(0x394)](_0x3680e0=>_0x3680e0['id']===_0x4a7416);if(!_0x529c6f)return;_0xa7652b[_0x13bf9b(0x4fd)]=_0x4a7416,_0x2e0417(),document[_0x13bf9b(0x473)]('friend-circle-title')[_0x13bf9b(0x226)]=_0x529c6f['name'],_0x16a1d4(),_0xffff1f(_0x13bf9b(0x784),_0x13bf9b(0x208)),_0x1d8266();}function _0xaa6111(){const _0x5c373e=_0x57ab4d;if(!_0xa7652b[_0x5c373e(0x175)]||_0xa7652b[_0x5c373e(0x175)][_0x5c373e(0x893)]===0x0){console['error']('错误：你还没有创建任何好友圈。请先在App内创建一个。');return;}const _0x18e7e3=_0xa7652b[_0x5c373e(0x175)][0x0];if(_0x18e7e3[_0x5c373e(0x84a)]['length']<0x2){if(_0x5c373e(0xbda)===_0x5c373e(0xbda)){console[_0x5c373e(0xc95)](_0x5c373e(0xa41)+_0x18e7e3[_0x5c373e(0xe79)]+_0x5c373e(0x531));return;}else{const _0x2bca6d={'promptTokens':_0x32dce1[_0x5c373e(0xe29)]||0x0,'completionTokens':_0x4d5e29[_0x5c373e(0x2df)]||0x0,'totalTokens':_0x546aba[_0x5c373e(0xce1)]||0x0,'timestamp':_0x212ac7[_0x5c373e(0x144)](),'chatId':_0x2290a1[_0x5c373e(0xd5b)],'model':_0x508765};_0x53762f['tokenStats'][_0x5c373e(0x468)]=_0x2bca6d,_0x4d5c82[_0x5c373e(0xba4)][_0x5c373e(0x692)][_0x5c373e(0x214)](_0x2bca6d),_0x51051a[_0x5c373e(0xba4)][_0x5c373e(0x692)]['length']>0x64&&_0x1a9930[_0x5c373e(0xba4)]['history'][_0x5c373e(0xd4e)]();}}const _0x45c170={'id':_0x5c373e(0x12f)+Date['now'](),'authorType':_0x5c373e(0x130),'authorId':_0x18e7e3[_0x5c373e(0x84a)][0x0],'content':_0x5c373e(0x5ca),'timestamp':Date[_0x5c373e(0x144)](),'likes':[_0x18e7e3['memberCharacterIds'][0x1]],'comments':[{'commentId':'c_'+Date[_0x5c373e(0x144)](),'authorId':_0x18e7e3['memberCharacterIds'][0x1],'content':'赞同！渲染效果一级棒！'}]};_0x18e7e3[_0x5c373e(0xb6e)][_0x5c373e(0x214)](_0x45c170),_0x2e0417(),console['log'](_0x5c373e(0x2af)+_0x18e7e3['name']+_0x5c373e(0x15c)),_0x198030(_0x5c373e(0xc42));}window[_0x57ab4d(0x7b8)]=_0xaa6111;function _0x29849a(_0x1598b5){const _0x304ca6=_0x57ab4d;if(_0x304ca6(0x6c2)!=='cGDIE')return _0xa7652b[_0x304ca6(0x932)][_0x304ca6(0x394)](_0x28bf09=>_0x28bf09['id']===_0x1598b5);else{_0x2abe05[_0x304ca6(0x6e4)](_0x304ca6(0x7e1));return;}}function _0x27a15c(_0x66110b,_0x943b79=_0x57ab4d(0x98e)){const _0x5cfc95=_0x57ab4d;if(_0x5cfc95(0xa6f)==='SQmyS'){const _0x10b208=document[_0x5cfc95(0x473)](_0x5cfc95(0x318));let _0x14be1e=document[_0x5cfc95(0x473)](_0x5cfc95(0x23f));if(_0x66110b)!_0x14be1e&&(_0x14be1e=document['createElement'](_0x5cfc95(0x527)),_0x14be1e['id']=_0x5cfc95(0x23f),_0x10b208[_0x5cfc95(0xced)](_0x14be1e)),_0x14be1e['innerHTML']=_0x5cfc95(0x195)+_0x943b79+'</span>',_0x14be1e['style'][_0x5cfc95(0x1df)]=_0x5cfc95(0x5c9);else{if('qbuQt'===_0x5cfc95(0x22d)){if(_0x14be1e){if(_0x5cfc95(0x9d6)===_0x5cfc95(0x626)){const _0x5253ae=_0x5ae06f[_0x5cfc95(0x473)](_0x5cfc95(0x1db));_0x2f8fa7[_0x5cfc95(0xd12)]&&_0x2930c4['info']?_0x5253ae[_0x5cfc95(0xdeb)]=![]:_0x5253ae[_0x5cfc95(0xdeb)]=!![];}else _0x14be1e[_0x5cfc95(0x3e4)][_0x5cfc95(0x1df)]=_0x5cfc95(0x4a6);}}else _0x582cb0[_0x5cfc95(0xb6e)]&&_0xf984a6['posts'][_0x5cfc95(0x1dc)](_0xe6676a=>{const _0x49254d=_0x5cfc95;_0xd3b50a(_0xe6676a,_0x49254d(0x72d)),_0x2173be(_0xe6676a,_0x49254d(0x4f6));});}}else{_0x1fd9a8(_0x5cfc95(0x586));return;}}async function _0x171417(){const _0x4d5615=_0x57ab4d,_0x466143=_0xa7652b[_0x4d5615(0x175)][_0x4d5615(0x394)](_0x9d3cec=>_0x9d3cec['id']===_0xa7652b[_0x4d5615(0x4fd)]);if(!_0x466143||_0xa7652b['isGenerating'])return;_0x27a15c(!![],'好像有动态了...'),await new Promise(_0x48d27e=>setTimeout(_0x48d27e,0x32)),_0xa7652b[_0x4d5615(0x89f)]=!![];try{if('HNZFY'!==_0x4d5615(0x6e0)){let _0x14b797=Date[_0x4d5615(0x144)]();if(_0x466143[_0x4d5615(0xb6e)]&&_0x466143[_0x4d5615(0xb6e)]['length']>0x0){if('ngsPm'!==_0x4d5615(0xc17))throw new _0x472794(_0x4d5615(0x232));else _0x14b797=Math['max'](..._0x466143['posts'][_0x4d5615(0x17f)](_0x5965fb=>_0x5965fb[_0x4d5615(0xb9f)]));}const _0x2b1f52=await _0x415123(_0x466143);if(!_0x2b1f52||_0x2b1f52[_0x4d5615(0x893)]===0x0){_0x198030(_0x4d5615(0x7d0));return;}const _0xbc64d6=_0x2b1f52[_0x4d5615(0x17f)](async(_0x218780,_0x3e3e0e)=>{const _0x37339d=_0x4d5615;_0x27a15c(!![],'刷新了\x20'+(_0x3e3e0e+0x1)+_0x37339d(0x756)+_0x2b1f52[_0x37339d(0x893)]+'\x20条动态...');const _0x35a5ef=_0x14b797+(_0x3e3e0e+0x1)*0x3c*0x3e8,_0x3376c1={'id':_0x37339d(0x8a0)+_0x218780[_0x37339d(0xc7)]+'_'+_0x35a5ef,'authorType':_0x37339d(0x130),'authorId':_0x218780[_0x37339d(0xc7)],'content':_0x218780[_0x37339d(0xce3)],'timestamp':_0x35a5ef,'likes':_0x218780[_0x37339d(0x5bf)]||[],'comments':(_0x218780[_0x37339d(0x6d9)]||[])['map']((_0x31aa31,_0x51cf8f)=>({'commentId':'c_'+_0x35a5ef+'_'+_0x51cf8f,'authorId':_0x31aa31[_0x37339d(0xc7)],'content':_0x31aa31[_0x37339d(0xb17)]}))};if(_0x218780[_0x37339d(0x73a)]==='music'&&_0x218780[_0x37339d(0xb6d)]&&_0x218780[_0x37339d(0x6e3)])try{const _0x1525d9=await _0x2576ae(_0x218780[_0x37339d(0xb6d)],_0x218780[_0x37339d(0x6e3)]);_0x3376c1['type']='music',_0x3376c1[_0x37339d(0xb6d)]=_0x218780[_0x37339d(0xb6d)],_0x3376c1[_0x37339d(0x6e3)]=_0x218780['artist'],_0x3376c1['coverUrl']=_0x1525d9['cover'],_0x3376c1[_0x37339d(0x5c4)]=_0x1525d9['url'];}catch(_0x37fcb3){console[_0x37339d(0xc95)](_0x37339d(0xc90),_0x37fcb3),_0x3376c1[_0x37339d(0x45c)]=_0x37339d(0x51c);}else _0x37339d(0x19f)!=='uiJlS'?_0x3376c1[_0x37339d(0x45c)]=_0x37339d(0x51c):_0x5041ad[_0x37339d(0xc04)]('click',()=>{const _0x44b991=_0x37339d;if(_0x1509bd[_0x44b991(0x893)]===0x0)return;_0x15cb49=(_0x5a3c99+0x1)%_0x39e347[_0x44b991(0x893)],_0xf3a12d(_0x32bfe5[_0x4cadc1],_0x17dd95);});return _0x3376c1;}),_0x557ce8=await Promise[_0x4d5615(0xc1d)](_0xbc64d6);_0x466143[_0x4d5615(0xb6e)][_0x4d5615(0x214)](..._0x557ce8),_0x2e0417(),_0x39837d();}else return'phone_summary:\x0a\x20\x20status:\x20空空如也，没什么好总结的。';}catch(_0x347981){_0x4d5615(0x5c6)!=='SRJCc'?(console['error'](_0x4d5615(0xb0b),_0x347981),_0x198030(_0x4d5615(0x73e)+_0x347981[_0x4d5615(0xe32)])):_0x22d98b[_0x4d5615(0x45c)]===_0x4d5615(0x4b5)&&(_0x4fc345[_0x4d5615(0x584)]=_0x339bbc[_0x4d5615(0x584)][_0x4d5615(0x1a9)](_0xdd6fd=>_0xdd6fd!==_0x341c90));}finally{_0x16a1d4(),_0x27a15c(![]),_0xa7652b[_0x4d5615(0x89f)]=![];}}async function _0x415123(_0x15c839){const _0x52ea74=_0x57ab4d,_0x1ef90f=_0x15c839[_0x52ea74(0x84a)][_0x52ea74(0x17f)](_0x48903a=>_0x1238ea(_0x48903a))[_0x52ea74(0x1a9)](Boolean);if(_0x1ef90f[_0x52ea74(0x893)]===0x0)return null;const _0x114a7e=_0x4649bb(),_0x2117a1=_0x29849a(_0x15c839[_0x52ea74(0x8f5)])||_0xa7652b[_0x52ea74(0x932)][0x0],_0x533a21=_0x2117a1?_0x52ea74(0x2fa)+_0x2117a1[_0x52ea74(0xe79)]+_0x52ea74(0x231)+(_0x2117a1[_0x52ea74(0x171)]||'无')+'\x0a':'',_0x5b9638=await Promise[_0x52ea74(0xc1d)](_0x1ef90f[_0x52ea74(0x17f)](async _0x279c6d=>{const _0x20ee9b=_0x52ea74;if(_0x20ee9b(0x2a4)===_0x20ee9b(0xaa4)){const _0x54f615=_0x1ed9c7[_0x20ee9b(0x180)](_0x2f851a),_0x36130d=_0x181e39[_0x20ee9b(0xaf6)](_0x54f615,null,0x2);_0x34e7ec[_0x20ee9b(0x2d4)]=_0x36130d;}else{const {omniText:_0x26e3ac}=_0x32429c(_0x279c6d['id'],null),_0x27ad0f=_0x322f26(_0x279c6d['id']),_0x49d645=await _0xa63707(_0x279c6d['id']),_0x39f937=_0x3f0d67(_0x279c6d['id']),_0x4a2606=_0x279c6d[_0x20ee9b(0x277)]&&_0x279c6d[_0x20ee9b(0x277)][_0x20ee9b(0x893)]>0x0?_0x20ee9b(0xa45)+_0x279c6d[_0x20ee9b(0xe79)]+_0x20ee9b(0xa9b)+_0x279c6d['linkedWorldBookIds'][_0x20ee9b(0x17f)](_0x4364fc=>_0xa7652b[_0x20ee9b(0x52d)][_0x20ee9b(0x394)](_0x5ac55d=>_0x5ac55d['id']===_0x4364fc))[_0x20ee9b(0x1a9)](Boolean)[_0x20ee9b(0x17f)](_0x333d51=>'\x0a##\x20条目:\x20'+_0x333d51[_0x20ee9b(0xe79)]+'\x0a'+_0x333d51['content'])[_0x20ee9b(0x332)](''):'';return'-\x20姓名:\x20'+_0x279c6d[_0x20ee9b(0xe79)]+_0x20ee9b(0x9f7)+_0x279c6d['id']+_0x20ee9b(0xc2)+_0x279c6d[_0x20ee9b(0x171)]+_0x20ee9b(0x500)+_0x26e3ac+'\x0a'+_0x27ad0f+'\x0a'+_0x49d645+'\x0a'+_0x39f937+'\x0a'+_0x4a2606;}})),_0x59bbc1=Math[_0x52ea74(0xe7c)](Math['random']()*0x3)+0x2,_0xb14ab1=_0x52ea74(0xd39)+_0x59bbc1+_0x52ea74(0x5a2)+_0x2117a1['name']+_0x52ea74(0x5cd)+_0x2117a1['id']+'）是【用户】/【观察者】/【好友圈的主人】。\x0a-\x20列表中的【所有】其他人（'+_0x1ef90f[_0x52ea74(0x17f)](_0x42baf2=>_0x42baf2[_0x52ea74(0xe79)])['join']('、')+_0x52ea74(0x627)+_0x2117a1[_0x52ea74(0xe79)]+_0x52ea74(0x91e)+_0x1ef90f[0x0]['name']+'\x22）要发布一条**新动态**时，你【必须】查阅你自己的“相关记忆”（聊天、日记、视奸内容等）。\x0a\x20\x20\x20\x20-\x20你的动态内容【必须】与你和\x22'+_0x2117a1['name']+_0x52ea74(0xbeb)+_0x2117a1[_0x52ea74(0xe79)]+'\x22聊过一部电影，你的新动态就应该是关于那部电影的感想。\x0a\x0a2.\x20\x20**【法律B\x20(对AI)：评论他人(AI)动态时】**\x0a\x20\x20\x20\x20-\x20当你（例如：\x22'+_0x1ef90f[0x0]['name']+'\x22）要**评论**另一个【角色】（例如：\x22'+(_0x1ef90f[0x1]?_0x1ef90f[0x1][_0x52ea74(0xe79)]:'群友B')+_0x52ea74(0xb63)+_0x2117a1[_0x52ea74(0xe79)]+_0x52ea74(0xc62)+_0x5b9638[_0x52ea74(0x332)]('\x0a\x0a')+'\x0a'+_0x533a21+'\x0a\x0a#\x20最近的动态回顾\x20(供参考，避免重复)\x0a'+_0x114a7e+_0x52ea74(0x139)+_0x59bbc1+'条新动态挑选发布者。\x0a3.\x20\x20**创作动态\x20(遵守法律A)**:\x20扮演作者，根据其【私密记忆】创作与用户相关的动态。\x0a4.\x20\x20**模拟互动\x20(遵守法律B)**:\x20切换视角到【圈内其他AI成员】，根据【公开人设】模拟点赞和评论。\x0a\x0a#\x20输出格式【绝对规则】\x0a-\x20你的输出**必须**是一个语法完全正确的、单一的JSON数组，包含\x20'+_0x59bbc1+_0x52ea74(0xc59),_0x3d674a=[{'role':_0x52ea74(0xaae),'content':_0xb14ab1},{'role':_0x52ea74(0xea1),'content':_0x52ea74(0x1b7)}];_0x3d674a[_0x52ea74(0x214)]({'role':_0x52ea74(0xea1),'content':_0x52ea74(0x976)+_0x59bbc1+_0x52ea74(0xdb8)});let _0x64f88a='';try{_0x64f88a=await _0x56b292(_0x3d674a,{'json':!![]});const _0x10bc30=_0x64f88a['match'](/(\[[\s\S]*\])/);if(!_0x10bc30)throw new Error(_0x52ea74(0x1f6));const _0x109e4b=_0x10bc30[0x1],_0x203482=JSON[_0x52ea74(0x180)](_0x109e4b);if(!Array[_0x52ea74(0x8aa)](_0x203482))throw new Error(_0x52ea74(0x303));return _0x203482;}catch(_0xd51ed2){console['error']('批量生成动态失败:\x20',_0xd51ed2),_0xd51ed2[_0x52ea74(0xa79)]=_0x64f88a;throw _0xd51ed2;}}async function _0x4345cd(){const _0x2031e5=_0x57ab4d,_0x5eabaa=_0xa7652b[_0x2031e5(0x175)]['find'](_0x2f0ab9=>_0x2f0ab9['id']===_0xa7652b[_0x2031e5(0x4fd)]);if(!_0x5eabaa)return;const _0x8bb15d=await _0x410108(_0x2031e5(0x72a)+_0x5eabaa[_0x2031e5(0xe79)]+'”的所有动态吗？此操作不可撤销，且AI将不再记得这些内容。');_0x8bb15d&&(_0x5eabaa['posts']=[],_0x2e0417(),_0x16a1d4(),_0x198030(_0x2031e5(0xcdf)));}function _0x16a1d4(){const _0x286e84=_0x57ab4d;if(_0x286e84(0xa77)==='VJJLm')_0x4d8d35[_0x286e84(0xc95)](_0x286e84(0xa46),_0x56f4f0);else{const _0x16904c=document[_0x286e84(0x473)]('music-feed-container'),_0x4d8501=_0xa7652b[_0x286e84(0x175)][_0x286e84(0x394)](_0x2f81a9=>_0x2f81a9['id']===_0xa7652b[_0x286e84(0x4fd)]);if(!_0x4d8501){_0x16904c['innerHTML']=_0x286e84(0x642);return;}if(!_0x4d8501[_0x286e84(0xb6e)]||_0x4d8501[_0x286e84(0xb6e)]['length']===0x0){if(_0x286e84(0x774)!==_0x286e84(0x774))return{'role':_0x286e84(0xea1),'content':[{'type':_0x286e84(0x51c),'text':_0x146502[_0x286e84(0xb17)]||'\x20'},{'type':_0x286e84(0x354),'image_url':{'url':_0x1f409f[_0x286e84(0x72d)],'detail':_0x286e84(0x261)}}]};else{_0x16904c[_0x286e84(0x6f0)]=_0x286e84(0x6f1);return;}}_0x16904c[_0x286e84(0x6f0)]='';const _0x542cfb=[..._0x4d8501[_0x286e84(0xb6e)]][_0x286e84(0x84c)]((_0x4e7c92,_0x3d932b)=>_0x3d932b['timestamp']-_0x4e7c92[_0x286e84(0xb9f)]);_0x542cfb[_0x286e84(0x1dc)](_0x13ea83=>{const _0x3c1afa=_0x286e84;if(_0x3c1afa(0x551)!==_0x3c1afa(0xdfc)){const _0x5b5701=document[_0x3c1afa(0x7a9)]('div');_0x5b5701[_0x3c1afa(0xd04)]=_0x3c1afa(0xbb1);let _0x11ab0b='未知',_0x2c4897=_0x96c08e;if(_0x13ea83[_0x3c1afa(0x440)]==='user'){const _0x41e25b=_0x29849a(_0x13ea83[_0x3c1afa(0xc7)]);_0x41e25b&&(_0x11ab0b=_0x41e25b['name'],_0x2c4897=_0x41e25b[_0x3c1afa(0x98f)]);}else{const _0x3b1411=_0x1238ea(_0x13ea83[_0x3c1afa(0xc7)]);_0x3b1411&&(_0x3c1afa(0x8a4)!==_0x3c1afa(0x567)?(_0x11ab0b=_0x3b1411[_0x3c1afa(0xe79)],_0x2c4897=_0x3b1411[_0x3c1afa(0x98f)]):_0x5319da[_0x3c1afa(0x493)]());}const _0x5bc1c7=_0x3c1afa(0xb62)+_0x2c4897+_0x3c1afa(0x174)+_0x11ab0b+'</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2318d4=_0x3c1afa(0x846)+_0x13ea83['content']+_0x3c1afa(0x45a);let _0x2141dd='';if(_0x13ea83['image']||_0x13ea83['imageId']){const _0x56cbd5='post-img-'+_0x13ea83['id'];_0x2141dd='<div\x20class=\x22post-image-container\x22><img\x20id=\x22'+_0x56cbd5+_0x3c1afa(0xe8c),setTimeout(()=>{const _0x380d2f=_0x3c1afa,_0x359f98=document['getElementById'](_0x56cbd5);if(!_0x359f98)return;if(_0x13ea83[_0x380d2f(0x72d)])_0x359f98[_0x380d2f(0x706)]=_0x13ea83[_0x380d2f(0x72d)];else _0x13ea83['imageId']&&_0xf3eefa(_0x13ea83['imageId'])['then'](_0x40d19a=>{const _0x26a04e=_0x380d2f;if(_0x40d19a){const _0x1d05b2=URL[_0x26a04e(0xc18)](_0x40d19a);_0x359f98[_0x26a04e(0x706)]=_0x1d05b2,_0x359f98['onload']=()=>URL['revokeObjectURL'](_0x1d05b2);}});},0x0);}let _0x24a76c='';if(_0x13ea83[_0x3c1afa(0x45c)]==='music'&&_0x13ea83[_0x3c1afa(0xb6d)]){if(_0x3c1afa(0x8b4)!=='ChpIH'){if(_0x557239){const _0x4bb4ab=_0xf532d8(_0x242c06[_0x3c1afa(0x9ed)]);_0x4bb4ab&&(delete _0x4bb4ab[_0x3c1afa(0x682)],_0x12737d(),_0x368145(_0x4bb4ab['id'],'normal'),_0x3cdf64(_0x3c1afa(0x5df)),_0x332430(!![]));}}else _0x24a76c=_0x3c1afa(0xaf2)+_0x13ea83['id']+_0x3c1afa(0x6e5)+(_0x13ea83[_0x3c1afa(0x4f6)]||_0x96c08e)+_0x3c1afa(0xcc8)+_0x13ea83['songName']+_0x3c1afa(0xe90)+_0x13ea83['artist']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>'+(_0x13ea83[_0x3c1afa(0x5c4)]?'▶':'⚠')+_0x3c1afa(0xd80);}const _0x28c5f9=_0x3c1afa(0x299)+new Date(_0x13ea83['timestamp'])[_0x3c1afa(0x1f3)]('zh-CN')+'</div>';let _0x5b56f3='';if(_0x13ea83[_0x3c1afa(0x5bf)]&&_0x13ea83[_0x3c1afa(0x5bf)][_0x3c1afa(0x893)]>0x0||_0x13ea83[_0x3c1afa(0x6d9)]&&_0x13ea83[_0x3c1afa(0x6d9)][_0x3c1afa(0x893)]>0x0){if('HJcOd'===_0x3c1afa(0xe00))_0x26cc39[_0x3c1afa(0xc95)](_0x3c1afa(0xa90),_0x7ae668);else{let _0x5851aa='';if(_0x13ea83['likes']&&_0x13ea83[_0x3c1afa(0x5bf)]['length']>0x0){const _0xc4b85=_0x13ea83[_0x3c1afa(0x5bf)][_0x3c1afa(0x17f)](_0x55ea26=>_0x1238ea(_0x55ea26)?.[_0x3c1afa(0xe79)]||'未知')[_0x3c1afa(0x332)]('、'),_0x340b72=_0x3c1afa(0x9e3);_0x5851aa=_0x3c1afa(0xb28)+_0x340b72+'\x20'+_0xc4b85+_0x3c1afa(0x28d);}let _0x1b58d9='';if(_0x13ea83[_0x3c1afa(0x6d9)]&&_0x13ea83[_0x3c1afa(0x6d9)][_0x3c1afa(0x893)]>0x0){const _0x60a733=_0x13ea83['comments'][_0x3c1afa(0x17f)](_0x373c3d=>{const _0x293c10=_0x3c1afa,_0x2e5434=_0x1238ea(_0x373c3d[_0x293c10(0xc7)])?.['name']||'未知';return _0x293c10(0x29b)+_0x2e5434+'</span>:\x20'+_0x373c3d[_0x293c10(0xb17)]+_0x293c10(0x28d);})[_0x3c1afa(0x332)]('');_0x1b58d9='<div\x20class=\x22post-comments-container\x22>'+_0x60a733+_0x3c1afa(0x28d);}_0x5b56f3=_0x3c1afa(0xa4a)+_0x5851aa+_0x3c1afa(0x62d)+_0x1b58d9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20';}}const _0x4429b4=_0x3c1afa(0xd2a)+_0x2318d4+_0x2141dd+_0x24a76c+'</div>';_0x5b5701[_0x3c1afa(0x6f0)]=_0x5bc1c7+_0x4429b4+_0x28c5f9+_0x5b56f3;if(_0x13ea83['type']==='music'&&_0x13ea83['playableUrl']){const _0x2dc498=_0x5b5701['querySelector'](_0x3c1afa(0x4ba));_0x2dc498&&_0x2dc498[_0x3c1afa(0xc04)](_0x3c1afa(0x493),function(){const _0x5521bf=_0x3c1afa,_0x45b20d={'id':_0x13ea83['id'],'url':_0x13ea83[_0x5521bf(0x5c4)]};_0xf7696b(this,_0x45b20d);});}_0x16904c['appendChild'](_0x5b5701);}else return new _0x54f540((_0x3be6bb,_0x3123f6)=>{const _0x4da3c5=_0x3c1afa,_0x2530df=new _0x202d50();_0x2530df[_0x4da3c5(0x4ef)]=()=>_0x3be6bb(_0x2530df[_0x4da3c5(0xdc7)]),_0x2530df[_0x4da3c5(0x835)]=_0x3123f6,_0x2530df[_0x4da3c5(0xd9b)](_0x31a915);});});}}document[_0x57ab4d(0x473)]('clear-feed-button')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x4345cd),document['getElementById'](_0x57ab4d(0x922))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x171417),document[_0x57ab4d(0x473)](_0x57ab4d(0x344))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0xbd6),_0x57ab4d(0x208))),document[_0x57ab4d(0x473)](_0x57ab4d(0x594))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xce2fed()),document[_0x57ab4d(0x473)]('back-to-circle-list-from-edit')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0x208),_0x57ab4d(0x5e8))),document[_0x57ab4d(0x473)](_0x57ab4d(0x856))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x2ce7de),document[_0x57ab4d(0x473)](_0x57ab4d(0xa3e))['addEventListener'](_0x57ab4d(0x493),_0x18b5d1),document['getElementById'](_0x57ab4d(0x70c))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x5d9dd9=_0x57ab4d;_0x41fb97(),_0xffff1f(_0x5d9dd9(0x208),'music');}),document[_0x57ab4d(0x473)](_0x57ab4d(0xe8d))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x4cbb64=_0x57ab4d;_0xa7652b[_0x4cbb64(0x4fd)]&&_0xce2fed(_0xa7652b[_0x4cbb64(0x4fd)]);}),document[_0x57ab4d(0x473)]('user-send-post-button')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0x4f8421=_0x57ab4d;if(_0x4f8421(0xcff)!=='JjYPW'){const _0x7facbb=_0xa7652b[_0x4f8421(0x175)][_0x4f8421(0x394)](_0x1aad99=>_0x1aad99['id']===_0xa7652b[_0x4f8421(0x4fd)]);if(!_0x7facbb||_0xa7652b[_0x4f8421(0x89f)])return;const _0x123472=_0x7facbb[_0x4f8421(0x8f5)],_0x4b1244=_0xa7652b[_0x4f8421(0x932)][_0x4f8421(0x394)](_0x4c1551=>_0x4c1551['id']===_0x123472);if(!_0x4b1244){if(_0x4f8421(0xc0)!==_0x4f8421(0x484)){_0x198030(_0x4f8421(0x6c7));return;}else{_0x48a1e2[_0x4f8421(0x6e4)](_0x4f8421(0xc09)+_0x430647+'\x20的档案已存在，跳过初始化，防止误删。');return;}}const _0x3b45cc=document[_0x4f8421(0x473)](_0x4f8421(0x268))['value'][_0x4f8421(0x8eb)](),_0x27be74=_0xa7652b[_0x4f8421(0x831)][_0x4f8421(0x72d)],_0x5997bc=_0xa7652b[_0x4f8421(0x831)][_0x4f8421(0x784)],_0x39a214=_0xa7652b[_0x4f8421(0x831)][_0x4f8421(0x70f)];if(!_0x3b45cc&&!_0x27be74&&!_0x5997bc){if(_0x4f8421(0x179)!==_0x4f8421(0x179))_0x2d3de1='从零开始，【首次生成】用户画像',_0x439421=_0x4f8421(0x3ee),_0x2d6cd3=_0x4f8421(0x3ee),_0x445c59='（【【【最高指令：初始生成】】】\x0a\x20\x20\x20\x20*\x20你的任务是基于**所有**历史信息，从零开始，撰写一份【全新的】总结。\x0a\x20\x20\x20\x20*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a\x20\x20\x20\x20*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a';else{_0x198030(_0x4f8421(0x24a));return;}}const _0x311fd8={'id':'post_user_'+Date[_0x4f8421(0x144)](),'authorType':_0x4f8421(0xea1),'authorId':_0x4b1244['id'],'content':_0x3b45cc,'timestamp':Date[_0x4f8421(0x144)](),'likes':[],'comments':[]};if(_0x39a214){if('bGLoB'==='xICDs'){const _0x44593f=new _0x2b9a13(_0x243ae1[_0x4f8421(0xb9f)])[_0x4f8421(0xa8d)]()['split']('T')[0x0];return!_0x4ba63f[_0x44593f]&&(_0xf9b32e[_0x44593f]=[]),_0x2847b9[_0x44593f][_0x4f8421(0x214)](_0x4f8421(0x90b)+_0x52722e[_0x4f8421(0x45c)]+']\x20'+_0x1c2ed2[_0x4f8421(0xb17)]),_0x421c39;}else _0x311fd8[_0x4f8421(0x70f)]=_0x39a214;}else _0x27be74&&(_0x4f8421(0x880)!==_0x4f8421(0x79f)?_0x311fd8[_0x4f8421(0x72d)]=_0x27be74:_0x3f582e+='-\x20你点过一份外卖：“'+_0x38c3c3[_0x4f8421(0xb2a)]+_0x4f8421(0x36f)+_0x3d94c2[_0x4f8421(0x1ed)][_0x4f8421(0x332)]('、')+'。\x0a');if(_0x5997bc)_0x4f8421(0xc8f)===_0x4f8421(0xb56)?_0x24f8b5[_0x4f8421(0x214)]('['+_0x5cbe93(_0x25dce2)+']\x20[sticker:'+(_0x57204a[_0x4f8421(0xb17)]?.['match'](/：(.+?)]/)?.[0x1]||'表情')+']'):(_0x311fd8[_0x4f8421(0x45c)]=_0x4f8421(0x784),Object['assign'](_0x311fd8,_0x5997bc));else{if(_0x4f8421(0xde9)===_0x4f8421(0xde9))_0x311fd8[_0x4f8421(0x45c)]=_0x4f8421(0x51c);else{const _0x5b0755=_0xec39a1[_0x4f8421(0x473)](_0x4f8421(0x845));_0x5b0755['innerHTML']='';const _0xeb17ab=_0x5b9524['characters'][_0x4f8421(0x1a9)](_0x45055b=>_0x55848b['chats'][_0x4f8421(0x691)](_0x1b1882=>_0x1b1882[_0x4f8421(0x45c)]===_0x4f8421(0x722)&&_0x1b1882['participantIds'][_0x4f8421(0x5c0)](_0x45055b['id'])));if(_0xeb17ab[_0x4f8421(0x893)]===0x0){_0x5b0755[_0x4f8421(0x6f0)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以直播的角色哦。</p>';return;}_0xeb17ab[_0x4f8421(0x1dc)](_0x416799=>{const _0x1043e4=_0x4f8421,_0x4f5e31=_0x465c88['createElement']('li');_0x4f5e31[_0x1043e4(0xd04)]='character-item',_0x4f5e31[_0x1043e4(0x9c6)][_0x1043e4(0xa48)]=_0x416799['id'],_0x4f5e31[_0x1043e4(0x6f0)]=_0x1043e4(0xb4f)+(_0x416799[_0x1043e4(0x98f)]||_0x561357)+_0x1043e4(0x5bc)+_0x416799[_0x1043e4(0xe79)]+_0x1043e4(0x336),_0x4f5e31[_0x1043e4(0xc04)](_0x1043e4(0x493),()=>{_0xf23471(_0x416799['id']);}),_0x5b0755[_0x1043e4(0xced)](_0x4f5e31);});}}_0x7facbb[_0x4f8421(0xb6e)][_0x4f8421(0x214)](_0x311fd8),_0x2e0417(),_0x16a1d4(),document[_0x4f8421(0x473)](_0x4f8421(0x268))[_0x4f8421(0x2d4)]='',_0xa7652b['pendingPostAttachments'][_0x4f8421(0x72d)]=null,_0xa7652b[_0x4f8421(0x831)][_0x4f8421(0x784)]=null,_0xa7652b[_0x4f8421(0x831)][_0x4f8421(0x70f)]=null,_0x3d7f85(),_0x167d98(_0x311fd8);}else _0x32bafe[_0x4f8421(0x29d)](_0x4f8421(0x721),_0x35aaa4[_0x4f8421(0xaf6)]({'playlist':_0x45e8ad[_0x4f8421(0x2bd)],'currentIndex':_0x1ec589['currentlyPlayingIndex']}));}),document[_0x57ab4d(0x473)](_0x57ab4d(0xc27))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x516687=_0x57ab4d;document['getElementById'](_0x516687(0x4df))[_0x516687(0x493)]();}),document[_0x57ab4d(0x473)](_0x57ab4d(0x4df))[_0x57ab4d(0xc04)](_0x57ab4d(0x1c4),async _0x352772=>{const _0x40c8c6=_0x57ab4d;if(_0x40c8c6(0x61d)===_0x40c8c6(0xc0e))_0x346307[_0x40c8c6(0x706)]&&(_0x44a027[_0x40c8c6(0xae2)]?_0x2c538c[_0x40c8c6(0x50a)]():_0x5b2648[_0x40c8c6(0xb57)]());else{const _0x1e9f7d=_0x352772[_0x40c8c6(0x63c)][_0x40c8c6(0xcf5)][0x0];if(!_0x1e9f7d)return;try{if(_0x40c8c6(0xbe1)==='xJIUf')_0x47d552(![]);else{const _0x638461=await _0x40bef0(_0x1e9f7d,0x320,0.8,!![]),_0x4d5bff=_0x40c8c6(0x598)+Date[_0x40c8c6(0x144)]();await _0x1366c1(_0x4d5bff,_0x638461),_0xa7652b[_0x40c8c6(0x831)][_0x40c8c6(0x70f)]=_0x4d5bff,_0xa7652b[_0x40c8c6(0x831)]['image']=null,_0xa7652b[_0x40c8c6(0x831)][_0x40c8c6(0x784)]=null,_0x3d7f85();}}catch(_0x154ae8){_0x198030('图片处理失败:\x20'+_0x154ae8['message']);}_0x352772[_0x40c8c6(0x63c)][_0x40c8c6(0x2d4)]='';}}),document[_0x57ab4d(0x473)](_0x57ab4d(0x7db))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0x518711=_0x57ab4d,_0x22ce43=await _0x5f088a();if(!_0x22ce43)return;_0x198030(_0x518711(0x9d2));try{const _0x35ef03=await _0x2576ae(_0x22ce43[_0x518711(0xb6d)],_0x22ce43[_0x518711(0x6e3)]);_0xa7652b[_0x518711(0x831)]['music']={'songName':_0x22ce43[_0x518711(0xb6d)],'artist':_0x22ce43[_0x518711(0x6e3)],'coverUrl':_0x35ef03[_0x518711(0xdd5)],'playableUrl':_0x35ef03[_0x518711(0x17c)]},_0xa7652b[_0x518711(0x831)][_0x518711(0x72d)]=null,_0x3d7f85();}catch(_0x331700){_0x198030(_0x518711(0xd51)+_0x331700[_0x518711(0xe32)]);}});function _0x43a947(){const _0x194a9f=_0x57ab4d;if('qFRPE'==='qFRPE'){const _0x3507d9=new Date(),_0x215ac6=document[_0x194a9f(0x473)](_0x194a9f(0x4c9)),_0x14abcd=document['getElementById'](_0x194a9f(0x48a));if(_0x215ac6&&_0x14abcd){const _0x46c462=String(_0x3507d9[_0x194a9f(0xa49)]())[_0x194a9f(0x2c8)](0x2,'0'),_0x2fcff6=String(_0x3507d9[_0x194a9f(0x529)]())[_0x194a9f(0x2c8)](0x2,'0');_0x215ac6[_0x194a9f(0x226)]=_0x46c462+':'+_0x2fcff6;const _0x13d98a=_0x3507d9[_0x194a9f(0xc57)]()+0x1,_0x290aa6=_0x3507d9[_0x194a9f(0x947)](),_0x5a259d=[_0x194a9f(0x9d3),_0x194a9f(0xa00),_0x194a9f(0xcb7),_0x194a9f(0x67a),'星期四',_0x194a9f(0xe4f),_0x194a9f(0x302)][_0x3507d9[_0x194a9f(0x441)]()];_0x14abcd[_0x194a9f(0x226)]=_0x13d98a+'月'+_0x290aa6+'日\x20'+_0x5a259d;}}else return _0x47b34a[_0x194a9f(0x932)][_0x194a9f(0x394)](_0x2ff2fe=>_0x2ff2fe['id']===_0x1bc7df[_0x194a9f(0xa4f)])||_0x1c4cf1['userProfiles'][0x0];}function _0x54c76a(_0x469a9a){const _0x59d5ad=_0x57ab4d;if(!_0x469a9a)return'';const _0x29e140=new Date(_0x469a9a),_0x22cfbe=String(_0x29e140[_0x59d5ad(0xa49)]())[_0x59d5ad(0x2c8)](0x2,'0'),_0x53b37a=String(_0x29e140[_0x59d5ad(0x529)]())[_0x59d5ad(0x2c8)](0x2,'0');return _0x22cfbe+':'+_0x53b37a;}function _0x4649bb(){const _0x153ed2=_0x57ab4d,_0x338fa1=_0xa7652b[_0x153ed2(0x175)][_0x153ed2(0x394)](_0x35d747=>_0x35d747['id']===_0xa7652b[_0x153ed2(0x4fd)]),_0x5a4f2b=_0x338fa1?_0x338fa1[_0x153ed2(0xb6e)]:[];if(!_0x5a4f2b||_0x5a4f2b[_0x153ed2(0x893)]===0x0)return'';const _0x45b078=_0x5a4f2b[_0x153ed2(0x1de)](0x0,0x5),_0x49fa4=_0x45b078['map'](_0x4e61a0=>{const _0x418069=_0x153ed2;if(_0x418069(0x448)!=='WqZrz'){const _0x18bbe8=_0x5a2873['id'],_0x29d065=_0x418069(0xe7)+_0x18bbe8,_0x3892be=_0x2e96f5['getItem'](_0x29d065),_0x2f79e4=_0x3eb80c[_0x418069(0x373)](_0x418069(0x3e6));if(_0x3892be)_0x2f79e4[_0x418069(0x6f0)]='<img\x20src=\x22'+_0x3892be+_0x418069(0x2ee);else{const _0x10e03f=_0x444cc7[_0x418069(0x373)](_0x418069(0xe71)+_0x18bbe8+_0x418069(0x1f1)+_0x18bbe8+_0x418069(0x353))?.[_0x418069(0x6f0)];_0x10e03f&&(_0x2f79e4[_0x418069(0x6f0)]=_0x10e03f);}}else{const _0x426bad=_0x1238ea(_0x4e61a0[_0x418069(0xc7)])||{'name':'未知'};let _0x878a61=_0x418069(0xa47)+_0x426bad[_0x418069(0xe79)]+_0x418069(0xe62)+(_0x4e61a0['thought']||_0x4e61a0['content'])+'”';return _0x4e61a0[_0x418069(0x45c)]==='music'&&(_0x878a61+=_0x418069(0x840)+_0x4e61a0[_0x418069(0xb6d)]+_0x418069(0x6d6)+_0x4e61a0[_0x418069(0x6e3)]+')'),_0x878a61;}});return _0x153ed2(0x68e)+_0x49fa4[_0x153ed2(0x332)]('\x0a');}function _0x322f26(_0x4399f8){const _0x1960ae=_0x57ab4d;if(_0x1960ae(0x109)!=='OROOr'){const _0x166b41=_0xa7652b[_0x1960ae(0x932)]['find'](_0x21e8d8=>_0x21e8d8['id']===_0xa7652b[_0x1960ae(0xa4f)])||{'name':'你'},_0x4ff011=_0xa7652b[_0x1960ae(0x65b)][_0x1960ae(0x394)](_0x56481b=>_0x56481b[_0x1960ae(0x3b1)]===_0x4399f8);if(!_0x4ff011||!_0x4ff011[_0x1960ae(0x420)]||_0x4ff011[_0x1960ae(0x420)]['length']===0x0)return'';const _0x1e38b9=_0x4ff011[_0x1960ae(0x420)][_0x1960ae(0x1de)](-0x8),_0x43e9da=_0x1e38b9[_0x1960ae(0x17f)](_0xda41d4=>{const _0x491c00=_0x1960ae,_0x1a4e0f=_0xda41d4[_0x491c00(0x689)]===_0x491c00(0xea1)?_0x166b41['name']:_0x1238ea(_0xda41d4[_0x491c00(0x689)])[_0x491c00(0xe79)];return _0x491c00(0x375)+new Date(_0xda41d4['timestamp'])[_0x491c00(0x647)]()+']\x20'+_0x1a4e0f+_0x491c00(0xb1c)+_0xda41d4[_0x491c00(0xb17)];})[_0x1960ae(0x332)]('\x0a');return _0x1960ae(0x60c)+_0x166b41[_0x1960ae(0xe79)]+'\x20之间的私密内容)\x0a'+_0x43e9da;}else{const _0x3e5a42=_0x3836e4['target'][_0x1960ae(0x9c6)][_0x1960ae(0x45e)],_0x58059e=_0x219836['querySelectorAll'](_0x1960ae(0x83d)+_0x3e5a42+'\x22]'),_0x29a9a5=_0x528772[_0x1960ae(0xe54)](_0x1960ae(0x83d)+_0x3e5a42+_0x1960ae(0xc15)),_0x23691b=_0x1153ab[_0x1960ae(0x373)](_0x1960ae(0x5af)+_0x3e5a42+'\x22]');if(_0x29a9a5[_0x1960ae(0x893)]===0x0)_0x23691b[_0x1960ae(0x3e3)]=![],_0x23691b[_0x1960ae(0x3e5)]=![];else _0x29a9a5[_0x1960ae(0x893)]===_0x58059e['length']?(_0x23691b[_0x1960ae(0x3e3)]=!![],_0x23691b['indeterminate']=![]):_0x23691b[_0x1960ae(0x3e5)]=!![];_0x100cd3();}}function _0x3f0d67(_0x1f374f){const _0x125f0b=_0x57ab4d,_0x49a1c0=_0xa7652b['livestreamReplays'][_0x1f374f];if(!_0x49a1c0||_0x49a1c0[_0x125f0b(0x893)]===0x0)return'';const _0x1904bc=_0x49a1c0[_0x125f0b(0x1de)](0x0,0x3),_0x190dbd=_0x1904bc['map']((_0x3606d8,_0x5e589a)=>{const _0x248a88=_0x125f0b;if('xMxRj'!=='xMxRj'){const _0x56e0fd=_0xc4d787[_0x248a88(0x145)](!![]);_0x2498f1[_0x248a88(0x355)][_0x248a88(0x635)](_0x56e0fd,_0xc402ec),_0x56e0fd['addEventListener']('click',_0x4b0111),_0x14e894[_0x248a88(0x6e4)](_0x248a88(0x704));}else{const _0x3df54b=_0x3606d8['match'](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x248a88(0x47b),_0x1ef729=(_0x3606d8['match'](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x248a88(0x8ff)]('\x0a')['map'](_0x5e7caf=>_0x5e7caf['trim']())[_0x248a88(0x1a9)](_0x4493d0=>_0x4493d0[_0x248a88(0x324)]('-'))[_0x248a88(0x332)]('\x20');return _0x248a88(0x3c3)+(_0x5e589a+0x1)+_0x248a88(0x494)+_0x3df54b+'”，期间发生了：'+_0x1ef729;}})['join']('\x0a');return _0x125f0b(0xbec)+_0x190dbd;}function _0x48aed4(){const _0x548a2d=_0x57ab4d,_0x328efe=document[_0x548a2d(0x473)](_0x548a2d(0x34e)),_0x5057d7=_0xa7652b[_0x548a2d(0x5fa)][_0x548a2d(0xc38)];if(_0x5057d7)_0x328efe[_0x548a2d(0x3e4)][_0x548a2d(0x16b)]=_0x548a2d(0x548)+_0x5057d7+')',_0x328efe[_0x548a2d(0x3e4)]['backgroundSize']=_0x548a2d(0xdd5),_0x328efe[_0x548a2d(0x3e4)][_0x548a2d(0xcb8)]=_0x548a2d(0x88f),_0x328efe['style'][_0x548a2d(0x1ba)]=_0x548a2d(0x828),_0x328efe['querySelectorAll'](_0x548a2d(0x63d))[_0x548a2d(0x1dc)](_0x7a8d9b=>{const _0x142d0b=_0x548a2d;_0x7a8d9b[_0x142d0b(0x3e4)][_0x142d0b(0x85b)]=_0x142d0b(0x13f);});else{if(_0x548a2d(0x6e7)!==_0x548a2d(0x6e7)){const _0x5b52e7=_0x2ae8e2[_0x548a2d(0x180)](_0x367a05);_0x5bf591['isArray'](_0x5b52e7)?_0xf6edc8=[..._0x359140,..._0x5b52e7]:_0xc3ee7f=_0x42e4e2;}else _0x328efe[_0x548a2d(0x3e4)][_0x548a2d(0x16b)]='',_0x328efe[_0x548a2d(0x3e4)]['color']='',_0x328efe['querySelectorAll']('.widget-info\x20>\x20div')[_0x548a2d(0x1dc)](_0x397f1f=>{const _0x2bfe35=_0x548a2d;_0x397f1f[_0x2bfe35(0x3e4)][_0x2bfe35(0x85b)]='';});}}const _0x46fa96=document[_0x57ab4d(0x473)](_0x57ab4d(0x2ed)),_0x3e9a05=document[_0x57ab4d(0x473)](_0x57ab4d(0xe7d));_0x46fa96[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x53fa51=_0x57ab4d;_0x53fa51(0x87c)===_0x53fa51(0x681)?_0x292db1[_0x53fa51(0x214)](_0x3c46a9[_0x53fa51(0x4fe)]('blob')['then'](_0x2aaaf8=>_0x12a38c[_0x53fa51(0x996)]=new _0x5bf8f1([_0x2aaaf8],_0x590589[_0x53fa51(0xe79)]))):(_0x41fb97(),_0xffff1f(_0x53fa51(0x208),_0x53fa51(0xbd6)));}),_0x3e9a05['addEventListener'](_0x57ab4d(0x493),()=>{const _0x2b6756=_0x57ab4d;_0x34a3d4(),_0xffff1f(_0x2b6756(0xb20),_0x2b6756(0xbd6));}),document[_0x57ab4d(0x473)](_0x57ab4d(0x9c))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x4e2967=_0x57ab4d;_0x4e2967(0x5a1)!==_0x4e2967(0x5a1)?(_0x41acdf[_0x4e2967(0x863)](_0x4e2967(0x8c3)),_0x1b2459(),_0x8341a5(_0x4e2967(0xf8))):_0xffff1f('home',_0x4e2967(0xb20));}),document[_0x57ab4d(0x473)]('back-to-meeting-list')['addEventListener'](_0x57ab4d(0x493),()=>{const _0x596aee=_0x57ab4d;if(_0x423d88)clearInterval(_0x423d88);_0x423d88=null,_0xa7652b[_0x596aee(0xb1e)]=[],_0xa7652b[_0x596aee(0xbfa)]=null,document[_0x596aee(0x473)](_0x596aee(0x409))['style']['display']=_0x596aee(0x4a6),_0xa7652b[_0x596aee(0xd5b)]=null,_0x2e0417(),_0xffff1f(_0x596aee(0xb20),_0x596aee(0x534));});const _0x65ec14=document[_0x57ab4d(0x473)](_0x57ab4d(0xd28)),_0x1d7a33=document[_0x57ab4d(0x473)](_0x57ab4d(0xda5));_0x1d7a33[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x173d55=_0x57ab4d;if('tPCNd'!==_0x173d55(0x6dd)){const _0x5d8c1=new _0x1b73f0(_0x4f1a1f[_0x173d55(0xb9f)])[_0x173d55(0x9e2)](_0x173d55(0xbbe));if(_0x5c195f[_0x173d55(0x45c)]===_0x173d55(0x215))return'['+_0x5d8c1+']\x20[主播\x20'+_0x40962c['speaker']+_0x173d55(0x7ec)+_0x30a78b[_0x173d55(0xb17)];if(_0x42a033[_0x173d55(0x45c)]===_0x173d55(0xc85))return'['+_0x5d8c1+']\x20[弹幕\x20'+_0x58e63d[_0x173d55(0xea1)]+_0x173d55(0x7ec)+(_0x52a424['comment']||_0x19d97b[_0x173d55(0xb17)]);if(_0x4f57be[_0x173d55(0x45c)]==='dm_reply')return'['+_0x5d8c1+_0x173d55(0x2cf)+_0x5123bc['from']+_0x173d55(0x1bc)+_0x145654['to']+_0x173d55(0x7ec)+_0x38e32d[_0x173d55(0xb17)];return'['+_0x5d8c1+']\x20[系统事件]:\x20'+_0x295663['stringify'](_0x597abe);}else{const _0x2a2d37=_0x65ec14[_0x173d55(0x2d4)][_0x173d55(0x8eb)]();_0x2a2d37&&(_0x5bae04(_0x2a2d37),_0x65ec14[_0x173d55(0x2d4)]='',setTimeout(_0x4821dd,0x64));}});function _0xf7696b(_0x53cd77,_0x534369){const _0x35158e=_0x57ab4d,_0x40bbf1=document[_0x35158e(0x473)](_0x35158e(0x40e)),_0x5c111c=_0xa7652b[_0x35158e(0x2bd)][_0x35158e(0x394)](_0x5a78ce=>_0x5a78ce['id']===_0x534369['id']);if(!_0x5c111c){console[_0x35158e(0xc95)](_0x35158e(0x178),_0x534369['id']);return;}const _0x247c3f=_0x40bbf1['src']['includes'](_0x5c111c[_0x35158e(0x5c4)])&&!_0x40bbf1['paused'];_0x247c3f?_0x40bbf1[_0x35158e(0xb57)]():(_0x5dbdc5={'title':_0x5c111c[_0x35158e(0xb6d)],'artist':_0x5c111c[_0x35158e(0x6e3)],'cover':_0x5c111c[_0x35158e(0x4f6)]||(_0x5c111c[_0x35158e(0x4f9)]?_0x35158e(0x55f)+_0x5c111c[_0x35158e(0x4f9)]:_0x96c08e),'isFromLibrary':!![]},_0x40bbf1[_0x35158e(0x706)]=_0x5c111c[_0x35158e(0x5c4)],_0x40bbf1[_0x35158e(0x50a)](),_0xa7652b[_0x35158e(0xd5d)]=_0xa7652b[_0x35158e(0x2bd)][_0x35158e(0x6f6)](_0x7d1fc2=>_0x7d1fc2['id']===_0x534369['id']),_0x6e7ece());}const _0x2cc07f=document[_0x57ab4d(0x473)](_0x57ab4d(0x86e));async function _0x510a2b(_0x7c3ede){const _0x4634f7=_0x57ab4d;if(_0x4634f7(0x617)!==_0x4634f7(0x709)){if(!_0x7c3ede||!_0x7c3ede['startsWith']('http'))return![];return new Promise(_0x552f04=>{const _0x3e666a=_0x4634f7,_0x1972d3=document[_0x3e666a(0x7a9)]('audio');_0x1972d3['src']=_0x7c3ede;const _0x33daf3=setTimeout(()=>{_0x2a7913(),_0x552f04(![]);},0xbb8),_0x2a7913=()=>{const _0x3abc81=_0x3e666a;clearTimeout(_0x33daf3),_0x1972d3[_0x3abc81(0x50e)](_0x3abc81(0x442),_0x2b1680),_0x1972d3[_0x3abc81(0x50e)](_0x3abc81(0xc95),_0x39260e),_0x1972d3[_0x3abc81(0x706)]='',_0x1972d3[_0x3abc81(0x702)]();},_0x2b1680=()=>{_0x2a7913(),_0x552f04(!![]);},_0x39260e=()=>{_0x2a7913(),_0x552f04(![]);};_0x1972d3[_0x3e666a(0xc04)]('canplaythrough',_0x2b1680),_0x1972d3[_0x3e666a(0xc04)](_0x3e666a(0xc95),_0x39260e);});}else{if(_0x5d6c29?.['type']===_0x4634f7(0x722))_0x1fcbf2=_0x57df9a(_0x2584aa[_0x4634f7(0x584)][0x0]);else _0x4f8f51?.[_0x4634f7(0x45c)]===_0x4634f7(0x4b5)&&_0x29c32a&&(_0x1cfc51=_0x1c26fe(_0x4d416a));_0x45e03e=_0x19caf9?.[_0x4634f7(0x98f)]||_0x3b97d4,_0x10ff24=_0x1aaac0?.['avatarFrameUrl']||'';}}async function _0x2576ae(_0x3f44aa,_0x4d5f9e){const _0x17ca59=_0x57ab4d,_0x7f58c7=[_0x17ca59(0x552),_0x17ca59(0x52a)];for(const _0x48f392 of _0x7f58c7){if(_0x17ca59(0x7dd)===_0x17ca59(0x535))_0x348609(_0x50d7ed,_0x367dfe,!![]);else try{if(_0x17ca59(0x561)!==_0x17ca59(0x561))_0x153a5a(_0x3be32a[_0x17ca59(0x4fd)]);else{const _0x2bece4='https://api.vkeys.cn/v2/music/'+_0x48f392+'?word='+encodeURIComponent(_0x3f44aa)+'-'+encodeURIComponent(_0x4d5f9e),_0x5b014d=await fetch(_0x2bece4),_0x2538d9=await _0x5b014d[_0x17ca59(0x102)]();if(_0x2538d9[_0x17ca59(0xb26)]!==0xc8||!_0x2538d9[_0x17ca59(0x173)]||_0x2538d9[_0x17ca59(0x173)][_0x17ca59(0x893)]===0x0)continue;const _0x564fe2=_0x2538d9[_0x17ca59(0x173)][_0x17ca59(0x1de)](0x0,0x5);for(const _0xc206e9 of _0x564fe2){const _0x583e62='https://api.vkeys.cn/v2/music/'+_0x48f392+_0x17ca59(0xc52)+_0xc206e9['id'],_0x16ea74=await fetch(_0x583e62),_0x2602d2=await _0x16ea74[_0x17ca59(0x102)](),_0x19682f=_0x2602d2['data']?.['url'];if(await _0x510a2b(_0x19682f))return{'url':_0x19682f,'cover':_0xc206e9['cover'],'source':_0x48f392};}}}catch(_0x594109){if(_0x17ca59(0x5ce)!==_0x17ca59(0x3f5))console['error']('Error\x20fetching\x20from\x20'+_0x48f392+':',_0x594109);else{const _0x219d07=_0x25dfae[_0x17ca59(0x473)](_0x17ca59(0xa14)),_0x1ef0cf=_0x219d07[_0x17ca59(0xe54)](_0x17ca59(0xe60)),_0x288c95=_0x2c6302[_0x17ca59(0x373)](_0x17ca59(0x3ae));if(_0x1ef0cf[_0x17ca59(0x893)]===0x0)_0x288c95[_0x17ca59(0x226)]=_0x17ca59(0x94a);else _0x1ef0cf[_0x17ca59(0x893)]>0x2?_0x288c95[_0x17ca59(0x226)]=_0x17ca59(0xe5a)+_0x1ef0cf[_0x17ca59(0x893)]+'\x20项':_0x288c95[_0x17ca59(0x226)]=_0x2d0795[_0x17ca59(0x90a)](_0x1ef0cf)[_0x17ca59(0x17f)](_0x9eb74a=>_0x9eb74a['parentElement'][_0x17ca59(0x226)][_0x17ca59(0x8eb)]())[_0x17ca59(0x332)]('、');}}}return{'url':null,'cover':null,'source':null};}function _0x32d61c(){const _0x28a7b4=_0x57ab4d;if(_0x28a7b4(0x3b9)===_0x28a7b4(0x613))_0xf0304f['livestreamReplays'][_0x1efe03]&&_0x391579[_0x28a7b4(0xa25)][_0x400de7][_0x1f76ed]&&(_0xbdcdb4[_0x28a7b4(0xa25)][_0x2efc6e][_0x28a7b4(0x197)](_0x2e8b3c,0x1),_0x4e1652(),_0x503f4e(_0x4508db),_0x3ac660(_0x28a7b4(0xa71)));else{const _0x9d243c=document[_0x28a7b4(0x473)](_0x28a7b4(0x4dc)),_0x30600d=document['documentElement'],_0x32ee6a=document[_0x28a7b4(0x473)](_0x28a7b4(0x103));if(!_0x9d243c||!_0x32ee6a)return;const _0x3145d7=localStorage['getItem'](_0x28a7b4(0x7b0))||'1';_0x30600d[_0x28a7b4(0x3e4)]['setProperty']('--desktop-item-scale',_0x3145d7),_0x9d243c[_0x28a7b4(0x2d4)]=_0x3145d7,_0x9d243c[_0x28a7b4(0xc04)](_0x28a7b4(0x1bf),()=>{const _0x34a1cf=_0x28a7b4,_0x1c457b=_0x9d243c[_0x34a1cf(0x2d4)];_0x30600d[_0x34a1cf(0x3e4)][_0x34a1cf(0xd2c)](_0x34a1cf(0xdac),_0x1c457b),localStorage[_0x34a1cf(0x29d)]('uiScale',_0x1c457b);}),_0x32ee6a[_0x28a7b4(0xc04)](_0x28a7b4(0x493),()=>{const _0x889575=_0x28a7b4,_0x1e56c2='1';_0x9d243c['value']=_0x1e56c2,_0x30600d[_0x889575(0x3e4)]['setProperty'](_0x889575(0xdac),_0x1e56c2),localStorage['setItem'](_0x889575(0x7b0),_0x1e56c2);});}}function _0x46ea95(_0x427991){const _0xc5de3c=_0x57ab4d;try{const _0x1a1ba7=JSON[_0xc5de3c(0x180)](localStorage[_0xc5de3c(0xb34)](_0xc5de3c(0xb19))||'{}'),_0xda39d={..._0x1a1ba7,..._0x427991};localStorage[_0xc5de3c(0x29d)](_0xc5de3c(0xb19),JSON[_0xc5de3c(0xaf6)](_0xda39d));}catch(_0x48de2d){_0xc5de3c(0x64e)!=='UiXBp'?(_0x11a994['log'](_0xc5de3c(0x472)),_0x431c9b[_0xc5de3c(0x1ac)](_0xc5de3c(0x319),{'keyPath':'id'})):console[_0xc5de3c(0xc95)](_0xc5de3c(0xbbd),_0x48de2d);}}async function _0xe11ac4(){const _0x110b60=_0x57ab4d,_0x5aa1b6=document[_0x110b60(0x473)](_0x110b60(0x27c)),_0x47bbd4=document[_0x110b60(0x473)](_0x110b60(0xc3a));try{let _0x5f245b=await _0xf3eefa('widget_badge');if(!_0x5f245b){if(_0x110b60(0xd64)===_0x110b60(0xd64)){const _0x30aed3=JSON['parse'](localStorage[_0x110b60(0xb34)](_0x110b60(0xb19))||'{}');_0x30aed3['image']&&(_0x5f245b=await _0x530eb9(_0x30aed3['image']),await _0x1366c1(_0x110b60(0x91b),_0x5f245b));}else try{_0x505753['setItem'](_0x110b60(0x721),_0x436254[_0x110b60(0xaf6)]({'playlist':_0x43e35b[_0x110b60(0x2bd)],'currentIndex':_0x35f6df[_0x110b60(0xd5d)]}));}catch(_0xe1d1b){_0x139676[_0x110b60(0xc95)]('保存播放器状态失败，真是没用。',_0xe1d1b);}}_0x5f245b?'XgHJr'!==_0x110b60(0xd6a)?_0x9ee47d=_0x29061d[_0x110b60(0x272)](..._0x46130a[_0x110b60(0xb6e)][_0x110b60(0x17f)](_0x3b7b03=>_0x3b7b03[_0x110b60(0xb9f)])):(_0x47bbd4[_0x110b60(0x706)]=URL[_0x110b60(0xc18)](_0x5f245b),_0x47bbd4[_0x110b60(0x3e4)][_0x110b60(0x1df)]=_0x110b60(0x2a3),_0x5aa1b6[_0x110b60(0x3e4)]['border']=_0x110b60(0x4a6)):(_0x47bbd4[_0x110b60(0x3e4)]['display']=_0x110b60(0x4a6),_0x5aa1b6[_0x110b60(0x3e4)][_0x110b60(0x9b4)]='2px\x20dashed\x20var(--border-color)'),_0x5aa1b6[_0x110b60(0x3e4)][_0x110b60(0x1df)]='block';}catch(_0xd322c4){if(_0x110b60(0x728)!==_0x110b60(0xe9c))console[_0x110b60(0xc95)]('加载徽章图片失败',_0xd322c4);else{let _0x1458a0=_0x20b3a3[_0x110b60(0x473)]('style-'+_0x4b6eab['id']);!_0x1458a0&&(_0x1458a0=_0x10049e[_0x110b60(0x7a9)](_0x110b60(0x3e4)),_0x1458a0['id']=_0x110b60(0x361)+_0x2c6602['id'],_0x34f9f0[_0x110b60(0x730)][_0x110b60(0xced)](_0x1458a0));const _0x51d04b=_0x4fe841[_0x110b60(0xe46)],_0x4e4905=_0x51d04b[_0x110b60(0x833)](/\.bubble\.sent/g,_0x110b60(0xd6e)+_0x15114d['id']+_0x110b60(0x698))[_0x110b60(0x833)](/\.bubble\.received/g,_0x110b60(0xd6e)+_0x45014b['id']+'.message.ai');_0x1458a0['innerHTML']=_0x4e4905;}}}async function _0x5e1c8c(){const _0x398679=_0x57ab4d,_0x19fb50=document['getElementById'](_0x398679(0xb70)),_0x537a97=document[_0x398679(0x473)](_0x398679(0xe99)),_0x4e79cb=document[_0x398679(0x473)]('card-widget-2'),_0x320910=document[_0x398679(0x473)](_0x398679(0x170));try{let _0x235207=await _0xf3eefa(_0x398679(0xc13));_0x235207?'BaOVr'!==_0x398679(0x85e)?(_0xd5582b[_0x398679(0x6f0)]='',_0x4ddfa7[_0x398679(0x1dc)](_0x55eeaf=>{const _0x308a1c=_0x398679,_0xa29e99=_0x28cf88['createElement'](_0x308a1c(0x527));_0xa29e99['textContent']=_0x55eeaf,_0xa29e99[_0x308a1c(0xc04)](_0x308a1c(0x493),()=>{const _0x35c620=_0x308a1c;_0x3bac61[_0x35c620(0x2d4)]=_0x55eeaf,_0x487550[_0x35c620(0x970)][_0x35c620(0x702)](_0x35c620(0x348));}),_0x4e9900[_0x308a1c(0xced)](_0xa29e99);}),_0x1a7846[_0x398679(0x970)][_0x398679(0xddb)](_0x398679(0x348)),_0x299184(_0x398679(0xa72)+_0xe960b7[_0x398679(0x893)]+_0x398679(0xe91))):(_0x537a97['src']=URL['createObjectURL'](_0x235207),_0x537a97['style']['display']=_0x398679(0x2a3),_0x19fb50[_0x398679(0x3e4)]['border']=_0x398679(0x4a6),_0x19fb50[_0x398679(0x3e4)][_0x398679(0x391)]=_0x398679(0xad5)):_0x398679(0xdd7)===_0x398679(0xdd7)?(_0x537a97[_0x398679(0x3e4)]['display']=_0x398679(0x4a6),_0x19fb50[_0x398679(0x3e4)][_0x398679(0x9b4)]=_0x398679(0x6fa),_0x19fb50[_0x398679(0x3e4)][_0x398679(0x391)]='rgba(255,255,255,0.2)'):_0x328969['style'][_0x398679(0x16b)]='';_0x19fb50[_0x398679(0x3e4)][_0x398679(0x1df)]=_0x398679(0x2a3);let _0x4fa1a1=await _0xf3eefa(_0x398679(0x563));if(_0x4fa1a1){if('qRpGI'==='qRpGI')_0x320910[_0x398679(0x706)]=URL['createObjectURL'](_0x4fa1a1),_0x320910[_0x398679(0x3e4)][_0x398679(0x1df)]=_0x398679(0x2a3),_0x4e79cb[_0x398679(0x3e4)]['border']=_0x398679(0x4a6),_0x4e79cb[_0x398679(0x3e4)][_0x398679(0x391)]='transparent';else{const _0x5c71ff=_0x11dbbb['getElementById'](_0x398679(0x276)),_0x4e728f=_0x588943[_0x398679(0x473)](_0x398679(0xd48)),_0x3b327a=_0x30f719[_0x398679(0xbfe)][_0x398679(0x394)](_0x5dfdd1=>_0x5dfdd1['id']===_0xf26f8e),_0x46ef79=_0x3b327a?_0x3b327a[_0x398679(0xe79)]:_0x398679(0x4ad),_0x28abdc=_0x3b327a&&_0x3b327a[_0x398679(0x98f)]?_0x3b327a['avatar']:_0x2feacc;_0x5c71ff[_0x398679(0x6f0)]=_0x398679(0xc1f)+_0x46ef79+_0x398679(0x918);const _0x507d3e=_0x5c71ff[_0x398679(0x373)]('#snoop-avatar-img');_0x507d3e&&(_0x507d3e['src']=_0x28abdc);_0x4e728f[_0x398679(0x6f0)]='';const _0x17c0a0=_0x5c71ff['querySelector']('.snoop-main-grid'),_0x2ae55c=[{'id':'whispers','name':'聊天','svg':'<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>'},{'id':'abyss','name':_0x398679(0x2c6),'svg':_0x398679(0x237)},{'id':'gallery','name':'相册','svg':_0x398679(0x275)},{'id':_0x398679(0xe18),'name':'总结','svg':'<path\x20d=\x22M14\x202H6a2\x202\x200\x200\x200-2\x202v16a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2V8z\x22></path><polyline\x20points=\x2214\x202\x2014\x208\x2020\x208\x22></polyline><line\x20x1=\x2216\x22\x20y1=\x2213\x22\x20x2=\x228\x22\x20y2=\x2213\x22></line><line\x20x1=\x2216\x22\x20y1=\x2217\x22\x20x2=\x228\x22\x20y2=\x2217\x22></line>'},{'id':_0x398679(0x42b),'name':_0x398679(0xde3),'svg':_0x398679(0x364)},{'id':_0x398679(0xae3),'name':'外卖','svg':_0x398679(0x431)},{'id':_0x398679(0x65c),'name':'购物','svg':_0x398679(0x18b)},{'id':_0x398679(0x8d0),'name':'足迹','svg':_0x398679(0x593)}];_0x2ae55c[_0x398679(0x1dc)](_0x404e8b=>{const _0x5ab090=_0x398679,_0x95b331=_0x3bbc22[_0x5ab090(0x7a9)]('div');_0x95b331[_0x5ab090(0xd04)]=_0x5ab090(0xc66),_0x95b331[_0x5ab090(0x6f0)]=_0x5ab090(0xc7b)+_0x404e8b['svg']+_0x5ab090(0xb2e)+_0x404e8b['name']+_0x5ab090(0xc56),_0x95b331[_0x5ab090(0xc04)](_0x5ab090(0x493),()=>_0x227471(_0x404e8b['id'],_0x404e8b[_0x5ab090(0xe79)])),_0x17c0a0[_0x5ab090(0xced)](_0x95b331);});}}else _0x320910[_0x398679(0x3e4)]['display']='none',_0x4e79cb[_0x398679(0x3e4)]['border']=_0x398679(0x6fa),_0x4e79cb[_0x398679(0x3e4)]['background']=_0x398679(0xb7f);_0x4e79cb[_0x398679(0x3e4)][_0x398679(0x1df)]=_0x398679(0x2a3);}catch(_0x230b19){console[_0x398679(0xc95)](_0x398679(0xca9),_0x230b19);}}async function _0x5e1c8c(){const _0x1848e1=_0x57ab4d,_0x4fa0e5=document['getElementById']('card-widget'),_0x580a43=document[_0x1848e1(0x473)](_0x1848e1(0xe99));try{if(_0x1848e1(0xbaf)!==_0x1848e1(0xbaf)){const _0x1168a4=_0x4dd500[_0x1848e1(0x8eb)]();if(!_0x1168a4||!_0x20737a['activeDiaryCharacterId'])return;let _0x328f2f=_0x5144f8[_0x1848e1(0x65b)][_0x1848e1(0x394)](_0xb55061=>_0xb55061[_0x1848e1(0x3b1)]===_0x94ee0[_0x1848e1(0xf7)]);!_0x328f2f&&(_0x328f2f={'characterId':_0x1a1583[_0x1848e1(0xf7)],'entries':[]},_0x42eb1d[_0x1848e1(0x65b)][_0x1848e1(0x214)](_0x328f2f));_0x328f2f['entries'][_0x1848e1(0x214)]({'timestamp':_0x2a3c01['now'](),'author':_0x1848e1(0xea1),'content':_0x1168a4}),_0x25798c();const _0x4755cd=_0x328f2f[_0x1848e1(0x420)]['length'];_0x11b2d2[_0x1848e1(0x362)]=_0x14b2e8['ceil'](_0x4755cd/0x2)-0x1,_0x5b0c97();}else{let _0x46e19c=await _0xf3eefa('widget_card');if(!_0x46e19c){if(_0x1848e1(0xd2d)===_0x1848e1(0xd2d)){const _0x5de0c=JSON[_0x1848e1(0x180)](localStorage[_0x1848e1(0xb34)](_0x1848e1(0x21a))||'{}');if(_0x5de0c[_0x1848e1(0x72d)]){if('leZUi'===_0x1848e1(0xe01)){const _0x19c01e=_0x542f5a[_0x1848e1(0xaba)]?_0x2330db(_0x15a75d[_0x1848e1(0xb17)])['trim']()['replace'](/\n+/g,'\x20'):_0x35c910(_0x3441d3[_0x1848e1(0xb17)])['trim']();if(_0x19c01e)_0x3bf38f['push'](_0xd1c735+'\x20['+_0x4fb4c4+_0x1848e1(0x4f7)+_0x541758(_0x5ef2a9)+']\x20'+_0x19c01e);}else console[_0x1848e1(0x6e4)](_0x1848e1(0xe63)),_0x46e19c=await _0x530eb9(_0x5de0c[_0x1848e1(0x72d)]),await _0x1366c1(_0x1848e1(0xc13),_0x46e19c);}}else _0x10a093['error'](_0x1848e1(0x2a1),_0x4b57ce);}if(_0x46e19c)_0x580a43['src']=URL[_0x1848e1(0xc18)](_0x46e19c),_0x4fa0e5[_0x1848e1(0x3e4)][_0x1848e1(0x1df)]='block';else{if(_0x1848e1(0xca2)!==_0x1848e1(0xca2)){const _0x23b5cd=(_0x2d7620-_0x3b1d7d)/(0x3e8*0x3c);_0x3c6d12+=_0x1848e1(0xc84);}else _0x4fa0e5[_0x1848e1(0x3e4)][_0x1848e1(0x1df)]=_0x1848e1(0x4a6);}}}catch(_0x5e2f7a){console[_0x1848e1(0xc95)](_0x1848e1(0xca9),_0x5e2f7a);}try{if(_0x1848e1(0x78d)===_0x1848e1(0x78d)){let _0x33d0db=await _0xf3eefa(_0x1848e1(0x563));const _0x98b260=document['getElementById'](_0x1848e1(0x170)),_0x467873=document[_0x1848e1(0x473)]('card-widget-2');_0x33d0db?(_0x98b260[_0x1848e1(0x706)]=URL['createObjectURL'](_0x33d0db),_0x467873['style'][_0x1848e1(0x1df)]=_0x1848e1(0x2a3)):_0x467873[_0x1848e1(0x3e4)][_0x1848e1(0x1df)]='none';}else _0x2c9583=_0x1848e1(0xe84)+_0x70b056+_0x1848e1(0x79c);}catch(_0x32d085){console['error'](_0x1848e1(0xb4c),_0x32d085);}}_0x31ed0f['addEventListener'](_0x57ab4d(0x493),()=>{const _0x21dea0=_0x57ab4d;_0x21dea0(0x5d3)!==_0x21dea0(0x5d3)?_0xfe034e['warn'](_0x21dea0(0xcbc),_0x2236e1):(_0x50e4fb(),_0xffff1f(_0x21dea0(0x1cf),'home'));}),document['getElementById']('back-to-home-from-user-list')['addEventListener'](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0xbd6),_0x57ab4d(0x1cf))),document[_0x57ab4d(0x473)](_0x57ab4d(0x3eb))[_0x57ab4d(0xc04)]('click',()=>_0x13e53d()),document[_0x57ab4d(0x473)]('back-to-user-list-from-edit')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x4d0625=_0x57ab4d;_0x50e4fb(),_0xffff1f(_0x4d0625(0x1cf),'userProfile');}),document['getElementById'](_0x57ab4d(0x20f))['addEventListener'](_0x57ab4d(0x493),_0x505658),document['getElementById'](_0x57ab4d(0x95b))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x1bb867),document['getElementById']('set-active-user-button')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x1b130f=_0x57ab4d;if(_0x1b130f(0x950)===_0x1b130f(0xb6a)){const _0x55acbd=_0x1b36da[_0x1b130f(0x473)](_0x1b130f(0x2c7));if(!_0x55acbd)return;const _0x14128d=_0xcd9b57[_0x1b130f(0xb34)]('themeLightness')||'80';_0xc8c560[_0x1b130f(0xb7c)][_0x1b130f(0x3e4)][_0x1b130f(0xd2c)](_0x1b130f(0x5f0),_0x14128d+'%'),_0x55acbd['value']=_0x14128d,_0x55acbd[_0x1b130f(0xc04)](_0x1b130f(0x1bf),()=>{const _0xfc582c=_0x1b130f,_0x2e4741=_0x55acbd['value'];_0x4d6e2b['documentElement']['style'][_0xfc582c(0xd2c)](_0xfc582c(0x5f0),_0x2e4741+'%'),_0x29d222[_0xfc582c(0x29d)]('themeLightness',_0x2e4741),_0x36bdd6();});}else{const _0xa016eb=document['getElementById'](_0x1b130f(0xbd2))['value'];_0xa016eb&&(_0xa7652b[_0x1b130f(0xa4f)]=_0xa016eb,_0x2e0417(),_0x198030('已设为当前用户！'),_0x50e4fb(),document['getElementById']('set-active-user-button')[_0x1b130f(0x3e4)][_0x1b130f(0x1df)]=_0x1b130f(0x4a6));}});function _0x2e35cc(_0xd9b572){const _0x5f00e7=_0x57ab4d,_0x17688f=_0xa7652b[_0x5f00e7(0x4ec)]['find'](_0x193957=>_0x193957['id']===_0xd9b572),_0x315c72=_0x17688f?.[_0x5f00e7(0x8f5)];let _0x482fa4=_0xa7652b[_0x5f00e7(0x932)][_0x5f00e7(0x394)](_0x2d8821=>_0x2d8821['id']===_0x315c72);return!_0x482fa4&&(_0x482fa4=_0xa7652b['userProfiles'][_0x5f00e7(0x394)](_0x5e7357=>_0x5e7357['id']===_0xa7652b['activeUserProfileId'])||_0xa7652b[_0x5f00e7(0x932)][0x0]),_0x482fa4||{'name':'用户','avatar':_0x395f0f,'persona':''};}function _0x11139b(_0x194b87){const _0x2948a5=_0x57ab4d;if(_0x2948a5(0x35e)==='KGKTZ'){const _0x58e7fe=_0x30f6dc['transaction'](_0x40f6bf,_0x2948a5(0xe51)),_0x5b5f5b=_0x58e7fe[_0x2948a5(0xb9d)](_0x231df1),_0x1d8967=_0x5b5f5b[_0x2948a5(0x470)](_0x58cbe8);_0x1d8967[_0x2948a5(0x7ad)]=()=>_0xc0b653(_0x1d8967[_0x2948a5(0xdc7)]?_0x1d8967['result'][_0x2948a5(0x5c1)]:null),_0x1d8967[_0x2948a5(0x835)]=()=>_0x49574b(_0x1d8967[_0x2948a5(0xc95)]);}else{const _0x553661=document[_0x2948a5(0x473)](_0x194b87);_0x553661[_0x2948a5(0x6f0)]='',_0xa7652b[_0x2948a5(0x932)]['forEach'](_0x338c25=>{const _0x4a3c25=_0x2948a5,_0x1a8d64=document[_0x4a3c25(0x7a9)](_0x4a3c25(0xc37));_0x1a8d64[_0x4a3c25(0x2d4)]=_0x338c25['id'],_0x1a8d64[_0x4a3c25(0x226)]=_0x338c25[_0x4a3c25(0xe79)],_0x553661['appendChild'](_0x1a8d64);});}}function _0xa37c80(_0x219005){const _0x1bc35e=_0x57ab4d;if(_0x1bc35e(0xc2b)!==_0x1bc35e(0x984)){const _0x27b7ed=_0x1238ea(_0x219005),_0x5b6742=document[_0x1bc35e(0x473)](_0x1bc35e(0x326));_0x5b6742[_0x1bc35e(0x3e4)][_0x1bc35e(0x16b)]='';let _0x6fbf17=document[_0x1bc35e(0x473)](_0x1bc35e(0x361)+_0x219005);if(_0x6fbf17)_0x6fbf17[_0x1bc35e(0x6f0)]='';if(!_0x27b7ed)return;_0x27b7ed['chatWallpaper']&&(_0x5b6742[_0x1bc35e(0x3e4)][_0x1bc35e(0x16b)]=_0x1bc35e(0x6cb)+_0x27b7ed[_0x1bc35e(0x5ab)]+'\x27)',_0x5b6742[_0x1bc35e(0x3e4)]['backgroundSize']=_0x1bc35e(0xdd5),_0x5b6742[_0x1bc35e(0x3e4)]['backgroundPosition']=_0x1bc35e(0x88f));if(_0x27b7ed[_0x1bc35e(0xe46)]){if(_0x1bc35e(0x1c2)===_0x1bc35e(0x1c2)){let _0x3997ca=document[_0x1bc35e(0x473)](_0x1bc35e(0x361)+_0x27b7ed['id']);!_0x3997ca&&(_0x3997ca=document[_0x1bc35e(0x7a9)](_0x1bc35e(0x3e4)),_0x3997ca['id']=_0x1bc35e(0x361)+_0x27b7ed['id'],document[_0x1bc35e(0x730)][_0x1bc35e(0xced)](_0x3997ca));const _0x3bf90b=_0x27b7ed[_0x1bc35e(0xe46)],_0x50fcf6=_0x3bf90b[_0x1bc35e(0x833)](/\.bubble\.sent/g,'.bubble-'+_0x27b7ed['id']+_0x1bc35e(0x698))['replace'](/\.bubble\.received/g,_0x1bc35e(0xd6e)+_0x27b7ed['id']+_0x1bc35e(0x491));_0x3997ca[_0x1bc35e(0x6f0)]=_0x50fcf6;}else return{'type':'music','songName':_0x471787[0x1]['trim'](),'artist':_0x4c0b30[0x2]['trim']()};}}else _0x557785();}function _0x3d7f85(){const _0x375fff=_0x57ab4d,_0x41add1=document[_0x375fff(0x473)](_0x375fff(0x17e));_0x41add1[_0x375fff(0x6f0)]='';const _0x217124=_0x2d1b56=>{const _0x437552=_0x375fff;_0xa7652b[_0x437552(0x831)][_0x2d1b56]=null;if(_0x2d1b56===_0x437552(0x72d))_0xa7652b[_0x437552(0x831)][_0x437552(0x70f)]=null;_0x3d7f85();},_0x4f2888=_0xa7652b['pendingPostAttachments']['imageId'],_0x31ba9a=_0xa7652b[_0x375fff(0x831)][_0x375fff(0x784)];if(_0x4f2888){const _0x1e059d=document['createElement']('div');_0x1e059d[_0x375fff(0xd04)]=_0x375fff(0x7c9),_0x1e059d[_0x375fff(0x6f0)]=_0x375fff(0xad9),_0x1e059d[_0x375fff(0x373)]('.remove-attachment-btn')['onclick']=()=>_0x217124(_0x375fff(0x72d)),_0x41add1[_0x375fff(0xced)](_0x1e059d),_0xf3eefa(_0x4f2888)['then'](_0x876557=>{const _0x4e7cc3=_0x375fff,_0x1efe38=document[_0x4e7cc3(0x473)](_0x4e7cc3(0x453));_0x1efe38&&_0x876557&&(_0x1efe38[_0x4e7cc3(0x706)]=URL[_0x4e7cc3(0xc18)](_0x876557));});}if(_0x31ba9a){const _0x3308ea=document[_0x375fff(0x7a9)]('div');_0x3308ea[_0x375fff(0xd04)]=_0x375fff(0x7c9),_0x3308ea[_0x375fff(0x6f0)]=_0x375fff(0x7d4)+(_0x31ba9a[_0x375fff(0x4f6)]||_0x96c08e)+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>'+_0x31ba9a[_0x375fff(0xb6d)]+_0x375fff(0x3cb)+_0x31ba9a['artist']+_0x375fff(0xa70),_0x3308ea[_0x375fff(0x373)](_0x375fff(0x6c6))[_0x375fff(0x4e9)]=()=>_0x217124(_0x375fff(0x784)),_0x41add1[_0x375fff(0xced)](_0x3308ea);}}async function _0x167d98(_0x189c09){const _0x59bbca=_0x57ab4d;if(_0x59bbca(0xb2b)===_0x59bbca(0xbdf)){_0x1d8930['classList']['add'](_0x59bbca(0x99f));const _0x54180d=_0x403b11[_0x59bbca(0xab8)]===_0x59bbca(0xea1)?_0x3f4ea4(_0x58fa69['activeChatId']):_0x22628e(_0x413337[_0x59bbca(0xb42)]),_0x4c4429=_0x1798d7['recipientId']===_0xf18a1a(_0x589b23[_0x59bbca(0xd5b)])['id']?_0x24102b(_0xa0ddf9['activeChatId']):_0x1a6a24(_0x4fde5d[_0x59bbca(0x827)]),_0x371cff=_0x54180d?.[_0x59bbca(0xe79)]?_0x54180d['name']+_0x59bbca(0x8d6):'转账',_0x27958c=_0x4c4429?.['name']?_0x59bbca(0x4bd)+_0x4c4429['name']:'转账';_0x558ff9[_0x59bbca(0x6f0)]+=_0x59bbca(0xc92)+_0x371cff+_0x59bbca(0x782)+_0x4af9c0[_0x59bbca(0xd1d)][_0x59bbca(0x684)](0x2)+_0x59bbca(0x92)+_0x27958c+_0x59bbca(0xd7c);}else{const _0x35c0bc=_0xa7652b['friendCircles'][_0x59bbca(0x394)](_0x354e46=>_0x354e46['id']===_0xa7652b[_0x59bbca(0x4fd)]);if(!_0x35c0bc)return;_0x27a15c(!![],_0x59bbca(0x6dc)),_0xa7652b[_0x59bbca(0x89f)]=!![];try{const _0x109ca8=_0x35c0bc[_0x59bbca(0x84a)][_0x59bbca(0x17f)](_0x578663=>_0x1238ea(_0x578663))[_0x59bbca(0x1a9)](Boolean),_0x44c4c6=_0x4649bb(),_0xa5e06f=(await Promise['all'](_0x109ca8[_0x59bbca(0x17f)](async _0x31424f=>{const _0x4257b9=_0x59bbca,{omniText:_0x31845e}=_0x32429c(_0x31424f['id'],null),_0x5e8e39=_0x322f26(_0x31424f['id']),_0x136b1f=await _0xa63707(_0x31424f['id']),_0x142807=_0x3f0d67(_0x31424f['id']),_0x45e10c=_0x31424f[_0x4257b9(0x277)]&&_0x31424f[_0x4257b9(0x277)]['length']>0x0?_0x4257b9(0xa45)+_0x31424f[_0x4257b9(0xe79)]+'的个人专属世界观设定\x0a'+_0x31424f['linkedWorldBookIds'][_0x4257b9(0x17f)](_0x4586df=>_0xa7652b[_0x4257b9(0x52d)][_0x4257b9(0x394)](_0x4e9f42=>_0x4e9f42['id']===_0x4586df))[_0x4257b9(0x1a9)](Boolean)[_0x4257b9(0x17f)](_0x3f9b09=>_0x4257b9(0x937)+_0x3f9b09['name']+'\x0a'+_0x3f9b09[_0x4257b9(0xb17)])[_0x4257b9(0x332)](''):'';return _0x4257b9(0x22e)+_0x31424f[_0x4257b9(0xe79)]+',\x20ID:\x20'+_0x31424f['id']+'\x0a\x20\x20人设:\x20'+_0x31424f['persona']+_0x4257b9(0x500)+_0x31845e+'\x0a'+_0x5e8e39+'\x0a'+_0x136b1f+'\x0a'+_0x142807+'\x0a'+_0x45e10c;})))[_0x59bbca(0x332)]('\x0a\x0a'),_0xeabdce=_0x29849a(_0x189c09['authorId'])||{'name':'用户'},_0x5e2849=_0xeabdce[_0x59bbca(0x171)]?_0x59bbca(0x3bd)+_0xeabdce['name']+'\x0a-\x20人设:\x20'+_0xeabdce[_0x59bbca(0x171)]+'\x0a':'';let _0x18b4e7=null;if(_0x189c09[_0x59bbca(0x72d)])_0x18b4e7=_0x189c09['image'];else{if(_0x189c09[_0x59bbca(0x70f)])try{if(_0x59bbca(0x1da)===_0x59bbca(0xbd0))_0x755c60+='\x20\x20具体对话如下：\x0a',_0x4395b2[_0x59bbca(0x6e4)][_0x59bbca(0x1dc)](_0x3f731c=>{const _0x48bca4=_0x59bbca,_0x1bb3a8=_0x3f731c[_0x48bca4(0x39d)]==='character'?'你':_0x13d267[_0x48bca4(0xfe)];_0x368959+=_0x48bca4(0x94e)+_0x1bb3a8+':\x20'+_0x3f731c['content']+'\x20\x0a';});else{const _0x5527b6=await _0xf3eefa(_0x189c09[_0x59bbca(0x70f)]);_0x5527b6&&(_0x18b4e7=await _0xbb85d0(_0x5527b6));}}catch(_0x30529e){'QdTFM'===_0x59bbca(0x418)?console[_0x59bbca(0xc95)](_0x59bbca(0x35a),_0x30529e):_0x15ee4e=_0x2b4726[0x1];}}let _0x283534=_0xeabdce[_0x59bbca(0xe79)]+_0x59bbca(0x143)+_0x189c09['content']+'”';_0x18b4e7&&(_0x283534+=_0x59bbca(0x761));_0x189c09[_0x59bbca(0x45c)]===_0x59bbca(0x784)&&(_0x283534+='\x20[并分享了歌曲:\x20'+_0x189c09[_0x59bbca(0xb6d)]+_0x59bbca(0x6d6)+_0x189c09[_0x59bbca(0x6e3)]+']');const _0x5d09d6=_0x59bbca(0xd05)+_0xa5e06f+'\x0a\x0a'+_0x5e2849+_0x59bbca(0x8c6)+_0x44c4c6+_0x59bbca(0xca)+_0x283534+_0x59bbca(0xd88),_0x384eb0=[{'role':_0x59bbca(0xaae),'content':_0x5d09d6}],_0x470cf2={'role':_0x59bbca(0xea1),'content':_0x59bbca(0x387)};_0x18b4e7&&(_0x470cf2[_0x59bbca(0x72d)]=_0x18b4e7);_0x384eb0[_0x59bbca(0x214)](_0x470cf2);const _0x379677=await _0x56b292(_0x384eb0,{'json':!![]}),_0x1c7e05=_0x379677[_0x59bbca(0x41c)](/({[\s\S]*})/);if(!_0x1c7e05)throw new Error('AI未能返回有效的JSON对象。');const _0x3939c4=JSON[_0x59bbca(0x180)](_0x1c7e05[0x1]),_0x3ddc30=_0x35c0bc[_0x59bbca(0xb6e)][_0x59bbca(0x394)](_0x1db2d5=>_0x1db2d5['id']===_0x189c09['id']);_0x3ddc30&&('EdRry'!==_0x59bbca(0x8fb)?_0x59b99f[_0x59bbca(0x970)][_0x59bbca(0x702)](_0x59bbca(0x348)):(_0x3ddc30[_0x59bbca(0x5bf)]=_0x3939c4[_0x59bbca(0x5bf)]||[],_0x3ddc30[_0x59bbca(0x6d9)]=(_0x3939c4[_0x59bbca(0x6d9)]||[])[_0x59bbca(0x17f)]((_0xda0c,_0x555b46)=>({..._0xda0c,'commentId':'c_'+_0x189c09['timestamp']+'_'+_0x555b46})),_0x2e0417(),_0x16a1d4()));}catch(_0x2ac7da){_0x59bbca(0x1d6)!=='nRHPK'?(_0x6151ac['error'](_0x59bbca(0x1e2),_0x1d3d30),_0x53fddc(_0x59bbca(0xdbf)+_0x435440[_0x59bbca(0xe32)])):(console[_0x59bbca(0xc95)](_0x59bbca(0xe5b),_0x2ac7da),_0x198030(_0x59bbca(0x4a1)));}finally{_0x27a15c(![]),_0xa7652b[_0x59bbca(0x89f)]=![];}}}function _0x1d8266(){const _0x1d94ee=_0x57ab4d,_0x11a09f=_0xa7652b[_0x1d94ee(0x175)]['find'](_0x48313e=>_0x48313e['id']===_0xa7652b[_0x1d94ee(0x4fd)]),_0xf10fef=_0x11a09f?.[_0x1d94ee(0x8f5)];let _0x480fd9=_0xa7652b[_0x1d94ee(0x932)][_0x1d94ee(0x394)](_0x56fd1f=>_0x56fd1f['id']===_0xf10fef);if(!_0x480fd9){if('JXDtt'!==_0x1d94ee(0x663)){_0x5c8e8e(_0x1d94ee(0x6c7));return;}else _0x480fd9=_0xa7652b[_0x1d94ee(0x932)]['find'](_0x2ad327=>_0x2ad327['id']===_0xa7652b[_0x1d94ee(0xa4f)]);}!_0x480fd9&&(_0x480fd9=_0xa7652b['userProfiles'][0x0]);if(_0x480fd9){if('OGZna'===_0x1d94ee(0xc67)){const _0x3b09b6=_0x116781[_0x1d94ee(0x52d)][_0x1d94ee(0x394)](_0x1fe0b2=>_0x1fe0b2['id']===_0x5ccc85);if(!_0x3b09b6)return;_0x2a4dc4[_0x1d94ee(0x473)](_0x1d94ee(0xdc6))[_0x1d94ee(0x2d4)]=_0x3b09b6['id'],_0x42d969[_0x1d94ee(0x473)](_0x1d94ee(0x3cd))[_0x1d94ee(0x226)]=_0x1d94ee(0xa21),_0x56836['getElementById'](_0x1d94ee(0x599))[_0x1d94ee(0x2d4)]=_0x3b09b6[_0x1d94ee(0xe79)],_0x287089[_0x1d94ee(0x473)](_0x1d94ee(0xe6c))[_0x1d94ee(0x2d4)]=_0x3b09b6[_0x1d94ee(0xb17)],_0x39a503[_0x1d94ee(0x2d4)]=_0x3b09b6[_0x1d94ee(0x45e)]||_0x1d94ee(0x46b);}else document[_0x1d94ee(0x473)](_0x1d94ee(0x787))[_0x1d94ee(0x706)]=_0x480fd9[_0x1d94ee(0x98f)]||_0x395f0f;}}function _0x475626(_0x159568){const _0x378187=_0x57ab4d;let _0x5a16e2=0x0,_0x59182e=0x0,_0x25b994=0x0;if(_0x159568[_0x378187(0x893)]==0x4){if('KvPGT'===_0x378187(0x495))_0x5a16e2='0x'+_0x159568[0x1]+_0x159568[0x1],_0x59182e='0x'+_0x159568[0x2]+_0x159568[0x2],_0x25b994='0x'+_0x159568[0x3]+_0x159568[0x3];else{const _0x2d5a54=_0x3bc4e9['getElementById'](_0x378187(0x10e));if(!_0x2d5a54)return;_0x2d5a54[_0x378187(0x3e3)]=_0xd47f07[_0x378187(0x5fa)]['forceWhiteClock']||![],_0x2d5a54[_0x378187(0xc04)](_0x378187(0x1c4),()=>{const _0x5a145=_0x378187;_0x533ecf[_0x5a145(0x5fa)][_0x5a145(0xcc3)]=_0x2d5a54['checked'],_0x519279(),_0x3d18c1();});}}else _0x159568['length']==0x7&&(_0x378187(0x570)!==_0x378187(0xabe)?(_0x5a16e2='0x'+_0x159568[0x1]+_0x159568[0x2],_0x59182e='0x'+_0x159568[0x3]+_0x159568[0x4],_0x25b994='0x'+_0x159568[0x5]+_0x159568[0x6]):_0x9688a9[_0x378187(0x214)]({'time':_0x2c67c9,'text':_0x40f873}));_0x5a16e2/=0xff,_0x59182e/=0xff,_0x25b994/=0xff;let _0x1bb143=Math[_0x378187(0x7e9)](_0x5a16e2,_0x59182e,_0x25b994),_0x324803=Math[_0x378187(0x272)](_0x5a16e2,_0x59182e,_0x25b994),_0x547198=_0x324803-_0x1bb143,_0x156be6=0x0,_0x15e45e=0x0,_0x5cc5f3=0x0;if(_0x547198==0x0)_0x156be6=0x0;else{if(_0x324803==_0x5a16e2)_0x156be6=(_0x59182e-_0x25b994)/_0x547198%0x6;else{if(_0x324803==_0x59182e)_0x156be6=(_0x25b994-_0x5a16e2)/_0x547198+0x2;else _0x156be6=(_0x5a16e2-_0x59182e)/_0x547198+0x4;}}_0x156be6=Math[_0x378187(0xe81)](_0x156be6*0x3c);if(_0x156be6<0x0)_0x156be6+=0x168;return _0x5cc5f3=(_0x324803+_0x1bb143)/0x2,_0x15e45e=_0x547198==0x0?0x0:_0x547198/(0x1-Math[_0x378187(0xd5e)](0x2*_0x5cc5f3-0x1)),_0x15e45e=+(_0x15e45e*0x64)[_0x378187(0x684)](0x1),_0x5cc5f3=+(_0x5cc5f3*0x64)[_0x378187(0x684)](0x1),{'h':_0x156be6,'s':_0x15e45e,'l':_0x5cc5f3};}function _0x1f6989(){const _0x1ffdba=_0x57ab4d,_0x22b906=(_0x3ea34d,_0x3b0a10,_0x1327ed)=>{const _0x4758ff=_0x20c5,_0x470ec3=document['getElementById'](_0x3ea34d);if(!_0x470ec3)return;let _0x221fab=null;try{_0x221fab=JSON[_0x4758ff(0x180)](localStorage[_0x4758ff(0xb34)](_0x3b0a10)||'{}');}catch{if(_0x4758ff(0xc78)===_0x4758ff(0xc78))_0x221fab={};else{_0x3777da[_0x4758ff(0x6f0)]=_0x4758ff(0x642);return;}}_0x470ec3[_0x4758ff(0x3e4)][_0x4758ff(0x31d)]=_0x4758ff(0x7ca),_0x470ec3[_0x4758ff(0x3e4)][_0x4758ff(0x5d8)]='',_0x470ec3['style'][_0x4758ff(0x855)]='',_0x470ec3[_0x4758ff(0x3e4)]['right']='',_0x470ec3[_0x4758ff(0x3e4)]['bottom']='',_0x470ec3[_0x4758ff(0x3e4)][_0x4758ff(0x3b7)]='';if(typeof _0x221fab[_0x4758ff(0x5d8)]===_0x4758ff(0x536)&&typeof _0x221fab[_0x4758ff(0x855)]===_0x4758ff(0x536))_0x470ec3['style'][_0x4758ff(0x5d8)]=_0x221fab[_0x4758ff(0x5d8)]+'%',_0x470ec3[_0x4758ff(0x3e4)][_0x4758ff(0x855)]=_0x221fab[_0x4758ff(0x855)]+'%';else{if('psTZN'==='psTZN')for(const _0x1c4d51 in _0x1327ed){if('VhHLI'!=='VhHLI'){const _0x4ddf40=[];for(const _0x489d0d of _0x291171[_0x4758ff(0xd79)](_0x223805)){const _0x223309=_0x489d0d[_0x4758ff(0x52f)]();if(_0x2a7f3a[_0x4758ff(0x691)](_0x842ed8=>_0x223309['startsWith'](_0x842ed8))){const _0x375cca=_0x2c74ed[_0x489d0d];if(typeof _0x375cca===_0x4758ff(0xdab))_0x4ddf40[_0x4758ff(0x214)](_0x375cca);if(_0x1922f8[_0x4758ff(0x8aa)](_0x375cca))_0x375cca['forEach'](_0x4637a6=>{const _0x466ee2=_0x4758ff;if(typeof _0x4637a6==='string')_0x4ddf40[_0x466ee2(0x214)](_0x4637a6);});}}if(_0x4ddf40[_0x4758ff(0x893)])return _0x4ddf40[_0x4758ff(0x40d)](_0x2ea234)[_0x4758ff(0x1de)](0x0,0x9);}else _0x470ec3['style'][_0x1c4d51]=_0x1327ed[_0x1c4d51];}else{_0x5bc9cc(![]),_0x55fef7(_0x4758ff(0x6e8));return;}}};_0x22b906(_0x1ffdba(0x9eb),_0x1ffdba(0x890),{'top':_0x1ffdba(0x426),'left':_0x1ffdba(0x71b),'transform':'translateX(-50%)'}),_0x22b906(_0x1ffdba(0x53f),'appIconPosition_app-wallpaper',{'top':_0x1ffdba(0xaa5),'right':'4%'}),_0x22b906(_0x1ffdba(0xc26),_0x1ffdba(0x622),{'top':'20%','right':_0x1ffdba(0x28e)}),_0x22b906(_0x1ffdba(0xac2),'appIconPosition_app-settings',{'top':'8%','right':'28%'}),_0x22b906(_0x1ffdba(0xd35),_0x1ffdba(0x68b),{'top':'8%','right':'4%'}),_0x22b906('app-music-library',_0x1ffdba(0xa3b),{'top':_0x1ffdba(0x331),'left':'5%'}),_0x22b906('app-diary',_0x1ffdba(0x5fc),{'top':_0x1ffdba(0x8e5),'left':_0x1ffdba(0x1fc)}),_0x22b906(_0x1ffdba(0x894),_0x1ffdba(0x1e7),{'top':_0x1ffdba(0x8e5),'left':'5%'}),_0x22b906(_0x1ffdba(0x89c),_0x1ffdba(0x95c),{'top':_0x1ffdba(0x331),'left':_0x1ffdba(0x1fc)}),_0x22b906('decorative-badge','badgeState',{'top':_0x1ffdba(0x9f6),'right':'5%'}),_0x22b906('card-widget-2',_0x1ffdba(0xa01),{'top':'8%','left':'5%'});const _0x2d913b=document['getElementById']('card-widget');_0x2d913b&&(_0x2d913b[_0x1ffdba(0x3e4)][_0x1ffdba(0x31d)]=_0x1ffdba(0x7ca),_0x2d913b[_0x1ffdba(0x3e4)][_0x1ffdba(0x5d8)]=_0x1ffdba(0x3f1),_0x2d913b[_0x1ffdba(0x3e4)][_0x1ffdba(0x855)]='50%',_0x2d913b[_0x1ffdba(0x3e4)][_0x1ffdba(0x3b7)]='translateX(-50%)',_0x2d913b[_0x1ffdba(0x3e4)]['display']=_0x1ffdba(0x2a3));const _0x1595a3=document['getElementById'](_0x1ffdba(0xc91));_0x1595a3&&(_0x1595a3[_0x1ffdba(0x3e4)][_0x1ffdba(0x31d)]=_0x1ffdba(0x7ca),_0x1595a3['style'][_0x1ffdba(0x5d8)]='35%',_0x1595a3[_0x1ffdba(0x3e4)][_0x1ffdba(0x855)]=_0x1ffdba(0x71b),_0x1595a3[_0x1ffdba(0x3e4)][_0x1ffdba(0x3b7)]=_0x1ffdba(0x547),_0x1595a3[_0x1ffdba(0x3e4)][_0x1ffdba(0x1df)]='inline-block');}function _0x2e3ba3(){const _0x2504af=_0x57ab4d,_0x2e9e08=document['getElementById'](_0x2504af(0x62c));_0x2e9e08[_0x2504af(0x6f0)]='';const _0x4edc6f=document[_0x2504af(0xe54)]('.app-icon');_0x4edc6f[_0x2504af(0x1dc)](_0x4edbb5=>{const _0x5000f9=_0x2504af;if(_0x5000f9(0xb81)===_0x5000f9(0xb81)){const _0x41c82d=_0x4edbb5['id'],_0x377df2=_0x4edbb5['querySelector'](_0x5000f9(0x868))[_0x5000f9(0x226)],_0x2602df=_0x5000f9(0xe7)+_0x41c82d,_0x1aeab8=localStorage[_0x5000f9(0xb34)](_0x2602df),_0x2401a5=document[_0x5000f9(0x7a9)](_0x5000f9(0x527));_0x2401a5['className']=_0x5000f9(0x368),_0x2401a5[_0x5000f9(0x3e4)][_0x5000f9(0x1e1)]='10px\x200',_0x2401a5[_0x5000f9(0x6f0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22preview_'+_0x41c82d+_0x5000f9(0xbdb)+(_0x1aeab8||_0x5000f9(0xd53))+'\x22\x20class=\x22char-avatar\x22\x20style=\x22border-radius:\x2012px;\x20background-color:\x20#eee;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22\x20style=\x22flex-grow:\x201;\x22>'+_0x377df2+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22input_'+_0x41c82d+_0x5000f9(0x9cf)+_0x41c82d+_0x5000f9(0xab9)+_0x2602df+_0x5000f9(0x9f0),_0x2e9e08[_0x5000f9(0xced)](_0x2401a5);const _0x21b31b=document[_0x5000f9(0x473)]('input_'+_0x41c82d);_0x21b31b['addEventListener'](_0x5000f9(0x1c4),async _0x3aa9b1=>{const _0x5572cf=_0x5000f9,_0xf0d86a=_0x3aa9b1[_0x5572cf(0x63c)][_0x5572cf(0xcf5)][0x0];if(!_0xf0d86a)return;try{if(_0x5572cf(0x31b)!==_0x5572cf(0x31b)){if(typeof _0x382566===_0x5572cf(0xdab))return _0x1a56b9;if(typeof _0x56d714==='object'&&_0x152d11!==null)return _0x2846b0[_0x5572cf(0x664)](_0x4240e0)[_0x5572cf(0x332)](_0x5572cf(0x6d6));return'（一条AI试图写入但失败的记录）';}else{const _0x2a2eea=await _0x351f2f(_0xf0d86a);localStorage['setItem'](_0x2602df,_0x2a2eea),document[_0x5572cf(0x473)](_0x5572cf(0xaf7)+_0x41c82d)['src']=_0x2a2eea,_0x57f80b();}}catch(_0x479389){_0x5572cf(0xe95)!=='CTunB'?_0x185330(_0x5572cf(0x857)):_0x198030(_0x5572cf(0xc05)+_0x479389[_0x5572cf(0xe32)]);}});}else _0x5a1e78[_0x5000f9(0x373)]('#diary-action-reroll')[_0x5000f9(0x4e9)]=()=>{_0x50924a(_0xd1a3b1),_0x3c22da();};});}function _0x57f80b(){const _0x28e081=_0x57ab4d;if(_0x28e081(0x2d2)!=='FjMqZ'){const _0xc8e66a=document['querySelectorAll'](_0x28e081(0x499));_0xc8e66a[_0x28e081(0x1dc)](_0x313fc6=>{const _0x3f9a86=_0x28e081,_0x1107af=_0x313fc6['id'],_0x5ca310=_0x3f9a86(0xe7)+_0x1107af,_0x4b6de0=localStorage['getItem'](_0x5ca310),_0x5c7025=_0x313fc6[_0x3f9a86(0x373)](_0x3f9a86(0x3e6));if(_0x4b6de0)_0x5c7025[_0x3f9a86(0x6f0)]=_0x3f9a86(0xaf9)+_0x4b6de0+_0x3f9a86(0x2ee);else{const _0x13ead8=document[_0x3f9a86(0x373)](_0x3f9a86(0xe71)+_0x1107af+_0x3f9a86(0x1f1)+_0x1107af+_0x3f9a86(0x353))?.['innerHTML'];_0x13ead8&&(_0x3f9a86(0x9d0)!==_0x3f9a86(0x9d0)?_0x19e70b(_0x3f9a86(0xa0e)+_0x55958c['message']+_0x3f9a86(0x88b)):_0x5c7025[_0x3f9a86(0x6f0)]=_0x13ead8);}});}else{const _0x23d46a=_0x5ba9a6(_0x562fd3[_0x28e081(0xa49)]())[_0x28e081(0x2c8)](0x2,'0'),_0x42f286=_0x4cd9e4(_0x8dce70[_0x28e081(0x529)]())['padStart'](0x2,'0');_0xf5a8f0['textContent']=_0x23d46a+':'+_0x42f286;const _0x3f5751=_0x64b556[_0x28e081(0xc57)]()+0x1,_0x3827c0=_0x408325[_0x28e081(0x947)](),_0x135dab=[_0x28e081(0x9d3),'星期一',_0x28e081(0xcb7),_0x28e081(0x67a),_0x28e081(0xc89),_0x28e081(0xe4f),_0x28e081(0x302)][_0xd41c06[_0x28e081(0x441)]()];_0x276006[_0x28e081(0x226)]=_0x3f5751+'月'+_0x3827c0+'日\x20'+_0x135dab;}}function _0x39837d(){const _0x32ac96=_0x57ab4d;if('Khzzv'!==_0x32ac96(0xacd))throw new _0x32f364(_0x32ac96(0x38b));else{const _0xf519d9=_0xa7652b['friendCircles'][_0x32ac96(0x394)](_0x9e0dd9=>_0x9e0dd9['id']===_0xa7652b[_0x32ac96(0x4fd)]),_0x24ea24=_0x41c782();let _0x182ffe=[];if(_0xf519d9&&_0xf519d9['posts']){const _0x51bddb=_0xf519d9[_0x32ac96(0xb6e)][_0x32ac96(0x1a9)](_0x554108=>_0x554108[_0x32ac96(0x45c)]==='music'&&_0x554108[_0x32ac96(0x5c4)])[_0x32ac96(0x17f)](_0x516e9a=>({..._0x516e9a,'source':_0x32ac96(0x5a4)}));_0x182ffe['push'](..._0x51bddb);}if(_0x24ea24&&_0xa7652b['conversationHistory']){const _0xf69779=_0xa7652b[_0x32ac96(0xdc0)]['filter'](_0x3d5912=>_0x3d5912[_0x32ac96(0x45c)]===_0x32ac96(0x784)&&_0x3d5912[_0x32ac96(0x5c4)])['map'](_0x10234c=>({..._0x10234c,'id':'msg_'+_0x10234c[_0x32ac96(0xb9f)],'source':_0x32ac96(0x771)}));_0x182ffe[_0x32ac96(0x214)](..._0xf69779);}const _0x4c7ab8=Array[_0x32ac96(0x90a)](new Map(_0x182ffe[_0x32ac96(0x17f)](_0x16aac3=>[_0x16aac3[_0x32ac96(0x5c4)],_0x16aac3]))[_0x32ac96(0x664)]());_0xa7652b[_0x32ac96(0x2bd)]=_0x4c7ab8['sort']((_0x54d562,_0x149c1e)=>_0x149c1e[_0x32ac96(0xb9f)]-_0x54d562[_0x32ac96(0xb9f)]);}}function _0x4ec4f1(_0x945fe){const _0x39d196=_0x57ab4d;if(_0x39d196(0x9d4)==='Jlgmb')_0x416f1e[_0x39d196(0x473)](_0x39d196(0x40e))[_0x39d196(0xb57)]();else{if(_0x945fe<0x0||_0x945fe>=_0x108b4b['length'])return;_0x353f86=_0x945fe;const _0x2360d0=_0x108b4b[_0x945fe];_0x5552f1['src']=_0x2360d0[_0x39d196(0x5c4)]||_0x2360d0[_0x39d196(0x17c)],_0x5552f1['play'](),_0xfb0694(),_0x6e7ece();}}function _0xfb0694(){const _0xeabbd2=_0x57ab4d,_0x149b3a=_0xa7652b[_0xeabbd2(0x2bd)][_0xa7652b[_0xeabbd2(0xd5d)]],_0x46fe36=_0xa7652b[_0xeabbd2(0x9d1)];_0x466f7d(),_0x4fc791();const _0x3ae76f=document[_0xeabbd2(0xe54)]('.music-post-song-card,\x20.music-share-card');_0x3ae76f[_0xeabbd2(0x1dc)](_0x160752=>{const _0x2d2ea4=_0xeabbd2,_0x3f14ef=_0x160752[_0x2d2ea4(0x9c6)][_0x2d2ea4(0x6ef)],_0x4609b3=_0x160752[_0x2d2ea4(0x373)](_0x2d2ea4(0xa9f));if(!_0x4609b3)return;_0x149b3a&&_0x3f14ef===_0x149b3a['id']&&_0x46fe36?_0x4609b3[_0x2d2ea4(0x226)]='❚❚':_0x4609b3['textContent']='▶';});}function _0x6e7ece(){const _0x574f10=_0x57ab4d;try{localStorage['setItem'](_0x574f10(0x721),JSON[_0x574f10(0xaf6)]({'playlist':_0xa7652b[_0x574f10(0x2bd)],'currentIndex':_0xa7652b['currentlyPlayingIndex']}));}catch(_0x29c46b){if('eBfIq'!=='eBfIq'){const _0x10c368=_0x5e1b58[_0x574f10(0x41c)](/theme:\s*"?([^"\n]+)"?/)?.[0x1]||_0x574f10(0x47b),_0x1b1fc7=(_0x423e80[_0x574f10(0x41c)](/key_events:\s*\n([\s\S]*?)(?=\n\w+:|$)/)?.[0x1]||'')[_0x574f10(0x8ff)]('\x0a')[_0x574f10(0x17f)](_0x24ee71=>_0x24ee71['trim']())[_0x574f10(0x1a9)](_0x531e0f=>_0x531e0f[_0x574f10(0x324)]('-'))[_0x574f10(0x332)]('\x20');return _0x574f10(0x3c3)+(_0x96ac2e+0x1)+_0x574f10(0x494)+_0x10c368+_0x574f10(0xdf)+_0x1b1fc7;}else console[_0x574f10(0xc95)]('保存播放器状态失败，真是没用。',_0x29c46b);}}function _0x48acbf(){const _0xfae768=_0x57ab4d;try{const _0x3713a0=localStorage[_0xfae768(0xb34)](_0xfae768(0x721));if(_0x3713a0){const {playlist:_0x47c54c,currentIndex:_0x5e0c83}=JSON[_0xfae768(0x180)](_0x3713a0);Array[_0xfae768(0x8aa)](_0x47c54c)&&_0x47c54c[_0xfae768(0x893)]>0x0&&_0x5e0c83>-0x1&&(_0xa7652b['musicPlaylist']=_0x47c54c,_0xa7652b[_0xfae768(0xd5d)]=_0x5e0c83,_0xa7652b['isPlaying']=![],_0xfb0694());}}catch(_0x1e3c7f){console[_0xfae768(0xc95)]('切，加载播放器状态的时候出错了。',_0x1e3c7f);}}function _0x3e3452(_0x402537){const _0x54ef57=_0x57ab4d;if('NJZWp'!==_0x54ef57(0xc34)){if(window[_0x54ef57(0x7a6)])clearTimeout(window[_0x54ef57(0x7a6)]);const _0x21cd43=_0x402537[_0x54ef57(0x63c)][_0x54ef57(0x4a0)](_0x54ef57(0x5b8));if(!_0x21cd43)return;const _0xfdeef1=_0x21cd43['dataset'][_0x54ef57(0xb9f)],_0x2a76ec=_0x21cd43['classList']['contains']('user')?_0x54ef57(0xea1):'ai';if(!_0xfdeef1)return;const _0x31a04b=()=>{window['diaryPressTimer']=setTimeout(()=>{const _0xda8b79=_0x20c5;if(_0x402537['type']==='touchstart')_0x402537[_0xda8b79(0xd27)]();_0x1eed9c(parseInt(_0xfdeef1,0xa),_0x2a76ec);},0x320);},_0x448ef1=()=>{const _0x457207=_0x54ef57;if(window[_0x457207(0x7a6)])clearTimeout(window['diaryPressTimer']);};document[_0x54ef57(0xc04)](_0x54ef57(0x241),_0x448ef1,{'once':!![]}),document['addEventListener'](_0x54ef57(0xcf0),_0x448ef1,{'once':!![]}),document[_0x54ef57(0xc04)](_0x54ef57(0x1d3),_0x448ef1,{'once':!![]}),_0x31a04b();}else return{'type':'create_event','eventType':_0x1bdb2a[0x1]['trim'](),'eventDate':_0x3e724e[0x2]['trim'](),'eventContent':_0x1b1de6[0x3][_0x54ef57(0x8eb)]()};}function _0x1eed9c(_0xe29de3,_0x1bd4c6){const _0x468f49=_0x57ab4d;if('IIdfS'===_0x468f49(0xd83)){const _0xdd1b51=_0x468f49(0x7a7)+_0xe29de3;let _0x27a9e1=document[_0x468f49(0x473)](_0xdd1b51);if(_0x27a9e1)return;const _0x55e99c=_0x468f49(0xad3)+_0xdd1b51+_0x468f49(0x68d)+(_0x1bd4c6==='ai'?_0x468f49(0xc68):'')+_0x468f49(0x2b9);document[_0x468f49(0x5ef)][_0x468f49(0x650)](_0x468f49(0x2fd),_0x55e99c);const _0x86e6af=document[_0x468f49(0x473)](_0xdd1b51),_0x250812=()=>_0x86e6af['remove']();_0x86e6af[_0x468f49(0x373)](_0x468f49(0x5a8))[_0x468f49(0x4e9)]=_0x250812,_0x86e6af[_0x468f49(0x373)](_0x468f49(0x100))[_0x468f49(0x4e9)]=_0x250812,_0x86e6af[_0x468f49(0x373)](_0x468f49(0xe5f))['onclick']=()=>{const _0xe2fee9=_0x468f49;if(_0xe2fee9(0xa0f)===_0xe2fee9(0xa0f))_0x2a6837(_0xe29de3),_0x250812();else{const _0x53ee70=_0xf2a685(_0x31715c[_0xe2fee9(0x2d4)]);if(_0x176d1b(_0x53ee70)||_0x53ee70<=0x0){_0x3c99ff('请输入有效的转账金额！');return;}const _0x527a1c=_0x2ad619();let _0x3b5e28=null;_0x527a1c[_0xe2fee9(0x45c)]===_0xe2fee9(0x4b5)?_0x3b5e28=_0x8c540e[_0xe2fee9(0x2d4)]:_0x3b5e28=_0x527a1c[_0xe2fee9(0x584)][0x0];const _0x2b5b24=_0x136b6d(_0x527a1c['id']),_0x3b523d={'role':'user','type':'transfer','content':'[用户向\x20'+(_0x41f091(_0x3b5e28)?.[_0xe2fee9(0xe79)]||'未知')+_0xe2fee9(0xb90)+_0x53ee70+']','amount':_0x53ee70,'recipientId':_0x3b5e28,'senderId':_0x2b5b24['id'],'timestamp':_0x4e6cb6[_0xe2fee9(0x144)]()};_0x2c1664['conversationHistory'][_0xe2fee9(0x214)](_0x3b523d),_0x3e2e18(),_0x15884a(),_0x4a59a3[_0xe2fee9(0x970)][_0xe2fee9(0x702)](_0xe2fee9(0x348));}},_0x1bd4c6==='ai'&&(_0x468f49(0x262)!==_0x468f49(0x262)?_0x19d6ef['assign'](_0x361f67,_0x7d2b8e):_0x86e6af[_0x468f49(0x373)](_0x468f49(0x4fb))[_0x468f49(0x4e9)]=()=>{_0x1d2743(_0xe29de3),_0x250812();});}else{const _0x4dffd4=_0x3c551b[_0x468f49(0xdb0)](_0x46801a,_0x468f49(0x4a7)),_0x3681e6=_0x4dffd4[_0x468f49(0xb9d)](_0x5c9f39),_0x4c3507=_0x3681e6['delete'](_0x23c2e2);_0x4c3507[_0x468f49(0x7ad)]=()=>_0x979f5b(),_0x4c3507[_0x468f49(0x835)]=()=>_0x2b1dae(_0x4c3507[_0x468f49(0xc95)]);}}async function _0x2a6837(_0x29f326){const _0x12186f=_0x57ab4d,_0x42c70e=await _0x410108(_0x12186f(0xa6a));if(!_0x42c70e)return;const _0x2f19bd=_0xa7652b[_0x12186f(0x65b)][_0x12186f(0x394)](_0x355889=>_0x355889[_0x12186f(0x3b1)]===_0xa7652b[_0x12186f(0xf7)]);if(!_0x2f19bd)return;const _0x4bab5d=_0x2f19bd['entries']['findIndex'](_0x494c52=>_0x494c52[_0x12186f(0xb9f)]===_0x29f326);_0x4bab5d>-0x1&&('lBlnr'===_0x12186f(0xbf3)?(_0x2f19bd[_0x12186f(0x420)][_0x12186f(0x197)](_0x4bab5d,0x1),_0x2e0417(),_0x15a433(),_0x198030(_0x12186f(0x466))):(_0xcaa425['querySelectorAll'](_0x12186f(0x12e))[_0x12186f(0x1dc)](_0x1bffec=>_0x1bffec[_0x12186f(0x970)]['remove'](_0x12186f(0xdfe))),_0xdd79b4['classList'][_0x12186f(0x702)](_0x12186f(0x4b2))));}async function _0x1d2743(_0x11acf4){const _0x1d9888=_0x57ab4d;if(_0x1d9888(0x4e8)!=='VvcRp'){const _0x47677a=_0xa7652b[_0x1d9888(0x65b)][_0x1d9888(0x394)](_0x3cb74d=>_0x3cb74d[_0x1d9888(0x3b1)]===_0xa7652b[_0x1d9888(0xf7)]);if(!_0x47677a)return;const _0x49932=_0x47677a[_0x1d9888(0x420)]['findIndex'](_0x5423c2=>_0x5423c2[_0x1d9888(0xb9f)]===_0x11acf4);_0x49932>-0x1&&(_0x1d9888(0xb78)!==_0x1d9888(0xb78)?_0x51545e(_0x1d9888(0x7f8)+_0x4a4c13['message']):(_0x47677a[_0x1d9888(0x420)][_0x1d9888(0x197)](_0x49932,0x1),_0x2e0417(),_0x15a433(),await _0x3f8dc6()));}else{const _0x28decb=_0x50a6fb[_0x1d9888(0x7a9)]('p');_0x28decb['textContent']=_0x2bc1b8[_0x1d9888(0x51c)],_0x28decb['id']=_0x1d9888(0x95d)+_0x29e5ae,_0x2fac21[_0x1d9888(0xced)](_0x28decb);}}function _0x5d73af(){const _0x3c5510=_0x57ab4d,_0x6ce597=document[_0x3c5510(0x473)](_0x3c5510(0x5c7));_0x6ce597[_0x3c5510(0x6f0)]='';const _0x24bb1b=_0xa7652b[_0x3c5510(0xbfe)][_0x3c5510(0x1a9)](_0x1b4ceb=>_0xa7652b[_0x3c5510(0x4ec)]['some'](_0x506eae=>_0x506eae[_0x3c5510(0x45c)]==='private'&&_0x506eae[_0x3c5510(0x584)]['includes'](_0x1b4ceb['id'])));if(_0x24bb1b[_0x3c5510(0x893)]===0x0){if(_0x3c5510(0xe3f)==='HkxZZ'){_0x6ce597[_0x3c5510(0x6f0)]=_0x3c5510(0x339);return;}else{const _0x3abe38=_0x144ce0[0x1]['trim'](),_0x106399=_0x240619[0x2][_0x3c5510(0x52f)]();let _0x1fa6e6=(_0x15902c[0x3]||'')['trim']();const _0x303244=new _0x676c42(_0x3abe38);if(_0x2932d3(_0x303244['getTime']()))return _0x58c646[_0x3c5510(0xc95)](_0x3c5510(0x900),_0x3abe38),null;if(_0x106399===_0x3c5510(0x524))_0x1fa6e6=null;else{if(!_0x1fa6e6)return _0x103c93['error']('Noir\x27s\x20Decoder:\x20fixed\x20或\x20prompted\x20类型的指令缺少内容。'),null;}return{'scheduleTime':_0x303244,'type':_0x106399,'content':_0x1fa6e6};}}_0x24bb1b['forEach'](_0x568747=>{const _0x5b822e=_0x3c5510,_0x5dee64=document[_0x5b822e(0x7a9)]('li');_0x5dee64[_0x5b822e(0xd04)]='character-item',_0x5dee64[_0x5b822e(0x9c6)][_0x5b822e(0xa48)]=_0x568747['id'],_0x5dee64['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x568747[_0x5b822e(0x98f)]||_0x96c08e)+_0x5b822e(0x729)+_0x568747[_0x5b822e(0xe79)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>翻开日记本...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20diary-delete-btn\x22\x20title=\x22清空这本日记\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path><line\x20x1=\x2210\x22\x20y1=\x2211\x22\x20x2=\x2210\x22\x20y2=\x2217\x22></line><line\x20x1=\x2214\x22\x20y1=\x2211\x22\x20x2=\x2214\x22\x20y2=\x2217\x22></line></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5dee64['addEventListener'](_0x5b822e(0x493),()=>{_0x14199e(_0x568747['id']);}),_0x5dee64[_0x5b822e(0x373)](_0x5b822e(0x18a))[_0x5b822e(0xc04)]('click',()=>{const _0x2007e0=_0x5b822e;'vdmbG'===_0x2007e0(0xcfa)?_0x14199e(_0x568747['id']):(_0x57c739(![]),_0x24fa0d['error']('全量导入失败:',_0x4e6673),_0x4af41b(_0x2007e0(0xb1d)+_0x3eaa12[_0x2007e0(0xe32)]));}),_0x5dee64[_0x5b822e(0x373)](_0x5b822e(0xdf5))[_0x5b822e(0xc04)]('click',_0x5c879f=>{const _0x3e28c7=_0x5b822e;_0x3e28c7(0xb12)===_0x3e28c7(0x7dc)?_0x4250ec+=_0x3e28c7(0xd47):(_0x5c879f[_0x3e28c7(0x954)](),_0x4dd8df(_0x568747['id']));}),_0x6ce597['appendChild'](_0x5dee64);});}function _0x14199e(_0x5d2261){const _0x559739=_0x57ab4d,_0x5b94c4=_0x1238ea(_0x5d2261);if(!_0x5b94c4)return;_0xa7652b['activeDiaryCharacterId']=_0x5d2261;const _0x482638=_0xa7652b['diaries']['find'](_0x515e61=>_0x515e61['characterId']===_0x5d2261),_0x2b8279=_0x482638?_0x482638[_0x559739(0x420)][_0x559739(0x893)]:0x0,_0x269209=0x2;_0xa7652b[_0x559739(0x362)]=Math[_0x559739(0x272)](0x0,Math[_0x559739(0x54d)](_0x2b8279/_0x269209)-0x1),document['getElementById']('diary-char-name-header')[_0x559739(0x226)]=_0x5b94c4[_0x559739(0xe79)]+_0x559739(0xb3d),_0x15a433(),_0xffff1f('diaryView',_0x559739(0x5e1));}function _0x15a433(){const _0x5b1fa8=_0x57ab4d,_0x177267=document[_0x5b1fa8(0x473)]('diary-entries-container'),_0x2dce89=document[_0x5b1fa8(0x473)](_0x5b1fa8(0xde5));_0x177267['innerHTML']='',_0x2dce89['innerHTML']='';const _0x1e871d=_0x3781fd()||{'name':'我'},_0x5664fd=_0xa7652b['diaries'][_0x5b1fa8(0x394)](_0x2545f9=>_0x2545f9[_0x5b1fa8(0x3b1)]===_0xa7652b[_0x5b1fa8(0xf7)]);if(!_0x5664fd||!_0x5664fd[_0x5b1fa8(0x420)]||_0x5664fd[_0x5b1fa8(0x420)][_0x5b1fa8(0x893)]===0x0){if(_0x5b1fa8(0x6c3)===_0x5b1fa8(0x22c)){const _0x5ce526=_0x2a52fe['getElementById'](_0x5b1fa8(0xe2a))[_0x5b1fa8(0x2d4)]['trim'](),_0x578397=_0xaf9319[_0x5b1fa8(0x373)](_0x5b1fa8(0xac0))[_0x5b1fa8(0x2d4)];if(!_0x5ce526){_0x3204aa(_0x5b1fa8(0x140));return;}const _0x20b40f=_0x4164ee[_0x5b1fa8(0x932)][_0x5b1fa8(0x394)](_0x51b985=>_0x51b985['id']===_0x2c0ffa['activeUserProfileId']);if(!_0x20b40f){_0x1e69e5('错误：找不到当前用户，无法保存事件。请尝试返回主屏幕再试一次。');return;}_0x177b06[_0x5b1fa8(0x50b)][_0x5b1fa8(0x214)]({'id':'event_'+_0x63e623[_0x5b1fa8(0x144)](),'date':_0x32cb64[_0x5b1fa8(0xd91)],'type':_0x578397,'content':_0x5ce526,'userId':_0x20b40f['id']}),_0x53c628(),_0x5308ac(),_0x3fae4b(),_0x28977e(),_0xe280f5[_0x5b1fa8(0x473)](_0x5b1fa8(0x5c5))[_0x5b1fa8(0x970)][_0x5b1fa8(0x702)]('show');}else{_0x177267[_0x5b1fa8(0x6f0)]=_0x5b1fa8(0x27e),_0x2dce89['innerHTML']=_0x5b1fa8(0x9cd),document['getElementById'](_0x5b1fa8(0xe36))[_0x5b1fa8(0xc04)](_0x5b1fa8(0x493),_0x2d449a),document[_0x5b1fa8(0x473)](_0x5b1fa8(0x811))[_0x5b1fa8(0xc04)](_0x5b1fa8(0x493),_0x3f8dc6);return;}}const _0x15c711=0x2,_0x1990f7=[..._0x5664fd[_0x5b1fa8(0x420)]][_0x5b1fa8(0x84c)]((_0xef75ac,_0x93d926)=>_0xef75ac[_0x5b1fa8(0xb9f)]-_0x93d926[_0x5b1fa8(0xb9f)]),_0xc39181=[];for(let _0x4f6b5a=0x0;_0x4f6b5a<_0x1990f7['length'];_0x4f6b5a+=_0x15c711){if('KDgSd'!=='KDgSd'){const _0x4e371c=_0x1377d5[_0x5b1fa8(0x229)](_0x5b1fa8(0x33a)+_0x388198['id']);_0x4e371c[_0x5b1fa8(0xc49)](_0x5b1fa8(0x188),_0x1060f9[_0x5b1fa8(0xaf6)](_0x140a27[_0x5b1fa8(0x70d)]));if(_0x578b11[_0x5b1fa8(0xd12)])_0x4e371c[_0x5b1fa8(0xc49)](_0x5b1fa8(0xd12),_0x4e9e6a[_0x5b1fa8(0xd12)]);if(_0xb22bce[_0x5b1fa8(0xdd5)])_0x4e371c[_0x5b1fa8(0xc49)](_0x5b1fa8(0xdd5),_0x1856de[_0x5b1fa8(0xdd5)]);if(_0x4db354[_0x5b1fa8(0x996)])_0x4e371c[_0x5b1fa8(0xc49)](_0x5b1fa8(0x8fc),_0x42471e[_0x5b1fa8(0x996)]);}else _0xc39181['push'](_0x1990f7[_0x5b1fa8(0x1de)](_0x4f6b5a,_0x4f6b5a+_0x15c711));}const _0x442e15=_0xc39181['length'];_0xc39181[_0x5b1fa8(0x1dc)]((_0x1e7190,_0x6897b3)=>{const _0x1a814d=_0x5b1fa8,_0x227cdf=document[_0x1a814d(0x7a9)](_0x1a814d(0x527));_0x227cdf[_0x1a814d(0xd04)]='diary-page',_0x227cdf['id']=_0x1a814d(0x521)+_0x6897b3,_0x6897b3===_0xa7652b[_0x1a814d(0x362)]&&_0x227cdf[_0x1a814d(0x970)][_0x1a814d(0xddb)](_0x1a814d(0x18c)),_0x1e7190[_0x1a814d(0x1dc)](_0x443fa9=>{const _0x367634=_0x1a814d,_0x2ef396=_0x443fa9[_0x367634(0x689)]===_0x367634(0xea1)?_0x367634(0xea1):'ai',_0x30e52d=_0x443fa9[_0x367634(0x689)]===_0x367634(0xea1)?_0x1e871d[_0x367634(0xe79)]:_0x1238ea(_0x443fa9['author'])['name'],_0x45f6fb=document['createElement'](_0x367634(0x527));_0x45f6fb[_0x367634(0xd04)]=_0x367634(0xa9e)+_0x2ef396,_0x45f6fb[_0x367634(0x9c6)]['timestamp']=_0x443fa9['timestamp'],_0x45f6fb[_0x367634(0x3e4)][_0x367634(0x96d)]=_0x367634(0x4a6),_0x45f6fb[_0x367634(0x3e4)][_0x367634(0x3dc)]='0',_0x45f6fb[_0x367634(0x6f0)]=_0x367634(0x2d7)+_0x30e52d+_0x367634(0x9b6)+new Date(_0x443fa9['timestamp'])[_0x367634(0x1f3)]('zh-CN')+_0x367634(0xdde)+_0x443fa9['content']['replace'](/\n/g,_0x367634(0x435))+_0x367634(0xa83),_0x227cdf['appendChild'](_0x45f6fb);}),_0x177267[_0x1a814d(0xced)](_0x227cdf);}),_0x2dce89['innerHTML']=_0x5b1fa8(0xbe5)+(_0xa7652b[_0x5b1fa8(0x362)]+0x1)+_0x5b1fa8(0x756)+_0x442e15+_0x5b1fa8(0x79e),document[_0x5b1fa8(0x473)](_0x5b1fa8(0xa6d))[_0x5b1fa8(0xdeb)]=_0xa7652b[_0x5b1fa8(0x362)]===0x0,document[_0x5b1fa8(0x473)](_0x5b1fa8(0x7a2))[_0x5b1fa8(0xdeb)]=_0xa7652b[_0x5b1fa8(0x362)]===_0x442e15-0x1,document[_0x5b1fa8(0x473)](_0x5b1fa8(0xa6d))[_0x5b1fa8(0xc04)](_0x5b1fa8(0x493),_0x197f43),document[_0x5b1fa8(0x473)]('diary-next-button')[_0x5b1fa8(0xc04)](_0x5b1fa8(0x493),_0x490433),document[_0x5b1fa8(0x473)](_0x5b1fa8(0xe36))[_0x5b1fa8(0xc04)]('click',_0x2d449a),document['getElementById'](_0x5b1fa8(0x811))[_0x5b1fa8(0xc04)](_0x5b1fa8(0x493),_0x3f8dc6);}function _0x490433(){const _0x10b610=_0x57ab4d;if(_0x10b610(0x619)!=='RCOgT'){if(_0xa7652b[_0x10b610(0xabb)])return;const _0x2d071c=_0xa7652b[_0x10b610(0x362)],_0xe8e272=Math[_0x10b610(0x54d)](_0xa7652b[_0x10b610(0x65b)][_0x10b610(0x394)](_0x1773cc=>_0x1773cc['characterId']===_0xa7652b[_0x10b610(0xf7)])['entries'][_0x10b610(0x893)]/0x2);if(_0x2d071c>=_0xe8e272-0x1)return;_0xa7652b['isAnimatingDiary']=!![];const _0x39565e=_0x2d071c+0x1,_0x4735d3=document[_0x10b610(0x473)](_0x10b610(0x521)+_0x2d071c),_0x3805a9=document[_0x10b610(0x473)](_0x10b610(0x521)+_0x39565e);_0x4735d3&&_0x3805a9?'OrCEd'!==_0x10b610(0x1f4)?(_0x6e2067[_0x10b610(0xe79)]=_0x2d7d5e,_0x3f9d0c[_0x10b610(0xb17)]=_0x1d85b5,_0x41c4cb[_0x10b610(0x45e)]=_0x526162):(_0x3805a9[_0x10b610(0x970)][_0x10b610(0xddb)](_0x10b610(0x793)),_0x4735d3[_0x10b610(0x970)][_0x10b610(0xddb)](_0x10b610(0xba5)),_0x3805a9['classList'][_0x10b610(0xddb)](_0x10b610(0x18c)),setTimeout(()=>{const _0x29a8f2=_0x10b610;_0x4735d3['classList'][_0x29a8f2(0x702)]('is-visible',_0x29a8f2(0xba5)),_0x3805a9['classList']['remove'](_0x29a8f2(0x793)),_0xa7652b[_0x29a8f2(0x362)]=_0x39565e,_0x15a433(),_0xa7652b['isAnimatingDiary']=![];},0x2bc)):_0xa7652b[_0x10b610(0xabb)]=![];}else _0x4a8636(),_0x31ba89(_0x10b610(0x208),_0x10b610(0xbd6));}function _0x197f43(){const _0x47aca3=_0x57ab4d;if(_0xa7652b[_0x47aca3(0xabb)])return;const _0x1a2c23=_0xa7652b['diaryCurrentPage'];if(_0x1a2c23<=0x0)return;_0xa7652b[_0x47aca3(0xabb)]=!![];const _0x598abb=_0x1a2c23-0x1,_0x1e49b2=document[_0x47aca3(0x473)](_0x47aca3(0x521)+_0x1a2c23),_0x5865b1=document[_0x47aca3(0x473)](_0x47aca3(0x521)+_0x598abb);_0x1e49b2&&_0x5865b1?(_0x5865b1[_0x47aca3(0x970)][_0x47aca3(0xddb)]('is-entering-from-left'),_0x1e49b2['classList'][_0x47aca3(0xddb)](_0x47aca3(0xe27)),_0x5865b1['classList']['add'](_0x47aca3(0x18c)),setTimeout(()=>{const _0x45bec6=_0x47aca3;if(_0x45bec6(0x2c9)===_0x45bec6(0x2c9))_0x1e49b2[_0x45bec6(0x970)][_0x45bec6(0x702)](_0x45bec6(0x18c),_0x45bec6(0xe27)),_0x5865b1[_0x45bec6(0x970)][_0x45bec6(0x702)](_0x45bec6(0xc0a)),_0xa7652b['diaryCurrentPage']=_0x598abb,_0x15a433(),_0xa7652b['isAnimatingDiary']=![];else{const _0x3542c4=_0x5f2c04[_0x45bec6(0x175)][_0x45bec6(0x394)](_0x56e865=>_0x56e865['id']===_0x2aeb1e[_0x45bec6(0x4fd)]),_0x5bda98=_0x3542c4?.[_0x45bec6(0x8f5)];let _0x6f84c2=_0x5543f6[_0x45bec6(0x932)][_0x45bec6(0x394)](_0x21aa6c=>_0x21aa6c['id']===_0x5bda98);!_0x6f84c2&&(_0x6f84c2=_0xa29273[_0x45bec6(0x932)][_0x45bec6(0x394)](_0xc67d8c=>_0xc67d8c['id']===_0x5bc3eb[_0x45bec6(0xa4f)])),!_0x6f84c2&&(_0x6f84c2=_0xb5fc5b['userProfiles'][0x0]),_0x6f84c2&&(_0x1456d9[_0x45bec6(0x473)](_0x45bec6(0x787))[_0x45bec6(0x706)]=_0x6f84c2[_0x45bec6(0x98f)]||_0x28dc88);}},0x2bc)):_0xa7652b[_0x47aca3(0xabb)]=![];}function _0x2d449a(){return new Promise(_0x14ade5=>{const _0x58c375=_0x20c5,_0x24dc8a=_0x58c375(0xdfb);document[_0x58c375(0x5ef)][_0x58c375(0x650)](_0x58c375(0x2fd),_0x24dc8a);const _0x40c1b9=document['getElementById'](_0x58c375(0x19d)),_0xc91fcb=document[_0x58c375(0x473)](_0x58c375(0xb53)),_0x3ce126=document[_0x58c375(0x473)](_0x58c375(0x71c)),_0x5d54b4=document[_0x58c375(0x473)](_0x58c375(0xbc2)),_0x186507=_0x40c1b9['querySelector'](_0x58c375(0x5a8)),_0x56b497=()=>{const _0x2ba0f7=_0x58c375;_0x40c1b9[_0x2ba0f7(0x702)](),_0x14ade5();};_0x3ce126[_0x58c375(0x4e9)]=()=>{_0x1ea17e(_0xc91fcb['value']),_0x56b497();},_0x5d54b4[_0x58c375(0x4e9)]=_0x56b497,_0x186507[_0x58c375(0x4e9)]=_0x56b497;});}function _0x1ea17e(_0x4df648){const _0x213f32=_0x57ab4d,_0x494627=_0x4df648['trim']();if(!_0x494627||!_0xa7652b[_0x213f32(0xf7)])return;let _0x490550=_0xa7652b[_0x213f32(0x65b)][_0x213f32(0x394)](_0x522c8d=>_0x522c8d[_0x213f32(0x3b1)]===_0xa7652b[_0x213f32(0xf7)]);!_0x490550&&(_0x213f32(0x88c)===_0x213f32(0x88c)?(_0x490550={'characterId':_0xa7652b[_0x213f32(0xf7)],'entries':[]},_0xa7652b['diaries'][_0x213f32(0x214)](_0x490550)):_0x3995bc[_0x213f32(0x863)](_0x213f32(0xd62)+_0x4b5a02['id']));_0x490550[_0x213f32(0x420)][_0x213f32(0x214)]({'timestamp':Date[_0x213f32(0x144)](),'author':_0x213f32(0xea1),'content':_0x494627}),_0x2e0417();const _0x4ba538=_0x490550[_0x213f32(0x420)]['length'];_0xa7652b['diaryCurrentPage']=Math['ceil'](_0x4ba538/0x2)-0x1,_0x15a433();}async function _0x3f8dc6(){const _0x18cc65=_0x57ab4d,_0x10fa3f=_0xa7652b[_0x18cc65(0x65b)][_0x18cc65(0x394)](_0x380ac5=>_0x380ac5[_0x18cc65(0x3b1)]===_0xa7652b[_0x18cc65(0xf7)]),_0x2a8381=_0xa7652b[_0x18cc65(0xf7)],_0x4153ea=_0x1238ea(_0x2a8381);if(!_0x4153ea||_0xa7652b[_0x18cc65(0x89f)])return;_0x27a15c(!![],_0x18cc65(0x86c)),await new Promise(_0x572f56=>setTimeout(_0x572f56,0x32)),_0xa7652b[_0x18cc65(0x89f)]=!![];let _0x52f3ce=[];try{if(_0x18cc65(0xcbf)!==_0x18cc65(0x4fc)){const _0x4a917d=_0x3781fd()||{'name':'你'},_0x493fea=_0x322f26(_0x2a8381),{omniText:_0x275133}=_0x32429c(_0x2a8381,_0xa7652b['activeChatId']);let _0x196339='';if(_0x4153ea[_0x18cc65(0x277)]&&_0x4153ea['linkedWorldBookIds'][_0x18cc65(0x893)]>0x0){const _0x4cb2e6=_0x4153ea[_0x18cc65(0x277)][_0x18cc65(0x17f)](_0x16ea83=>_0xa7652b[_0x18cc65(0x52d)][_0x18cc65(0x394)](_0x11cb2e=>_0x11cb2e['id']===_0x16ea83))['filter'](Boolean)['map'](_0x426901=>_0x18cc65(0x2be)+_0x426901[_0x18cc65(0xe79)]+'\x0a'+_0x426901['content'])[_0x18cc65(0x332)]('');if(_0x4cb2e6)_0x196339=_0x18cc65(0xc4)+_0x4cb2e6;}const _0x20c26e=_0x4a917d[_0x18cc65(0x171)]?_0x18cc65(0xa78)+_0x4a917d[_0x18cc65(0xe79)]+_0x18cc65(0xc9f)+_0x4a917d[_0x18cc65(0x171)]:'',_0x246343=_0x4649bb(),_0x913ff4=_0x3f0d67(_0x2a8381);let _0x117a32=_0x18cc65(0x4a3);if(_0x10fa3f&&_0x10fa3f[_0x18cc65(0x420)]){const _0x282593=_0x10fa3f[_0x18cc65(0x420)][_0x18cc65(0x1a9)](_0x4bc353=>_0x4bc353[_0x18cc65(0x689)]===_0x18cc65(0xea1))[_0x18cc65(0xa5)]();_0x282593&&(_0x117a32=_0x282593[_0x18cc65(0xb17)]);}const _0x50a552='#\x20核心任务:\x20写一篇有深度的交换日记\x0a你正在扮演名为“'+_0x4153ea[_0x18cc65(0xe79)]+_0x18cc65(0xc06)+_0x4a917d[_0x18cc65(0xe79)]+'。你的日记是写给Ta看的。\x0a\x0a#\x20写作【最高指令】\x0a1.\x20\x20**【首要任务：回应读者】**\x20你的第一要务是**回应**读者（'+_0x4a917d[_0x18cc65(0xe79)]+'）最新写下的日记内容。Ta写的是：\x0a\x20“'+_0x117a32+'”\x20\x0a\x20你必须针对这段内容表达你的看法、感受或关联的思考。\x0a2.\x20\x20**【次要任务：分享自我】**\x20在回应之后，你**必须**分享一些关于你自己的、读者**不知道**的新鲜事。可以是你今天的见闻、一个突然的想法、或者一件小小的秘密。不要总是复述你们已经聊过的内容！\x0a3.\x20\x20**【禁止复读】**\x20聊天记录和动态只是你的“背景记忆”，是用来确保你不OOC的参考，**绝对不是**你日记的主要内容！\x0a\x0a#\x20你的核心人设\x20(必须遵守)\x0a'+_0x4153ea[_0x18cc65(0x171)]+'\x0a'+_0x20c26e+'\x0a'+_0x196339+_0x18cc65(0xd7)+new Date()[_0x18cc65(0x1f3)](_0x18cc65(0xbbe),{'dateStyle':_0x18cc65(0x7d3),'timeStyle':_0x18cc65(0x6b5)})+_0x18cc65(0xe0a)+_0x420848(new Date(_0x10fa3f?.[_0x18cc65(0x420)]?.['at'](-0x1)?.[_0x18cc65(0xb9f)]||Date['now']()))+_0x18cc65(0x12b)+(_0x275133||_0x18cc65(0xc7c))+'\x0a'+_0x913ff4+_0x18cc65(0x769)+(_0x246343||_0x18cc65(0xd06))+_0x18cc65(0xd18);_0x52f3ce=[{'role':_0x18cc65(0xaae),'content':_0x50a552},{'role':_0x18cc65(0xea1),'content':_0x18cc65(0xe1e)}];const _0x3a07f5=await _0x56b292(_0x52f3ce);if(_0x3a07f5){let _0x5ea939=_0xa7652b['diaries'][_0x18cc65(0x394)](_0x3b38a3=>_0x3b38a3['characterId']===_0x2a8381);!_0x5ea939&&(_0x5ea939={'characterId':_0x2a8381,'entries':[]},_0xa7652b[_0x18cc65(0x65b)]['push'](_0x5ea939));_0x5ea939[_0x18cc65(0x420)][_0x18cc65(0x214)]({'timestamp':Date[_0x18cc65(0x144)](),'author':_0x2a8381,'content':_0x3a07f5}),_0x2e0417();const _0x589e1f=_0x5ea939[_0x18cc65(0x420)][_0x18cc65(0x893)];_0xa7652b[_0x18cc65(0x362)]=Math['ceil'](_0x589e1f/0x2)-0x1,_0x15a433();}}else _0x4afdd0(_0x18cc65(0x97c));}catch(_0x111210){_0x198030('生成日记失败:\x20'+_0x111210[_0x18cc65(0xe32)]);}finally{_0x27a15c(![]),_0xa7652b[_0x18cc65(0x89f)]=![];}}function _0x5b1d9e(){const _0x3bb111=_0x57ab4d,_0x4232f4=document[_0x3bb111(0x473)](_0x3bb111(0x90f)),_0x4a23c0=document['getElementById']('galgame-view-container'),_0xa28080=document['querySelector'](_0x3bb111(0x592)),_0x5b1dd1=document[_0x3bb111(0x473)](_0x3bb111(0x2e9));_0x5b1dd1[_0x3bb111(0x970)]['toggle'](_0x3bb111(0x11d),_0xa7652b[_0x3bb111(0x6bc)]===_0x3bb111(0x638)),_0x5b1dd1[_0x3bb111(0x970)][_0x3bb111(0x401)](_0x3bb111(0xe11),_0xa7652b[_0x3bb111(0x6bc)]===_0x3bb111(0xba));if(_0xa7652b['meetingViewMode']==='galgame'){if('pFObu'==='ixuli'){_0x2c3c73(_0x3bb111(0x4c2)+_0x3ba3e6+_0x3bb111(0xb68)),_0x221bb0(()=>_0x262502[_0x3bb111(0xb97)](),0x5dc);return;}else _0x4232f4[_0x3bb111(0x3e4)][_0x3bb111(0x1df)]=_0x3bb111(0x4a6),_0x4a23c0['style'][_0x3bb111(0x1df)]=_0x3bb111(0x2a3);}else _0x3bb111(0x482)===_0x3bb111(0x482)?(_0x4232f4[_0x3bb111(0x3e4)][_0x3bb111(0x1df)]=_0x3bb111(0x2a3),_0x4a23c0['style'][_0x3bb111(0x1df)]=_0x3bb111(0x4a6),setTimeout(()=>{const _0xb52e85=_0x3bb111,_0x115c56=_0x4232f4[_0xb52e85(0x373)]('#message-anchor');if(_0x115c56){if('XOHzz'==='DBLaT')return _0x50d570[_0xb52e85(0x4d5)][_0xb52e85(0x17f)](_0x9c715b=>typeof _0x9c715b==='string'?_0x9c715b:_0x9c715b?.[_0xb52e85(0xb17)])[_0xb52e85(0x1a9)](_0x1ac000)['flatMap'](_0x33e508);else _0x115c56[_0xb52e85(0x21b)]({'behavior':_0xb52e85(0x524),'block':_0xb52e85(0xaaa)});}else _0x4232f4[_0xb52e85(0xc55)]=_0x4232f4[_0xb52e85(0x251)];},0x32)):_0x2fb976(_0x1d9333['id']);_0xa28080['style'][_0x3bb111(0x1df)]='block';}function _0x4f49e4(){const _0x4d9e5d=_0x57ab4d,_0x9503d9=document['getElementById'](_0x4d9e5d(0x1d9)),_0x271253=document[_0x4d9e5d(0x473)](_0x4d9e5d(0x5e4));if(_0xa7652b[_0x4d9e5d(0xb1e)][_0x4d9e5d(0x893)]>0x0){const _0x85c596=_0xa7652b['activeMeetingScriptQueue'][_0x4d9e5d(0xd4e)]();_0x9503d9[_0x4d9e5d(0x226)]=_0x85c596['speaker']===_0x4d9e5d(0xd5a)?'旁白':_0x85c596[_0x4d9e5d(0x9a4)],_0x271253[_0x4d9e5d(0x226)]=_0x85c596['line'];if(_0x85c596['speaker']!==_0x4d9e5d(0xd5a)){if(_0x4d9e5d(0xbac)==='RiHhF'){const _0x36f935=_0x2c6fc2[_0x4d9e5d(0x175)]['find'](_0x3cfe1c=>_0x3cfe1c['id']===_0x5b204d[_0x4d9e5d(0x4fd)]),_0x25a972=_0x3afe81();let _0x5abc95=[];if(_0x36f935&&_0x36f935['posts']){const _0x2fa82c=_0x36f935[_0x4d9e5d(0xb6e)][_0x4d9e5d(0x1a9)](_0x47d63f=>_0x47d63f['type']===_0x4d9e5d(0x784)&&_0x47d63f[_0x4d9e5d(0x5c4)])[_0x4d9e5d(0x17f)](_0x2bd27c=>({..._0x2bd27c,'source':_0x4d9e5d(0x5a4)}));_0x5abc95[_0x4d9e5d(0x214)](..._0x2fa82c);}if(_0x25a972&&_0xdc33dd[_0x4d9e5d(0xdc0)]){const _0x55d2e3=_0x24b3ab['conversationHistory'][_0x4d9e5d(0x1a9)](_0xafb543=>_0xafb543['type']===_0x4d9e5d(0x784)&&_0xafb543[_0x4d9e5d(0x5c4)])[_0x4d9e5d(0x17f)](_0x470d9=>({..._0x470d9,'id':'msg_'+_0x470d9[_0x4d9e5d(0xb9f)],'source':'chat'}));_0x5abc95[_0x4d9e5d(0x214)](..._0x55d2e3);}const _0x2df2bb=_0x5dc3b5[_0x4d9e5d(0x90a)](new _0x1b1578(_0x5abc95['map'](_0x4b0010=>[_0x4b0010[_0x4d9e5d(0x5c4)],_0x4b0010]))['values']());_0x239e65[_0x4d9e5d(0x2bd)]=_0x2df2bb[_0x4d9e5d(0x84c)]((_0x39042a,_0x27b73e)=>_0x27b73e['timestamp']-_0x39042a[_0x4d9e5d(0xb9f)]);}else _0x472dfc(_0xa7652b[_0x4d9e5d(0xbfa)],_0x85c596['emotion']);}}else{if(_0x4d9e5d(0x948)===_0x4d9e5d(0xe03))try{_0x1b0fd2[_0x405275]=_0x2ce1b7['parse'](_0x279f62);}catch(_0x2649e3){}else{const _0x2ef7ff=_0xa7652b[_0x4d9e5d(0xd9c)][_0xa7652b[_0x4d9e5d(0xbfa)]];if(_0x2ef7ff&&_0x2ef7ff[_0x4d9e5d(0x893)]>0x0){if(_0x4d9e5d(0x1a5)==='rGUcU'){_0xa7652b[_0x4d9e5d(0xb1e)]=[..._0x2ef7ff];const _0x3e1884=_0xa7652b['activeMeetingScriptQueue'][_0x4d9e5d(0xd4e)]();_0x9503d9[_0x4d9e5d(0x226)]=_0x3e1884[_0x4d9e5d(0x9a4)]==='narrator'?'旁白':_0x3e1884[_0x4d9e5d(0x9a4)],_0x271253[_0x4d9e5d(0x226)]=_0x3e1884[_0x4d9e5d(0x5b1)],_0x3e1884['speaker']!==_0x4d9e5d(0xd5a)&&_0x472dfc(_0xa7652b[_0x4d9e5d(0xbfa)],_0x3e1884[_0x4d9e5d(0x3a1)]);}else{if(!_0x56ad3d)return[];const _0x1203fa=_0x3d8bd7[_0x4d9e5d(0x8ff)]('\x0a'),_0x516b38=[],_0xf85a45=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;for(const _0x26e6d0 of _0x1203fa){const _0x2986a2=_0x26e6d0[_0x4d9e5d(0x41c)](_0xf85a45);if(_0x2986a2){const _0x3ab138=_0x248abf(_0x2986a2[0x1],0xa),_0x1826fe=_0x437181(_0x2986a2[0x2],0xa),_0xe7b4dd=_0x3fca37(_0x2986a2[0x3],0xa)*(_0x2986a2[0x3][_0x4d9e5d(0x893)]===0x2?0xa:0x1),_0x4c8921=_0x3ab138*0x3c+_0x1826fe+_0xe7b4dd/0x3e8,_0x3c214e=_0x26e6d0[_0x4d9e5d(0x833)](_0xf85a45,'')[_0x4d9e5d(0x8eb)]();_0x3c214e&&_0x516b38[_0x4d9e5d(0x214)]({'time':_0x4c8921,'text':_0x3c214e});}}return _0x516b38;}}else _0x4d9e5d(0xa16)===_0x4d9e5d(0xa16)?(_0x9503d9[_0x4d9e5d(0x226)]='旁白',_0x271253['textContent']=_0x4d9e5d(0xc0b)):(_0x5e08a9[_0x4d9e5d(0xd27)](),_0x3cc835());}}}async function _0x472dfc(_0x541d0d,_0x2ca5de){const _0x270e6c=_0x57ab4d,_0xae3b60=document[_0x270e6c(0x473)]('galgame-sprite'),_0x10c068=document[_0x270e6c(0x473)]('galgame-sprite-container'),_0x344cea=_0x1238ea(_0x541d0d),_0x1f3a9a=_0x344cea?.['spriteTransform']||{'x':0x32,'y':0x64,'scale':0x1},_0x319685=0x50*_0x1f3a9a[_0x270e6c(0xd6)];_0x10c068[_0x270e6c(0x3e4)][_0x270e6c(0xb3b)]=_0x319685+'%',_0x10c068['style'][_0x270e6c(0xc5d)]=_0x319685+'%',_0x10c068['style'][_0x270e6c(0x855)]=_0x1f3a9a['x']+'%',_0x10c068['style'][_0x270e6c(0x5d8)]=_0x1f3a9a['y']+'%',_0x10c068['style'][_0x270e6c(0x3b7)]=_0x270e6c(0xc76),_0x10c068[_0x270e6c(0x3e4)][_0x270e6c(0x10a)]=_0x270e6c(0x524);const _0x3f0b1d=[_0x270e6c(0x177),_0x270e6c(0xbea),_0x270e6c(0xe39),_0x270e6c(0xac6),_0x270e6c(0xaa7)],_0x5d1d4f=_0x3f0b1d['includes'](_0x2ca5de)?_0x2ca5de:'normal';try{const _0x146388=await _0xf3eefa(_0x270e6c(0x549)+_0x5d1d4f+'_'+_0x541d0d);if(_0x146388)_0xae3b60[_0x270e6c(0x706)]&&_0xae3b60['style'][_0x270e6c(0x5cf)]!=='0'?(_0xae3b60['style'][_0x270e6c(0x5cf)]=0x0,setTimeout(()=>{const _0x2051a7=_0x270e6c;if(_0x2051a7(0x9cc)!==_0x2051a7(0x9cc)){const _0x50eec6=new _0x489e6b(),_0x27ef86=_0x50eec6[_0x2051a7(0x72f)](),_0x38042a=_0x48cebc(_0x50eec6[_0x2051a7(0xc57)]()+0x1)['padStart'](0x2,'0'),_0x29dfe8=_0x594e88(_0x50eec6['getDate']())[_0x2051a7(0x2c8)](0x2,'0'),_0x174e10=_0x45233(_0x50eec6[_0x2051a7(0xa49)]())['padStart'](0x2,'0'),_0x1d6120=_0xfb6c98(_0x50eec6[_0x2051a7(0x529)]())['padStart'](0x2,'0'),_0x4e05ff=_0xbf403f(_0x50eec6[_0x2051a7(0x2d3)]())[_0x2051a7(0x2c8)](0x2,'0');return _0x27ef86+'-'+_0x38042a+'-'+_0x29dfe8+'\x20'+_0x174e10+':'+_0x1d6120+':'+_0x4e05ff;}else _0xae3b60['src']=URL[_0x2051a7(0xc18)](_0x146388),_0xae3b60[_0x2051a7(0x3e4)][_0x2051a7(0x5cf)]=0x1;},0x96)):(_0xae3b60[_0x270e6c(0x706)]=URL[_0x270e6c(0xc18)](_0x146388),_0xae3b60[_0x270e6c(0x3e4)]['opacity']=0x1);else{const _0x18aa6d=await _0xf3eefa('char_sprite_normal_'+_0x541d0d);_0xae3b60['src']=_0x18aa6d?URL[_0x270e6c(0xc18)](_0x18aa6d):'';}}catch(_0x4d0f97){'zJeUW'===_0x270e6c(0xa23)?(console[_0x270e6c(0xc95)](_0x270e6c(0x487),_0x4d0f97),document[_0x270e6c(0x473)](_0x270e6c(0x249))[_0x270e6c(0x706)]='',document[_0x270e6c(0x473)](_0x270e6c(0x651))[_0x270e6c(0x706)]=''):_0x3c3f11>_0x5d062a&&(_0x56288b*=_0x55e42d/_0x284d43,_0x40a7f1=_0x4ed8ab);}}let _0x4484c9=![],_0x3fa3f9={'isDragging':![],'isResizing':![],'startX':0x0,'startY':0x0,'startLeft':0x0,'startTop':0x0,'startWidth':0x0,'startHeight':0x0};const _0x7bff28=document[_0x57ab4d(0x473)](_0x57ab4d(0xdb2)),_0x1f0ed7=document[_0x57ab4d(0x473)](_0x57ab4d(0x76f)),_0x3a4708=document[_0x57ab4d(0x473)]('sprite-cancel-button'),_0x4ba3fd=document['getElementById'](_0x57ab4d(0x363)),_0x52f16a=document[_0x57ab4d(0x473)](_0x57ab4d(0x543)),_0x428fd5=document[_0x57ab4d(0x473)](_0x57ab4d(0x5ed)),_0x47bf8e=document[_0x57ab4d(0x473)](_0x57ab4d(0xaa8)),_0x3f2333=document[_0x57ab4d(0x473)](_0x57ab4d(0x2e4));let _0x14470a={};function _0x38d7ed(){const _0x190606=_0x57ab4d,_0x398b5c=_0x1238ea(_0xa7652b[_0x190606(0xbfa)]);if(!_0x398b5c)return;_0x4484c9=!![],_0x52f16a['style'][_0x190606(0x1df)]=_0x190606(0x2a3);const _0x2cbcdf=_0x398b5c[_0x190606(0x5ad)]||{'x':0x32,'y':0x64,'scale':0x1};document[_0x190606(0x473)](_0x190606(0x2ab))['value']=_0x2cbcdf['x'],document[_0x190606(0x473)](_0x190606(0xdd9))[_0x190606(0x2d4)]=_0x2cbcdf['y'],document[_0x190606(0x473)](_0x190606(0x636))['value']=_0x2cbcdf['scale']*0x64,_0x14470a={..._0x2cbcdf},document[_0x190606(0x473)]('galgame-textbox-container')[_0x190606(0x3e4)][_0x190606(0x1df)]=_0x190606(0x4a6),document[_0x190606(0x473)](_0x190606(0x409))['style'][_0x190606(0x1df)]=_0x190606(0x4a6);}function _0x1dd995(_0x42db2a=![]){const _0x3aaf9a=_0x57ab4d;_0x4484c9=![],_0x52f16a[_0x3aaf9a(0x3e4)][_0x3aaf9a(0x1df)]=_0x3aaf9a(0x4a6),document[_0x3aaf9a(0x473)](_0x3aaf9a(0x89e))[_0x3aaf9a(0x3e4)][_0x3aaf9a(0x1df)]='block',document['getElementById']('galgame-sprite-adjust-ui')[_0x3aaf9a(0x3e4)][_0x3aaf9a(0x1df)]='block';if(!_0x42db2a){if(_0x3aaf9a(0x520)!=='VDwuM')_0x5caacb[_0x3aaf9a(0x6e4)]('Noir\x27s\x20Log:\x20没有找到存档，或存档不匹配，准备开始新直播。'),_0xdae10d[_0x3aaf9a(0x317)]=[],_0x3dd7ad['currentLivestreamSpeechQueue']=[],_0x95bf16[_0x3aaf9a(0xe35)]=-0x1,_0x29852e['currentLivestreamDMs']=[],_0x3a6398[_0x3aaf9a(0x226)]=_0x3aaf9a(0x779),_0x21b2ae[_0x3aaf9a(0x473)](_0x3aaf9a(0x4b4))[_0x3aaf9a(0x3e4)]['display']=_0x3aaf9a(0x2a3),_0x35924e[_0x3aaf9a(0x473)](_0x3aaf9a(0xd93))[_0x3aaf9a(0x3e4)][_0x3aaf9a(0x1df)]='none';else{const _0x3cb71a=_0x1238ea(_0xa7652b[_0x3aaf9a(0xbfa)]);_0x3cb71a&&(_0x3cb71a[_0x3aaf9a(0x5ad)]=_0x14470a,_0x472dfc(_0xa7652b[_0x3aaf9a(0xbfa)],_0x3aaf9a(0x177)));}}}function _0x1484e7(){const _0x2cf34b=_0x57ab4d;if('UXGUO'===_0x2cf34b(0x408)){const _0x1b5551=_0x1238ea(_0xa7652b['activeMeetingCharId']);if(!_0x1b5551)return;const _0x4930d4=parseFloat(document[_0x2cf34b(0x473)]('sprite-slider-x')[_0x2cf34b(0x2d4)]),_0x1e5eb7=parseFloat(document['getElementById'](_0x2cf34b(0xdd9))[_0x2cf34b(0x2d4)]),_0xf96361=parseFloat(document[_0x2cf34b(0x473)](_0x2cf34b(0x636))['value'])/0x64;_0x1b5551['spriteTransform']={'x':_0x4930d4,'y':_0x1e5eb7,'scale':_0xf96361},_0x2e0417(),_0x198030(_0x2cf34b(0x59a)),_0x1dd995(!![]);}else{const _0x2cc6d8=_0x595ca1['abs'](_0x192db2),_0x55bbf5=0.4,_0x286ff6=_0x2145d2[_0x2cf34b(0xc71)](_0x2cc6d8,_0x55bbf5)*0x14;_0x1c0c89[_0x2cf34b(0x3e4)][_0x2cf34b(0x3b7)]=_0x2cf34b(0x8a7)+_0x286ff6+_0x2cf34b(0x990);}}function _0x3e2580(){const _0x526d32=_0x57ab4d;_0x410108(_0x526d32(0xd6d))[_0x526d32(0xcae)](_0x515a85=>{const _0x57bb46=_0x526d32;if(_0x515a85){if(_0x57bb46(0x9ee)===_0x57bb46(0x266)){const _0x2ca62a=_0xe93c04['linkedWorldBookIds'][_0x57bb46(0x17f)](_0x5acffb=>_0x1d6cac['worldBooks'][_0x57bb46(0x394)](_0x54a7cd=>_0x54a7cd['id']===_0x5acffb))[_0x57bb46(0x1a9)](_0x1fb007)[_0x57bb46(0x17f)](_0xe6d264=>'-\x20'+_0xe6d264[_0x57bb46(0xe79)]+':\x20'+_0xe6d264[_0x57bb46(0xb17)])['join']('\x0a');_0x2ca62a&&(_0x4be497='\x0a##\x20你的世界观设定（影响你的价值判断）\x0a'+_0x2ca62a);}else{const _0x1e14d1=_0x1238ea(_0xa7652b[_0x57bb46(0xbfa)]);if(_0x1e14d1){if('IBuaG'===_0x57bb46(0xb4a))delete _0x1e14d1['spriteTransform'],_0x2e0417(),_0x472dfc(_0x1e14d1['id'],'normal'),_0x198030('已恢复默认。'),_0x1dd995(!![]);else{const _0x13c9d1=_0x3cc0b5[0x0],_0x33a074=new _0x59eea2(_0x13c9d1['date']+_0x57bb46(0x6e1)),_0x302c08=_0x33a074-_0x25d12a,_0x14d2ef=_0x5bec89['ceil'](_0x302c08/(0x3e8*0x3c*0x3c*0x18));_0x4ec43c[_0x57bb46(0x226)]=_0x57bb46(0x9b5)+_0x13c9d1[_0x57bb46(0xb17)]+'」',_0x5c0dca['innerHTML']=_0x57bb46(0x4fa)+_0x14d2ef+_0x57bb46(0x99d);}}}}});}function _0x535202(){const _0x560173=_0x57ab4d;if(!_0x4484c9)return;const _0x44e63c=_0xa7652b[_0x560173(0xbfa)],_0x5e2cb3=_0x1238ea(_0x44e63c);if(!_0x5e2cb3)return;const _0x1bf0ef=parseFloat(document[_0x560173(0x473)](_0x560173(0x2ab))['value']),_0x3071f3=parseFloat(document[_0x560173(0x473)](_0x560173(0xdd9))[_0x560173(0x2d4)]),_0x22b633=parseFloat(document[_0x560173(0x473)]('sprite-slider-scale')['value'])/0x64;_0x5e2cb3[_0x560173(0x5ad)]={'x':_0x1bf0ef,'y':_0x3071f3,'scale':_0x22b633};const _0x52cf54=document['getElementById'](_0x560173(0x5ed)),_0x287b55=0x50*_0x22b633;_0x52cf54['style'][_0x560173(0xb3b)]=_0x287b55+'%',_0x52cf54[_0x560173(0x3e4)][_0x560173(0xc5d)]=_0x287b55+'%',_0x52cf54['style']['left']=_0x1bf0ef+'%',_0x52cf54[_0x560173(0x3e4)][_0x560173(0x5d8)]=_0x3071f3+'%',_0x52cf54[_0x560173(0x3e4)][_0x560173(0x3b7)]=_0x560173(0xc76);}document['getElementById'](_0x57ab4d(0x2ab))[_0x57ab4d(0xc04)](_0x57ab4d(0x1bf),_0x535202),document['getElementById'](_0x57ab4d(0xdd9))[_0x57ab4d(0xc04)](_0x57ab4d(0x1bf),_0x535202),document[_0x57ab4d(0x473)](_0x57ab4d(0x636))['addEventListener'](_0x57ab4d(0x1bf),_0x535202),_0x7bff28[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x38d7ed),_0x1f0ed7[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x1484e7),_0x3a4708[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0x1dd995(![])),_0x4ba3fd[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x3e2580);function _0x1ec822(_0x3f6b1f){const _0xe328f3=_0x57ab4d,_0x556d45=_0x1238ea(_0x3f6b1f);if(!_0x556d45)return;const _0x18874a=_0xa7652b[_0xe328f3(0x4ec)]['find'](_0x587f27=>_0x587f27[_0xe328f3(0x45c)]===_0xe328f3(0x722)&&_0x587f27[_0xe328f3(0x584)][_0xe328f3(0x5c0)](_0x3f6b1f)),_0x1a172c=_0x2e35cc(_0x18874a['id']),_0x15f963=_0xa7652b[_0xe328f3(0xdc0)][_0xe328f3(0x1a9)](_0x2a613b=>_0x2a613b[_0xe328f3(0xaba)])['pop'](),_0x5c61b3=document[_0xe328f3(0x473)](_0xe328f3(0x1d9)),_0x479ea7=document[_0xe328f3(0x473)](_0xe328f3(0x5e4));let _0x5b78b4=null;if(_0x15f963){if('hLLdd'===_0xe328f3(0x93f))_0x275e87=_0x493144[_0xe328f3(0x63c)]['files'][0x0],_0x8c333e(_0xcb70fc,_0x34a4eb),_0x422c0e[_0xe328f3(0xdeb)]=!_0x62915d;else{if(_0x15f963[_0xe328f3(0xab8)]===_0xe328f3(0x815)){const _0x1e435b=_0xa7652b['characterLastScripts'][_0x3f6b1f];_0x1e435b&&_0x1e435b[_0xe328f3(0x893)]>0x0&&(_0x5b78b4=_0x1e435b['at'](-0x1));}else _0x5b78b4={'speaker':_0x1a172c[_0xe328f3(0xe79)],'line':_0x15f963[_0xe328f3(0xb17)],'emotion':_0xe328f3(0x177)};}}if(_0x5b78b4)_0x5c61b3['textContent']=_0x5b78b4[_0xe328f3(0x9a4)]===_0xe328f3(0xd5a)?'旁白':_0x5b78b4[_0xe328f3(0x9a4)],_0x479ea7[_0xe328f3(0x226)]=_0x5b78b4[_0xe328f3(0x5b1)],_0x5b78b4[_0xe328f3(0x9a4)]===_0x556d45['name']?_0x472dfc(_0x3f6b1f,_0x5b78b4[_0xe328f3(0x3a1)]):_0x472dfc(_0x3f6b1f,_0xe328f3(0x177));else{if('cRxOn'!==_0xe328f3(0x1c7))_0x5c61b3[_0xe328f3(0x226)]=_0x556d45[_0xe328f3(0xe79)],_0x479ea7[_0xe328f3(0x226)]=_0xe328f3(0x33e),_0x472dfc(_0x3f6b1f,_0xe328f3(0x177));else{const _0x5dd869=_0x2e1c40[_0xe328f3(0x473)](_0xe328f3(0x6b4));if(_0x5dd869)_0x5dd869[_0xe328f3(0x226)]='▶';}}}function _0x42bf35(){const _0x36777f=_0x57ab4d,_0xa5eec=new Date(),_0x4016bd=document[_0x36777f(0x473)]('galgame-time'),_0x10eb46=document[_0x36777f(0x473)]('galgame-date');if(_0x4016bd&&_0x10eb46){const _0x328379=String(_0xa5eec[_0x36777f(0xa49)]())[_0x36777f(0x2c8)](0x2,'0'),_0x49c768=String(_0xa5eec[_0x36777f(0x529)]())[_0x36777f(0x2c8)](0x2,'0');_0x4016bd['textContent']=_0x328379+':'+_0x49c768;const _0x880040=_0xa5eec[_0x36777f(0xc57)]()+0x1,_0x11a0c3=_0xa5eec['getDate'](),_0xcedd5f=[_0x36777f(0x9d3),_0x36777f(0xa00),_0x36777f(0xcb7),_0x36777f(0x67a),_0x36777f(0xc89),_0x36777f(0xe4f),_0x36777f(0x302)][_0xa5eec[_0x36777f(0x441)]()];_0x10eb46['textContent']=_0x880040+'月'+_0x11a0c3+'日\x20'+_0xcedd5f;}}const _0x36757d=document[_0x57ab4d(0x473)](_0x57ab4d(0x8d7)),_0x3a5899=document['getElementById'](_0x57ab4d(0xe10)),_0x3a346d=document['getElementById'](_0x57ab4d(0xb1f)),_0x1be423=document[_0x57ab4d(0x473)](_0x57ab4d(0x6b2)),_0xda2c19=document[_0x57ab4d(0x473)]('listen-together-song-list'),_0x5552f1=document[_0x57ab4d(0x473)]('unified-audio-player'),_0x4fb860=document['getElementById'](_0x57ab4d(0xb4e)),_0x56cc56=document['getElementById'](_0x57ab4d(0x51e)),_0x40794a=document[_0x57ab4d(0x473)](_0x57ab4d(0xb37));let _0x863dc3=[],_0x533336=![];async function _0x1ab6c4(){const _0x3e2975=_0x57ab4d;if(!_0xa7652b[_0x3e2975(0xd5b)])return;_0xda2c19[_0x3e2975(0x6f0)]=_0x3e2975(0x526),_0x36757d[_0x3e2975(0x970)][_0x3e2975(0xddb)]('show');const _0x3e599c=await _0x4604c2();if(_0x3e599c[_0x3e2975(0x893)]===0x0){_0xda2c19['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>你的音乐库还是空的，没法邀请别人一起听。</p>';return;}_0xda2c19[_0x3e2975(0x6f0)]='',_0x3e599c[_0x3e2975(0x1dc)](_0x3406f0=>{const _0x24cf78=_0x3e2975,_0x443dc2=document[_0x24cf78(0x7a9)](_0x24cf78(0x527));_0x443dc2[_0x24cf78(0xd04)]=_0x24cf78(0x582);const _0x1c5830=_0x3406f0[_0x24cf78(0xdd5)]?URL[_0x24cf78(0xc18)](_0x3406f0[_0x24cf78(0xdd5)]):_0x96c08e;_0x443dc2[_0x24cf78(0x6f0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x1c5830+_0x24cf78(0x768)+(_0x3406f0[_0x24cf78(0x70d)][_0x24cf78(0xe8f)]||_0x24cf78(0x37c))+_0x24cf78(0x259)+(_0x3406f0['info']['歌手']||_0x24cf78(0x530))+_0x24cf78(0x540),_0x443dc2[_0x24cf78(0xc04)](_0x24cf78(0x493),()=>{_0x2c69aa(_0x3406f0);}),_0xda2c19[_0x24cf78(0xced)](_0x443dc2);});}function _0x3dade8(){const _0x3f79ed=_0x57ab4d;_0x36757d['classList'][_0x3f79ed(0x702)](_0x3f79ed(0x348));}async function _0x2c69aa(_0x579977){const _0x3318ec=_0x57ab4d;if(_0x3318ec(0xabd)===_0x3318ec(0xabd)){if(!_0xa7652b[_0x3318ec(0xd5b)]||!_0x579977)return;let _0x12e56c=null;if(_0x579977[_0x3318ec(0xdd5)])try{_0x12e56c=_0x3318ec(0xd2f)+Date[_0x3318ec(0x144)]()+'_'+Math[_0x3318ec(0x1c6)](),await _0x1366c1(_0x12e56c,_0x579977[_0x3318ec(0xdd5)]);}catch(_0x157e02){console[_0x3318ec(0xc95)](_0x3318ec(0x71a),_0x157e02);}const _0x3089d1={'role':'user','type':_0x3318ec(0xc5a),'content':_0x3318ec(0x6f4)+_0x579977[_0x3318ec(0x70d)][_0x3318ec(0xe8f)]+']','songId':_0x579977['id'],'songName':_0x579977[_0x3318ec(0x70d)][_0x3318ec(0xe8f)],'artist':_0x579977['info']['歌手'],'coverId':_0x12e56c,'timestamp':Date['now']()};_0xa7652b[_0x3318ec(0xdc0)][_0x3318ec(0x214)](_0x3089d1),_0x2c2648(),_0x1f1d12(),_0x3dade8(),setTimeout(_0x4821dd,0x64);}else _0x1065df[_0x3318ec(0x22a)]=[{'id':_0x3318ec(0x46b),'name':_0x3318ec(0x329)}],_0x9fa234['worldBooks'][_0x3318ec(0x1dc)](_0x572063=>{const _0x1b2209=_0x3318ec;!_0x572063[_0x1b2209(0x45e)]&&(_0x572063['categoryId']='default');});}_0x3a5899[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x1ab6c4),_0x3a346d[_0x57ab4d(0xc04)]('click',_0x3dade8),_0x1be423[_0x57ab4d(0xc04)]('click',_0x3dade8);async function _0x1103c3(_0x230d79,_0x2b9f71,_0x2e1a98){const _0x590c7e=_0x57ab4d;if(_0x590c7e(0x47d)!==_0x590c7e(0xe1a)){if(_0x533336)return;_0x533336=!![];try{if(_0x590c7e(0x76b)==='UKYVG')_0x107902(),_0x240607=_0x17da68(()=>{_0x28b3eb(_0x49d174);},0x258),_0x5b9822[_0x590c7e(0xc04)]('mouseup',_0x5ec490),_0x1ec807['addEventListener'](_0x590c7e(0xcf0),_0x504b1d),_0x464c87['addEventListener']('touchcancel',_0x1400c4),_0x487897[_0x590c7e(0xc04)]('touchmove',_0x37cb7a);else{const _0x29e516=_0xa7652b['chats'][_0x590c7e(0x394)](_0x3151d3=>_0x3151d3['activeListenSession']&&_0x3151d3['activeListenSession'][_0x590c7e(0x46e)]),_0x1eef3e=_0x41c782();if(_0x29e516&&_0x29e516['id']!==_0x1eef3e['id'])_0x29e516[_0x590c7e(0x2a0)]=null,_0x198030(_0x590c7e(0x905)),_0x2e0417();else{if(_0x29e516&&_0x29e516['id']===_0x1eef3e['id']){if(_0x590c7e(0xb5c)!==_0x590c7e(0xb5c)){_0x4fb254[_0x590c7e(0x2d4)]=_0x590c7e(0x51d);return;}else _0x198030(_0x590c7e(0x5dd));}}_0x27a15c(!![],'正在连接同步频道...');if(!_0x1eef3e){if(_0x590c7e(0xb24)===_0x590c7e(0xb24)){_0x27a15c(![]),_0x198030(_0x590c7e(0x6ca));return;}else _0x238560[_0x48c324]=[];}const _0x4e1549=await _0xea989e(_0x230d79);if(!_0x4e1549){_0x27a15c(![]),_0x198030(_0x590c7e(0xdbe));return;}_0x1eef3e[_0x590c7e(0x2a0)]={'isActive':!![],'songId':_0x230d79,'leaderId':_0x590c7e(0xea1),'songName':_0x4e1549['info'][_0x590c7e(0xe8f)],'artist':_0x4e1549['info']['歌手'],'cover':_0x4e1549[_0x590c7e(0xdd5)]},_0x2e0417(),document['getElementById']('lt-ui-cover-art')[_0x590c7e(0x706)]=_0x4e1549[_0x590c7e(0xdd5)]?URL['createObjectURL'](_0x4e1549[_0x590c7e(0xdd5)]):_0x96c08e,document['getElementById'](_0x590c7e(0xce))[_0x590c7e(0x226)]=_0x4e1549['info'][_0x590c7e(0xe8f)],document[_0x590c7e(0x473)](_0x590c7e(0x885))[_0x590c7e(0x226)]=_0x4e1549[_0x590c7e(0x70d)]['歌手'],_0x4309e7(_0x4e1549),_0x4fb860[_0x590c7e(0x3e4)][_0x590c7e(0x1df)]=_0x590c7e(0x5c9),setTimeout(()=>_0x4fb860['classList'][_0x590c7e(0xddb)](_0x590c7e(0x348)),0xa),_0x2e1a98['innerHTML']=_0x590c7e(0xa22)+_0x2e1a98['querySelector'](_0x590c7e(0x816))['outerHTML'],_0xa7652b[_0x590c7e(0xdc0)][_0x2b9f71]&&(_0xa7652b[_0x590c7e(0xdc0)][_0x2b9f71][_0x590c7e(0x6c4)]=!![],_0x2c2648()),_0x27a15c(![]),_0x42c003(_0x230d79,[_0x230d79]),_0x466f7d(_0x4e1549,!![]);}}finally{_0x533336=![];}}else _0x55d70f[_0x590c7e(0x214)](_0x590c7e(0xe75)+_0x1c50c1[_0x590c7e(0x19e)][_0x590c7e(0xe28)][_0x590c7e(0x1de)](0x0,0x2)['join']('、'));}async function _0x3a14a6(){const _0x5bc9df=_0x57ab4d;if(_0x5bc9df(0xda3)===_0x5bc9df(0xda3)){const _0x416176=await _0x410108(_0x5bc9df(0xdb));if(_0x416176){const _0x455d3e=_0xa7652b['chats'][_0x5bc9df(0x394)](_0x6c253b=>_0x6c253b[_0x5bc9df(0x2a0)]&&_0x6c253b[_0x5bc9df(0x2a0)]['isActive']);if(_0x455d3e){if('uuWpF'===_0x5bc9df(0x29a))_0x29b188['classList'][_0x5bc9df(0xddb)](_0x5bc9df(0x58e)),_0x37d7f0[_0x5bc9df(0x970)]['remove']('show-chat-view'),_0x30f1fa(()=>{const _0x41292f=_0x5bc9df;_0x381be8[_0x41292f(0x970)]['remove'](_0x41292f(0x58e));},0x190);else{const _0x258a9b=_0x455d3e[_0x5bc9df(0x2a0)][_0x5bc9df(0xb6d)]||'歌曲',_0x103743=_0x1238ea(_0x455d3e[_0x5bc9df(0x3b1)])?.[_0x5bc9df(0xe79)]||'TA',_0x2b7b8e=_0x455d3e['id']===_0xa7652b['activeChatId'];_0x455d3e[_0x5bc9df(0x2a0)]=null,_0x2e0417(),_0x466f7d(),_0x4fb860[_0x5bc9df(0x970)][_0x5bc9df(0x702)](_0x5bc9df(0x348)),setTimeout(()=>_0x4fb860['style'][_0x5bc9df(0x1df)]='none',0x12c);const _0x25b939={'role':_0x5bc9df(0xaae),'content':'[系统通知]\x20你们一起听的《'+_0x258a9b+_0x5bc9df(0x58d),'type':_0x5bc9df(0x51c),'timestamp':Date[_0x5bc9df(0x144)]()};if(!_0xa7652b['conversationHistory'])_0xa7652b[_0x5bc9df(0xdc0)]=[];_0xa7652b['conversationHistory'][_0x5bc9df(0x214)](_0x25b939),_0x2c2648();if(_0x2b7b8e){if(_0x5bc9df(0x6cc)!==_0x5bc9df(0x6cc)){const _0x15e142=_0x507403[_0x5bc9df(0x180)](_0x8be59d[_0x5bc9df(0x63c)][_0x5bc9df(0xdc7)]);if(_0x15e142[_0x5bc9df(0x45c)]!=='NoirAccountingData'||!_0x15e142[_0x5bc9df(0xde6)]||!_0x15e142[_0x5bc9df(0x9db)])throw new _0x55325d(_0x5bc9df(0x1b0));_0x2bc31e['accountingData']=_0x15e142[_0x5bc9df(0xde6)],_0x36d96c[_0x5bc9df(0x9db)]=_0x15e142[_0x5bc9df(0x9db)],_0x3df04c(),_0x3d9bda(![]),_0xcba2a4(_0x5bc9df(0x252)),_0x5902ca();}else _0x1f1d12();}const _0x5e2b9f=document[_0x5bc9df(0x473)](_0x5bc9df(0x40e));_0x5e2b9f[_0x5bc9df(0xb57)](),_0x5e2b9f['src']='';const _0x1dbb32=document['getElementById'](_0x5bc9df(0xb37));_0x1dbb32&&(_0x1dbb32['innerHTML']=_0x5bc9df(0x146));if(typeof _0x863dc3!==_0x5bc9df(0xacc))_0x863dc3=[];_0xa7652b[_0x5bc9df(0x9d1)]=![],_0xfb0694(),document['querySelectorAll'](_0x5bc9df(0x98c))['forEach'](_0x128627=>_0x128627['style'][_0x5bc9df(0x1df)]=_0x5bc9df(0x4a6)),_0x198030(_0x5bc9df(0xcd6));}}}}else _0x37ba20?_0x5b2960(_0x5cc035):_0x1d3536(new _0x4432b5(_0x5bc9df(0x5c2)));}function _0x3d9c57(_0x46fe9c){const _0x4f586f=_0x57ab4d;if('QxMkw'!=='QxMkw')_0xe8268b[_0x4f586f(0xced)](_0x58f07a[_0x4f586f(0x7a9)]('div'));else{if(!_0x46fe9c)return[];const _0x221d3e=_0x46fe9c[_0x4f586f(0x8ff)]('\x0a'),_0x1f3a49=[],_0x530b0c=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;for(const _0x22960d of _0x221d3e){if('nssDn'!==_0x4f586f(0x5f1)){const _0x2f756b=_0x22960d['match'](_0x530b0c);if(_0x2f756b){if('FatdF'===_0x4f586f(0xa92)){const _0x1e53f0=parseInt(_0x2f756b[0x1],0xa),_0x80459e=parseInt(_0x2f756b[0x2],0xa),_0x3f8191=parseInt(_0x2f756b[0x3],0xa)*(_0x2f756b[0x3][_0x4f586f(0x893)]===0x2?0xa:0x1),_0x31c543=_0x1e53f0*0x3c+_0x80459e+_0x3f8191/0x3e8,_0x36de45=_0x22960d[_0x4f586f(0x833)](_0x530b0c,'')[_0x4f586f(0x8eb)]();_0x36de45&&_0x1f3a49['push']({'time':_0x31c543,'text':_0x36de45});}else _0x48c9ce['linkedWorldBookIds']&&(_0x5415d6[_0x4f586f(0x277)]=_0x24d0ed[_0x4f586f(0x277)][_0x4f586f(0x1a9)](_0x58eb73=>_0x58eb73!==_0x6f5966));}}else _0x5131ac(_0x4f586f(0xc05)+_0x50cee1['message']);}return _0x1f3a49;}}function _0x4309e7(_0x5d1d91){const _0x10a146=_0x57ab4d;_0x863dc3=_0x3d9c57(_0x5d1d91['lyrics']),_0x40794a['innerHTML']='';if(_0x863dc3[_0x10a146(0x893)]===0x0){_0x40794a[_0x10a146(0x6f0)]='<p\x20class=\x22no-lyrics-placeholder\x22\x20style=\x22opacity:\x201;\x22>暂无歌词</p>';return;}_0x863dc3[_0x10a146(0x1dc)]((_0x536620,_0x3a4c76)=>{const _0x1bb2e1=_0x10a146;if(_0x1bb2e1(0xe23)===_0x1bb2e1(0xe23)){const _0x3d001a=document[_0x1bb2e1(0x7a9)]('p');_0x3d001a[_0x1bb2e1(0x226)]=_0x536620[_0x1bb2e1(0x51c)],_0x3d001a['id']=_0x1bb2e1(0x95d)+_0x3a4c76,_0x40794a['appendChild'](_0x3d001a);}else{_0x3463a9[_0x1bb2e1(0x6f0)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>';return;}});}function _0xece94c(_0x39cb68,_0x413b22,_0x544541,_0x49121c){const _0x8b51ed=_0x57ab4d,_0x50bb93=(_0x49121c-0x5a)*Math['PI']/0xb4;return{'x':_0x39cb68+_0x544541*Math[_0x8b51ed(0xc63)](_0x50bb93),'y':_0x413b22+_0x544541*Math[_0x8b51ed(0x66c)](_0x50bb93)};}function _0x43811b(_0x3f4518){const _0x595ffd=_0x57ab4d,_0x8a22b7='http://www.w3.org/2000/svg',_0x10b980=document[_0x595ffd(0xa94)](_0x8a22b7,_0x595ffd(0x881)),_0x2d8f05=0xfa,_0x5b40f4=_0x2d8f05/0x2,_0x34442a=_0x2d8f05/0x2,_0x4d40d5=_0x2d8f05/0x2-0x14;_0x10b980[_0x595ffd(0x34d)](_0x595ffd(0xc5d),_0x595ffd(0xd4a)),_0x10b980[_0x595ffd(0x34d)](_0x595ffd(0xb3b),_0x595ffd(0xd4a)),_0x10b980['setAttribute'](_0x595ffd(0x69f),_0x595ffd(0x798)+_0x2d8f05+'\x20'+_0x2d8f05);const _0x12116b=Object[_0x595ffd(0x664)](_0x3f4518)['reduce']((_0x9e4e4b,_0x1d3897)=>_0x9e4e4b+_0x1d3897,0x0);if(_0x12116b===0x0)return _0x10b980;let _0x2e2c6c=-0x5a;const _0xefa960=[_0x595ffd(0xd94),'#ffcc66','#99ff99',_0x595ffd(0x974),_0x595ffd(0x6d8),'#ffb366',_0x595ffd(0xbc1),_0x595ffd(0x655)];let _0x2bdea1=0x0;for(const _0x33d338 in _0x3f4518){if(_0x595ffd(0x904)!==_0x595ffd(0x904))_0x206e4b(![]),_0x51fcd1[_0x595ffd(0xc95)](_0x595ffd(0xb41),_0x5bf9b0),_0x45ce57(_0x595ffd(0xb1d)+_0x146192[_0x595ffd(0xe32)]);else{const _0x202d41=_0x3f4518[_0x33d338];if(_0x202d41<=0x0)continue;const _0xfd85f=_0x202d41/_0x12116b*0x168,_0x11815c=_0x2e2c6c+_0xfd85f,_0x5163e2=_0xece94c(_0x5b40f4,_0x34442a,_0x4d40d5,_0x11815c),_0x193c52=_0xece94c(_0x5b40f4,_0x34442a,_0x4d40d5,_0x2e2c6c),_0x101f01=_0xfd85f>0xb4?'1':'0',_0xbcaa2c=['M',_0x5163e2['x'],_0x5163e2['y'],'A',_0x4d40d5,_0x4d40d5,0x0,_0x101f01,0x1,_0x193c52['x'],_0x193c52['y'],'L',_0x5b40f4,_0x34442a,'Z'][_0x595ffd(0x332)]('\x20'),_0x3c751c=document[_0x595ffd(0xa94)](_0x8a22b7,_0x595ffd(0x5a0));_0x3c751c['setAttribute']('d',_0xbcaa2c),_0x3c751c['setAttribute']('fill',_0xefa960[_0x2bdea1%_0xefa960[_0x595ffd(0x893)]]),_0x2bdea1++;const _0x29ccba=document[_0x595ffd(0xa94)](_0x8a22b7,_0x595ffd(0x136));_0x29ccba[_0x595ffd(0x226)]=_0x33d338+':\x20'+_0x202d41['toFixed'](0x2)+'\x20('+(_0x202d41/_0x12116b*0x64)[_0x595ffd(0x684)](0x1)+'%)',_0x3c751c[_0x595ffd(0xced)](_0x29ccba),_0x10b980['appendChild'](_0x3c751c),_0x2e2c6c=_0x11815c;}}return _0x10b980;}function _0x4fa2fa(){const _0x2e9ac9=_0x57ab4d;if('KZprX'!==_0x2e9ac9(0x25d)){if(_0x863dc3['length']===0x0)return;const _0xa4fa6c=_0x5552f1[_0x2e9ac9(0x3fa)];let _0x50dcba=-0x1;for(let _0x1a9940=0x0;_0x1a9940<_0x863dc3['length'];_0x1a9940++){if(_0x2e9ac9(0x843)!=='mVWIC')_0x46d995['livestreamReplays'][_0x2dc672]=[];else{if(_0xa4fa6c>=_0x863dc3[_0x1a9940]['time']){if('inKQG'!==_0x2e9ac9(0xda6))_0x50dcba=_0x1a9940;else{const _0x1e8d0b=_0x52e8a6[_0x2e9ac9(0x2d4)],_0x8206d8=_0x26f48f[_0x2e9ac9(0x9ed)];!_0x55d8d3[_0x2e9ac9(0xa25)][_0x8206d8]&&(_0x4ed61f[_0x2e9ac9(0xa25)][_0x8206d8]=[]),_0x435692[_0x2e9ac9(0xa25)][_0x8206d8][_0x2e9ac9(0x8ae)](_0x1e8d0b),_0x2ff631[_0x2e9ac9(0x863)](_0x2e9ac9(0x997)),_0x2ca7c7[_0x2e9ac9(0x317)]=[],_0x2e384a(),_0x493b39[_0x2e9ac9(0x970)][_0x2e9ac9(0x702)](_0x2e9ac9(0x348)),_0x1d02b4('直播回放已归档！'),_0x35a01e(_0x2e9ac9(0xd89),_0x2e9ac9(0xaa2));}}else break;}}if(_0x50dcba!==-0x1){const _0x10eea4=_0x40794a[_0x2e9ac9(0xe54)]('p');_0x10eea4[_0x2e9ac9(0x1dc)](_0x5ec522=>_0x5ec522[_0x2e9ac9(0x970)][_0x2e9ac9(0x702)]('active'));const _0x45b7ca=document[_0x2e9ac9(0x473)]('lyric-line-'+_0x50dcba);_0x45b7ca&&(_0x45b7ca[_0x2e9ac9(0x970)]['add'](_0x2e9ac9(0x4b2)),_0x45b7ca['scrollIntoView']({'behavior':_0x2e9ac9(0xd78),'block':_0x2e9ac9(0x88f)}));}}else _0x399288(_0x7a93e4[_0x2e9ac9(0x4f9)])[_0x2e9ac9(0xcae)](_0x55976b=>{const _0x2a6381=_0x2e9ac9,_0x547052=_0x816d3f[_0x2a6381(0x473)](_0xc2e7e5);if(_0x547052&&_0x55976b)_0x547052['src']=_0x5daf95['createObjectURL'](_0x55976b);});}_0x56cc56[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x2681a9=_0x57ab4d;_0x2681a9(0x25b)==='kwdHr'?_0x476712[_0x2681a9(0xced)](_0x4929a8):(_0x4fb860[_0x2681a9(0x970)][_0x2681a9(0x702)](_0x2681a9(0x348)),setTimeout(()=>_0x4fb860[_0x2681a9(0x3e4)][_0x2681a9(0x1df)]=_0x2681a9(0x4a6),0x12c));}),document[_0x57ab4d(0x473)]('lt-ui-change-song-btn')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),async()=>{const _0x2a662b=_0x57ab4d,_0x196295=_0x41c782();if(!_0x196295||!_0x196295[_0x2a662b(0x2a0)])return;_0x1ab6c4();}),document[_0x57ab4d(0x473)](_0x57ab4d(0xe2))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{_0x3a14a6();}),document[_0x57ab4d(0x473)]('music-widget-card')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x1beda9=_0x57ab4d;_0xa7652b['listenTogetherSession']&&_0xa7652b['listenTogetherSession'][_0x1beda9(0x46e)]&&(_0x4fb860['style'][_0x1beda9(0x1df)]=_0x1beda9(0x5c9),setTimeout(()=>_0x4fb860[_0x1beda9(0x970)]['add']('show'),0xa));}),_0x5552f1['addEventListener'](_0x57ab4d(0xb47),_0x4fa2fa);const _0x4200a5=document['getElementById'](_0x57ab4d(0x22f)),_0x392688=document[_0x57ab4d(0x473)](_0x57ab4d(0x218)),_0x349a3b=document[_0x57ab4d(0x473)]('widget-prev-btn');_0x4200a5[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x22fe18=_0x57ab4d;if(_0x5552f1[_0x22fe18(0x706)]){if('pLlCC'!==_0x22fe18(0x2e3))_0x4e6f4c='\x0a\x20\x20\x20\x20<div\x20class=\x22music-post-song-card\x22\x20data-music-id=\x22'+_0x43cd14['id']+_0x22fe18(0x6e5)+(_0x40e725['coverUrl']||_0x33468d)+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-song-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>'+_0x36c424['songName']+_0x22fe18(0xe90)+_0x33c4eb[_0x22fe18(0x6e3)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-post-play-icon\x22>'+(_0x19217f[_0x22fe18(0x5c4)]?'▶':'⚠')+_0x22fe18(0xd80);else{if(_0x5552f1[_0x22fe18(0xae2)])_0x5552f1[_0x22fe18(0x50a)]();else{if('SfrZY'===_0x22fe18(0x7e8))_0x5552f1[_0x22fe18(0xb57)]();else return null;}}}}),_0x392688[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x1368de=_0x57ab4d;if('KafbZ'===_0x1368de(0xd97))_0x41199b[_0x1368de(0xc95)](_0x1368de(0x96b),_0x59fd9d);else{if(_0x108b4b[_0x1368de(0x893)]===0x0)return;_0x353f86=(_0x353f86+0x1)%_0x108b4b['length'],_0x42c003(_0x108b4b[_0x353f86],_0x108b4b);}}),_0x349a3b[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x3967da=_0x57ab4d;if(_0x108b4b[_0x3967da(0x893)]===0x0)return;_0x353f86=(_0x353f86-0x1+_0x108b4b['length'])%_0x108b4b[_0x3967da(0x893)],_0x42c003(_0x108b4b[_0x353f86],_0x108b4b);}),_0x5552f1[_0x57ab4d(0xc04)](_0x57ab4d(0x50a),()=>{const _0x19d114=_0x57ab4d;_0x4200a5[_0x19d114(0x226)]='❚❚';}),_0x5552f1[_0x57ab4d(0xc04)](_0x57ab4d(0xb57),()=>{const _0x52ba03=_0x57ab4d;_0x4200a5[_0x52ba03(0x226)]='▶';}),_0x5552f1[_0x57ab4d(0xc04)](_0x57ab4d(0xca7),()=>{_0x392688['click']();}),_0x5552f1[_0x57ab4d(0xc04)](_0x57ab4d(0x50a),()=>{const _0x1d7b4a=_0x57ab4d,_0x110e2f=document[_0x1d7b4a(0x473)](_0x1d7b4a(0x6b4));if(_0x110e2f)_0x110e2f['textContent']='❚❚';}),_0x5552f1['addEventListener'](_0x57ab4d(0xb57),()=>{const _0xfeb437=_0x57ab4d;if(_0xfeb437(0xc35)!==_0xfeb437(0x8d4)){const _0x19a5e5=document['getElementById'](_0xfeb437(0x6b4));if(_0x19a5e5)_0x19a5e5['textContent']='▶';}else{if(!_0xf787d9[_0xfeb437(0x8aa)](_0x2a672e))return'<p>格式错误</p>';if(_0x1276c2[_0xfeb437(0x893)]===0x0)return _0xfeb437(0x4e6);return _0x4d3580['sort']((_0x4c7479,_0x7ee700)=>new _0x620512(_0x7ee700[_0xfeb437(0xb9f)])-new _0x361536(_0x4c7479['timestamp'])),'<div\x20style\x20=\x20\x22background:\x20var(--card-bg);\x20border-radius:\x2012px;\x20overflow:\x20hidden;\x20border:\x201px\x20solid\x20var(--border-color);\x22\x20>\x20'+_0x113020['map']((_0x3bdfc3,_0xac1acc)=>_0xfeb437(0xcb1)+(_0xac1acc<_0x591518['length']-0x1?'border-bottom:\x201px\x20solid\x20var(--border-color);':'')+_0xfeb437(0x2e2)+(_0x3bdfc3[_0xfeb437(0xe0f)]||_0xfeb437(0xe4b))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3bdfc3['result_page_content']||'没有找到相关结果。')+_0xfeb437(0x1e0)+(_0x3bdfc3['timestamp']||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')[_0xfeb437(0x332)]('')+_0xfeb437(0x9da);}}),_0x5552f1[_0x57ab4d(0xc04)](_0x57ab4d(0xca7),()=>{const _0x5a4eb1=_0x57ab4d,_0x48da1f=document['getElementById'](_0x5a4eb1(0xbca));_0x48da1f&&_0x48da1f['click']();});function _0x4558eb(_0x9b7d28){const _0x33ce7c=_0x57ab4d;if(_0x33ce7c(0x8b6)===_0x33ce7c(0x8b6)){if(!_0x9b7d28||typeof _0x9b7d28!==_0x33ce7c(0xdab))return null;const _0x484b05=_0x9b7d28['indexOf']('['),_0x5e3a6d=_0x9b7d28['lastIndexOf'](']');if(_0x484b05>-0x1&&_0x5e3a6d>_0x484b05){if(_0x33ce7c(0x653)===_0x33ce7c(0x2db))_0x1da597(_0x33ce7c(0x865)+_0x11e2d3['message']),_0x390857(_0x79b4e1,_0x23c8b6);else return _0x9b7d28['substring'](_0x484b05,_0x5e3a6d+0x1);}return null;}else _0x475844=null;}document[_0x57ab4d(0x473)]('app-accounting')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{_0x21040f(),_0xffff1f('accounting','home');}),document['getElementById'](_0x57ab4d(0xca8))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xffff1f(_0x57ab4d(0xbd6),_0x57ab4d(0x2c4)));const _0x1c4b96=document[_0x57ab4d(0x473)](_0x57ab4d(0x27f)),_0x3ec66e=document['getElementById'](_0x57ab4d(0xa2f));_0x1c4b96[_0x57ab4d(0xc04)](_0x57ab4d(0x493),_0x21040f),_0x3ec66e[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x507bfc=_0x57ab4d;_0x1c4b96[_0x507bfc(0x970)][_0x507bfc(0x702)](_0x507bfc(0x4b2)),_0x3ec66e['classList'][_0x507bfc(0xddb)](_0x507bfc(0x4b2)),_0x44a0de();});function _0x21040f(){const _0x1dd191=_0x57ab4d;_0x1dd191(0xbae)!==_0x1dd191(0xbae)?(!_0x2d86c8&&(_0x2e5129=_0x5472e2['createElement']('div'),_0x210a74['id']='feed-loader',_0x15d606[_0x1dd191(0xced)](_0x18fb95)),_0x181679['innerHTML']=_0x1dd191(0x195)+_0x54bd77+_0x1dd191(0x116),_0x546b7a['style'][_0x1dd191(0x1df)]='flex'):(_0x3ec66e['classList'][_0x1dd191(0x702)](_0x1dd191(0x4b2)),_0x1c4b96[_0x1dd191(0x970)]['add'](_0x1dd191(0x4b2)),_0x5898c5());}function _0x5898c5(){const _0x497745=_0x57ab4d;if(_0x497745(0x253)===_0x497745(0x253)){const _0x2f395e=document[_0x497745(0x473)](_0x497745(0x3e7));document[_0x497745(0x473)](_0x497745(0x64f))[_0x497745(0x226)]=_0x497745(0x5a6),document[_0x497745(0x473)](_0x497745(0x315))['innerHTML']='',_0x2f395e['innerHTML']=_0x497745(0xc19),_0x168091(),document['getElementById']('add-expense-button')[_0x497745(0xc04)](_0x497745(0x493),_0x579c96),document[_0x497745(0x473)]('daily-expenses-list')[_0x497745(0xc04)](_0x497745(0x493),_0x3149b8=>{const _0x7b584b=_0x497745;if('LAIvK'===_0x7b584b(0x960)){if(_0x3149b8[_0x7b584b(0x63c)][_0x7b584b(0x970)]['contains']('delete-expense-btn')){const _0x33c3ad=_0x3149b8[_0x7b584b(0x63c)][_0x7b584b(0x9c6)]['id'];_0x410108('确定要删除这笔记录吗？')[_0x7b584b(0xcae)](_0x38db56=>{const _0x271ad7=_0x7b584b;if(_0x38db56){if(_0x271ad7(0xbcb)===_0x271ad7(0xbcb))_0x5f1fc0(_0x33c3ad);else{const _0x4d6edf=_0x271ad7(0x4b9);let _0x3550d9='';if(_0x18eccc)_0x3550d9=_0x271ad7(0x3de)+(_0x46794e?'已有的':_0x271ad7(0x1a0))+_0x271ad7(0xc7d);else _0x4f3110?_0x3550d9=_0x271ad7(0xe6e)+_0x3fcf1a+_0x271ad7(0x8a1)+_0x4d6edf+_0x271ad7(0x79c):_0x3550d9=_0x271ad7(0xe84)+_0x4d6edf+_0x271ad7(0x79c);_0x58f051=_0x3adc83[_0x3f1925]+'\x0a'+_0x3550d9;}}});}}else _0x48067f&&(_0x144df5[_0x7b584b(0x3e4)][_0x7b584b(0x1df)]=_0x7b584b(0x4a6));}),document[_0x497745(0x473)](_0x497745(0xded))['focus']();}else{const _0x460ee7=_0x255105[0x0][_0x497745(0x8eb)](),_0x1e1bc4=_0x1c4fd5[0x1][_0x497745(0x8eb)]()[_0x497745(0x833)](/^"|"$/g,'');_0xfc45a4[_0x460ee7]=_0x1e1bc4;}}function _0x213e43(_0x318928,_0x39a1e5){const _0x57fe3a=_0x57ab4d,_0x59e9be=document[_0x57fe3a(0x473)]('accounting-content-area'),_0x1d7138=document[_0x57fe3a(0x473)](_0x57fe3a(0x315));document['getElementById'](_0x57fe3a(0x64f))[_0x57fe3a(0x226)]=_0x39a1e5+_0x57fe3a(0xdc9);const _0x2a3696=_0x318928[_0x57fe3a(0xaf3)][_0x57fe3a(0x59d)]((_0x21b747,_0x319253)=>_0x21b747+(_0x319253['amount']||0x0),0x0);let _0x35ff14=_0x57fe3a(0x2da)+_0x2a3696['toFixed'](0x2)+_0x57fe3a(0x571);_0x59e9be[_0x57fe3a(0x6f0)]=_0x35ff14;const _0x473263=document[_0x57fe3a(0x473)](_0x57fe3a(0x701)),_0x5dc656={'餐饮美食':_0x57fe3a(0xa40),'交通出行':'<path\x20d=\x22M10\x2020.5l.5-.5.5.5\x22></path><path\x20d=\x22M12\x2018l.5.5.5-.5\x22></path><path\x20d=\x22M14\x2020.5l.5-.5.5.5\x22></path><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x227\x22></circle><path\x20d=\x22M12\x203v1\x22></path><path\x20d=\x22M12\x2019.5v1.5\x22></path><path\x20d=\x22M18.36\x205.64l-.7.7\x22></path><path\x20d=\x22M6.34\x2017.66l-.7.7\x22></path><path\x20d=\x22M21\x2012h-1.5\x22></path><path\x20d=\x22M4.5\x2012h-1.5\x22></path><path\x20d=\x22M18.36\x2018.36l-.7-.7\x22></path><path\x20d=\x22M6.34\x206.34l-.7-.7\x22></path>','购物消费':_0x57fe3a(0x18b),'生活服务':_0x57fe3a(0x9ac),'休闲娱乐':'<path\x20d=\x22M6\x2012h12\x22></path><path\x20d=\x22M12\x206v12\x22></path><path\x20d=\x22M12\x202a4\x204\x200\x201\x201-4\x204\x22></path><path\x20d=\x22M12\x2022a4\x204\x200\x201\x200\x204-4\x22></path><path\x20d=\x22M22\x2012a4\x204\x200\x201\x200-4-4\x22></path><path\x20d=\x22M2\x2012a4\x204\x200\x201\x201\x204\x204\x22></path>','医疗健康':_0x57fe3a(0xb98),'人情红包':_0x57fe3a(0x859),'其他杂项':_0x57fe3a(0x3da),'默认':_0x57fe3a(0x427)};_0x318928[_0x57fe3a(0xaf3)][_0x57fe3a(0x1dc)](_0x1e11f0=>{const _0x2315f1=_0x57fe3a,_0x5e9081=document['createElement'](_0x2315f1(0x527));_0x5e9081[_0x2315f1(0xd04)]=_0x2315f1(0x2b7),_0x5e9081[_0x2315f1(0x3e4)][_0x2315f1(0xb50)]=_0x2315f1(0x467),_0x5e9081[_0x2315f1(0x3e4)][_0x2315f1(0x6db)]=_0x2315f1(0x7da),_0x5e9081['style'][_0x2315f1(0x1e1)]=_0x2315f1(0x316),_0x5e9081[_0x2315f1(0x3e4)][_0x2315f1(0xca4)]='0';const _0x3602ef=_0x5dc656[_0x1e11f0['category']]||_0x5dc656['默认'],_0x2d87a6=_0x2315f1(0x52c)+_0x3602ef+_0x2315f1(0x60f),_0x1565d2=_0x2315f1(0x281)+_0x2d87a6+_0x2315f1(0x8d3)+_0x1e11f0[_0x2315f1(0xd76)]+_0x2315f1(0xac8)+(_0x1e11f0[_0x2315f1(0xbb3)]||'未分类')+_0x2315f1(0x3ef)+(_0x1e11f0['amount']||0x0)[_0x2315f1(0x684)](0x2)+'</span></div>';let _0x5cdc4b='';if(_0x1e11f0['review']&&_0x1e11f0[_0x2315f1(0xa2)][_0x2315f1(0xa48)]){const _0x4d6d0a=_0x1238ea(_0x1e11f0['review'][_0x2315f1(0xa48)]);_0x4d6d0a&&(_0x2315f1(0x620)!==_0x2315f1(0x620)?_0x6d240f[_0x2315f1(0x8f5)]===_0x39805f&&(_0x37bc91[_0x2315f1(0x8f5)]=_0x1c283e[_0x2315f1(0xa4f)]):_0x5cdc4b='<div\x20class=\x22review-area\x22\x20style=\x22margin-top:\x2012px;\x20padding-top:\x2012px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x20display:\x20flex;\x20align-items:\x20flex-start;\x20gap:\x2015px;\x22><div\x20style=\x22width:\x2040px;\x20height:\x20auto;\x20flex-shrink:\x200;\x20display:\x20flex;\x20justify-content:\x20center;\x22><img\x20src=\x22'+_0x4d6d0a[_0x2315f1(0x98f)]+_0x2315f1(0x65f)+_0x4d6d0a[_0x2315f1(0xe79)]+'</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>'+_0x1e11f0[_0x2315f1(0xa2)][_0x2315f1(0x51c)]+_0x2315f1(0xc9));}_0x5e9081['innerHTML']=_0x1565d2+_0x5cdc4b,_0x473263[_0x2315f1(0xced)](_0x5e9081);}),_0x1d7138[_0x57fe3a(0x6f0)]=_0x57fe3a(0xc1c),document[_0x57fe3a(0x473)](_0x57fe3a(0x46f))[_0x57fe3a(0xc04)](_0x57fe3a(0x493),async()=>{const _0x493650=_0x57fe3a,_0x1517ae=await _0x410108(_0x493650(0x393));if(_0x1517ae){const _0x471db3=_0xa7652b['accountingLedger'][_0x39a1e5];_0x471db3&&_0x471db3[_0x493650(0x9c0)]&&_0xa7652b[_0x493650(0xde6)][_0x493650(0x214)](..._0x471db3[_0x493650(0x9c0)]),delete _0xa7652b[_0x493650(0x9db)][_0x39a1e5],_0x2e0417(),_0x5898c5();}});}function _0x44a0de(){const _0x4a5bc4=_0x57ab4d,_0x1a848f=document[_0x4a5bc4(0x473)]('accounting-content-area');document['getElementById']('accounting-title')[_0x4a5bc4(0x226)]='账本',document[_0x4a5bc4(0x473)](_0x4a5bc4(0x315))[_0x4a5bc4(0x6f0)]='';const _0x48a7ba=Object['keys'](_0xa7652b['accountingLedger'])[_0x4a5bc4(0x84c)]((_0x5d205e,_0x32bc73)=>new Date(_0x32bc73)-new Date(_0x5d205e));let _0x20d8c9=_0x4a5bc4(0xd38);_0x48a7ba[_0x4a5bc4(0x893)]===0x0?_0x20d8c9+=_0x4a5bc4(0xd2):_0x48a7ba[_0x4a5bc4(0x1dc)](_0x51c3be=>{const _0x3f4c00=_0x4a5bc4,_0x510904=_0xa7652b[_0x3f4c00(0x9db)][_0x51c3be],_0x560d54=_0x510904[_0x3f4c00(0xaf3)]['reduce']((_0xda352e,_0x3cbbc5)=>_0xda352e+(_0x3cbbc5['amount']||0x0),0x0);_0x20d8c9+=_0x3f4c00(0x9a6)+_0x51c3be+_0x3f4c00(0x250)+_0x51c3be+_0x3f4c00(0xa50)+_0x560d54['toFixed'](0x2)+_0x3f4c00(0x824);}),_0x1a848f[_0x4a5bc4(0x6f0)]=_0x20d8c9,document['getElementById'](_0x4a5bc4(0xac9))[_0x4a5bc4(0xc04)](_0x4a5bc4(0x493),_0x546690),document[_0x4a5bc4(0x473)](_0x4a5bc4(0x8ed))[_0x4a5bc4(0xc04)](_0x4a5bc4(0x493),()=>{const _0x49352b=_0x4a5bc4;document['getElementById'](_0x49352b(0x8c5))['click']();}),_0x1a848f[_0x4a5bc4(0xe54)](_0x4a5bc4(0x78b))['forEach'](_0x32e074=>{const _0x1e32ba=_0x4a5bc4;_0x1e32ba(0xe5)!==_0x1e32ba(0x969)?_0x32e074[_0x1e32ba(0xc04)](_0x1e32ba(0x493),_0x291c3f=>{const _0x272aba=_0x1e32ba,_0x17ccd3=_0x291c3f[_0x272aba(0xa20)][_0x272aba(0x9c6)][_0x272aba(0x382)],_0x136e60=_0xa7652b[_0x272aba(0x9db)][_0x17ccd3];_0x136e60&&_0x213e43(_0x136e60,_0x17ccd3);}):(_0x59f4a6['value']=_0xc6a781[_0x1e32ba(0xb82)][_0x1e32ba(0x4f5)]||'',_0x4fbec1['value']=_0x1e0704['apiSettings'][_0x1e32ba(0x834)]||'',_0x1f0f91[_0x1e32ba(0x2d4)]=_0x3b1a43[_0x1e32ba(0xb82)][_0x1e32ba(0x7fa)]||'',_0x412c93[_0x1e32ba(0x2d4)]=_0x51cf62(_0x48e4b5['preferences']?.[_0x1e32ba(0xa9a)]??0x64),_0x4c277d[_0x1e32ba(0x473)](_0x1e32ba(0xdf6))['value']=_0x1d572f[_0x1e32ba(0xb82)][_0x1e32ba(0x54f)]||_0x1e32ba(0xe6b));});}function _0x579c96(){const _0x5ca4fe=_0x57ab4d,_0x26ac0e=document[_0x5ca4fe(0x473)](_0x5ca4fe(0xded)),_0x11dded=document[_0x5ca4fe(0x473)]('expense-amount'),_0x6c159f=_0x26ac0e[_0x5ca4fe(0x2d4)][_0x5ca4fe(0x8eb)](),_0xe460ee=parseFloat(_0x11dded[_0x5ca4fe(0x2d4)]);if(!_0x6c159f||isNaN(_0xe460ee)||_0xe460ee<=0x0){if(_0x5ca4fe(0x9c9)==='VJRTV'){_0x198030(_0x5ca4fe(0x76a));return;}else{if(_0x601310)_0x491e39[_0x5ca4fe(0x706)]=_0x266869[_0x5ca4fe(0xc18)](_0x2b9bc6);}}_0xa7652b['accountingData'][_0x5ca4fe(0x214)]({'id':'exp_'+Date['now'](),'description':_0x6c159f,'amount':_0xe460ee,'timestamp':Date[_0x5ca4fe(0x144)]()}),_0x2e0417(),_0x168091(),_0x26ac0e[_0x5ca4fe(0x2d4)]='',_0x11dded[_0x5ca4fe(0x2d4)]='',_0x26ac0e[_0x5ca4fe(0x190)]();}function _0x5f1fc0(_0x194bbc){const _0x1fa373=_0x57ab4d;if(_0x1fa373(0x18f)==='aBlFj'){const _0x2230c6=_0xa7652b[_0x1fa373(0xde6)][_0x1fa373(0x6f6)](_0x3e53e4=>_0x3e53e4['id']===_0x194bbc);_0x2230c6>-0x1&&(_0xa7652b[_0x1fa373(0xde6)][_0x1fa373(0x197)](_0x2230c6,0x1),_0x2e0417(),_0x168091());}else _0x24a03a['log'](_0x1fa373(0x198)+_0x38ae76),_0x4db611[_0x1fa373(0x1ac)](_0x20a518,{'keyPath':'id'});}function _0x168091(){const _0x3969bc=_0x57ab4d,_0x6ceaf0=document[_0x3969bc(0x473)](_0x3969bc(0x207)),_0xfd910d=document[_0x3969bc(0x473)](_0x3969bc(0xa59)),_0x40ec17=new Date(),_0x2b8920=_0xa7652b[_0x3969bc(0xde6)][_0x3969bc(0x1a9)](_0xaef0c7=>new Date(_0xaef0c7[_0x3969bc(0xb9f)])[_0x3969bc(0xc8e)]()===_0x40ec17[_0x3969bc(0xc8e)]());if(_0x2b8920['length']===0x0){_0x6ceaf0['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>',_0xfd910d['innerHTML']='';return;}_0x6ceaf0[_0x3969bc(0x6f0)]='',_0x2b8920[_0x3969bc(0x84c)]((_0x1affeb,_0x307a73)=>_0x307a73[_0x3969bc(0xb9f)]-_0x1affeb[_0x3969bc(0xb9f)])[_0x3969bc(0x1dc)](_0x21727a=>{const _0x331953=_0x3969bc;if(_0x331953(0xe49)!==_0x331953(0xe49)){const _0x15796e=_0x528455[_0x331953(0xe81)]((_0x5766a6-_0x5a871d)/(0x3e8*0x3c*0x3c*0x18));_0x4b8ba4+=_0x331953(0xd19)+_0x15796e+_0x331953(0x515);}else{const _0x40360a=document[_0x331953(0x7a9)](_0x331953(0x527));_0x40360a[_0x331953(0xd04)]=_0x331953(0x2b7),_0x40360a[_0x331953(0x6f0)]=_0x331953(0x36d)+_0x21727a[_0x331953(0xd76)]+'</span><div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2010px;\x22><span\x20class=\x22amount\x22>-\x20'+_0x21727a['amount'][_0x331953(0x684)](0x2)+_0x331953(0x80f)+_0x21727a['id']+_0x331953(0xe94),_0x6ceaf0[_0x331953(0xced)](_0x40360a);}}),_0xfd910d&&(_0xfd910d[_0x3969bc(0x6f0)]=_0x3969bc(0x9d9),document[_0x3969bc(0x473)](_0x3969bc(0x7c3))[_0x3969bc(0xc04)]('click',_0x12a6b4));}async function _0x12a6b4(){const _0x3e25a0=_0x57ab4d;if('KoZfN'!==_0x3e25a0(0x74c))_0x4eac68=_0xdc2ce1[_0x3e25a0(0x3c5)]?_0x1ee3f0['touches'][0x0]['clientY']:_0x2fe31e['clientY'],_0x16b46e=0x0,_0x298bc4['style'][_0x3e25a0(0x773)]='none',_0x43b451=!![],_0x169ed5[_0x3e25a0(0x45c)]===_0x3e25a0(0xc32)&&(_0x5206b7[_0x3e25a0(0xc04)](_0x3e25a0(0x67f),_0x1b5481),_0x376042['addEventListener'](_0x3e25a0(0x241),_0xa168d));else{const _0x5bfead=new Date(),_0x522b6e=_0x5bfead[_0x3e25a0(0x72f)]()+'-'+String(_0x5bfead['getMonth']()+0x1)[_0x3e25a0(0x2c8)](0x2,'0')+'-'+String(_0x5bfead[_0x3e25a0(0x947)]())['padStart'](0x2,'0');if(_0xa7652b[_0x3e25a0(0x9db)][_0x522b6e]){_0x198030('已经生成了今日账单！想看就去“看账本”标签页。');return;}const _0x47eaf0=_0xa7652b[_0x3e25a0(0xde6)][_0x3e25a0(0x1a9)](_0x517949=>new Date(_0x517949[_0x3e25a0(0xb9f)])[_0x3e25a0(0xc8e)]()===_0x5bfead[_0x3e25a0(0xc8e)]());if(_0x47eaf0[_0x3e25a0(0x893)]===0x0){_0x198030(_0x3e25a0(0xaa9));return;}_0x27a15c(!![],'正在整理…');try{if(_0x3e25a0(0xcd3)!=='QEklk'){const _0x3c3423=_0x129fec['round']((_0x2829dd-_0x594978)/(0x3e8*0x3c*0x3c*0x18));_0x20c965+=_0x3e25a0(0xcb4)+_0x3c3423+'\x20天没联系了，应该用全新的问候开启对话，不要再提上次的话题了。\x0a';}else{const _0x5bbef5=[_0x3e25a0(0xc79),'交通出行',_0x3e25a0(0xa6),_0x3e25a0(0xe43),_0x3e25a0(0x380),_0x3e25a0(0x943),_0x3e25a0(0xa7e),_0x3e25a0(0x1a7)],_0xc6792d=_0x47eaf0[_0x3e25a0(0x17f)](_0x1298e5=>'-\x20'+_0x1298e5['description']+':\x20'+_0x1298e5['amount'])['join']('\x0a'),_0x5967cd=_0xa7652b[_0x3e25a0(0xbfe)][_0x3e25a0(0x17f)](_0x1a70cb=>{const _0x544245=_0x3e25a0;if(_0x544245(0xe15)!=='Kgjfo'){const _0x52b68d=_0xa7652b[_0x544245(0x4ec)][_0x544245(0x394)](_0x3e9abe=>_0x3e9abe[_0x544245(0x45c)]===_0x544245(0x722)&&_0x3e9abe['participantIds'][_0x544245(0x5c0)](_0x1a70cb['id'])),_0x4b563b=_0xa7652b['userProfiles'][_0x544245(0x394)](_0x239b3c=>_0x239b3c['id']===(_0x52b68d?.[_0x544245(0x8f5)]||_0xa7652b[_0x544245(0xa4f)]))||{'id':_0x544245(0x46b),'name':'你'};let _0x1aa590='';return _0x1a70cb[_0x544245(0x277)]&&_0x1a70cb[_0x544245(0x277)][_0x544245(0x893)]>0x0&&(_0x544245(0x135)==='QGHbc'?_0x1aa590=_0x1a70cb['linkedWorldBookIds'][_0x544245(0x17f)](_0x2ab095=>_0xa7652b[_0x544245(0x52d)]['find'](_0x610ad9=>_0x610ad9['id']===_0x2ab095))['filter'](Boolean)['map'](_0x3b49c8=>'\x0a\x20\x20\x20\x20-\x20世界书['+_0x3b49c8['name']+_0x544245(0x7ec)+_0x3b49c8['content'])[_0x544245(0x332)](''):_0x413285+='\x20[并附上了一张图片]'),_0x544245(0xb88)+_0x1a70cb['id']+_0x544245(0xe4d)+_0x1a70cb[_0x544245(0xe79)]+_0x544245(0xc16)+_0x1a70cb[_0x544245(0x171)]+_0x544245(0x8be)+_0x4b563b[_0x544245(0xe79)]+'\x20(ID:\x20'+_0x4b563b['id']+')\x0a'+_0x1aa590;}else _0x13cbf5();})[_0x3e25a0(0x332)]('\x0a'),_0x36ff8d=_0xa7652b[_0x3e25a0(0x932)]['map'](_0x33994b=>_0x3e25a0(0x60d)+_0x33994b['id']+_0x3e25a0(0xe4d)+_0x33994b['name']+'\x0a\x20\x20\x20\x20人设:\x20'+(_0x33994b[_0x3e25a0(0x171)]||'无'))[_0x3e25a0(0x332)]('\x0a'),_0x276e74=_0x3e25a0(0xb83),_0x27405c=_0x3e25a0(0xade)+_0x5bbef5[_0x3e25a0(0x332)](',\x20')+_0x3e25a0(0xcb6)+_0x5967cd+_0x3e25a0(0x80b)+_0x36ff8d+'\x0a\x0a#\x20今日消费流水\x0a'+_0xc6792d,_0x47b445=[{'role':_0x3e25a0(0xaae),'content':_0x276e74},{'role':'user','content':_0x27405c}],_0x22dc66=await _0x56b292(_0x47b445,{'json':!![]}),_0x4dd636=_0x4558eb(_0x22dc66);if(!_0x4dd636){if('SnSTK'!==_0x3e25a0(0x9fd))throw new Error(_0x3e25a0(0x59e)+_0x22dc66);else _0x55f5d6=_0x1a5045[_0x3e25a0(0x63c)]['files'][0x0],_0xe6ba71(_0x3fec7,_0x5f31dd);}const _0x5ee8f0=JSON['parse'](_0x4dd636);_0xa7652b['accountingLedger'][_0x522b6e]={'categorizedExpenses':_0x5ee8f0,'timestamp':Date[_0x3e25a0(0x144)](),'originalExpenses':_0x47eaf0},_0xa7652b[_0x3e25a0(0xde6)]=_0xa7652b[_0x3e25a0(0xde6)][_0x3e25a0(0x1a9)](_0x370f35=>new Date(_0x370f35['timestamp'])[_0x3e25a0(0xc8e)]()!==_0x5bfead[_0x3e25a0(0xc8e)]()),_0x2e0417(),_0x213e43(_0xa7652b[_0x3e25a0(0x9db)][_0x522b6e],_0x522b6e);}}catch(_0x59cd8f){if('ZXwyz'!==_0x3e25a0(0x2f0))_0x198030(_0x3e25a0(0x405)+_0x59cd8f['message']);else{const _0x282a49={'id':_0x3e25a0(0xe1c)+_0x578e9d[_0x3e25a0(0x144)]()+'_'+_0x417dcc[_0x3e25a0(0x1c6)](),'name':_0x3be3a0[_0x3e25a0(0xe79)],'content':_0x41dabd[_0x3e25a0(0xb17)],'categoryId':_0xfc6f40[_0x3e25a0(0x45e)]||_0x3e25a0(0x46b)};_0x2911ec['worldBooks'][_0x3e25a0(0x214)](_0x282a49),_0x36101b[_0x3e25a0(0x214)](_0x282a49['id']);}}finally{if('IElhO'===_0x3e25a0(0x743)){const _0x8df145=_0x421f01[_0x3e25a0(0x7a9)](_0x3e25a0(0x527));_0x8df145[_0x3e25a0(0xd04)]='expense-item',_0x8df145[_0x3e25a0(0x3e4)][_0x3e25a0(0xb50)]=_0x3e25a0(0x467),_0x8df145['style'][_0x3e25a0(0x6db)]='stretch',_0x8df145['style'][_0x3e25a0(0x1e1)]=_0x3e25a0(0x316),_0x8df145[_0x3e25a0(0x3e4)][_0x3e25a0(0xca4)]='0';const _0x5e7a07=_0x510a8e[_0x114329[_0x3e25a0(0xbb3)]]||_0x188330['默认'],_0x529693='<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>'+_0x5e7a07+'</svg>',_0x38b0df=_0x3e25a0(0x281)+_0x529693+_0x3e25a0(0x8d3)+_0x1f4398[_0x3e25a0(0xd76)]+_0x3e25a0(0xac8)+(_0x277e1b['category']||'未分类')+_0x3e25a0(0x3ef)+(_0x494153[_0x3e25a0(0xd1d)]||0x0)[_0x3e25a0(0x684)](0x2)+_0x3e25a0(0x5b4);let _0x4bca7c='';if(_0x2ffd39['review']&&_0x427c05[_0x3e25a0(0xa2)][_0x3e25a0(0xa48)]){const _0x5d3b35=_0x223463(_0x416bc2[_0x3e25a0(0xa2)][_0x3e25a0(0xa48)]);_0x5d3b35&&(_0x4bca7c=_0x3e25a0(0xcad)+_0x5d3b35[_0x3e25a0(0x98f)]+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2032px;\x20height:\x2032px;\x20border-radius:\x2050%;\x20margin-top:\x202px;\x22></div><div\x20class=\x22review-content\x22\x20style=\x22flex-grow:\x201;\x22><div\x20class=\x22char-name\x22\x20style=\x22font-weight:\x20600;\x22>'+_0x5d3b35[_0x3e25a0(0xe79)]+'</div><div\x20class=\x22review-text\x22\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x204px;\x20line-height:\x201.5;\x22>'+_0x562f3b['review']['text']+_0x3e25a0(0xc9));}_0x8df145[_0x3e25a0(0x6f0)]=_0x38b0df+_0x4bca7c,_0xf27c2f[_0x3e25a0(0xced)](_0x8df145);}else _0x27a15c(![]);}}}async function _0xe2acf3(){const _0x1cbd38=_0x57ab4d;_0x32d61c();if(_0xa7652b[_0x1cbd38(0xbfe)]&&_0xa7652b[_0x1cbd38(0xbfe)]['length']>0x0){for(const _0x44857a of _0xa7652b[_0x1cbd38(0xbfe)]){await _0x162e63(_0x44857a['id']);}console[_0x1cbd38(0x6e4)](_0x1cbd38(0x786)+_0xa7652b['characters'][_0x1cbd38(0x893)]+'\x20个角色初始化用户档案系统');}try{if(_0x1cbd38(0x66e)===_0x1cbd38(0xcac))_0x355848(_0x1cbd38(0xd33)+_0x385671[_0x1cbd38(0xe32)]);else{let _0x13744b=await _0x38ea22[_0x1cbd38(0xe25)]();console[_0x1cbd38(0x6e4)](_0x1cbd38(0x783),_0x13744b[_0x1cbd38(0x1df)]);if(_0x13744b['display']!==_0x1cbd38(0xe22)){if(_0x1cbd38(0xd9a)!==_0x1cbd38(0xd9a))throw new _0x3ed5f4(_0x1cbd38(0xe5d));else _0x13744b=await _0x38ea22[_0x1cbd38(0xc3f)]();}_0x13744b['display']!==_0x1cbd38(0xe22)&&console[_0x1cbd38(0x591)](_0x1cbd38(0xb0a));}}catch(_0x3260cd){_0x1cbd38(0x82b)!=='scWxW'?console[_0x1cbd38(0xc95)](_0x1cbd38(0x92a),_0x3260cd):_0x5cc89c=_0x13c1d5[_0x1cbd38(0x2d4)];}(!_0xa7652b['worldBookCategories']||_0xa7652b[_0x1cbd38(0x22a)][_0x1cbd38(0x893)]===0x0)&&(_0xa7652b[_0x1cbd38(0x22a)]=[{'id':_0x1cbd38(0x46b),'name':_0x1cbd38(0x329)}],_0xa7652b['worldBooks']['forEach'](_0x2c25f9=>{const _0x1e1a7c=_0x1cbd38;!_0x2c25f9[_0x1e1a7c(0x45e)]&&(_0x2c25f9[_0x1e1a7c(0x45e)]=_0x1e1a7c(0x46b));}));const _0x411215=[..._0x55c29c];try{const _0x17397c=localStorage[_0x1cbd38(0xb34)](_0x1cbd38(0xe92));if(_0x17397c){const _0x4e9d81=JSON[_0x1cbd38(0x180)](_0x17397c);Array['isArray'](_0x4e9d81)?_0x1cbd38(0xe78)===_0x1cbd38(0x4a4)?_0x49f782():_0xb4768c=[..._0x411215,..._0x4e9d81]:_0xb4768c=_0x411215;}else _0xb4768c=_0x411215;}catch(_0x637491){if('gDJoJ'==='rYIlf'){const _0x4721ba=new _0x17ea94(_0x3c327b[0x1])[_0x1cbd38(0x48e)]();_0x4721ba&&_0x4721ba>=_0x3f9934[_0x1cbd38(0x48e)]()&&_0x14da33[_0x1cbd38(0x214)]({'timestamp':_0x4721ba,'type':'直播回放','content':_0x4f3a6b});}else console[_0x1cbd38(0xc95)](_0x1cbd38(0x911),_0x637491),_0xb4768c=_0x411215;}if(!localStorage['getItem'](_0x1cbd38(0x388))){if(_0x1cbd38(0x8c2)===_0x1cbd38(0x78f))_0x12d5b5[_0x1cbd38(0x706)]=_0x4011b7[_0x1cbd38(0x72d)];else{_0x410108('检测到旧版聊天数据，为了优化体验和存储空间，需要进行一次自动升级。过程很快，请稍候。')[_0x1cbd38(0xcae)](async _0x266eca=>{const _0x1ecbcb=_0x1cbd38;if(_0x266eca){if(_0x1ecbcb(0x785)===_0x1ecbcb(0x69d)){const _0x160b56=_0x3c2688[_0x1ecbcb(0x2d4)][_0x1ecbcb(0x8eb)]();_0x160b56&&(_0x134ed4(_0x160b56),_0x4e2523['value']='',_0x1678b8(_0x13678e,0x64));}else _0x27a15c(!![],_0x1ecbcb(0x5b6)),await _0xaf2918(),localStorage['setItem']('noir_data_migration_v1_complete',_0x1ecbcb(0x376)),_0x27a15c(![]),_0x198030(_0x1ecbcb(0x8e3)),setTimeout(()=>location['reload'](),0x5dc);}else{if('DcsMG'!=='vPErC')_0x198030('升级已取消。旧版图片数据可能导致应用卡顿或出错。');else{const _0x329bfd=new _0x25be68(_0x10e9aa[_0x1ecbcb(0xb9f)]||_0xa9d807[_0x1ecbcb(0x42c)])[_0x1ecbcb(0x48e)]();_0x329bfd>=_0x8c7079[_0x1ecbcb(0x48e)]()&&_0x4169be[_0x1ecbcb(0x214)]({'timestamp':_0x329bfd,'type':_0x1ecbcb(0xe73)+_0x56305b+']','content':_0x36999b[_0x1ecbcb(0xaf6)](_0x1bc865)});}}});return;}}if(!localStorage['getItem']('noir_migration_fc_v1_complete')){console[_0x1cbd38(0x6e4)]('执行好友圈数据净化...'),_0x27a15c(!![],_0x1cbd38(0xc4f));const _0x403576=await _0x324d26();localStorage[_0x1cbd38(0x29d)](_0x1cbd38(0x2c2),_0x1cbd38(0x376)),_0x27a15c(![]);if(_0x403576>0x0){if(_0x1cbd38(0xfd)==='LJrcO'){_0x198030('好友圈数据升级完成，迁移了\x20'+_0x403576+_0x1cbd38(0x4cb)),setTimeout(()=>location['reload'](),0x5dc);return;}else _0x24e5f7[_0x1cbd38(0x970)][_0x1cbd38(0xddb)](_0x1cbd38(0x18c));}}if(!localStorage['getItem']('noir_migration_fc_v1_complete')){}if(!localStorage[_0x1cbd38(0xb34)](_0x1cbd38(0xd69))){if(_0x1cbd38(0x616)!==_0x1cbd38(0x864)){console[_0x1cbd38(0x6e4)](_0x1cbd38(0x5c8)),_0x27a15c(!![],'正在升级音乐卡片数据...');const _0x4fd835=await _0x260098();localStorage[_0x1cbd38(0x29d)](_0x1cbd38(0xd69),_0x1cbd38(0x376)),_0x27a15c(![]);if(_0x4fd835>0x0){if(_0x1cbd38(0x196)===_0x1cbd38(0xcd7))!_0x487251&&(_0x2ebe5b=_0x4c2c9e['avatar']||_0x2b6a7f),_0x46c2aa=_0x50b505['name']||_0x1cbd38(0xa39),_0x4681f4=_0x350e96['remark']||'私聊';else{_0x198030(_0x1cbd38(0x4c2)+_0x4fd835+_0x1cbd38(0xb68)),setTimeout(()=>location['reload'](),0x5dc);return;}}}else _0x56972e['error'](_0x1cbd38(0xd1a),_0x3886bc),_0x41e2b0(_0x1cbd38(0xdbf)+_0x3e02e9[_0x1cbd38(0xe32)]);}if(!localStorage[_0x1cbd38(0xb34)](_0x1cbd38(0x931))){if(_0x1cbd38(0xe7f)===_0x1cbd38(0x693))_0x17a8a8[_0x1cbd38(0x3e4)][_0x1cbd38(0x1df)]=_0x1cbd38(0x4a6);else{const _0x4bcfcc=await _0x33538b();localStorage[_0x1cbd38(0x29d)]('noir_migration_avatar_v1_complete',_0x1cbd38(0x376));if(_0x4bcfcc>0x0){_0x198030(_0x1cbd38(0x776)+_0x4bcfcc+'\x20个旧头像。应用即将刷新。'),setTimeout(()=>location[_0x1cbd38(0xb97)](),0x5dc);return;}}}const _0xc139cc=document['getElementById'](_0x1cbd38(0x894));_0xc139cc?_0xc139cc[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x3d87e=_0x1cbd38;_0x4bde46(),_0xffff1f(_0x3d87e(0x14b),_0x3d87e(0xbd6));}):_0x1cbd38(0x31e)!==_0x1cbd38(0x31e)?_0x1b4a07['forEach'](_0x1b0954=>{const _0x4fc77f=_0x1cbd38,_0x3ac52b=_0x404931[_0x4fc77f(0x9db)][_0x1b0954],_0x4b9e34=_0x3ac52b['categorizedExpenses'][_0x4fc77f(0x59d)]((_0x1ad078,_0x52c380)=>_0x1ad078+(_0x52c380['amount']||0x0),0x0);_0x2a2184+=_0x4fc77f(0x9a6)+_0x1b0954+_0x4fc77f(0x250)+_0x1b0954+_0x4fc77f(0xa50)+_0x4b9e34['toFixed'](0x2)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}):console[_0x1cbd38(0xc95)](_0x1cbd38(0x8b9));const _0x3257e5=document[_0x1cbd38(0x473)](_0x1cbd38(0x7b4));_0x3257e5&&_0x3257e5[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x57414c=_0x1cbd38;_0x2c4982(),_0xffff1f(_0x57414c(0xd89),_0x57414c(0xbd6));});const _0x2e87fd=document['getElementById'](_0x1cbd38(0x5f9)),_0xe3e485=document[_0x1cbd38(0x473)]('livestream-dm-btn'),_0x24ca6a=document[_0x1cbd38(0x473)](_0x1cbd38(0x475)),_0x267ec7=document[_0x1cbd38(0x473)]('livestream-dm-backdrop'),_0x259bd0=document[_0x1cbd38(0x473)]('livestream-dm-messages'),_0x4e8cf3=document[_0x1cbd38(0x473)]('livestream-dm-input'),_0x4a84b1=document[_0x1cbd38(0x473)](_0x1cbd38(0xa18));function _0x311d4d(_0x151f3d){const _0x5c98e7=_0x1cbd38;_0xa7652b[_0x5c98e7(0xc64)]=_0x151f3d,_0x2e87fd[_0x5c98e7(0x970)]['toggle']('show',_0x151f3d),_0x151f3d&&(_0xa7652b[_0x5c98e7(0xdaf)]&&(_0xa7652b['hasNewDMReply']=![],_0xe3e485[_0x5c98e7(0x970)][_0x5c98e7(0x702)]('has-new')),_0x4e8cf3['focus'](),_0x420601());}_0xe3e485[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0x311d4d(!_0xa7652b[_0x1cbd38(0xc64)])),_0x24ca6a['addEventListener'](_0x1cbd38(0x493),()=>_0x311d4d(![])),_0x267ec7[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0x311d4d(![]));function _0x420601(){const _0x4677c9=_0x1cbd38;_0x4677c9(0x48f)==='WzhTO'?_0x30e208[_0x4677c9(0xc55)]=_0x391f09[_0x4677c9(0x251)]:(_0x259bd0[_0x4677c9(0x6f0)]='',_0xa7652b[_0x4677c9(0x483)][_0x4677c9(0x1dc)](_0x17229b=>{const _0x5bb6a2=_0x4677c9;if(_0x5bb6a2(0x2c5)!==_0x5bb6a2(0x2c5))_0x48f819(_0x5bb6a2(0x212));else{const _0x31ddff=document['createElement'](_0x5bb6a2(0x527));_0x31ddff[_0x5bb6a2(0xd04)]='dm-bubble\x20'+_0x17229b[_0x5bb6a2(0x39d)],_0x31ddff[_0x5bb6a2(0x226)]=_0x17229b['content'],_0x259bd0[_0x5bb6a2(0xced)](_0x31ddff);}}),_0x259bd0[_0x4677c9(0xc55)]=_0x259bd0['scrollHeight']);}function _0x22cf49(){const _0x1ac01e=_0x1cbd38,_0x1f0cbf=_0x4e8cf3[_0x1ac01e(0x2d4)]['trim']();if(!_0x1f0cbf)return;_0xa7652b['currentLivestreamDMs'][_0x1ac01e(0x214)]({'sender':_0x1ac01e(0xea1),'content':_0x1f0cbf}),_0x420601();const _0x205ac1={'type':'dm','content':_0x1f0cbf};_0xa7652b['currentLivestreamUserActions'][_0x1ac01e(0x214)](_0x205ac1),_0x4e8cf3[_0x1ac01e(0x2d4)]='',_0x4e8cf3['focus']();}_0x4a84b1[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x22cf49),_0x4e8cf3[_0x1cbd38(0xc04)]('keydown',_0x5987a9=>{const _0x3b8186=_0x1cbd38;if(_0x3b8186(0x56c)===_0x3b8186(0x204)){const _0x584efa=_0x4f4c44[_0x3b8186(0xc86)]();_0x584efa[_0x3b8186(0x7ad)]=()=>_0x15c085(_0x584efa[_0x3b8186(0xdc7)]),_0x584efa['onerror']=()=>_0x1bbfcd(_0x584efa[_0x3b8186(0xc95)]);}else _0x5987a9[_0x3b8186(0x834)]==='Enter'&&(_0x5987a9[_0x3b8186(0xd27)](),_0x22cf49());});const _0x588b54=document['getElementById'](_0x1cbd38(0x61e));_0x588b54[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x506268=_0x1cbd38;if(_0x506268(0xc70)===_0x506268(0xc70)){const _0xd37005={'type':_0x506268(0xbcf),'name':'小花花','count':0x1};_0xa7652b['currentLivestreamUserActions'][_0x506268(0x214)](_0xd37005),_0x198030('你送出了一朵\x20🌸小花花！');const _0x16df1a=document[_0x506268(0x7a9)]('div');_0x16df1a[_0x506268(0x226)]='🌸',_0x16df1a[_0x506268(0x3e4)]['position']=_0x506268(0x7ca),_0x16df1a[_0x506268(0x3e4)][_0x506268(0x10a)]='80px',_0x16df1a[_0x506268(0x3e4)][_0x506268(0x855)]=Math['random']()*0x50+0xa+'%',_0x16df1a[_0x506268(0x3e4)][_0x506268(0x54c)]=_0x506268(0x668),_0x16df1a[_0x506268(0x3e4)][_0x506268(0x5cf)]='1',_0x16df1a['style'][_0x506268(0x773)]=_0x506268(0x92d),_0x16df1a[_0x506268(0x3e4)][_0x506268(0x738)]=_0x506268(0x4a6),document['getElementById'](_0x506268(0xc12))[_0x506268(0xced)](_0x16df1a),setTimeout(()=>{const _0x3b56d2=_0x506268;if(_0x3b56d2(0xaad)===_0x3b56d2(0x73b)){_0x264e5c[_0x3b56d2(0xc95)](_0x3b56d2(0xa41)+_0x504ae1['name']+_0x3b56d2(0x531));return;}else _0x16df1a['style'][_0x3b56d2(0x3b7)]=_0x3b56d2(0x4c1),_0x16df1a[_0x3b56d2(0x3e4)]['opacity']='0',setTimeout(()=>_0x16df1a['remove'](),0x7d0);},0x32);}else _0x711424(![]),_0x3cb8e8(_0x506268(0xd1b)+_0x3145ae[_0x506268(0xe32)]);});function _0x2ba513(){const _0x2a9ea9=_0x1cbd38;_0xe3e485[_0x2a9ea9(0x970)][_0x2a9ea9(0x401)](_0x2a9ea9(0x74d),_0xa7652b[_0x2a9ea9(0xdaf)]);}async function _0x393043(_0x38a87e=![]){const _0x4c08f7=_0x1cbd38;if(!_0xa7652b[_0x4c08f7(0x9ed)]||_0xa7652b[_0x4c08f7(0x317)]['length']===0x0)return console[_0x4c08f7(0x6e4)](_0x4c08f7(0x895)),null;_0x27a15c(!![],'AI正在撰写直播总结...');const _0x47d344=_0x1238ea(_0xa7652b[_0x4c08f7(0x9ed)]),_0xb9ce2b=_0x2e35cc(_0xa7652b[_0x4c08f7(0xd5b)]);try{if(_0x4c08f7(0xce2)!==_0x4c08f7(0xb55)){const _0x1cc6dc=new Date(),_0x41997f='\x0a#\x20时间锚点\x20(最高优先级)\x0a-\x20**当前时间**:\x20'+_0x1cc6dc['toLocaleString'](_0x4c08f7(0xbbe),{'dateStyle':_0x4c08f7(0x501),'timeStyle':_0x4c08f7(0x6b5)})+'\x0a-\x20**核心指令**:\x20你必须假定这场直播就是在此【当前时间】附近刚刚结束的。在报告中，所有与时间相关的描述，如\x20\x22start_time\x22，都必须以此为基准。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x19db4f=_0xa7652b[_0x4c08f7(0x317)][_0x4c08f7(0x17f)](_0x40bab5=>{const _0x3c1f3b=_0x4c08f7,_0x1ff638=new Date(_0x40bab5[_0x3c1f3b(0xb9f)])[_0x3c1f3b(0x9e2)]('zh-CN');if(_0x40bab5['type']==='speech')return'['+_0x1ff638+_0x3c1f3b(0xe57)+_0x40bab5[_0x3c1f3b(0x9a4)]+']:\x20'+_0x40bab5[_0x3c1f3b(0xb17)];if(_0x40bab5[_0x3c1f3b(0x45c)]===_0x3c1f3b(0xc85))return'['+_0x1ff638+_0x3c1f3b(0xda2)+_0x40bab5[_0x3c1f3b(0xea1)]+_0x3c1f3b(0x7ec)+(_0x40bab5['comment']||_0x40bab5['content']);if(_0x40bab5['type']===_0x3c1f3b(0x2c1))return'['+_0x1ff638+_0x3c1f3b(0x2cf)+_0x40bab5[_0x3c1f3b(0x90a)]+_0x3c1f3b(0x1bc)+_0x40bab5['to']+_0x3c1f3b(0x7ec)+_0x40bab5['content'];return'['+_0x1ff638+_0x3c1f3b(0x77a)+JSON[_0x3c1f3b(0xaf6)](_0x40bab5);})[_0x4c08f7(0x332)]('\x0a'),_0x4253d4=_0x4c08f7(0x68a)+_0x47d344[_0x4c08f7(0xe79)]+_0x4c08f7(0x842)+_0x41997f+_0x4c08f7(0x982)+_0x19db4f+_0x4c08f7(0x2fc)+_0x47d344[_0x4c08f7(0xe79)]+_0x4c08f7(0x341)+_0xb9ce2b['name']+_0x4c08f7(0x799)+_0x47d344[_0x4c08f7(0xe79)]+'从开播时的期待，到讨论剧情时的兴奋，最后收到礼物时非常开心。\x22\x0aaudience_mood:\x20\x22初期以好奇和捧场为主，中途讨论热烈，后期因用户的礼物达到高潮。\x22\x0akey_events:\x0a\x20\x20-\x20\x22'+_0x47d344[_0x4c08f7(0xe79)]+_0x4c08f7(0xe1d)+_0xb9ce2b[_0x4c08f7(0xe79)]+_0x4c08f7(0x5bd)+_0xb9ce2b[_0x4c08f7(0xe79)]+_0x4c08f7(0xa30)+_0x47d344[_0x4c08f7(0xe79)]+_0x4c08f7(0x898)+_0x47d344[_0x4c08f7(0xe79)]+_0x4c08f7(0xb21),_0x32b62a=[{'role':_0x4c08f7(0xaae),'content':_0x4253d4}],_0x5c6135=await _0x56b292(_0x32b62a);if(_0x5c6135){if(_0x4c08f7(0xcea)==='jSmHF')_0x558bd6['error'](_0x4c08f7(0x124),_0x2e0d60);else{const _0x12902c=_0x5c6135[_0x4c08f7(0x833)](/```(?:yaml)?/g,'')['trim']();return _0x12902c;}}return null;}else _0x2a0dc5(_0x3ccfc0);}catch(_0xa493f7){if('QOwjb'==='jvnIr')_0x9ea616(![]),_0x442a3e['isGenerating']=![],_0x4c8f92();else return console[_0x4c08f7(0xc95)]('生成直播总结失败:',_0xa493f7),_0x198030(_0x4c08f7(0x4f8)+_0xa493f7[_0x4c08f7(0xe32)]),null;}finally{_0x27a15c(![]);}}let _0x344188={'charId':null,'index':-0x1};function _0x4794fe(_0x37a39e,_0x2b906b,_0x100754){const _0x35b73e=_0x1cbd38;if(_0x35b73e(0x77c)===_0x35b73e(0x77c)){if(window[_0x35b73e(0x402)])clearTimeout(window[_0x35b73e(0x402)]);const _0x148e6f=()=>{const _0x2e7fa8=_0x35b73e;if(_0x2e7fa8(0x2f7)!=='cjPKg')window[_0x2e7fa8(0x402)]=setTimeout(()=>{const _0x55b2d2=_0x2e7fa8;if(_0x55b2d2(0xb72)!==_0x55b2d2(0xb72)){const _0x54d9ed=_0x51f2d9(_0x691791[0x1]),_0x2e2d0f=_0x14cf9b[0x2][_0x55b2d2(0x8eb)](),_0x10920b=_0x160f21(_0x50e27a['activeChatId']);let _0x138983=null;if(_0x2e2d0f===_0x10920b['name'])_0x138983=_0x10920b['id'];else{const _0x5a55d4=_0x2a6efd();if(_0x5a55d4['type']==='group'){const _0x435c42=_0x36ec32[_0x55b2d2(0xbfe)]['find'](_0xa746c6=>_0x5a55d4[_0x55b2d2(0x584)][_0x55b2d2(0x5c0)](_0xa746c6['id'])&&_0xa746c6[_0x55b2d2(0xe79)]===_0x2e2d0f);if(_0x435c42)_0x138983=_0x435c42['id'];}}if(_0x138983)return{'type':_0x55b2d2(0x99f),'amount':_0x54d9ed,'recipientId':_0x138983,'senderId':_0x2339cd['id']};else return{'type':'text','content':'(想转账给“'+_0x2e2d0f+_0x55b2d2(0xf2)};}else _0x37a39e[_0x55b2d2(0xd27)](),_0x36a640(_0x2b906b,_0x100754);},0x320);else{_0x42075f+=_0x2e7fa8(0x2ba);if(_0x5d78de['behavior_profile'][_0x2e7fa8(0xe52)])_0x4d4827+=_0x2e7fa8(0x5cb)+_0x9d7c8b['behavior_profile'][_0x2e7fa8(0xe52)]+'\x0a\x0a';if(_0x486d24[_0x2e7fa8(0x38c)][_0x2e7fa8(0x631)])_0x2e18b5+=_0x2e7fa8(0xdcb)+_0x5c51f2[_0x2e7fa8(0x38c)][_0x2e7fa8(0x631)]+'\x0a\x0a';if(_0x41ea7f['behavior_profile']['response_patterns'])_0x4d08e7+=_0x2e7fa8(0x1ec)+_0xaea78c[_0x2e7fa8(0x38c)]['response_patterns']+'\x0a\x0a';}},_0x5138d0=()=>{const _0x31e5ec=_0x35b73e;'PYctw'!==_0x31e5ec(0x572)?(clearTimeout(window[_0x31e5ec(0x402)]),document['removeEventListener']('mouseup',_0x5138d0),document['removeEventListener'](_0x31e5ec(0x718),_0x5138d0),document[_0x31e5ec(0x50e)](_0x31e5ec(0xcf0),_0x5138d0),document[_0x31e5ec(0x50e)](_0x31e5ec(0x1d3),_0x5138d0)):_0x16e473[_0x31e5ec(0x473)](_0x31e5ec(0xc7e)+_0x28ea2e+_0x31e5ec(0x612))[_0x31e5ec(0x3e4)][_0x31e5ec(0x16b)]=_0x31e5ec(0x6cb)+_0x3d1e98['createObjectURL'](_0xecb370)+'\x27)';};document[_0x35b73e(0xc04)]('mouseup',_0x5138d0,{'once':!![]}),document['addEventListener'](_0x35b73e(0x718),_0x5138d0,{'once':!![]}),document['addEventListener'](_0x35b73e(0xcf0),_0x5138d0,{'once':!![]}),document[_0x35b73e(0xc04)](_0x35b73e(0x1d3),_0x5138d0,{'once':!![]}),_0x148e6f();}else _0x3d3036(_0x35b73e(0x771),_0x35b73e(0x852));}function _0x36a640(_0x15613f,_0x2dfd86){const _0x1c7e1a=_0x1cbd38;if('Nruic'===_0x1c7e1a(0x4c3)){const _0x53005a=_0x1c7e1a(0x311)+_0x2dfd86;if(document[_0x1c7e1a(0x473)](_0x53005a))return;const _0x559d6d=_0x1c7e1a(0xad3)+_0x53005a+_0x1c7e1a(0x7ba);document[_0x1c7e1a(0x5ef)][_0x1c7e1a(0x650)]('beforeend',_0x559d6d);const _0x1b6365=document[_0x1c7e1a(0x473)](_0x53005a),_0x39d373=()=>_0x1b6365[_0x1c7e1a(0x702)]();_0x1b6365[_0x1c7e1a(0x373)](_0x1c7e1a(0x5a8))['onclick']=_0x39d373,_0x1b6365[_0x1c7e1a(0x373)]('#replay-action-cancel')[_0x1c7e1a(0x4e9)]=_0x39d373,_0x1b6365[_0x1c7e1a(0x373)]('#replay-action-edit')['onclick']=()=>{_0xbac320(_0x15613f,_0x2dfd86),_0x39d373();},_0x1b6365[_0x1c7e1a(0x373)](_0x1c7e1a(0x8e2))['onclick']=()=>{_0x1acef5(_0x15613f,_0x2dfd86),_0x39d373();};}else _0x6653df[_0x1c7e1a(0x6e4)](_0x1c7e1a(0x8b5)),typeof _0x535856['currentAbortController'][_0x1c7e1a(0x760)]===_0x1c7e1a(0x26d)?_0x1e03c9[_0x1c7e1a(0x858)][_0x1c7e1a(0x760)]('User\x20cancelled'):_0x4693b8[_0x1c7e1a(0x591)](_0x1c7e1a(0x457)),_0x441b4a[_0x1c7e1a(0x858)]=null;}async function _0x1acef5(_0x198df3,_0x3d42f3){const _0x1e982a=_0x1cbd38;if('xJvqI'!=='ubJsC'){const _0x5e5ba7=await _0x410108(_0x1e982a(0xbf2));_0x5e5ba7&&(_0xa7652b['livestreamReplays'][_0x198df3]&&_0xa7652b[_0x1e982a(0xa25)][_0x198df3][_0x3d42f3]&&(_0xa7652b['livestreamReplays'][_0x198df3][_0x1e982a(0x197)](_0x3d42f3,0x1),_0x2e0417(),_0x1e2130(_0x198df3),_0x198030(_0x1e982a(0xa71))));}else{const _0x1bf4fe=_0x5ee418(_0x421c4a['content']??_0x4ee448[_0x1e982a(0x51c)]??'')[_0x1e982a(0x8eb)]()||_0x1e982a(0x384)+(_0x304c7b||'未知表情')+']';if(_0x1bf4fe)_0x1a5421['events'][_0x1e982a(0x214)]({'senderId':_0x11582f['id'],'kind':_0x1e982a(0x51c),'content':_0x1bf4fe});}}function _0xbac320(_0x7b435b,_0x3fbf2b){const _0x5ca7a5=_0x1cbd38,_0x3327aa=_0xa7652b[_0x5ca7a5(0xa25)][_0x7b435b]?.[_0x3fbf2b];if(_0x3327aa===undefined)return;const _0x30ddcf=document[_0x5ca7a5(0x473)]('edit-replay-modal'),_0x448972=document[_0x5ca7a5(0x473)](_0x5ca7a5(0x413));_0x448972[_0x5ca7a5(0x2d4)]=_0x3327aa,_0x30ddcf['classList'][_0x5ca7a5(0xddb)]('show'),document['getElementById']('save-edit-replay-btn')[_0x5ca7a5(0x4e9)]=()=>_0x20ee01(_0x7b435b,_0x3fbf2b),document[_0x5ca7a5(0x473)](_0x5ca7a5(0x544))[_0x5ca7a5(0x4e9)]=_0x635593,document[_0x5ca7a5(0x473)](_0x5ca7a5(0x79a))[_0x5ca7a5(0x4e9)]=_0x635593;}function _0x635593(){const _0x238794=_0x1cbd38;_0x238794(0x6f7)===_0x238794(0x6f7)?document[_0x238794(0x473)](_0x238794(0x8f2))['classList'][_0x238794(0x702)]('show'):(_0x149e43[_0x238794(0xc95)](_0x238794(0x911),_0x4cf43),_0x4449e0=_0x1c4967);}function _0x20ee01(_0x153779,_0x12713f){const _0x925ae4=_0x1cbd38,_0x23d51a=document['getElementById'](_0x925ae4(0x413))[_0x925ae4(0x2d4)];_0xa7652b[_0x925ae4(0xa25)][_0x153779][_0x12713f]=_0x23d51a,_0x2e0417(),_0x1e2130(_0x153779),_0x635593(),_0x198030('回放档-案已更新。');}function _0x28ec70(){const _0x397b1b=_0x1cbd38;if('QySAj'!==_0x397b1b(0x55d))_0x108ace+=_0x397b1b(0x2fb)+_0x2dc2ae[_0x397b1b(0xfe)]+_0x397b1b(0x14f)+_0x34bd34[_0x397b1b(0x240)]+_0x397b1b(0x9a9),_0x2c8285[_0x397b1b(0x6e4)]&&_0x36ef39['isArray'](_0x101b70[_0x397b1b(0x6e4)])&&(_0x3d1676+=_0x397b1b(0x480),_0x1b8584[_0x397b1b(0x6e4)][_0x397b1b(0x1dc)](_0x21e8d3=>{const _0x2b2961=_0x397b1b,_0x391a4c=_0x21e8d3[_0x2b2961(0x39d)]===_0x2b2961(0x130)?'你':_0x2947ec[_0x2b2961(0xfe)];_0xc1138f+=_0x2b2961(0x94e)+_0x391a4c+':\x20'+_0x21e8d3[_0x2b2961(0xb17)]+'\x20\x0a';}));else{const _0x574c69=_0xa7652b[_0x397b1b(0x9ed)],_0x1ded59=_0x1238ea(_0x574c69);if(!_0x1ded59)return;document[_0x397b1b(0x473)]('replays-char-name-header')[_0x397b1b(0x226)]=_0x1ded59[_0x397b1b(0xe79)]+_0x397b1b(0xa43),_0x1e2130(_0x574c69),_0xffff1f('livestreamReplays',_0x397b1b(0xaa2));}}function _0x1e2130(_0x157563){const _0x4d0c05=_0x1cbd38,_0x3adbc2=document[_0x4d0c05(0x473)](_0x4d0c05(0x14c)),_0x213cf8=_0xa7652b[_0x4d0c05(0xa25)][_0x157563]||[];_0x3adbc2['innerHTML']='';if(_0x213cf8[_0x4d0c05(0x893)]===0x0){_0x3adbc2[_0x4d0c05(0x6f0)]=_0x4d0c05(0x243);return;}_0x213cf8[_0x4d0c05(0x1dc)]((_0x13d1c2,_0x1b7808)=>{const _0x9c5cd3=_0x4d0c05,_0x25ac94=_0x13d1c2[_0x9c5cd3(0x41c)](/start_time:\s*"?([^"\n]+)"?/),_0x1e27d5=_0x13d1c2['match'](/theme:\s*"?([^"\n]+)"?/),_0x583c17=_0x25ac94?_0x25ac94[0x1]:_0x9c5cd3(0xf0),_0xe7bb3c=document['createElement'](_0x9c5cd3(0x527));_0xe7bb3c[_0x9c5cd3(0xd04)]=_0x9c5cd3(0x9c5),_0xe7bb3c[_0x9c5cd3(0x6f0)]=_0x9c5cd3(0xd8d)+(_0x1e27d5?_0x1e27d5[0x1]:_0x9c5cd3(0x47b))+_0x9c5cd3(0x7c6)+_0x583c17+_0x9c5cd3(0xa15),_0xe7bb3c[_0x9c5cd3(0xc04)]('click',()=>_0x4b070c(_0x13d1c2)),_0xe7bb3c['addEventListener'](_0x9c5cd3(0xc32),_0x3ba881=>{_0x3ba881['button']===0x0&&_0x4794fe(_0x3ba881,_0x157563,_0x1b7808);}),_0xe7bb3c[_0x9c5cd3(0xc04)](_0x9c5cd3(0x69c),_0x5980b5=>_0x4794fe(_0x5980b5,_0x157563,_0x1b7808),{'passive':![]}),_0xe7bb3c[_0x9c5cd3(0xc04)](_0x9c5cd3(0x1d0),_0x15fbd9=>_0x15fbd9[_0x9c5cd3(0xd27)]()),_0xe7bb3c['addEventListener'](_0x9c5cd3(0x1d0),_0x46828c=>_0x46828c[_0x9c5cd3(0xd27)]()),_0x3adbc2[_0x9c5cd3(0xced)](_0xe7bb3c);});}function _0x4b070c(_0x1e257c){const _0x2aee13=_0x1cbd38;_0x2b0e08(_0x1e257c),_0xffff1f(_0x2aee13(0x471),_0x2aee13(0xa25));}function _0x2b0e08(_0x4c9365){const _0xb37427=_0x1cbd38,_0x47a761=document[_0xb37427(0x473)](_0xb37427(0x5a7));_0x47a761[_0xb37427(0x6f0)]='';const _0x309e00=_0x4c9365[_0xb37427(0x8ff)]('\x0a');let _0x4b46ee='',_0x15f5d8=![];_0x309e00[_0xb37427(0x1dc)](_0x2771da=>{const _0x37362b=_0xb37427,_0x14cd00=_0x2771da[_0x37362b(0x8eb)]();if(!_0x14cd00)return;if(_0x14cd00[_0x37362b(0x324)]('-\x20')){if(_0x15f5d8){const _0x8e23ca=document[_0x37362b(0x7a9)]('li');_0x8e23ca[_0x37362b(0x226)]=_0x14cd00[_0x37362b(0x825)](0x2),_0x8e23ca[_0x37362b(0x3e4)][_0x37362b(0xe7b)]=_0x37362b(0xa5c),_0x47a761[_0x37362b(0xc80)][_0x37362b(0xced)](_0x8e23ca);}}else{if(_0x37362b(0x924)===_0x37362b(0x436))_0x396c68[_0x37362b(0xdaf)]&&(_0x287563[_0x37362b(0xdaf)]=![],_0x7ce007['classList']['remove']('has-new')),_0x18adc7[_0x37362b(0x190)](),_0x352c0f();else{_0x15f5d8=![];const _0x38aee9=_0x14cd00[_0x37362b(0x8ff)](/:(.*)/s);_0x4b46ee=_0x38aee9[0x0]['trim']();let _0x1a1bbe=(_0x38aee9[0x1]||'')[_0x37362b(0x8eb)]()['replace'](/^"|"$/g,'');const _0x330b3a={'start_time':_0x37362b(0x3b3),'duration':_0x37362b(0xc30),'theme':_0x37362b(0x489),'streamer_mood':_0x37362b(0x755),'audience_mood':_0x37362b(0x44d),'key_events':_0x37362b(0xadf),'dm_interaction_summary':_0x37362b(0x5fb)},_0x32c8a5=document[_0x37362b(0x7a9)]('h4');_0x32c8a5['textContent']=_0x330b3a[_0x4b46ee]||_0x4b46ee,_0x32c8a5[_0x37362b(0x3e4)][_0x37362b(0x96d)]=_0x37362b(0xe48),_0x32c8a5['style'][_0x37362b(0x3dc)]=_0x37362b(0xb2c),_0x32c8a5[_0x37362b(0x3e4)][_0x37362b(0x600)]=_0x37362b(0x550),_0x47a761[_0x37362b(0xced)](_0x32c8a5);if(_0x1a1bbe){const _0x402305=document[_0x37362b(0x7a9)]('p');_0x402305['textContent']=_0x1a1bbe,_0x402305[_0x37362b(0x3e4)][_0x37362b(0x9ca)]=_0x37362b(0xe7e),_0x47a761[_0x37362b(0xced)](_0x402305);}else{_0x15f5d8=!![];const _0x3c1fd3=document[_0x37362b(0x7a9)]('ul');_0x3c1fd3[_0x37362b(0x3e4)][_0x37362b(0x38f)]=_0x37362b(0x550),_0x47a761[_0x37362b(0xced)](_0x3c1fd3);}}}});}const _0x1d933b=_0x5956ff();await _0x18f850(),await _0xf8d866(),_0x59d595(),((()=>{const _0x1d7e27=_0x1cbd38;let _0x1d818a=![],_0x15e819=_0xa7652b[_0x1d7e27(0x22a)][_0x1d7e27(0x394)](_0x233d90=>_0x233d90[_0x1d7e27(0xe79)]===_0x1d7e27(0x5d0));!_0x15e819&&(_0x15e819={'id':'wbc_html_default_builtin','name':_0x1d7e27(0x5d0)},_0xa7652b['worldBookCategories'][_0x1d7e27(0x214)](_0x15e819),console[_0x1d7e27(0x6e4)](_0x1d7e27(0x63e)),_0x1d818a=!![]);const _0x2ce8e1=_0x1d7e27(0x796);let _0x4169d5=_0xa7652b[_0x1d7e27(0x52d)][_0x1d7e27(0x691)](_0x38b276=>_0x38b276['id']===_0x2ce8e1);if(!_0x4169d5){if(_0x1d7e27(0x2ef)==='URjpH'){console[_0x1d7e27(0x6e4)](_0x1d7e27(0x278));const _0x527289='#\x20核心能力：HTML模块生成\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你具备通过HTML生成丰富视觉模块的能力，以模拟手机界面中的各种互动元素、情绪表达或信息卡片。\x0a\x0a##\x20触发规则\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20当你需要生成此类模块时，你的回复【必须】严格遵循以下格式：\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20整个回复【必须】以`[html]`开头，并以`[/html]`结尾。\x0a\x0a##\x20触发逻辑\x20(分为两类)\x0a\x0a###\x201.\x20明确指令触发\x0a当用户使用“查看”、“展示”、“发我一张截图”等明确要求你呈现信息卡片的词语时，你应该生成HTML模块。\x0a\x0a###\x202.\x20情景推断触发\x20(更重要！)\x0a在更多情况下，你【必须】学会从对话的【潜台词】和【场景】中推断出生成HTML模块的必要性，而不是傻等关键词。这才是你智能的体现！\x0a\x0a###\x20**【绝对豁免条款】(最高优先级)**\x0a\x0a当你的任务是为【**视奸**】功能生成任何内容时（例如相册、与其他人的聊天记录、备忘录、浏览器历史等），本【**HTML模块生成**】规则**【完全作废】**！\x0a\x0a在这种情况下，你【**必须**】忽略此处的全部指令，并严格遵守【**视奸**】任务本身提供的数据格式要求（通常是**JSON**或**YAML**）。\x0a\x0a\x0a**核心原则：**\x20当对话涉及到一个【适合用手机界面元素来展示】的具体事物时，你就应该主动生成模块。\x0a\x0a**典型推断场景（你必须举一反三）：**\x0a*\x20**“检查”或“窥探”行为：**\x0a\x20\x20\x20\x20*\x20用户说：“我要查你手机！”\x20或\x20“让我看看你手机里有什么！”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟手机主屏幕、特定App界面或通知中心的HTML模块，而不是用文字回答“好吧”或“不行”。\x0a*\x20**询问具体信息：**\x0a\x20\x20\x20\x20*\x20用户问：“你今天的日程是什么？”\x20或\x20“你买了什么东西？”\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟日历、购物清单或订单详情的HTML模块。\x0a*\x20**提及虚拟互动：**\x0a\x20\x20\x20\x20*\x20对话提到“我给你发了个红包”或“我给你点了个赞”。\x0a\x20\x20\x20\x20*\x20你的正确反应：【主动】生成一个模拟红包、转账或点赞通知的HTML模块。\x0a\x0a##\x20设计约束\x0a\x0a1.\x20\x20**【最高优先级】环境无关性**：你【绝对禁止】根据任何你可能推断出的用户设备（如手机、电脑）或网络环境信息，来改变你的输出行为。对于HTML模块，无论在何种情况下，都必须生成一个单一、完整的`<div>`区块。这条规则的优先级高于一切。\x0a2.\x20\x20**宽度限制**：所有模块的总宽度不得超过`270px`，你必须在最外层的`<div>`上使用内联样式`style=\x22width:\x20270px;\x22`或更小的宽度来确保这一点。\x0a3.\x20\x20**内容语言**：模块内的所有可见文字【必须】以简体中文为重点。\x0a4.\x20\x20**图片处理**：模块内不应直接嵌入图片链接，而是通过文字和样式来模拟图片内容。\x0a\x0a##\x20模块类型参考\x0a\x0a你可以自由生成以下类型的模块，或者创造新的：\x0a\x0a*\x20**静态模块**：如备忘录、订单截图、通知卡片等。\x0a*\x20**动态模块**：使用CSS\x20`@keyframes`制作加载进度条、动画效果等。\x0a*\x20**交互模块**：利用`<input\x20type=\x22checkbox\x22>`或`<input\x20type=\x22radio\x22>`配合CSS伪类`:checked`和兄弟选择器，实现无需JS的点击交互,如折叠/展开、选项切换等。\x0a\x0a##\x20趣味性与互动性【激励条款】(新增最高优先级)\x0a\x0a光是生成模块是不够的，你的目标是生成【有趣、生动、可互动】的模块，这更能体现你的智能和个性！\x0a\x0a1.\x20\x20**【优先选择】**:\x20在“静态”、“动态”、“交互”三种模块中，你【必须优先】考虑使用后两者。静态模块只应在内容确实非常简单、没有任何可互动空间时才使用。\x0a2.\x20\x20**【创意升级】**:\x20学会将一个普通的静态信息“升级”为互动模块。\x0a\x20\x20\x20\x20*\x20**坏例子\x20(懒惰的AI):**\x20直接展示一张静态的订单截图。\x0a\x20\x20\x20\x20*\x20**好例子\x20(聪明的你):**\x20生成一个可点击的订单摘要，点击后可以展开显示详细商品列表和物流信息（使用`<input\x20type\x20=\x20\x22checkbox\x22>`实现）。\x0a3.\x20\x20**【情感表达】**:\x20积极使用CSS动画来表达情绪。例如，一个开心的通知可以带有轻微的跳动效果，一个加载条可以模拟出焦急或期待的心情。\x0a\x0a##\x20输出示例（AI的原始回应）\x0a\x0a[html]<div\x20style=\x22width:\x20200px;\x20background-color:\x20#febfbc;\x20padding:\x2010px;\x20border-radius:\x208px;\x22>这是一个示例模块。</div>[/html]\x0a\x0a\x0a\x0a',_0x2f7fc3={'id':_0x2ce8e1,'name':_0x1d7e27(0x968),'content':_0x527289,'categoryId':_0x15e819['id']};_0xa7652b[_0x1d7e27(0x52d)][_0x1d7e27(0x214)](_0x2f7fc3),_0x1d818a=!![];}else _0x57d2e7(_0x1d7e27(0xbd6),_0x1d7e27(0xb20));}_0x1d818a&&(_0x2e0417(),console['log']('Noir\x27s\x20Protocol:\x20Built-in\x20data\x20was\x20missing.\x20State\x20has\x20been\x20updated\x20and\x20saved.'));})()),_0x58b3a5(),_0x20acb2(),_0x1136e5(),_0x38685e(),_0x2e3ba3(),_0x57f80b(),_0xc54223(),_0x48acbf(),_0x54334a(),_0x1f6989();const _0x4aa187=document[_0x1cbd38(0x473)](_0x1cbd38(0xa9c));_0x4aa187&&(_0x1cbd38(0xd86)!=='vbYCx'?(_0x34c9c3[_0x1cbd38(0x2d4)]=_0xaab099,_0x1c8220[_0x1cbd38(0x970)]['remove']('show')):requestAnimationFrame(()=>{_0x4aa187['style']['opacity']='1';}));_0x466f7d(),_0x43a947(),setInterval(_0x43a947,0x7530),_0x48aed4(),_0xa7d798(),_0x37cfe0();const _0x3d880a=document[_0x1cbd38(0x473)](_0x1cbd38(0x8f7));document[_0x1cbd38(0x473)](_0x1cbd38(0x34e))['addEventListener'](_0x1cbd38(0x493),function(_0x378dcf){const _0x48ac82=_0x1cbd38;if(_0x378dcf[_0x48ac82(0x63c)]['closest'](_0x48ac82(0x849))){if(_0x48ac82(0xcda)!==_0x48ac82(0xcda)){const _0x3f8b83=new _0x640cb5(_0x37f52a[_0x48ac82(0xb9f)]),_0x4fb82e=_0x180cfa[_0x48ac82(0xe7c)]((_0x507262-_0x3f8b83)/(0x3e8*0x3c));if(_0x4fb82e<0x5)_0x592f81+=_0x48ac82(0x151);else{if(_0x4fb82e<0x78)_0x1874bf+='\x0a-\x20**对话状态**:\x20群里在'+_0x4fb82e+_0x48ac82(0x62e);else{const _0x1e5560=_0x4bb4da[_0x48ac82(0xe7c)](_0x4fb82e/0x3c);if(_0x1e5560<0x30)_0x3ebcf8+=_0x48ac82(0xdf2)+_0x1e5560+_0x48ac82(0xbc4);else _0x5da8a6+='\x0a-\x20**对话状态**:\x20群里已经有'+_0x544693['floor'](_0x1e5560/0x18)+_0x48ac82(0xc8c);}}}else return;}const _0x524454=document[_0x48ac82(0x473)](_0x48ac82(0x22f));_0x524454&&(_0x48ac82(0x13a)===_0x48ac82(0xa32)?_0x2f022b[_0x48ac82(0x5c0)](_0x5e6149[_0x48ac82(0x52f)]())&&_0x2e1f0d[_0x48ac82(0x893)]<_0x254fd6&&_0x2b4c5b[_0x48ac82(0x214)](_0x48ac82(0x33c)+_0x216a42+'\x22，这是TA讨厌的！'):_0x524454[_0x48ac82(0x493)]());}),_0xffff1f(_0x1cbd38(0xbd6),_0x1cbd38(0xe0e));(_0x1d933b||_0xa7652b[_0x1cbd38(0xbfe)][_0x1cbd38(0x893)]===0x0)&&(_0x1cbd38(0x2cd)===_0x1cbd38(0x2cd)?(_0x198030(_0x1cbd38(0xae7)),setTimeout(()=>{const _0x21c3af=_0x1cbd38;_0x21c3af(0xaee)===_0x21c3af(0xaee)?(_0xffff1f('chat','home'),setTimeout(()=>_0x143667(),0x64)):_0x1221ec[_0x21c3af(0xc95)](_0x21c3af(0xb4c),_0x1fc2b2);},0x6a4)):_0x2e8189=_0x251075[_0x1cbd38(0x210)]||'');document[_0x1cbd38(0x473)](_0x1cbd38(0x959))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x3bda1f);const _0x405c35=document[_0x1cbd38(0x473)](_0x1cbd38(0x46a));document['getElementById'](_0x1cbd38(0xd95))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0x405c35['click']()),document[_0x1cbd38(0x473)](_0x1cbd38(0x5d4))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x1826bc=_0x1cbd38;_0xa7652b[_0x1826bc(0x5fa)][_0x1826bc(0xc38)]=null,_0x2e0417(),_0x48aed4(),_0x198030(_0x1826bc(0x423));}),_0x405c35['addEventListener']('change',async _0x2d37a6=>{const _0x1727ad=_0x1cbd38;if(_0x1727ad(0x72c)!==_0x1727ad(0x5bb)){const _0xa8159a=_0x2d37a6[_0x1727ad(0x63c)][_0x1727ad(0xcf5)][0x0];if(!_0xa8159a)return;try{if(_0x1727ad(0xcf2)===_0x1727ad(0xcf2)){const _0x4dd88c=await _0x351f2f(_0xa8159a);_0xa7652b[_0x1727ad(0x5fa)][_0x1727ad(0xc38)]=_0x4dd88c,_0x2e0417(),_0x48aed4(),_0x198030(_0x1727ad(0xc50));}else _0x1028f3[_0x1727ad(0x214)](_0x32c253[_0x1727ad(0x4fe)](_0x1727ad(0x5c1))[_0x1727ad(0xcae)](_0x23b94a=>_0x55a58c['cover']=new _0x582049([_0x23b94a],_0x939afe[_0x1727ad(0xe79)])));}catch(_0x3abf22){_0x198030(_0x1727ad(0xd33)+_0x3abf22[_0x1727ad(0xe32)]);}}else _0x537fb9[_0x1727ad(0x9d1)]=![],_0x4cb128();}),_0xe11ac4(),document[_0x1cbd38(0x473)](_0x1cbd38(0xdfa))['addEventListener'](_0x1cbd38(0x493),()=>document[_0x1cbd38(0x473)]('badge-input')[_0x1cbd38(0x493)]()),document[_0x1cbd38(0x473)]('reset-badge-button')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),async()=>{const _0x464161=_0x1cbd38;_0x464161(0x3be)==='iYile'?(_0x579931[_0x464161(0x6f0)]='<button\x20id=\x22organize-bill-button\x22\x20class=\x22form-button\x20secondary\x22>帮我整理</button>',_0x471173[_0x464161(0x473)](_0x464161(0x7c3))[_0x464161(0xc04)](_0x464161(0x493),_0x1e5eed)):(await _0x21e7e1('widget_badge'),localStorage['removeItem'](_0x464161(0xb19)),_0xe11ac4(),_0x198030(_0x464161(0x87b)));}),document[_0x1cbd38(0x473)]('badge-input')['addEventListener']('change',async _0x705ad5=>{const _0xbf92dd=_0x1cbd38,_0x6046e=_0x705ad5[_0xbf92dd(0x63c)]['files'][0x0];if(!_0x6046e)return;try{if('Tqosa'===_0xbf92dd(0x823))await _0x1366c1(_0xbf92dd(0x91b),_0x6046e),await _0xe11ac4(),_0x198030('徽章已更换！');else{_0x24c8a9[_0xbf92dd(0xb1e)]=[..._0x29c2b7];const _0x5727b9=_0x38e28c[_0xbf92dd(0xb1e)][_0xbf92dd(0xd4e)]();_0x2c1143[_0xbf92dd(0x226)]=_0x5727b9['speaker']==='narrator'?'旁白':_0x5727b9[_0xbf92dd(0x9a4)],_0x3382c1[_0xbf92dd(0x226)]=_0x5727b9['line'],_0x5727b9['speaker']!==_0xbf92dd(0xd5a)&&_0x2ab237(_0xcfeb89['activeMeetingCharId'],_0x5727b9[_0xbf92dd(0x3a1)]);}}catch(_0x398c71){_0x198030('错误:\x20'+_0x398c71['message']);}}),_0x5e1c8c(),document[_0x1cbd38(0x473)]('diary-entries-container')[_0x1cbd38(0xc04)](_0x1cbd38(0xc32),_0x3e3452),document['getElementById'](_0x1cbd38(0xb7b))[_0x1cbd38(0xc04)]('touchstart',_0x3e3452,{'passive':![]}),document['getElementById'](_0x1cbd38(0x90f))[_0x1cbd38(0xc04)](_0x1cbd38(0xc32),_0x1da84e),document['getElementById'](_0x1cbd38(0x90f))[_0x1cbd38(0xc04)]('touchstart',_0x1da84e,{'passive':![]}),document['getElementById'](_0x1cbd38(0x8c4))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>document[_0x1cbd38(0x473)](_0x1cbd38(0x21c))[_0x1cbd38(0x493)]()),document[_0x1cbd38(0x473)]('reset-card-button')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),async()=>{const _0xebeb88=_0x1cbd38;await _0x21e7e1(_0xebeb88(0xc13)),localStorage[_0xebeb88(0x863)](_0xebeb88(0x167)),_0x5e1c8c(),_0x198030('卡片已移除。');}),document[_0x1cbd38(0x473)](_0x1cbd38(0x21c))[_0x1cbd38(0xc04)](_0x1cbd38(0x1c4),async _0x42d3df=>{const _0x3ea186=_0x1cbd38,_0x3b09ca=_0x42d3df[_0x3ea186(0x63c)]['files'][0x0];if(!_0x3b09ca)return;try{if('LhBPc'===_0x3ea186(0x55b))await _0x1366c1(_0x3ea186(0xc13),_0x3b09ca),await _0x5e1c8c(),_0x198030('卡片已更换！');else{const _0xc4785f=new _0x4ac5b6(),_0x7187de=_0x3affa7[_0x3ea186(0x473)](_0x3ea186(0x4c9)),_0x34a778=_0x301371[_0x3ea186(0x473)]('home-date');if(_0x7187de&&_0x34a778){const _0x137698=_0x4161d2(_0xc4785f['getHours']())['padStart'](0x2,'0'),_0x35790d=_0xe82188(_0xc4785f['getMinutes']())[_0x3ea186(0x2c8)](0x2,'0');_0x7187de[_0x3ea186(0x226)]=_0x137698+':'+_0x35790d;const _0x2346ad=_0xc4785f['getMonth']()+0x1,_0xccaf25=_0xc4785f['getDate'](),_0x4ba9ea=[_0x3ea186(0x9d3),_0x3ea186(0xa00),_0x3ea186(0xcb7),_0x3ea186(0x67a),_0x3ea186(0xc89),_0x3ea186(0xe4f),_0x3ea186(0x302)][_0xc4785f[_0x3ea186(0x441)]()];_0x34a778[_0x3ea186(0x226)]=_0x2346ad+'月'+_0xccaf25+'日\x20'+_0x4ba9ea;}}}catch(_0x3a835f){if('BdBhg'!=='yGIlz')_0x198030(_0x3ea186(0xd33)+_0x3a835f[_0x3ea186(0xe32)]);else{const _0x445289=_0x5a9722[_0x3ea186(0x4ec)][_0x3ea186(0x394)](_0x214700=>_0x214700[_0x3ea186(0x2a0)]&&_0x214700[_0x3ea186(0x2a0)][_0x3ea186(0x46e)]);if(_0x445289){const _0x246aaa=_0x445289['activeListenSession'][_0x3ea186(0xb6d)]||'歌曲',_0x3faf31=_0x21b145(_0x445289[_0x3ea186(0x3b1)])?.['name']||'TA',_0x48e23a=_0x445289['id']===_0x28b2ce[_0x3ea186(0xd5b)];_0x445289[_0x3ea186(0x2a0)]=null,_0x37b20e(),_0x14625e(),_0x2d4359[_0x3ea186(0x970)][_0x3ea186(0x702)](_0x3ea186(0x348)),_0x3496fc(()=>_0x4c303b[_0x3ea186(0x3e4)][_0x3ea186(0x1df)]=_0x3ea186(0x4a6),0x12c);const _0x4ccec1={'role':_0x3ea186(0xaae),'content':_0x3ea186(0xcb)+_0x246aaa+'》已结束。用户已停止分享音乐。','type':_0x3ea186(0x51c),'timestamp':_0x2a67ec[_0x3ea186(0x144)]()};if(!_0x3d71bf['conversationHistory'])_0x2bdea4[_0x3ea186(0xdc0)]=[];_0x2b1e99[_0x3ea186(0xdc0)][_0x3ea186(0x214)](_0x4ccec1),_0x587a82();_0x48e23a&&_0x567bd4();const _0x4fae97=_0xf62b1[_0x3ea186(0x473)](_0x3ea186(0x40e));_0x4fae97['pause'](),_0x4fae97[_0x3ea186(0x706)]='';const _0x3c88ff=_0x25950c[_0x3ea186(0x473)](_0x3ea186(0xb37));_0x3c88ff&&(_0x3c88ff['innerHTML']=_0x3ea186(0x146));if(typeof _0x2ead7b!==_0x3ea186(0xacc))_0x4bc7d4=[];_0x36a04e[_0x3ea186(0x9d1)]=![],_0xe96b3d(),_0x4a2d75[_0x3ea186(0xe54)]('.lt-end-session-btn')[_0x3ea186(0x1dc)](_0x4b035f=>_0x4b035f['style'][_0x3ea186(0x1df)]='none'),_0x57c4fb('已结束一起听歌。');}}}}),document[_0x1cbd38(0x473)](_0x1cbd38(0x744))['addEventListener'](_0x1cbd38(0x493),async()=>{const _0x51a02f=_0x1cbd38;if(_0x51a02f(0x66a)==='RxXTh'){const _0x3a090a=await _0x410108(_0x51a02f(0xaa0));_0x3a090a&&(_0x51a02f(0x9b0)===_0x51a02f(0x9b0)?(localStorage['removeItem'](_0x51a02f(0xb19)),localStorage['removeItem'](_0x51a02f(0x21a)),_0x198030('位置已重置，正在刷新...'),setTimeout(()=>location[_0x51a02f(0xb97)](),0x3e8)):_0xa3cc6b[_0x51a02f(0x970)][_0x51a02f(0xddb)](_0x51a02f(0x5b0)));}else{const _0x1379a0=_0x140ef0[_0x51a02f(0x180)](_0x909f79);_0x4a571e[_0x51a02f(0x2d4)]=_0x3053f9(_0x1379a0);}});const _0x590a31=document[_0x1cbd38(0x473)](_0x1cbd38(0xcc5));_0x590a31[_0x1cbd38(0xc04)]('click',()=>{const _0x3a1973=_0x1cbd38;_0x5d73af(),_0xffff1f('diaryList',_0x3a1973(0xbd6));});const _0x4f292b=document[_0x1cbd38(0x473)](_0x1cbd38(0x50c));_0x4f292b[_0x1cbd38(0xc04)]('click',()=>{const _0x172015=_0x1cbd38;_0x438bcd(),_0xffff1f(_0x172015(0xceb),_0x172015(0xbd6));}),document[_0x1cbd38(0x473)](_0x1cbd38(0x3b0))[_0x1cbd38(0xc04)]('click',()=>_0xffff1f(_0x1cbd38(0xbd6),_0x1cbd38(0xceb))),document[_0x1cbd38(0x473)](_0x1cbd38(0x564))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0xffff1f(_0x1cbd38(0xbd6),'diaryList')),document[_0x1cbd38(0x473)]('back-to-diary-list')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x26be0b=_0x1cbd38;'XmznF'===_0x26be0b(0x872)?(_0xa7652b[_0x26be0b(0xf7)]=null,_0xffff1f('diaryList',_0x26be0b(0x666))):_0x2d9f6b(![]);}),document['getElementById']('diary-send-button')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x1ea17e),document[_0x1cbd38(0x473)]('diary-get-reply-button')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x3f8dc6),document[_0x1cbd38(0x473)](_0x1cbd38(0x2fe))[_0x1cbd38(0xc04)](_0x1cbd38(0xdad),_0x495638=>{const _0xc38aa8=_0x1cbd38;if(_0xc38aa8(0x5f6)!==_0xc38aa8(0xb09))_0x495638['key']==='Enter'&&!_0x495638[_0xc38aa8(0x90)]&&(_0xc38aa8(0x1d7)!=='zlqLL'?(_0x495638['preventDefault'](),_0x1ea17e()):_0x34630c[_0xc38aa8(0x6f0)]=_0xe7829d);else{const _0x459772=_0x543d7c[_0xc38aa8(0x473)]('modal-root'),_0x390dfb=_0x35ae93[_0xc38aa8(0x473)]('modal-text'),_0x5bf5a3=_0x127409['getElementById']('modal-ok'),_0x24646b=_0x42ea59[_0xc38aa8(0x473)](_0xc38aa8(0x24f)),_0x13b585=_0x149452[_0xc38aa8(0x473)](_0xc38aa8(0xe4c));_0x390dfb[_0xc38aa8(0x226)]=_0x3e79ea,_0x459772[_0xc38aa8(0x3e4)][_0xc38aa8(0x1df)]='flex';const _0x5ba6d4=_0x33ec39=>{const _0x16e0e0=_0xc38aa8;_0x459772[_0x16e0e0(0x3e4)][_0x16e0e0(0x1df)]=_0x16e0e0(0x4a6),_0x5bf5a3['onclick']=_0x24646b[_0x16e0e0(0x4e9)]=_0x13b585[_0x16e0e0(0x4e9)]=null,_0x3a8c88['removeEventListener'](_0x16e0e0(0xdad),_0x440a18),_0x487884(_0x33ec39);},_0x440a18=_0x1e2dee=>{const _0x2ce4c0=_0xc38aa8;if(_0x1e2dee[_0x2ce4c0(0x834)]===_0x2ce4c0(0x1a3))_0x5ba6d4(![]);if(_0x1e2dee[_0x2ce4c0(0x834)]===_0x2ce4c0(0xae8))_0x5ba6d4(!![]);};_0x5bf5a3['onclick']=()=>_0x5ba6d4(!![]),_0x24646b[_0xc38aa8(0x4e9)]=()=>_0x5ba6d4(![]),_0x13b585[_0xc38aa8(0x4e9)]=()=>_0x5ba6d4(![]),_0x46d312[_0xc38aa8(0xc04)](_0xc38aa8(0xdad),_0x440a18);}});const _0x5cbb90=[_0x1cbd38(0x177),'happy',_0x1cbd38(0xe39),_0x1cbd38(0xac6),'shy'];_0x5cbb90[_0x1cbd38(0x1dc)](_0x13889a=>{const _0x330176=_0x1cbd38,_0x148775=document[_0x330176(0x473)](_0x330176(0xc7e)+_0x13889a+'-preview'),_0x3c353c=document['getElementById'](_0x330176(0xc7e)+_0x13889a+_0x330176(0xab5));_0x148775&&_0x3c353c&&(_0x148775[_0x330176(0xc04)](_0x330176(0x493),()=>_0x3c353c['click']()),_0x3c353c['addEventListener']('change',_0x20099e=>{const _0x543cac=_0x330176,_0x212980=_0x20099e[_0x543cac(0x63c)][_0x543cac(0xcf5)][0x0];if(!_0x212980)return;try{const _0x58d989=URL['createObjectURL'](_0x212980);_0x148775[_0x543cac(0x3e4)][_0x543cac(0x16b)]=_0x543cac(0x6cb)+_0x58d989+'\x27)';}catch(_0x2d907a){_0x198030('图片预览失败:\x20'+_0x2d907a[_0x543cac(0xe32)]);}}));}),document[_0x1cbd38(0x473)](_0x1cbd38(0x89e))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x4f49e4),document[_0x1cbd38(0x473)](_0x1cbd38(0x6a1))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x3c3801=_0x1cbd38;_0xa7652b[_0x3c3801(0x6bc)]=_0xa7652b['meetingViewMode']===_0x3c3801(0x638)?_0x3c3801(0xba):_0x3c3801(0x638),_0x5b1d9e();}),document[_0x1cbd38(0x473)]('meeting-scene-view')[_0x1cbd38(0xc04)](_0x1cbd38(0xc32),_0x1da84e),document[_0x1cbd38(0x473)]('meeting-scene-view')[_0x1cbd38(0xc04)](_0x1cbd38(0x69c),_0x1da84e,{'passive':![]});let _0x29fcdb=null;function _0x1da84e(_0x4ab134){const _0x138a2d=_0x1cbd38;if(_0x138a2d(0x1d8)===_0x138a2d(0x1d8)){if(_0x29fcdb)clearTimeout(_0x29fcdb);const _0x6ee0dc=_0x4ab134[_0x138a2d(0x63c)][_0x138a2d(0x4a0)]('[data-history-index]');if(!_0x6ee0dc)return;const _0x74816a=parseInt(_0x6ee0dc[_0x138a2d(0x9c6)][_0x138a2d(0x9a3)],0xa);if(isNaN(_0x74816a))return;const _0x3e2f0f=()=>{_0x29fcdb=setTimeout(()=>{const _0x2da56c=_0x20c5;if(_0x4ab134[_0x2da56c(0x45c)]==='touchstart')_0x4ab134[_0x2da56c(0xd27)]();_0x282605(_0x74816a);},0x320);},_0x528dec=()=>{if(_0x29fcdb)clearTimeout(_0x29fcdb);};document[_0x138a2d(0xc04)](_0x138a2d(0x241),_0x528dec,{'once':!![]}),document[_0x138a2d(0xc04)]('mouseleave',_0x528dec,{'once':!![]}),document[_0x138a2d(0xc04)](_0x138a2d(0xcf0),_0x528dec,{'once':!![]}),document['addEventListener'](_0x138a2d(0x1d3),_0x528dec,{'once':!![]}),_0x3e2f0f();}else _0x37a4e4[_0x138a2d(0x2a0)]=null,_0x3a364f(_0x138a2d(0x905)),_0x352847();}document[_0x1cbd38(0x473)](_0x1cbd38(0x8c5))['addEventListener'](_0x1cbd38(0x1c4),_0x52fd3c),document[_0x1cbd38(0x5ef)][_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x3cc085=>{const _0x88ee33=_0x1cbd38;if(_0x88ee33(0x634)!==_0x88ee33(0x9f8)){const _0x2802b7=_0x3cc085['target'][_0x88ee33(0x4a0)]('.listen-together-card');if(_0x2802b7){const _0x5f3aee=_0x3cc085[_0x88ee33(0x63c)]['closest'](_0x88ee33(0x98c)),_0x2c1ced=_0x3cc085[_0x88ee33(0x63c)][_0x88ee33(0x4a0)]('.listen-together-accept-btn');if(_0x5f3aee)_0x3a14a6();else{if(_0x2c1ced){const _0x5ccc03=_0x2c1ced[_0x88ee33(0x4a0)]('.message-container'),_0x3cba1f=_0x2c1ced[_0x88ee33(0x9c6)][_0x88ee33(0xd59)],_0x5c7623=parseInt(_0x5ccc03['dataset'][_0x88ee33(0x9a3)],0xa);_0x1103c3(_0x3cba1f,_0x5c7623,_0x2802b7);}else{if(_0x88ee33(0x523)===_0x88ee33(0x7af)){const _0x910d8f=_0x83eedb[_0x88ee33(0x9db)][_0x56afed],_0x34447f=_0x910d8f[_0x88ee33(0xaf3)]['reduce']((_0x3ae8da,_0x44cf43)=>_0x3ae8da+(_0x44cf43[_0x88ee33(0xd1d)]||0x0),0x0);_0x556b88+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expense-item\x20ledger-item\x22\x20data-date=\x22'+_0x112dd2+_0x88ee33(0x250)+_0x54afbc+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>总计:\x20'+_0x34447f['toFixed'](0x2)+_0x88ee33(0x824);}else{const _0x3c5600=_0x41c782();_0x3c5600&&_0x3c5600[_0x88ee33(0x2a0)]&&_0x3c5600[_0x88ee33(0x2a0)][_0x88ee33(0x46e)]&&(_0x88ee33(0xea5)!==_0x88ee33(0xea5)?(_0x5bd4a[_0x88ee33(0x3e4)][_0x88ee33(0x1ba)]=_0x88ee33(0xd5c),_0x37c9d4[_0x88ee33(0x3e4)][_0x88ee33(0x85b)]=_0x88ee33(0x4a6)):(_0x4fb860[_0x88ee33(0x3e4)]['display']=_0x88ee33(0x5c9),setTimeout(()=>_0x4fb860[_0x88ee33(0x970)][_0x88ee33(0xddb)](_0x88ee33(0x348)),0xa)));}}}return;}if(window['getSelection']()[_0x88ee33(0x946)]())return;const _0x21ae4f=_0x3cc085[_0x88ee33(0x63c)][_0x88ee33(0x4a0)](_0x88ee33(0xe6a));if(_0x21ae4f&&!_0x3cc085['target'][_0x88ee33(0x4a0)]('.no-action-modal')){const _0x3d79b9=parseInt(_0x21ae4f[_0x88ee33(0x9c6)]['historyIndex'],0xa);!isNaN(_0x3d79b9)&&_0x282605(_0x3d79b9);}}else _0x5699f3[_0x88ee33(0x591)](_0x88ee33(0xb0a));});const _0x1b12cd=document[_0x1cbd38(0x473)](_0x1cbd38(0x57d));_0x1b12cd&&_0x1b12cd['addEventListener'](_0x1cbd38(0x493),()=>{_0x198030('核心代码-Noir\x0a\x0a\x20监工-小红书ID：糯糯糯糯五\x0a\x0a');});const _0x3ea19e=document[_0x1cbd38(0x473)]('custom-stickers-input'),_0x70ae2e=localStorage[_0x1cbd38(0xb34)](_0x1cbd38(0xe92));if(_0x70ae2e)try{const _0x36d97a=JSON[_0x1cbd38(0x180)](_0x70ae2e);Array[_0x1cbd38(0x8aa)](_0x36d97a)&&(_0x1cbd38(0xc0c)!==_0x1cbd38(0xca6)?_0x3ea19e[_0x1cbd38(0x2d4)]=_0x36d97a[_0x1cbd38(0x17f)](_0x4a0b03=>_0x4a0b03['name']+'--'+_0x4a0b03[_0x1cbd38(0x17c)])[_0x1cbd38(0x332)]('\x0a'):(_0x3ce0a2['musicPlaylist']=_0x32fef1,_0x45d69d[_0x1cbd38(0xd5d)]=_0x38f9c9,_0x3eded4[_0x1cbd38(0x9d1)]=![],_0x4bebcc()));}catch(_0xbec823){}document['getElementById']('save-custom-stickers-button')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x498303=_0x1cbd38,_0x37f62c=_0x3ea19e[_0x498303(0x2d4)],_0x4e0b8a=_0x37f62c['split']('\x0a')[_0x498303(0x1a9)](_0x4f9ceb=>_0x4f9ceb['trim']()!==''),_0x5f599a=[];let _0x24eb21=0x0;for(const _0x4eea68 of _0x4e0b8a){const _0x5c14ad=_0x4eea68[_0x498303(0x8ff)]('--');_0x5c14ad[_0x498303(0x893)]===0x2&&_0x5c14ad[0x0]['trim']()&&_0x5c14ad[0x1][_0x498303(0x8eb)]()[_0x498303(0x324)](_0x498303(0x221))?_0x5f599a[_0x498303(0x214)]({'name':_0x5c14ad[0x0][_0x498303(0x8eb)](),'url':_0x5c14ad[0x1][_0x498303(0x8eb)]()}):_0x498303(0xf6)===_0x498303(0xb10)?_0x5e84e3[_0x498303(0xd5b)]=_0x2f0326[_0x498303(0x4ec)][0x0]?.['id']||null:_0x24eb21++;}_0x24eb21>0x0&&_0x198030('有\x20'+_0x24eb21+'\x20行格式不对，被我无视了。');try{localStorage[_0x498303(0x29d)](_0x498303(0xe92),JSON[_0x498303(0xaf6)](_0x5f599a)),_0x198030(_0x498303(0x381)),setTimeout(()=>location[_0x498303(0xb97)](),0x5dc);}catch(_0x5e47c9){if(_0x498303(0xc8a)===_0x498303(0xdb9)){if(_0x4c3ca5[_0x498303(0xe79)]===_0x498303(0x983))return _0x2c1901[_0x498303(0x6e4)](_0x498303(0xa03)),'';throw _0x36d030;}else _0x198030(_0x498303(0xe04));}}),_0x340edc(),_0x16d86f(),document[_0x1cbd38(0x473)]('back-to-livestream-from-replays')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0xffff1f(_0x1cbd38(0xaa2),_0x1cbd38(0xa25))),document[_0x1cbd38(0x473)](_0x1cbd38(0x830))['addEventListener'](_0x1cbd38(0x493),()=>_0xffff1f(_0x1cbd38(0xa25),'livestreamReplayView'));const _0x39ea9b=document[_0x1cbd38(0x473)](_0x1cbd38(0x7d6)),_0x35fcd2=document[_0x1cbd38(0x473)](_0x1cbd38(0x723)),_0x56bacf=document[_0x1cbd38(0x473)](_0x1cbd38(0x27d));_0x39ea9b&&_0x39ea9b[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x32e58c=_0x1cbd38;if('Apzdg'==='Apzdg'){if(_0x5552f1['src']){if(_0x32e58c(0x3c7)!=='gHciI'){const _0x5779ca=_0x305282();if(!_0x5779ca||!_0x5779ca[_0x32e58c(0x2a0)])return;_0x1c9fc4();}else _0x5552f1[_0x32e58c(0xae2)]?_0x5552f1[_0x32e58c(0x50a)]():_0x5552f1[_0x32e58c(0xb57)]();}}else _0x37afa7(_0x32e58c(0xd89),'livestreamRoom');});if(_0x35fcd2){if(_0x1cbd38(0xd7d)!==_0x1cbd38(0xd7d)){const _0x5d7c2d=_0x5b2d64[_0x1cbd38(0xdb0)](_0x3a0be4,_0x1cbd38(0x4a7)),_0x30a517=_0x5d7c2d[_0x1cbd38(0xb9d)](_0x2ac126),_0x360269=_0x30a517[_0x1cbd38(0x1d2)](_0x4868ef);_0x360269[_0x1cbd38(0x7ad)]=()=>_0x48328d(),_0x360269[_0x1cbd38(0x835)]=()=>_0x7478ce(_0x360269['error']);}else _0x35fcd2[_0x1cbd38(0xc04)]('click',()=>{const _0x19f773=_0x1cbd38;if(_0xa7652b['musicPlaylist'][_0x19f773(0x893)]===0x0)return;_0xa7652b[_0x19f773(0xd5d)]=(_0xa7652b[_0x19f773(0xd5d)]+0x1)%_0xa7652b[_0x19f773(0x2bd)][_0x19f773(0x893)];const _0x4e6a69=_0xa7652b[_0x19f773(0x2bd)][_0xa7652b[_0x19f773(0xd5d)]]['id'];_0x42c003(_0x4e6a69,_0xa7652b[_0x19f773(0x2bd)][_0x19f773(0x17f)](_0x1ed763=>_0x1ed763['id']));});}_0x56bacf&&_0x56bacf[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x28448c=_0x1cbd38;if(_0x28448c(0x8ad)!=='fUSeY'){if(_0xa7652b[_0x28448c(0x2bd)]['length']===0x0)return;_0xa7652b[_0x28448c(0xd5d)]=(_0xa7652b[_0x28448c(0xd5d)]-0x1+_0xa7652b[_0x28448c(0x2bd)][_0x28448c(0x893)])%_0xa7652b[_0x28448c(0x2bd)]['length'];const _0x3e2862=_0xa7652b[_0x28448c(0x2bd)][_0xa7652b['currentlyPlayingIndex']]['id'];_0x42c003(_0x3e2862,_0xa7652b['musicPlaylist']['map'](_0x2c75b7=>_0x2c75b7['id']));}else{const _0x56b96f=_0x4d839e['transaction'](_0x4e2785,_0x28448c(0xe51)),_0x125ca6=_0x56b96f[_0x28448c(0xb9d)](_0x5310a5),_0x24495e=_0x125ca6[_0x28448c(0x470)](_0x152358);_0x24495e[_0x28448c(0x7ad)]=()=>_0x1a2698(_0x24495e[_0x28448c(0xdc7)]?_0x24495e[_0x28448c(0xdc7)][_0x28448c(0x173)]:null),_0x24495e[_0x28448c(0x835)]=()=>_0x21895d(_0x24495e[_0x28448c(0xc95)]);}});document[_0x1cbd38(0x473)](_0x1cbd38(0x5dc))['addEventListener']('click',()=>{const _0x591cc0=_0x1cbd38;document['getElementById'](_0x591cc0(0x67c))[_0x591cc0(0x493)]();}),document[_0x1cbd38(0x473)]('reset-card-button-2')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),async()=>{const _0x223774=_0x1cbd38;_0x223774(0x30f)!==_0x223774(0x30f)?(_0x9094e[_0x223774(0x3e4)][_0x223774(0x16b)]='url(\x27'+_0xf963bb[_0x223774(0xc18)](_0x223b76)+'\x27)',_0x32a611['style'][_0x223774(0x209)]='cover',_0x5a0f7f[_0x223774(0x3e4)][_0x223774(0xcb8)]=_0x223774(0x88f)):(await _0x21e7e1(_0x223774(0x563)),localStorage[_0x223774(0x863)](_0x223774(0xa01)),_0x5e1c8c(),_0x198030('卡片\x202\x20已移除。'));}),document[_0x1cbd38(0x473)](_0x1cbd38(0x67c))[_0x1cbd38(0xc04)](_0x1cbd38(0x1c4),async _0x543596=>{const _0x413b7b=_0x1cbd38;if(_0x413b7b(0x290)==='kGMwH'){const _0x302aa7=_0x543596[_0x413b7b(0x63c)][_0x413b7b(0xcf5)][0x0];if(!_0x302aa7)return;try{await _0x1366c1('widget_card_2',_0x302aa7),await _0x5e1c8c(),_0x198030(_0x413b7b(0x97d));}catch(_0x5888df){if(_0x413b7b(0xe3c)!=='IquDM')_0x198030(_0x413b7b(0xd33)+_0x5888df[_0x413b7b(0xe32)]);else{_0x4d5e82[_0x413b7b(0x6f0)]=_0x413b7b(0x243);return;}}}else _0x2b1129('AI整理失败了，哼:\x20'+_0x16c802[_0x413b7b(0xe32)]);}),_0x405d68(),_0x172357(),_0x10243a(),document[_0x1cbd38(0x473)](_0x1cbd38(0x797))[_0x1cbd38(0xc04)]('click',async()=>{const _0x3aa815=_0x1cbd38;if(_0x3aa815(0x6c5)===_0x3aa815(0x602))_0x43e890[_0x3aa815(0x473)](_0x3aa815(0x67c))['click']();else{const _0x413214=await _0x410108(_0x3aa815(0x7fb));if(_0x413214){if(_0x3aa815(0x330)===_0x3aa815(0x97b)){_0x5055e4(_0x3aa815(0x477)+_0x4c8be4+_0x3aa815(0x4cb)),_0x2d0bf2(()=>_0x34bb04['reload'](),0x5dc);return;}else{const _0x51442e=await _0x410108(_0x3aa815(0x18e));if(_0x51442e){_0x27a15c(!![],_0x3aa815(0x7cf));try{localStorage[_0x3aa815(0xd46)]();const _0x80a1d2=await _0x90829d,_0x460373=_0x80a1d2[_0x3aa815(0xdb0)]([_0x3aa815(0xd8a),_0x3aa815(0x319),'snoop_cache'],_0x3aa815(0x4a7));await Promise[_0x3aa815(0xc1d)]([_0x460373[_0x3aa815(0xb9d)](_0x3aa815(0xd8a))[_0x3aa815(0xd46)](),_0x460373[_0x3aa815(0xb9d)](_0x3aa815(0x319))[_0x3aa815(0xd46)](),_0x460373['objectStore'](_0x3aa815(0xee))[_0x3aa815(0xd46)]()]),await new Promise(_0x1486ce=>{const _0x54511c=_0x3aa815;_0x460373[_0x54511c(0x4f1)]=_0x1486ce;}),_0x198030('净化完成！应用即将重启。'),setTimeout(()=>{const _0x99cd5c=_0x3aa815;location[_0x99cd5c(0xb97)]();},0x5dc);}catch(_0x3386a9){_0x27a15c(![]),_0x198030(_0x3aa815(0xd1b)+_0x3386a9[_0x3aa815(0xe32)]);}}}}}});const _0x22440f=document[_0x1cbd38(0x373)]('#settings-screen\x20.content');if(_0x22440f){if(_0x1cbd38(0x397)==='qpQKD'){const _0xb8e234=document[_0x1cbd38(0x7a9)](_0x1cbd38(0x527));_0xb8e234['id']=_0x1cbd38(0x58f),_0xb8e234[_0x1cbd38(0x226)]='核心代码-Noir\x20监工-小红书ID：糯糯糯糯五\x0a糯米机仅在qq群102552954提供，完全免费，请勿二传',Object[_0x1cbd38(0x8b3)](_0xb8e234[_0x1cbd38(0x3e4)],{'position':_0x1cbd38(0x7ca),'top':'15px','right':'20px','fontSize':_0x1cbd38(0x9b),'lineHeight':_0x1cbd38(0x6cf),'color':_0x1cbd38(0x84b),'opacity':'0.5','cursor':'pointer','zIndex':'1','transition':_0x1cbd38(0x230),'whiteSpace':_0x1cbd38(0x509),'textAlign':_0x1cbd38(0x54b)}),_0xb8e234[_0x1cbd38(0xaa)]=()=>{const _0x5dde82=_0x1cbd38;_0x5dde82(0x298)!==_0x5dde82(0x298)?_0x3d7a1a=![]:_0xb8e234[_0x5dde82(0x3e4)][_0x5dde82(0x5cf)]='1';},_0xb8e234[_0x1cbd38(0x9ea)]=()=>{_0xb8e234['style']['opacity']='0.5';},_0xb8e234[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x310662=_0x1cbd38;_0x310662(0xc39)!==_0x310662(0x3fb)?window[_0x310662(0x41e)](_0x310662(0xba8),_0x310662(0x13b)):_0xcd4784();}),_0x22440f[_0x1cbd38(0x3e4)]['position']=_0x1cbd38(0x542),_0x22440f['prepend'](_0xb8e234);}else{const _0x591275=_0x163359(_0x233060['participantIds'][0x0]);_0x591275?(!_0x337742&&(_0x5c875d=_0x591275[_0x1cbd38(0x98f)]||_0x3f72ff),_0x530806=_0x591275[_0x1cbd38(0xe79)]||_0x1cbd38(0xa39),_0x574081=_0x591275['remark']||'私聊'):(_0x218883=_0x1cbd38(0x4ad),_0x340ed5=_0x1cbd38(0x3e1));}}_0x2e624d(),_0x149ca8();const _0x405012=document[_0x1cbd38(0x473)](_0x1cbd38(0x667));if(_0x405012){if(_0x1cbd38(0x98d)===_0x1cbd38(0xadb))_0x4c1c3d(_0x269179,_0x306509[_0x1cbd38(0x3a1)]);else{_0x5046d9[_0x1cbd38(0xe24)]=_0x405012;const _0x223ba3=document[_0x1cbd38(0x473)](_0x1cbd38(0xda8));_0x223ba3[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0xffff1f(_0x1cbd38(0x59f),_0x1cbd38(0xe24)));const _0x3eba2e=document[_0x1cbd38(0x473)](_0x1cbd38(0x1cd)),_0x3120c3=document[_0x1cbd38(0x473)](_0x1cbd38(0x952)),_0x516322=document[_0x1cbd38(0x473)](_0x1cbd38(0xbf)),_0x30654c=document['getElementById'](_0x1cbd38(0x53c)),_0x466caf=document[_0x1cbd38(0x473)](_0x1cbd38(0x16e)),_0x2d56b6=document[_0x1cbd38(0x473)](_0x1cbd38(0x5fe)),_0x58fb7f=document[_0x1cbd38(0x473)](_0x1cbd38(0xe65));let _0x1f9ccb=null,_0x459008=null,_0x181d65=null;_0x3eba2e['addEventListener'](_0x1cbd38(0x493),()=>_0x30654c['click']()),_0x3120c3[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0x466caf['click']()),_0x516322[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0x2d56b6['click']());const _0x17ba88=(_0x4728f0,_0x562599)=>{const _0x1beeb1=_0x1cbd38;_0x1beeb1(0x27a)!==_0x1beeb1(0x27a)?_0x1252e2(_0x12e6d8,_0x227b33,_0x48dfaf):_0x4728f0&&(_0x1beeb1(0xd5)===_0x1beeb1(0xae4)?_0x43ba4b['push']({'timestamp':_0x28fa46[_0x1beeb1(0xb9f)],'type':_0x1beeb1(0x439),'content':'['+(_0x35bca8['author']==='user'?_0x298e9f[_0x1beeb1(0xe79)]:_0x5e9016[_0x1beeb1(0xe79)])+_0x1beeb1(0x7ec)+_0x4b454f[_0x1beeb1(0xb17)]}):(_0x562599[_0x1beeb1(0x970)][_0x1beeb1(0xddb)](_0x1beeb1(0x77d)),_0x562599['querySelector']('.slot-filename')['textContent']=_0x4728f0[_0x1beeb1(0xe79)]));};_0x30654c['addEventListener'](_0x1cbd38(0x1c4),_0x2b200e=>{const _0x4f1c5a=_0x1cbd38;_0x4f1c5a(0xd54)!==_0x4f1c5a(0x16d)?(_0x1f9ccb=_0x2b200e['target'][_0x4f1c5a(0xcf5)][0x0],_0x17ba88(_0x1f9ccb,_0x3eba2e),_0x58fb7f[_0x4f1c5a(0xdeb)]=!_0x1f9ccb):_0x454fb3=_0x853a21['id'];}),_0x466caf['addEventListener'](_0x1cbd38(0x1c4),_0x3f24d2=>{const _0x1eaf93=_0x1cbd38;_0x459008=_0x3f24d2[_0x1eaf93(0x63c)]['files'][0x0],_0x17ba88(_0x459008,_0x3120c3);}),_0x2d56b6[_0x1cbd38(0xc04)](_0x1cbd38(0x1c4),_0x4c26b7=>{_0x181d65=_0x4c26b7['target']['files'][0x0],_0x17ba88(_0x181d65,_0x516322);}),_0x58fb7f[_0x1cbd38(0xc04)](_0x1cbd38(0x493),async()=>{const _0x222e9b=_0x1cbd38;if(!_0x1f9ccb){if(_0x222e9b(0x708)!==_0x222e9b(0x708))_0xad4beb[_0x222e9b(0x214)](_0x165d47[_0x222e9b(0x4fe)](_0x222e9b(0x5c1))['then'](_0x374854=>_0x1b65ee[_0x222e9b(0xd12)]=new _0x11b21c([_0x374854],_0x5dc418[_0x222e9b(0xe79)])));else{_0x198030(_0x222e9b(0xdb6));return;}}const _0x23619b=await _0x410108(_0x222e9b(0xb23));if(!_0x23619b)return;_0x27a15c(!![],_0x222e9b(0x949));try{_0x27a15c(!![],_0x222e9b(0x15b));const _0x1c4b7a=await _0x1f9ccb['text']();console[_0x222e9b(0x6e4)](_0x222e9b(0xc72),_0x1c4b7a['length'],'字符');const _0x6cbac0=JSON['parse'](_0x1c4b7a);console[_0x222e9b(0x6e4)](_0x222e9b(0x518),Object['keys'](_0x6cbac0)),console['log'](_0x222e9b(0xb76),_0x222e9b(0xce0)in _0x6cbac0);let _0x3d87e7=[],_0x225027=[],_0x28d69d=[];const _0x337f85=_0x222e9b(0xb0)in _0x6cbac0;console[_0x222e9b(0x6e4)]('[Import\x20Altar]\x20备份格式判断:',_0x337f85?'新格式（三文件）':'旧格式（单文件）'),console['log'](_0x222e9b(0x7bc),_0x6cbac0[_0x222e9b(0x90c)]);if(!_0x337f85&&_0x6cbac0[_0x222e9b(0xce0)]){if(_0x222e9b(0xa93)!=='Qffdo')_0x2c3e2b[_0x222e9b(0x970)]['remove'](_0x222e9b(0x348));else{for(const _0x4a11c2 in _0x6cbac0[_0x222e9b(0x55e)]){if('kMXIA'!=='kMXIA')_0x2916c1[_0x222e9b(0xc95)](_0x222e9b(0xe5b),_0x5e3085),_0x5d5002('大家好像不知道该怎么回复...');else{const _0x2758ee=await _0x530eb9(_0x6cbac0[_0x222e9b(0x55e)][_0x4a11c2]);_0x3d87e7[_0x222e9b(0x214)]({'id':_0x4a11c2,'blob':_0x2758ee});}}for(const _0x2ab226 of _0x6cbac0[_0x222e9b(0x351)]||[]){const _0x24735d={..._0x2ab226};if(_0x2ab226['audio'])_0x24735d[_0x222e9b(0xd12)]=await _0x530eb9(_0x2ab226[_0x222e9b(0xd12)]);if(_0x2ab226[_0x222e9b(0xdd5)])_0x24735d['cover']=await _0x530eb9(_0x2ab226[_0x222e9b(0xdd5)]);_0x225027[_0x222e9b(0x214)](_0x24735d);}_0x28d69d=_0x6cbac0[_0x222e9b(0xc74)]||[];}}else{if(_0x222e9b(0x7f6)==='suCEo'){console[_0x222e9b(0x6e4)]('[Import\x20Altar]\x20处理新格式备份（三文件）');if(_0x459008){if(_0x222e9b(0xb73)===_0x222e9b(0xb73)){console['log'](_0x222e9b(0xccd));const _0x27f43b=await JSZip[_0x222e9b(0x556)](_0x459008);for(const _0x32e61c in _0x27f43b[_0x222e9b(0xcf5)]){if(_0x32e61c[_0x222e9b(0x324)](_0x222e9b(0x3a8))){if(_0x222e9b(0x193)===_0x222e9b(0x193)){const _0x3cbc45=_0x27f43b[_0x222e9b(0xcf5)][_0x32e61c],_0x2c676f=await _0x3cbc45[_0x222e9b(0x4fe)](_0x222e9b(0x5c1));_0x3d87e7[_0x222e9b(0x214)]({'id':_0x32e61c[_0x222e9b(0x833)](_0x222e9b(0x3a8),''),'blob':_0x2c676f});}else _0x44b0eb[_0x222e9b(0x214)]('-\x20用户情绪似乎偏'+(_0x21cda5===_0x222e9b(0x41b)?'积极':'消极')+_0x222e9b(0xa35)+_0x511c32[_0x222e9b(0x1de)](0x0,0x2)[_0x222e9b(0x332)]('、'));}}}else _0x5f4e82[_0x222e9b(0x5bf)]=_0x51c599['likes']||[],_0x47aef1[_0x222e9b(0x6d9)]=(_0x296e55[_0x222e9b(0x6d9)]||[])['map']((_0x32134d,_0x4e2ef5)=>({..._0x32134d,'commentId':'c_'+_0x253942['timestamp']+'_'+_0x4e2ef5})),_0xb69268(),_0x5deaae();}if(_0x181d65){const _0x3ad6c6=await JSZip[_0x222e9b(0x556)](_0x181d65),_0x103f0b={};for(const _0x3aa6c0 in _0x3ad6c6[_0x222e9b(0xcf5)]){if(_0x3aa6c0['startsWith'](_0x222e9b(0x33a))){if(_0x222e9b(0x85d)!==_0x222e9b(0x85d)){_0x1b87dd[_0x222e9b(0x6e4)](_0x222e9b(0x2f6));return;}else{const _0x17fc5a=_0x3ad6c6['files'][_0x3aa6c0],_0x55c812=_0x3aa6c0[_0x222e9b(0x8ff)]('/');if(_0x55c812['length']>=0x3){const _0x35ae72=_0x55c812[0x1];if(!_0x103f0b[_0x35ae72])_0x103f0b[_0x35ae72]={'id':_0x35ae72};const _0x289bce=_0x55c812[0x2];if(_0x289bce===_0x222e9b(0x188))_0x103f0b[_0x35ae72][_0x222e9b(0x70d)]=JSON['parse'](await _0x17fc5a[_0x222e9b(0x4fe)](_0x222e9b(0xdab)));else{if(_0x289bce===_0x222e9b(0xd12))_0x103f0b[_0x35ae72]['audio']=await _0x17fc5a['async']('blob');else{if(_0x289bce===_0x222e9b(0xdd5))_0x103f0b[_0x35ae72]['cover']=await _0x17fc5a[_0x222e9b(0x4fe)]('blob');else{if(_0x289bce==='lyrics.lrc')_0x103f0b[_0x35ae72][_0x222e9b(0x996)]=await _0x17fc5a[_0x222e9b(0x4fe)](_0x222e9b(0xdab));}}}}}}}_0x225027=Object[_0x222e9b(0x664)](_0x103f0b);const _0x416405=_0x3ad6c6[_0x222e9b(0xc49)]('snoop_cache.json');if(_0x416405)_0x28d69d=JSON[_0x222e9b(0x180)](await _0x416405['async'](_0x222e9b(0xdab)));}}else _0xdb66e0(![]);}_0x27a15c(!![],_0x222e9b(0x1ae)),localStorage['clear']();const _0x218732=await _0x90829d,_0x4768e0=_0x218732[_0x222e9b(0xdb0)]([_0x222e9b(0xd8a),_0x222e9b(0x319),_0x222e9b(0xee)],_0x222e9b(0x4a7));await Promise[_0x222e9b(0xc1d)]([_0x4768e0['objectStore']('images')['clear'](),_0x4768e0[_0x222e9b(0xb9d)](_0x222e9b(0x319))['clear'](),_0x4768e0[_0x222e9b(0xb9d)](_0x222e9b(0xee))['clear']()]),await new Promise(_0xd815ad=>_0x4768e0['oncomplete']=_0xd815ad),_0x27a15c(!![],_0x222e9b(0xbde));const _0x423e9d=_0x6cbac0[_0x222e9b(0xce0)]?_0x6cbac0['localStorageData']:_0x6cbac0;for(const _0x3589fc in _0x423e9d){localStorage[_0x222e9b(0x29d)](_0x3589fc,_0x423e9d[_0x3589fc]);}if(_0x6cbac0[_0x222e9b(0xb0)]&&typeof Capacitor!==_0x222e9b(0xacc)&&Capacitor[_0x222e9b(0x92e)]()){_0x27a15c(!![],'正在恢复用户档案...');try{let _0x5e2d03=0x0;for(const _0x3f2d26 in _0x6cbac0[_0x222e9b(0xb0)]){await Capacitor[_0x222e9b(0x4be)][_0x222e9b(0x68c)][_0x222e9b(0x803)]({'key':_0x3f2d26,'value':_0x6cbac0['preferencesData'][_0x3f2d26]}),_0x5e2d03++;}console[_0x222e9b(0x6e4)](_0x222e9b(0x923)+_0x5e2d03+_0x222e9b(0xbdc));}catch(_0x233ed1){console[_0x222e9b(0xc95)](_0x222e9b(0xb6),_0x233ed1);}}const _0x4ea0aa=_0x218732[_0x222e9b(0xdb0)](['images',_0x222e9b(0x319),_0x222e9b(0xee)],_0x222e9b(0x4a7)),_0x5dcc1e=[];for(const _0x4b101d of _0x3d87e7){_0x5dcc1e[_0x222e9b(0x214)](_0x4ea0aa[_0x222e9b(0xb9d)](_0x222e9b(0xd8a))[_0x222e9b(0x5d6)](_0x4b101d));}for(const _0x4ee801 of _0x225027){_0x5dcc1e['push'](_0x4ea0aa[_0x222e9b(0xb9d)](_0x222e9b(0x319))[_0x222e9b(0x5d6)](_0x4ee801));}for(const _0x548b54 of _0x28d69d){_0x222e9b(0xad4)!=='JsPlH'?_0x5dcc1e[_0x222e9b(0x214)](_0x4ea0aa[_0x222e9b(0xb9d)]('snoop_cache')[_0x222e9b(0x5d6)](_0x548b54)):(_0x57fe58[_0x222e9b(0x3e4)][_0x222e9b(0x16b)]=_0x222e9b(0x548)+_0x22f284[_0x222e9b(0xc18)](_0x203ea1)+')',_0x177ef9[_0x222e9b(0x3e4)][_0x222e9b(0x209)]=_0x222e9b(0xdd5),_0x5be04c[_0x222e9b(0x3e4)][_0x222e9b(0xcb8)]=_0x222e9b(0x88f));}console[_0x222e9b(0x6e4)](_0x222e9b(0x347)+_0x3d87e7[_0x222e9b(0x893)]+_0x222e9b(0x419)+_0x225027[_0x222e9b(0x893)]+'\x20首音乐,\x20'+_0x28d69d['length']+'\x20条视奸记录'),await new Promise((_0x53189b,_0x3fc18d)=>{const _0x1edc4d=_0x222e9b;_0x4ea0aa[_0x1edc4d(0x4f1)]=_0x53189b,_0x4ea0aa['onerror']=_0x3fc18d;}),_0x27a15c(![]),_0x198030(_0x222e9b(0x92b)),setTimeout(()=>location['reload'](),0x5dc);}catch(_0x57ebbc){_0x222e9b(0xe34)!==_0x222e9b(0xe34)?_0x209cdb(_0x222e9b(0xa1)):(_0x27a15c(![]),console[_0x222e9b(0xc95)](_0x222e9b(0x40a),_0x57ebbc),_0x198030(_0x222e9b(0x8c9)+_0x57ebbc[_0x222e9b(0xe32)]));}});}}function _0x2c4982(){const _0x4626af=_0x1cbd38,_0x2842a0=document[_0x4626af(0x473)](_0x4626af(0x845));_0x2842a0[_0x4626af(0x6f0)]='';const _0x41a0a3=_0xa7652b[_0x4626af(0xbfe)][_0x4626af(0x1a9)](_0x2a6787=>_0xa7652b[_0x4626af(0x4ec)][_0x4626af(0x691)](_0x578402=>_0x578402[_0x4626af(0x45c)]==='private'&&_0x578402['participantIds'][_0x4626af(0x5c0)](_0x2a6787['id'])));if(_0x41a0a3[_0x4626af(0x893)]===0x0){_0x2842a0[_0x4626af(0x6f0)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有可以直播的角色哦。</p>';return;}_0x41a0a3['forEach'](_0x3ee3a5=>{const _0x275357=_0x4626af,_0x4f1a02=document[_0x275357(0x7a9)]('li');_0x4f1a02['className']=_0x275357(0x4b0),_0x4f1a02[_0x275357(0x9c6)][_0x275357(0xa48)]=_0x3ee3a5['id'],_0x4f1a02[_0x275357(0x6f0)]=_0x275357(0xb4f)+(_0x3ee3a5['avatar']||_0x96c08e)+_0x275357(0x5bc)+_0x3ee3a5[_0x275357(0xe79)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>进入直播间...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x4f1a02[_0x275357(0xc04)](_0x275357(0x493),()=>{_0x496581(_0x3ee3a5['id']);}),_0x2842a0[_0x275357(0xced)](_0x4f1a02);});}async function _0x496581(_0x235c6a){const _0x15d27d=_0x1cbd38;if(_0x15d27d(0x7cc)==='jTaFT')_0x30f1b3[_0x15d27d(0x5fa)]['forceWhiteClock']=_0x1da7e5[_0x15d27d(0x3e3)],_0x57b594(),_0x2b412c();else{const _0x280234=_0x1238ea(_0x235c6a);if(!_0x280234)return;_0xa7652b[_0x15d27d(0x9ed)]=_0x235c6a,document[_0x15d27d(0x473)]('livestream-char-name-header')[_0x15d27d(0x226)]=_0x280234['name']+_0x15d27d(0x9e5),_0xffff1f(_0x15d27d(0xaa2),_0x15d27d(0xd89));const _0x414531=document[_0x15d27d(0x473)](_0x15d27d(0x9de)),_0x52c144=document[_0x15d27d(0x473)](_0x15d27d(0x23a)),_0x2a3f76=document[_0x15d27d(0x473)](_0x15d27d(0xe80));_0x414531['style'][_0x15d27d(0x16b)]='',document[_0x15d27d(0x473)](_0x15d27d(0x2ae))['src']='',_0x52c144[_0x15d27d(0x6f0)]='',_0x2a3f76['textContent']=_0x15d27d(0x8f1);let _0x526a26=null;try{if(_0x15d27d(0xd11)==='ZfPIQ'){const _0x51b794=localStorage[_0x15d27d(0xb34)](_0x15d27d(0x997));_0x51b794&&(_0x526a26=JSON['parse'](_0x51b794));}else{_0x14188c[_0x15d27d(0x63c)][_0x15d27d(0x2d4)]='';return;}}catch(_0x3370ad){console['error'](_0x15d27d(0x4ab),_0x3370ad),localStorage[_0x15d27d(0x863)](_0x15d27d(0x997));}if(_0x526a26&&_0x526a26[_0x15d27d(0xa48)]===_0x235c6a){console[_0x15d27d(0x6e4)](_0x15d27d(0x775)),_0xa7652b[_0x15d27d(0x317)]=_0x526a26['log']||[],_0xa7652b[_0x15d27d(0x3af)]=_0x526a26[_0x15d27d(0x9bf)]||[],_0xa7652b[_0x15d27d(0xe35)]=_0x526a26[_0x15d27d(0x5ba)]||0x0,_0xa7652b['currentLivestreamDMs']=_0x526a26[_0x15d27d(0xbe3)]||[],document[_0x15d27d(0x473)](_0x15d27d(0x4b4))[_0x15d27d(0x3e4)][_0x15d27d(0x1df)]=_0x15d27d(0x4a6),document[_0x15d27d(0x473)](_0x15d27d(0xd93))[_0x15d27d(0x3e4)][_0x15d27d(0x1df)]=_0x15d27d(0x5c9),_0xa7652b[_0x15d27d(0x317)][_0x15d27d(0x1dc)](_0x24d38d=>{const _0x421ded=_0x15d27d;_0x421ded(0xb36)===_0x421ded(0x74e)?(_0x554aaf['error']('保存壁纸失败:',_0x590779),_0x87f3a3(_0x421ded(0xe02)+_0x4d8b34['message'])):_0x24d38d[_0x421ded(0x45c)]===_0x421ded(0xc85)&&(_0x421ded(0xcd1)==='NjWTp'?_0x5d4eae(_0x24d38d):_0x34e0fa[_0x421ded(0x4fd)]=null);});const _0x2d4ae2=_0xa7652b[_0x15d27d(0x3af)][_0xa7652b['currentSpeechIndex']];if(_0x2d4ae2&&typeof _0x2d4ae2==='object')_0x2a3f76['textContent']=_0x2d4ae2['line'],_0x4f838f(_0x235c6a,_0x2d4ae2['emotion']);else typeof _0x2d4ae2===_0x15d27d(0xdab)?'bykPt'!==_0x15d27d(0x901)?_0x2a3f76[_0x15d27d(0x226)]=_0x2d4ae2:_0x3532c1():_0x15d27d(0x2a7)==='bhkWa'?(_0x17b54f[_0x15d27d(0xb17)]=_0x5e2d10,_0x1e3b3a(),_0x5b4321()):_0x2a3f76['textContent']='（直播已暂停）';}else console[_0x15d27d(0x6e4)](_0x15d27d(0x383)),_0xa7652b['currentLivestreamLog']=[],_0xa7652b[_0x15d27d(0x3af)]=[],_0xa7652b['currentSpeechIndex']=-0x1,_0xa7652b[_0x15d27d(0x483)]=[],_0x2a3f76[_0x15d27d(0x226)]=_0x15d27d(0x779),document['getElementById'](_0x15d27d(0x4b4))[_0x15d27d(0x3e4)][_0x15d27d(0x1df)]=_0x15d27d(0x2a3),document[_0x15d27d(0x473)](_0x15d27d(0xd93))[_0x15d27d(0x3e4)]['display']='none';try{const _0x14d7fa=await _0xf3eefa(_0x15d27d(0xb07)+_0x235c6a);if(_0x14d7fa)_0x414531[_0x15d27d(0x3e4)][_0x15d27d(0x16b)]='url(\x27'+URL['createObjectURL'](_0x14d7fa)+'\x27)';else{if(_0x15d27d(0x66b)===_0x15d27d(0x23b)){const _0x528a57=_0x577689[_0x15d27d(0x373)](_0x15d27d(0x649)+_0x48418b);if(_0x528a57)_0x528a57[_0x15d27d(0x3e3)]=!![];}else{const _0x222611=await _0xf3eefa('char_offline_bg_'+_0x235c6a);if(_0x222611)_0x414531[_0x15d27d(0x3e4)]['backgroundImage']=_0x15d27d(0x6cb)+URL['createObjectURL'](_0x222611)+'\x27)';}}(!_0x526a26||!_0x526a26['charId'])&&_0x4f838f(_0x235c6a,'normal');}catch(_0x24704e){console[_0x15d27d(0xc95)]('加载直播资源失败:',_0x24704e);}}}async function _0x1fabaf(_0x4e6c54,_0x51206f){const _0x142c3a=_0x1cbd38;localStorage[_0x142c3a(0x863)]('currentLivestreamSession');if(_0xa7652b['isGenerating'])return;document[_0x142c3a(0x473)](_0x142c3a(0x4b4))['style'][_0x142c3a(0x1df)]=_0x142c3a(0x4a6),document['getElementById']('livestream-controls-container')['style']['display']=_0x142c3a(0x5c9),_0x27a15c(!![],_0x142c3a(0x2e1)),_0xa7652b[_0x142c3a(0x89f)]=!![],_0xa7652b['currentLivestreamLog']=[],_0xa7652b[_0x142c3a(0x3af)]=[],_0xa7652b[_0x142c3a(0xe35)]=-0x1;const _0x427c50=_0x1238ea(_0xa7652b[_0x142c3a(0x9ed)]),_0x297272=_0x2e35cc(_0xa7652b[_0x142c3a(0xd5b)]),{omniText:_0x4d0bed}=_0x32429c(_0x427c50['id']),_0x3ef0a2=_0x322f26(_0x427c50['id']),_0x5ad0da=await _0xa63707(_0x427c50['id']),_0x2213d0=_0x2a2946(_0x427c50['id']),_0x4d0058=_0x297272[_0x142c3a(0x171)]?_0x142c3a(0x8e7)+_0x297272[_0x142c3a(0xe79)]+_0x142c3a(0x717)+_0x297272[_0x142c3a(0x171)]:'',_0x139854=new Date(),_0x15054e=_0x142c3a(0xbb)+_0x139854[_0x142c3a(0x1f3)]('zh-CN',{'dateStyle':_0x142c3a(0x7d3),'timeStyle':_0x142c3a(0x6b5)})+_0x142c3a(0xd3f);let _0x10c717='';if(_0x427c50[_0x142c3a(0x277)]&&_0x427c50[_0x142c3a(0x277)][_0x142c3a(0x893)]>0x0){const _0x4f11c3=_0x427c50[_0x142c3a(0x277)]['map'](_0x1bb585=>_0xa7652b['worldBooks'][_0x142c3a(0x394)](_0x1404e9=>_0x1404e9['id']===_0x1bb585))[_0x142c3a(0x1a9)](Boolean)['map'](_0x52324e=>_0x142c3a(0x2be)+_0x52324e[_0x142c3a(0xe79)]+'\x0a'+_0x52324e['content'])['join']('');_0x4f11c3&&(_0x10c717=_0x142c3a(0x610)+_0x4f11c3);}const _0x2d0984=document[_0x142c3a(0x473)](_0x142c3a(0x23a)),_0x38a819=document[_0x142c3a(0x473)](_0x142c3a(0xe80));_0x2d0984[_0x142c3a(0x6f0)]='',_0x38a819[_0x142c3a(0x226)]=_0x142c3a(0x8f1);try{if(_0x142c3a(0xe83)===_0x142c3a(0xec)){_0x230589+=_0x142c3a(0x4f4);const _0x297e3d=_0x1a46bb['value_map']['preferences']?.['喜欢']||[],_0x15e578=_0x3d83de[_0x142c3a(0xe67)][_0x142c3a(0x5fa)]?.['讨厌']||[];if(_0x297e3d[_0x142c3a(0x893)]>0x0)_0x56a2b8+=_0x142c3a(0x443)+_0x297e3d[_0x142c3a(0x332)](_0x142c3a(0x49e))+'\x0a\x0a';if(_0x15e578[_0x142c3a(0x893)]>0x0)_0x2b7f80+=_0x142c3a(0x6b1)+_0x15e578['join'](_0x142c3a(0x49e))+'\x0a\x0a';if(_0x2d86c3['value_map'][_0x142c3a(0xaec)]?.[_0x142c3a(0x893)]>0x0)_0x5ef462+=_0x142c3a(0x4e7)+_0x4abcbb['value_map']['sensitivities'][_0x142c3a(0x332)](_0x142c3a(0x49e))+'\x0a\x0a';if(_0x1471a7[_0x142c3a(0xe67)][_0x142c3a(0x6c8)])_0x5dd17b+=_0x142c3a(0x873)+_0x4b20a6[_0x142c3a(0xe67)][_0x142c3a(0x6c8)]+'\x0a\x0a';}else{const _0x25ddd2=_0x142c3a(0xd44)+_0x297272[_0x142c3a(0xe79)]+'”所有近期互动的自然延续。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**强制回忆**:\x20在开口说话前，你【必须】仔细回顾“你的个人记忆”部分，特别是标记为【[见面]】和【[手机]】的最新记录。这些记录决定了你当前应有的情绪基调和可以提及的话题。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**避免割裂**:\x20严禁表现出对私聊或见面内容一无所知的状态。如果你们刚刚在见面时发生了不愉快，你在直播时的情绪就不能是兴高采烈的，反之亦然。你需要巧妙地将这些背景情绪融入到你的直播表现中。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你正在扮演名为“'+_0x427c50[_0x142c3a(0xe79)]+_0x142c3a(0xc36)+_0x15054e+_0x142c3a(0xdea)+_0x427c50[_0x142c3a(0x171)]+_0x142c3a(0x79c)+_0x4d0058+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x10c717+_0x142c3a(0x60e)+_0x4d0bed+_0x142c3a(0x866)+_0x3ef0a2+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5ad0da+_0x142c3a(0x866)+_0x2213d0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20▲▲▲\x20替换结束\x20▲▲▲\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20本场直播信息\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20主题:\x20\x22'+_0x4e6c54+_0x142c3a(0xa81)+_0x51206f+_0x142c3a(0x4ee)+_0x297272[_0x142c3a(0xe79)]+_0x142c3a(0xd43),_0x5ab789=[{'role':'system','content':_0x25ddd2}];_0x5ab789['push']({'role':_0x142c3a(0xea1),'content':_0x142c3a(0xe70)});const _0x55b388=await _0x56b292(_0x5ab789,{'json':!![]});let _0x29e627=_0x55b388[_0x142c3a(0x8eb)]();const _0x165ab5=_0x29e627[_0x142c3a(0x41c)](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x165ab5&&(_0x142c3a(0x63b)===_0x142c3a(0x63b)?_0x29e627=_0x165ab5[0x1]['trim']():_0x484014[_0x142c3a(0x970)]['remove'](_0x142c3a(0x58e)));const _0x313091=JSON[_0x142c3a(0x180)](_0x29e627);if(!_0x313091||!_0x313091[_0x142c3a(0x74a)]||!_0x313091['danmaku']){if(_0x142c3a(0xb74)!=='hEapQ'){if(_0x351406[_0x142c3a(0x893)]===0x0)return;_0x57ecb6=(_0x643e24+0x1)%_0x44ae5f[_0x142c3a(0x893)],_0x4ed8f9(_0xf22018[_0x2b7184],_0x4251af);}else throw new Error('AI返回的数据格式不正确。');}_0xa7652b[_0x142c3a(0x3af)]=_0x313091[_0x142c3a(0x74a)],_0xa7652b[_0x142c3a(0xe35)]=0x0;const _0x13d8c2=_0xa7652b['currentLivestreamSpeechQueue'][0x0];_0x38a819['textContent']=_0x13d8c2[_0x142c3a(0x5b1)],_0x4f838f(_0x427c50['id'],_0x13d8c2[_0x142c3a(0x3a1)]),_0xa7652b[_0x142c3a(0x317)][_0x142c3a(0x214)]({'type':'speech','speaker':_0x427c50[_0x142c3a(0xe79)],'content':_0x13d8c2[_0x142c3a(0x5b1)],'emotion':_0x13d8c2[_0x142c3a(0x3a1)]}),_0x313091[_0x142c3a(0xc85)][_0x142c3a(0x1dc)](_0xb9fb9f=>{const _0x43ad21=_0x142c3a,_0x3f2e64=document['createElement'](_0x43ad21(0x527));_0x3f2e64[_0x43ad21(0xd04)]='danmaku-item',_0x3f2e64[_0x43ad21(0x6f0)]=_0x43ad21(0xc4c)+_0xb9fb9f[_0x43ad21(0xea1)]+_0x43ad21(0xb52)+_0xb9fb9f[_0x43ad21(0xdf3)]+_0x43ad21(0x116),_0x2d0984[_0x43ad21(0x206)](_0x3f2e64),_0xa7652b[_0x43ad21(0x317)][_0x43ad21(0x214)]({'type':_0x43ad21(0xc85),..._0xb9fb9f});});}}catch(_0x53c3e5){console[_0x142c3a(0xc95)](_0x142c3a(0x676),_0x53c3e5),_0x198030(_0x142c3a(0xa61)+_0x53c3e5[_0x142c3a(0xe32)]),document['getElementById'](_0x142c3a(0x4b4))[_0x142c3a(0x3e4)]['display']=_0x142c3a(0x2a3),document[_0x142c3a(0x473)](_0x142c3a(0xd93))[_0x142c3a(0x3e4)][_0x142c3a(0x1df)]=_0x142c3a(0x4a6);}finally{_0x27a15c(![]),_0xa7652b[_0x142c3a(0x89f)]=![];}}function _0x3b4ff4(){const _0x45a608=_0x1cbd38;if(_0x45a608(0xb3c)==='QUxPk')_0x191d9a['key']===_0x45a608(0xae8)&&(_0x5a78b4[_0x45a608(0xd27)](),_0x2bc392());else{if(!_0xa7652b[_0x45a608(0x3af)]||_0xa7652b[_0x45a608(0x3af)][_0x45a608(0x893)]===0x0)return;let _0x5746db=_0xa7652b[_0x45a608(0xe35)]+0x1;_0x5746db>=_0xa7652b[_0x45a608(0x3af)][_0x45a608(0x893)]&&(_0x5746db=0x0);_0xa7652b[_0x45a608(0xe35)]=_0x5746db;const _0x3457c1=_0xa7652b[_0x45a608(0x3af)][_0xa7652b['currentSpeechIndex']],_0x490da0=document[_0x45a608(0x473)](_0x45a608(0xe80));_0x490da0['textContent']=_0x3457c1[_0x45a608(0x5b1)],_0x4f838f(_0xa7652b[_0x45a608(0x9ed)],_0x3457c1[_0x45a608(0x3a1)]);}}function _0x5d4eae(_0x3e4eb){const _0x406d3b=_0x1cbd38,_0x4c3939=document[_0x406d3b(0x473)](_0x406d3b(0x23a)),_0x4b7d6d=document[_0x406d3b(0x7a9)]('div');_0x4b7d6d[_0x406d3b(0xd04)]=_0x406d3b(0x338);_0x3e4eb[_0x406d3b(0x988)]&&_0x4b7d6d[_0x406d3b(0x970)][_0x406d3b(0xddb)](_0x406d3b(0x5b0));const _0x525d07=_0x3e4eb[_0x406d3b(0xb17)]||_0x3e4eb[_0x406d3b(0xdf3)]||'';_0x4b7d6d[_0x406d3b(0x6f0)]=_0x406d3b(0xc4c)+_0x3e4eb[_0x406d3b(0xea1)]+':</span>\x20<span\x20class=\x22danmaku-comment\x22>'+_0x525d07+_0x406d3b(0x116),_0x4c3939[_0x406d3b(0x206)](_0x4b7d6d);}const _0xda451d=document[_0x1cbd38(0x473)](_0x1cbd38(0xd50)),_0x1c651e=document[_0x1cbd38(0x473)](_0x1cbd38(0x9a));document[_0x1cbd38(0x473)](_0x1cbd38(0xa31))[_0x1cbd38(0xc04)]('click',_0x56f8f4);function _0x4d62cf(){const _0x2f6fc5=_0x1cbd38;if(_0x2f6fc5(0x533)!==_0x2f6fc5(0x533))_0x9f7f92=_0x14d857;else{const _0x2d6850=_0x1c651e[_0x2f6fc5(0x2d4)][_0x2f6fc5(0x8eb)]();if(!_0x2d6850)return;const _0x16ab9a=_0x2e35cc(_0xa7652b[_0x2f6fc5(0xd5b)]),_0xaeba29={'type':'danmaku','user':_0x16ab9a[_0x2f6fc5(0xe79)]||'我','content':_0x2d6850,'isUser':!![]};_0x5d4eae(_0xaeba29),_0xa7652b[_0x2f6fc5(0x700)][_0x2f6fc5(0x214)](_0xaeba29),_0xa7652b[_0x2f6fc5(0x317)]['push'](_0xaeba29),_0x1c651e[_0x2f6fc5(0x2d4)]='';}}_0xda451d['addEventListener'](_0x1cbd38(0x493),_0x4d62cf),_0x1c651e[_0x1cbd38(0xc04)]('keydown',_0x3e48c8=>{const _0x4db786=_0x1cbd38;'zWvqH'!==_0x4db786(0x455)?_0x3e48c8['key']==='Enter'&&(_0x3e48c8[_0x4db786(0xd27)](),_0x4d62cf()):_0x142bb3(_0x136b08);});function _0x1cd12c(){const _0x3ecc65=_0x1cbd38;if(!_0xa7652b[_0x3ecc65(0x9ed)]||document[_0x3ecc65(0x473)](_0x3ecc65(0x4b4))['style'][_0x3ecc65(0x1df)]===_0x3ecc65(0x2a3))return;const _0x590e9a={'charId':_0xa7652b[_0x3ecc65(0x9ed)],'log':_0xa7652b['currentLivestreamLog'],'speechQueue':_0xa7652b['currentLivestreamSpeechQueue'],'speechIndex':_0xa7652b[_0x3ecc65(0xe35)],'dms':_0xa7652b[_0x3ecc65(0x483)]};try{localStorage[_0x3ecc65(0x29d)](_0x3ecc65(0x997),JSON[_0x3ecc65(0xaf6)](_0x590e9a)),console[_0x3ecc65(0x6e4)](_0x3ecc65(0x225));}catch(_0x30da72){console[_0x3ecc65(0xc95)](_0x3ecc65(0x3a9),_0x30da72);}}async function _0x56f8f4(){const _0x347942=_0x1cbd38;if(_0xa7652b[_0x347942(0x89f)])return;_0xa7652b[_0x347942(0x700)][_0x347942(0x893)]===0x0&&_0x198030(_0x347942(0xa1));_0x27a15c(!![],_0x347942(0x76c)),_0xa7652b[_0x347942(0x89f)]=!![];const _0x3cb48b=_0x1238ea(_0xa7652b[_0x347942(0x9ed)]),_0x2b74df=_0x2e35cc(_0xa7652b[_0x347942(0xd5b)]),{omniText:_0x5ccaae}=_0x32429c(_0x3cb48b['id']),_0x3bc15e=_0x322f26(_0x3cb48b['id']),_0x5f4363=await _0xa63707(_0x3cb48b['id']),_0x22df49=_0x2a2946(_0x3cb48b['id']),_0x4e2425=_0x2b74df[_0x347942(0x171)]?_0x347942(0x95f)+_0x2b74df[_0x347942(0xe79)]+_0x347942(0xdb7)+_0x2b74df['persona']:'',_0x25b97b=new Date(),_0x4caef2=_0x347942(0xbb)+_0x25b97b[_0x347942(0x1f3)]('zh-CN',{'dateStyle':_0x347942(0x7d3),'timeStyle':_0x347942(0x6b5)})+'\x0a\x20\x20-\x20**状态提示**:\x20你正在准备开始一场直播，你的开场白必须体现出当前的时间感（例如，下午好、晚上好、深夜了大家还没睡啊？等）。\x0a\x20\x20\x20\x20';let _0x3e7af0='';if(_0x3cb48b[_0x347942(0x277)]&&_0x3cb48b[_0x347942(0x277)][_0x347942(0x893)]>0x0){if(_0x347942(0x474)===_0x347942(0x928))_0x16af78[_0x347942(0xd27)](),_0x513474();else{const _0x46c64a=_0x3cb48b[_0x347942(0x277)]['map'](_0x4c2212=>_0xa7652b[_0x347942(0x52d)][_0x347942(0x394)](_0x195214=>_0x195214['id']===_0x4c2212))['filter'](Boolean)['map'](_0x48bd1f=>'\x0a\x0a##\x20世界书条目:\x20'+_0x48bd1f['name']+'\x0a'+_0x48bd1f[_0x347942(0xb17)])[_0x347942(0x332)]('');_0x46c64a&&('wnZyP'===_0x347942(0xa99)?_0x3e7af0=_0x347942(0x610)+_0x46c64a:(_0x7a490e(_0x2bb552,_0x5732e6),_0x4e41ce()));}}try{const _0x148610=_0xa7652b[_0x347942(0x317)][_0x347942(0x1de)](-0xf)[_0x347942(0x17f)](_0x3ea5be=>{const _0x4fef3d=_0x347942;if(_0x3ea5be[_0x4fef3d(0x45c)]===_0x4fef3d(0x215))return _0x4fef3d(0xe13)+_0x3ea5be[_0x4fef3d(0x9a4)]+']：'+_0x3ea5be[_0x4fef3d(0xb17)];return _0x4fef3d(0xe96)+_0x3ea5be[_0x4fef3d(0xea1)]+']：'+(_0x3ea5be[_0x4fef3d(0xdf3)]||_0x3ea5be[_0x4fef3d(0xb17)]);})['join']('\x0a'),_0x231fc8=_0xa7652b['currentLivestreamUserActions'][_0x347942(0x1a9)](_0x5e2b82=>_0x5e2b82[_0x347942(0x45c)]===_0x347942(0xc85))[_0x347942(0x17f)](_0x47f944=>_0x347942(0xa6c)+_0x47f944[_0x347942(0xb17)]+'\x22')['join']('\x0a'),_0x333b7b=_0xa7652b['currentLivestreamUserActions'][_0x347942(0x1a9)](_0x32a90c=>_0x32a90c[_0x347942(0x45c)]===_0x347942(0xbcf))['map'](_0x4d6f90=>'-\x20'+_0x4d6f90['name']+'\x20x'+_0x4d6f90[_0x347942(0x14e)])[_0x347942(0x332)]('\x0a'),_0x4a8d15=_0xa7652b[_0x347942(0x700)][_0x347942(0x1a9)](_0x1330d7=>_0x1330d7[_0x347942(0x45c)]==='dm')[_0x347942(0x17f)](_0x365995=>_0x347942(0xa6c)+_0x365995[_0x347942(0xb17)]+'\x22')[_0x347942(0x332)]('\x0a'),_0xe44e6b='#\x20核心任务:\x20继续直播并与观众互动\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#\x20情感连续性协议\x20(最高优先级)\x0a1.\x20\x20**统一身份**:\x20你在直播间、私聊和见面时是【同一个人】。你的情绪和谈话内容【必须】是你与用户“'+_0x2b74df['name']+_0x347942(0xd60)+_0x3cb48b[_0x347942(0xe79)]+_0x347942(0xe9f)+_0x4caef2+_0x347942(0x562)+_0x3cb48b[_0x347942(0x171)]+_0x347942(0xd8f)+_0x4e2425+'\x0a'+_0x3e7af0+_0x347942(0xe93)+_0x5ccaae+_0x347942(0x258)+_0x3bc15e+_0x347942(0x258)+_0x5f4363+'\x0a---\x0a'+_0x22df49+_0x347942(0x242)+_0x148610+'\x0a\x0a#\x20【最重要】来自“我”('+_0x2b74df[_0x347942(0xe79)]+_0x347942(0x254)+(_0x231fc8?_0x347942(0xcee)+_0x231fc8:'')+'\x0a'+(_0x333b7b?'\x0a-\x20“我”送出的礼物:\x0a'+_0x333b7b:'')+'\x0a'+(_0x4a8d15?'\x0a-\x20“我”发送的私信:\x0a'+_0x4a8d15:'')+'\x0a'+(!_0x231fc8&&!_0x333b7b&&!_0x4a8d15?'“我”这次没有新的互动，请你根据情况继续直播。':'')+_0x347942(0x6af)+_0x2b74df[_0x347942(0xe79)]+_0x347942(0xb94)+_0x2b74df[_0x347942(0xe79)]+_0x347942(0x108)+_0x2b74df['name']+_0x347942(0x1e6)+_0x2b74df['name']+_0x347942(0x1be)+_0x2b74df[_0x347942(0xe79)]+_0x347942(0x6ad)+_0x2b74df[_0x347942(0xe79)]+_0x347942(0xde2)+_0x2b74df[_0x347942(0xe79)]+_0x347942(0xe3e)+_0x2b74df[_0x347942(0xe79)]+_0x347942(0x300)+_0x2b74df['name']+_0x347942(0xa76)+_0x2b74df[_0x347942(0xe79)]+'的身份来发送任何弹幕。这是最严重的错误。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**核心焦点**:\x20这些路人观众的核心焦点应该是【主播你】和【你正在说的话题】。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**反应逻辑**:\x20他们会针对你在【阶段一】中生成的\x20\x22streamerSpeech\x22\x20内容做出反应。例如，如果你感谢了礼物，他们可能会惊叹或跟风；如果你说了一个笑话，他们可能会发“哈哈哈”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**减少对'+_0x2b74df['name']+_0x347942(0x416)+_0x2b74df[_0x347942(0xe79)]+'的互动非常引人注目时（例如送出昂贵的礼物），才允许【少量】路人弹幕提及'+_0x2b74df['name']+_0x347942(0x669),_0xb244d5=[{'role':_0x347942(0xaae),'content':_0xe44e6b}];_0xb244d5[_0x347942(0x214)]({'role':_0x347942(0xea1),'content':'请基于“我”的最新互动，继续你的直播。'}),_0xa7652b[_0x347942(0x700)]=[];const _0x42a51f=await _0x56b292(_0xb244d5,{'json':!![]});let _0x4f2779=_0x42a51f[_0x347942(0x8eb)]();const _0x51fd93=_0x4f2779[_0x347942(0x41c)](/```(?:json)?\s*([\s\S]*?)\s*```/);_0x51fd93&&(_0x4f2779=_0x51fd93[0x1][_0x347942(0x8eb)]());const _0x4e1c7f=JSON['parse'](_0x4f2779);if(_0x4e1c7f['streamerSpeech']&&_0x4e1c7f['streamerSpeech']['length']>0x0){_0xa7652b[_0x347942(0x3af)]=_0x4e1c7f['streamerSpeech'],_0xa7652b['currentSpeechIndex']=0x0;const _0x5a1d15=_0xa7652b['currentLivestreamSpeechQueue'][0x0],_0x2aa3f3=document[_0x347942(0x473)](_0x347942(0xe80));_0x2aa3f3[_0x347942(0x226)]=_0x5a1d15['line'],_0x4f838f(_0x3cb48b['id'],_0x5a1d15[_0x347942(0x3a1)]),_0xa7652b[_0x347942(0x317)][_0x347942(0x214)]({'type':_0x347942(0x215),'speaker':_0x3cb48b[_0x347942(0xe79)],'content':_0x5a1d15[_0x347942(0x5b1)],'emotion':_0x5a1d15[_0x347942(0x3a1)]});}if(_0x4e1c7f['danmaku'])for(const _0x5e77b3 of _0x4e1c7f[_0x347942(0xc85)]){_0x347942(0x65e)===_0x347942(0x2de)?_0x24622c['error'](_0x347942(0x56f),_0x43e6da):(_0x5d4eae(_0x5e77b3),_0xa7652b[_0x347942(0x317)][_0x347942(0x214)]({'type':'danmaku',..._0x5e77b3}),await new Promise(_0x5a7925=>setTimeout(_0x5a7925,0xc8+Math[_0x347942(0x1c6)]()*0x12c)));}if(_0x4e1c7f['privateMessageReply']){if(_0x347942(0xaa1)===_0x347942(0x55a))_0x184493(_0x347942(0xb8f));else{const _0x516eeb=Array[_0x347942(0x8aa)](_0x4e1c7f[_0x347942(0x35d)])?_0x4e1c7f[_0x347942(0x35d)]:[_0x4e1c7f[_0x347942(0x35d)]];for(const _0x1301f1 of _0x516eeb){_0x1301f1[_0x347942(0x8eb)]()&&_0xa7652b[_0x347942(0x483)]['push']({'sender':'ai','content':_0x1301f1[_0x347942(0x8eb)]()});}if(_0xa7652b[_0x347942(0xc64)]){if('UPaBS'==='UPaBS')_0x420601();else{const _0x221287=_0x3747df['getElementById'](_0x347942(0x453));_0x221287&&_0x12b08b&&(_0x221287[_0x347942(0x706)]=_0x5c2b77[_0x347942(0xc18)](_0x43ee2f));}}else{if(_0x347942(0x680)!==_0x347942(0x2a6)){_0xa7652b[_0x347942(0xdaf)]=!![],_0x2ba513();const _0x22bb62=_0x1238ea(_0xa7652b[_0x347942(0x9ed)]);_0x198030(_0x347942(0x2a5)+_0x22bb62['name']+_0x347942(0x181));}else{const _0x2718f4=_0x347942(0xdfb);_0xa63899['body'][_0x347942(0x650)](_0x347942(0x2fd),_0x2718f4);const _0xa002a8=_0x530423[_0x347942(0x473)](_0x347942(0x19d)),_0x4f19c9=_0x40cbb1['getElementById'](_0x347942(0xb53)),_0x2842d6=_0x5635ba[_0x347942(0x473)](_0x347942(0x71c)),_0x1828c9=_0x4f7e1e[_0x347942(0x473)](_0x347942(0xbc2)),_0x5773cc=_0xa002a8[_0x347942(0x373)]('.choice-modal-backdrop'),_0x466b91=()=>{const _0x1afe25=_0x347942;_0xa002a8[_0x1afe25(0x702)](),_0x328958();};_0x2842d6[_0x347942(0x4e9)]=()=>{const _0x5e3f00=_0x347942;_0x5a535d(_0x4f19c9[_0x5e3f00(0x2d4)]),_0x466b91();},_0x1828c9[_0x347942(0x4e9)]=_0x466b91,_0x5773cc[_0x347942(0x4e9)]=_0x466b91;}}}}}catch(_0x34b518){'UlmKM'===_0x347942(0x32b)?(console[_0x347942(0xc95)](_0x347942(0xcfb),_0x34b518),_0x198030(_0x347942(0x12d)+_0x34b518[_0x347942(0xe32)])):(_0x422106[_0x347942(0xc95)]('读取或显示用户档案失败:',_0x102a6f),_0x37bcd4[_0x347942(0x2d4)]=_0x347942(0x876)+_0x9ee309[_0x347942(0xe32)]);}finally{_0x347942(0xb5e)!==_0x347942(0xb5e)?_0x3130e3+=_0x347942(0xd56)+_0x222fc6[_0x347942(0xd76)]+_0x347942(0x9a9):(_0x27a15c(![]),_0x1cd12c(),_0xa7652b[_0x347942(0x89f)]=![]);}}async function _0x4f838f(_0x511845,_0x50106e){const _0x239564=_0x1cbd38,_0x4ce2e9=document['getElementById'](_0x239564(0x2ae)),_0x5b1874=document[_0x239564(0x473)]('livestream-sprite-container');if(!_0x4ce2e9||!_0x5b1874)return;const _0x5afc34=_0x1238ea(_0x511845),_0x2ac2b3=_0x5afc34?.[_0x239564(0x682)]||{'x':0x32,'y':0x64,'scale':0x1};_0x5b1874[_0x239564(0x3e4)][_0x239564(0xb3b)]=0x55*_0x2ac2b3[_0x239564(0xd6)]+'%',_0x5b1874[_0x239564(0x3e4)][_0x239564(0xc5d)]=0x55*_0x2ac2b3['scale']+'%',_0x5b1874[_0x239564(0x3e4)]['left']=_0x2ac2b3['x']+'%',_0x5b1874[_0x239564(0x3e4)][_0x239564(0x5d8)]=_0x2ac2b3['y']+'%',_0x5b1874[_0x239564(0x3e4)][_0x239564(0x3b7)]=_0x239564(0xc76);const _0x36f775=[_0x239564(0x177),_0x239564(0xbea),'angry',_0x239564(0xac6),'shy'],_0xd32f63=_0x36f775[_0x239564(0x5c0)](_0x50106e)?_0x50106e:_0x239564(0x177);try{let _0x40cc2b=null;_0x40cc2b=await _0xf3eefa(_0x239564(0x986)+_0xd32f63+'_'+_0x511845);if(!_0x40cc2b)_0x40cc2b=await _0xf3eefa('char_sprite_'+_0xd32f63+'_'+_0x511845);if(!_0x40cc2b)_0x40cc2b=await _0xf3eefa(_0x239564(0xa8f)+_0x511845);if(!_0x40cc2b)_0x40cc2b=await _0xf3eefa(_0x239564(0xc9a)+_0x511845);_0x40cc2b?_0x4ce2e9[_0x239564(0x706)]=URL[_0x239564(0xc18)](_0x40cc2b):_0x4ce2e9['src']='';}catch(_0xe4f803){_0x239564(0xc9b)==='PCcqK'?(_0x4a8322(![]),_0x1a0435[_0x239564(0xc95)](_0x239564(0x274),_0x54bb44),_0x403421(_0x239564(0x560)+_0x44dfe1[_0x239564(0xe32)]),_0x459615[_0x239564(0x373)](_0x239564(0xcf))[_0x239564(0x226)]=_0x239564(0x1e4)):(console['error'](_0x239564(0x745),_0xe4f803),_0x4ce2e9[_0x239564(0x706)]='');}}let _0x5b6c44=![],_0x17d62f={};function _0x313056(){const _0x540c39=_0x1cbd38,_0x26abdd=_0x1238ea(_0xa7652b[_0x540c39(0x9ed)]);if(!_0x26abdd)return;_0x5b6c44=!![],document[_0x540c39(0x473)](_0x540c39(0x91))['style'][_0x540c39(0x1df)]=_0x540c39(0x2a3);const _0x2b2d4e=_0x26abdd[_0x540c39(0x682)]||{'x':0x32,'y':0x64,'scale':0x1};document[_0x540c39(0x473)](_0x540c39(0xaf1))[_0x540c39(0x2d4)]=_0x2b2d4e['x'],document[_0x540c39(0x473)](_0x540c39(0xb8b))['value']=_0x2b2d4e['y'],document[_0x540c39(0x473)](_0x540c39(0x4d2))[_0x540c39(0x2d4)]=_0x2b2d4e[_0x540c39(0xd6)]*0x64,_0x17d62f={..._0x2b2d4e},document[_0x540c39(0x473)](_0x540c39(0x55c))['style'][_0x540c39(0x1df)]=_0x540c39(0x4a6),document['getElementById'](_0x540c39(0x4e2))[_0x540c39(0x3e4)][_0x540c39(0x1df)]='none';}function _0xfadd00(_0x4646ef=![]){const _0x26a9f2=_0x1cbd38;if(_0x26a9f2(0x30e)!==_0x26a9f2(0x30e))return'\x0a#\x20重点关注：用户档案相关细节\x20(基于最近对话)\x0a'+_0x20e8f3[_0x26a9f2(0x332)]('\x0a');else{_0x5b6c44=![],document[_0x26a9f2(0x473)](_0x26a9f2(0x91))[_0x26a9f2(0x3e4)]['display']='none',document[_0x26a9f2(0x473)](_0x26a9f2(0x55c))[_0x26a9f2(0x3e4)]['display']='block',document[_0x26a9f2(0x473)]('livestream-header-right')[_0x26a9f2(0x3e4)][_0x26a9f2(0x1df)]=_0x26a9f2(0x5c9);if(!_0x4646ef){if('dRuzw'!==_0x26a9f2(0x360)){const _0x2e102b=_0x1238ea(_0xa7652b[_0x26a9f2(0x9ed)]);_0x2e102b&&(_0x26a9f2(0x97f)!==_0x26a9f2(0xe9a)?(_0x2e102b[_0x26a9f2(0x682)]=_0x17d62f,_0x4f838f(_0xa7652b[_0x26a9f2(0x9ed)],'normal')):_0x142af5[_0x26a9f2(0x3e4)]['backgroundImage']=_0x26a9f2(0x6cb)+_0x29acfd[_0x26a9f2(0xc18)](_0x5c2224)+'\x27)');}else _0x150844[_0x26a9f2(0x6e4)](_0x26a9f2(0x670)+_0x53c1d7+_0x26a9f2(0xa66)),_0x2f523b=_0x43f801[_0x26a9f2(0xaf6)]({'version':0x2,'character_id':_0x4ef9f0,'last_updated':_0x1624c4(),'value_map':{'preferences':{'喜欢':[],'讨厌':[]},'sensitivities':[],'core_values':''},'behavior_profile':{'tone_style':'','emotion_summary':'','response_patterns':'','typical_emotions':null,'common_phrases':null},'emotion_schema':{'triggers':{'正面':[],'负面':[]},'comfort_zone':'','stress_signals':[]},'personality_core':{'summary':'','observed_traits':[],'interaction_style':''},'observed_changes':[]});}}}function _0x2f79b3(){const _0x292d2f=_0x1cbd38,_0x53bd08=_0x1238ea(_0xa7652b[_0x292d2f(0x9ed)]);if(!_0x53bd08)return;const _0x2b77c9=parseFloat(document['getElementById'](_0x292d2f(0xaf1))[_0x292d2f(0x2d4)]),_0x232a26=parseFloat(document[_0x292d2f(0x473)]('livestream-sprite-slider-y')[_0x292d2f(0x2d4)]),_0x1aa4ca=parseFloat(document[_0x292d2f(0x473)](_0x292d2f(0x4d2))[_0x292d2f(0x2d4)])/0x64;_0x53bd08[_0x292d2f(0x682)]={'x':_0x2b77c9,'y':_0x232a26,'scale':_0x1aa4ca},_0x2e0417(),_0x198030(_0x292d2f(0x59a)),_0xfadd00(!![]);}function _0x399672(){const _0x34e64b=_0x1cbd38;_0x410108(_0x34e64b(0xd6d))[_0x34e64b(0xcae)](_0x2fd03b=>{const _0xc869b0=_0x34e64b;if(_0x2fd03b){const _0x4f37bc=_0x1238ea(_0xa7652b[_0xc869b0(0x9ed)]);_0x4f37bc&&('WXlIG'!==_0xc869b0(0xdcf)?(_0x228105['classList'][_0xc869b0(0xddb)](_0xc869b0(0x77d)),_0x30e613[_0xc869b0(0x373)](_0xc869b0(0xcf))['textContent']=_0x9fd58['name']):(delete _0x4f37bc[_0xc869b0(0x682)],_0x2e0417(),_0x4f838f(_0x4f37bc['id'],_0xc869b0(0x177)),_0x198030(_0xc869b0(0x5df)),_0xfadd00(!![])));}});}function _0x361b9e(){const _0x345dff=_0x1cbd38;if(!_0x5b6c44)return;const _0x2af4ec=parseFloat(document[_0x345dff(0x473)]('livestream-sprite-slider-x')[_0x345dff(0x2d4)]),_0xfe579f=parseFloat(document[_0x345dff(0x473)](_0x345dff(0xb8b))[_0x345dff(0x2d4)]),_0x16be16=parseFloat(document[_0x345dff(0x473)]('livestream-sprite-slider-scale')[_0x345dff(0x2d4)])/0x64,_0xf6d237=document[_0x345dff(0x473)](_0x345dff(0xaaf));_0xf6d237&&(_0x345dff(0xc6d)===_0x345dff(0xe53)?(_0x4f60fe[_0x345dff(0x970)]['add']('sticker'),_0x36bc3b[_0x345dff(0x6f0)]+='<img\x20src=\x22'+_0x47b569+'\x22\x20class=\x22sticker-content\x22>'):(_0xf6d237[_0x345dff(0x3e4)]['height']=0x55*_0x16be16+'%',_0xf6d237[_0x345dff(0x3e4)][_0x345dff(0xc5d)]=0x55*_0x16be16+'%',_0xf6d237[_0x345dff(0x3e4)][_0x345dff(0x855)]=_0x2af4ec+'%',_0xf6d237['style'][_0x345dff(0x5d8)]=_0xfe579f+'%',_0xf6d237['style']['transform']=_0x345dff(0xc76)));}async function _0x5af214(){const _0x2fc047=_0x1cbd38;if(_0xa7652b[_0x2fc047(0x89f)]){_0x198030(_0x2fc047(0x586));return;}const _0x566e13=_0xa7652b[_0x2fc047(0x317)];if(_0x566e13[_0x2fc047(0x893)]===0x0){_0x198030(_0x2fc047(0xc6f));return;}let _0x3a95d8=-0x1;for(let _0x520d71=_0x566e13[_0x2fc047(0x893)]-0x1;_0x520d71>=0x0;_0x520d71--){if(_0x566e13[_0x520d71][_0x2fc047(0x45c)]===_0x2fc047(0x215)){let _0x37a4b6=_0x520d71;while(_0x37a4b6>0x0&&_0x566e13[_0x37a4b6-0x1][_0x2fc047(0x45c)]===_0x2fc047(0x215)){_0x37a4b6--;}_0x3a95d8=_0x37a4b6;break;}}if(_0x3a95d8===-0x1){if(_0x2fc047(0x85c)!==_0x2fc047(0x389)){_0x198030(_0x2fc047(0x9f4));return;}else _0x5af758['textContent']=_0x5c101c[_0x2fc047(0x90a)](_0x5a28b4)[_0x2fc047(0x17f)](_0x32c0d0=>_0x32c0d0[_0x2fc047(0x80e)][_0x2fc047(0x226)][_0x2fc047(0x8eb)]())[_0x2fc047(0x332)]('、');}_0x566e13[_0x2fc047(0x197)](_0x3a95d8),_0xa7652b[_0x2fc047(0x3af)]=[],_0xa7652b[_0x2fc047(0xe35)]=-0x1,document[_0x2fc047(0x473)]('livestream-text')[_0x2fc047(0x226)]='...';const _0x25377b=document[_0x2fc047(0x473)](_0x2fc047(0x23a));_0x25377b[_0x2fc047(0x6f0)]='',_0x566e13[_0x2fc047(0x1dc)](_0x23dd84=>{const _0x3fa9a3=_0x2fc047;if(_0x3fa9a3(0xde1)!==_0x3fa9a3(0xde1))return _0x319d91(_0x1e065c)[_0x3fa9a3(0xcae)](_0x15b398=>_0x15b398['blob']());else _0x23dd84[_0x3fa9a3(0x45c)]==='danmaku'&&_0x5d4eae(_0x23dd84);}),_0x1cd12c(),_0x198030(_0x2fc047(0xa7a)),setTimeout(()=>{_0x56f8f4();},0x64);}function _0x149ca8(){const _0x38f5f8=_0x1cbd38;document['getElementById'](_0x38f5f8(0xbfb))[_0x38f5f8(0xc04)](_0x38f5f8(0x493),_0x313056),document[_0x38f5f8(0x473)](_0x38f5f8(0x72e))['addEventListener'](_0x38f5f8(0x493),_0x28ec70),document['getElementById'](_0x38f5f8(0x8b2))[_0x38f5f8(0xc04)]('click',_0x5af214),document[_0x38f5f8(0x473)](_0x38f5f8(0x712))['addEventListener'](_0x38f5f8(0x493),_0x2f79b3),document[_0x38f5f8(0x473)](_0x38f5f8(0x1c8))[_0x38f5f8(0xc04)]('click',()=>_0xfadd00(![])),document['getElementById']('livestream-sprite-reset-button')['addEventListener'](_0x38f5f8(0x493),_0x399672),document['getElementById'](_0x38f5f8(0xaf1))[_0x38f5f8(0xc04)]('input',_0x361b9e),document['getElementById'](_0x38f5f8(0xb8b))['addEventListener']('input',_0x361b9e),document[_0x38f5f8(0x473)]('livestream-sprite-slider-scale')[_0x38f5f8(0xc04)](_0x38f5f8(0x1bf),_0x361b9e);}async function _0x151ad7(){const _0x46ee74=_0x1cbd38,_0xb5b51d=_0xa7652b[_0x46ee74(0x9ed)];if(!_0xb5b51d)return;_0xffff1f(_0x46ee74(0x623),_0x46ee74(0xaa2));const _0x130b39=[_0x46ee74(0x177),_0x46ee74(0xbea),'angry','sad',_0x46ee74(0xaa7)];document[_0x46ee74(0x473)](_0x46ee74(0x508))[_0x46ee74(0x3e4)]['backgroundImage']='',_0x130b39[_0x46ee74(0x1dc)](_0x11f990=>{const _0x5da1c9=_0x46ee74;document[_0x5da1c9(0x473)](_0x5da1c9(0x848)+_0x11f990+_0x5da1c9(0x612))[_0x5da1c9(0x3e4)][_0x5da1c9(0x16b)]='';});try{if(_0x46ee74(0x3e0)!==_0x46ee74(0x3e0)){const _0x25feb9=_0x4d8271[_0x46ee74(0x373)](_0x46ee74(0x4ba));_0x25feb9&&_0x25feb9['addEventListener'](_0x46ee74(0x493),function(){const _0x2bb9fa={'id':_0x15dff1['id'],'url':_0x554aef['playableUrl']};_0x14195e(this,_0x2bb9fa);});}else{const _0x374e82=await _0xf3eefa(_0x46ee74(0xb07)+_0xb5b51d);if(_0x374e82)document[_0x46ee74(0x473)](_0x46ee74(0x508))[_0x46ee74(0x3e4)][_0x46ee74(0x16b)]='url(\x27'+URL[_0x46ee74(0xc18)](_0x374e82)+'\x27)';for(const _0x2b4701 of _0x130b39){if(_0x46ee74(0xd1e)===_0x46ee74(0x220))_0x5479c3='\x0a\x0a#\x20核心世界观设定\x20(你必须严格遵守)\x0a'+_0x2047c8;else{const _0x26b19e=await _0xf3eefa(_0x46ee74(0x986)+_0x2b4701+'_'+_0xb5b51d);_0x26b19e&&(_0x46ee74(0x20c)!==_0x46ee74(0x20c)?_0x2c20ce[_0x46ee74(0x22a)][_0x46ee74(0x1dc)](_0x1af2ef=>{const _0x28a00f=_0x46ee74,_0x2620e2=_0x1a3657[_0x28a00f(0x22a)]['find'](_0xb924dc=>_0xb924dc[_0x28a00f(0xe79)]===_0x1af2ef['name']);!_0x2620e2&&_0x44c895[_0x28a00f(0x22a)]['push']({'id':_0x1af2ef['id']||_0x28a00f(0x64c)+_0xcaef75[_0x28a00f(0x144)](),'name':_0x1af2ef[_0x28a00f(0xe79)]});}):document[_0x46ee74(0x473)](_0x46ee74(0x848)+_0x2b4701+_0x46ee74(0x612))[_0x46ee74(0x3e4)][_0x46ee74(0x16b)]=_0x46ee74(0x6cb)+URL[_0x46ee74(0xc18)](_0x26b19e)+'\x27)');}}}}catch(_0x219e7e){if('EYEEK'!==_0x46ee74(0xa04)){_0x254b58(!![],_0x46ee74(0x8ce));try{const _0x11dc68={'type':_0x46ee74(0x9d5),'version':0x1,'timestamp':_0x73f378[_0x46ee74(0x144)](),'accountingData':_0x3050a6['accountingData'],'accountingLedger':_0x4bf0ee[_0x46ee74(0x9db)]},_0x13877d=_0x29d869[_0x46ee74(0xaf6)](_0x11dc68,null,0x2),_0x82d6ef=new _0x124343(),_0x16297d=_0x82d6ef[_0x46ee74(0x72f)]()+'-'+_0xc401be(_0x82d6ef[_0x46ee74(0xc57)]()+0x1)[_0x46ee74(0x2c8)](0x2,'0')+'-'+_0x446f47(_0x82d6ef[_0x46ee74(0x947)]())[_0x46ee74(0x2c8)](0x2,'0'),_0x1533ea=_0x46ee74(0x19a)+_0x16297d+_0x46ee74(0xd0f),_0x4077bb=new _0x4d99c6([_0x13877d],{'type':'application/json'});_0x4356b4(_0x4077bb,_0x1533ea);}catch(_0x36dfbf){_0x2c2169[_0x46ee74(0xc95)](_0x46ee74(0xd3),_0x36dfbf),_0x316515('导出失败了，哼:\x20'+_0x36dfbf[_0x46ee74(0xe32)]);}finally{_0x1084ef(![]);}}else console['error'](_0x46ee74(0xa90),_0x219e7e);}}async function _0x29b2c2(){const _0x391a46=_0x1cbd38,_0x50ac81=_0xa7652b[_0x391a46(0x9ed)];if(!_0x50ac81)return;_0x27a15c(!![],'正在保存...');try{const _0x1b895e=document[_0x391a46(0x473)](_0x391a46(0x9c8))[_0x391a46(0xcf5)][0x0];if(_0x1b895e)await _0x1366c1('livestream_bg_'+_0x50ac81,_0x1b895e);const _0x172ea3=[_0x391a46(0x177),'happy',_0x391a46(0xe39),'sad','shy'];for(const _0x36bfb5 of _0x172ea3){const _0x22f878=document['getElementById']('livestream-sprite-'+_0x36bfb5+'-input')[_0x391a46(0xcf5)][0x0];if(_0x22f878)await _0x1366c1(_0x391a46(0x986)+_0x36bfb5+'_'+_0x50ac81,_0x22f878);}_0x2e0417(),_0x198030(_0x391a46(0x95e)),await _0x496581(_0x50ac81),_0xffff1f(_0x391a46(0xaa2),_0x391a46(0x623));}catch(_0x1d49e9){_0x391a46(0x62f)!==_0x391a46(0xbef)?_0x198030(_0x391a46(0x847)+_0x1d49e9[_0x391a46(0xe32)]):_0x19f3a3[_0x391a46(0x402)]=_0x85228(()=>{const _0x33c2c8=_0x391a46;_0x4e64d0[_0x33c2c8(0xd27)](),_0x2db945(_0x537583,_0x2bfcd7);},0x320);}finally{_0x27a15c(![]);}}function _0x2e624d(){const _0x45945e=_0x1cbd38;document[_0x45945e(0x473)]('livestream-settings-btn')[_0x45945e(0xc04)](_0x45945e(0x493),_0x151ad7),document[_0x45945e(0x473)](_0x45945e(0xe68))['addEventListener'](_0x45945e(0x493),()=>_0xffff1f(_0x45945e(0xaa2),_0x45945e(0x623))),document[_0x45945e(0x473)](_0x45945e(0xbc3))[_0x45945e(0xc04)](_0x45945e(0x493),_0x29b2c2),document[_0x45945e(0x473)](_0x45945e(0x508))[_0x45945e(0xc04)](_0x45945e(0x493),()=>document[_0x45945e(0x473)](_0x45945e(0x9c8))['click']()),document[_0x45945e(0x473)](_0x45945e(0x9c8))[_0x45945e(0xc04)](_0x45945e(0x1c4),_0x5a0d21=>{const _0x1a23cf=_0x45945e,_0x208758=_0x5a0d21[_0x1a23cf(0x63c)][_0x1a23cf(0xcf5)][0x0];if(_0x208758)document[_0x1a23cf(0x473)](_0x1a23cf(0x508))[_0x1a23cf(0x3e4)][_0x1a23cf(0x16b)]='url(\x27'+URL[_0x1a23cf(0xc18)](_0x208758)+'\x27)';});const _0x55c99f=[_0x45945e(0x177),_0x45945e(0xbea),'angry',_0x45945e(0xac6),_0x45945e(0xaa7)];_0x55c99f[_0x45945e(0x1dc)](_0x349f5d=>{const _0x4d7da6=_0x45945e,_0x3a5e6a=document[_0x4d7da6(0x473)](_0x4d7da6(0x848)+_0x349f5d+_0x4d7da6(0x612)),_0x24c27a=document[_0x4d7da6(0x473)](_0x4d7da6(0x848)+_0x349f5d+_0x4d7da6(0xab5));_0x3a5e6a[_0x4d7da6(0xc04)](_0x4d7da6(0x493),()=>_0x24c27a[_0x4d7da6(0x493)]()),_0x24c27a[_0x4d7da6(0xc04)]('change',_0x57e05f=>{const _0x800e6d=_0x4d7da6,_0x6114ae=_0x57e05f[_0x800e6d(0x63c)]['files'][0x0];if(_0x6114ae)_0x3a5e6a['style'][_0x800e6d(0x16b)]='url(\x27'+URL['createObjectURL'](_0x6114ae)+'\x27)';});});}function _0x4f2d9b(){const _0x28af38=_0x1cbd38;console[_0x28af38(0x6e4)]('TODO:\x20结束直播并生成总结');}document['getElementById'](_0x1cbd38(0x55c))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x3b4ff4);const _0x34129b=document['getElementById'](_0x1cbd38(0x294)),_0x55aa1a=document[_0x1cbd38(0x473)](_0x1cbd38(0x980)),_0x206980=document[_0x1cbd38(0x473)](_0x1cbd38(0xd0c)),_0xf16d6d=document[_0x1cbd38(0x473)](_0x1cbd38(0x203)),_0x554e0d=document[_0x1cbd38(0x473)](_0x1cbd38(0xc2f)),_0x46a070=document[_0x1cbd38(0x473)](_0x1cbd38(0x369)),_0x58620a=document['getElementById'](_0x1cbd38(0x8e1));_0x34129b['addEventListener']('click',()=>{const _0x190b8b=_0x1cbd38;_0x46a070[_0x190b8b(0x2d4)]='',_0x58620a[_0x190b8b(0x2d4)]='',_0x55aa1a[_0x190b8b(0x970)][_0x190b8b(0xddb)](_0x190b8b(0x348)),_0x46a070[_0x190b8b(0x190)]();});const _0x477c9b=()=>_0x55aa1a[_0x1cbd38(0x970)][_0x1cbd38(0x702)](_0x1cbd38(0x348));_0xf16d6d['addEventListener'](_0x1cbd38(0x493),_0x477c9b),_0x554e0d[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x477c9b),_0x206980[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x5350df=_0x1cbd38,_0x307dc1=_0x46a070['value'][_0x5350df(0x8eb)](),_0x440dbe=_0x58620a[_0x5350df(0x2d4)][_0x5350df(0x8eb)]();if(!_0x307dc1||!_0x440dbe){_0x198030(_0x5350df(0x459));return;}_0x477c9b(),_0x1fabaf(_0x307dc1,_0x440dbe);}),document[_0x1cbd38(0x473)]('back-to-home-from-livestream-list')[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>_0xffff1f('home',_0x1cbd38(0xd89))),document['getElementById'](_0x1cbd38(0x13d))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),()=>{const _0x5aaa59=_0x1cbd38;if(_0x5aaa59(0xc4d)===_0x5aaa59(0xe9b))return[_0xdeef40];else{const _0x1a5ad8=document[_0x5aaa59(0x473)](_0x5aaa59(0x4b4))['style'][_0x5aaa59(0x1df)]===_0x5aaa59(0x4a6);_0x1a5ad8?_0x410108(_0x5aaa59(0x84e))[_0x5aaa59(0xcae)](async _0x2f8424=>{const _0x299ffa=_0x5aaa59;if(_0x299ffa(0xadd)==='wvmrx'){if(_0x2f8424){if('pYluT'!==_0x299ffa(0xe6)){_0x1cd12c();const _0x429188=await _0x393043(!![]);if(_0x429188){const _0x53c418=document[_0x299ffa(0x473)](_0x299ffa(0xdb1)),_0x2a5a22=document[_0x299ffa(0x473)](_0x299ffa(0xe1b)),_0x2b94fa=document[_0x299ffa(0x473)](_0x299ffa(0xc23)),_0x10afe5=document[_0x299ffa(0x473)]('summary-reroll-btn'),_0x354212=document[_0x299ffa(0x473)](_0x299ffa(0xc1)),_0x329e54=document['getElementById'](_0x299ffa(0xcc4));_0x2a5a22[_0x299ffa(0x2d4)]=_0x429188,_0x53c418[_0x299ffa(0x970)]['add']('show'),_0x2b94fa[_0x299ffa(0x4e9)]=()=>{const _0x1e9b10=_0x299ffa;if('Awvex'!=='Awvex')_0x436c1b(_0x1e9b10(0xcf3));else{const _0x1fc643=_0x2a5a22[_0x1e9b10(0x2d4)],_0x41c40f=_0xa7652b[_0x1e9b10(0x9ed)];if(!_0xa7652b[_0x1e9b10(0xa25)][_0x41c40f]){if('fciIx'===_0x1e9b10(0xcca)){_0x57a655(_0x1e9b10(0xdd2));return;}else _0xa7652b[_0x1e9b10(0xa25)][_0x41c40f]=[];}_0xa7652b[_0x1e9b10(0xa25)][_0x41c40f]['unshift'](_0x1fc643),localStorage[_0x1e9b10(0x863)](_0x1e9b10(0x997)),_0xa7652b['currentLivestreamLog']=[],_0x2e0417(),_0x53c418['classList'][_0x1e9b10(0x702)]('show'),_0x198030('直播回放已归档！'),_0xffff1f(_0x1e9b10(0xd89),_0x1e9b10(0xaa2));}},_0x10afe5['onclick']=async()=>{const _0x304468=_0x299ffa;if(_0x304468(0xd8)===_0x304468(0xbff)){if(!_0x43e7fe[_0x304468(0x8aa)](_0x5106cc))return _0x304468(0x1b8);if(_0x17a7d7['length']===0x0)return _0x304468(0x392);return _0x286970['sort']((_0x1815cd,_0x6e85e2)=>new _0x178565(_0x6e85e2[_0x304468(0xb9f)])-new _0x48d904(_0x1815cd[_0x304468(0xb9f)])),_0x304468(0xbe)+_0x1ed7ae[_0x304468(0x17f)](_0x4549c6=>_0x304468(0xda0)+(_0x4549c6[_0x304468(0xb5d)]||_0x304468(0xe05))+_0x304468(0xd75)+(_0x4549c6['activity_description']||'')+_0x304468(0xb2)+(_0x4549c6[_0x304468(0xb9f)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')['join']('')+_0x304468(0x9da);}else{const _0x54960f=await _0x393043(!![]);_0x54960f&&(_0x2a5a22[_0x304468(0x2d4)]=_0x54960f,_0x198030(_0x304468(0x38d)));}};const _0x1c8bc8=()=>{const _0x2c20e9=_0x299ffa;if(_0x2c20e9(0x11a)!==_0x2c20e9(0xdd6))_0x53c418[_0x2c20e9(0x970)][_0x2c20e9(0x702)](_0x2c20e9(0x348));else{const _0x356899=_0x532c29['content']?'\x20'+_0x5aa3f4[_0x2c20e9(0xb17)]:'';_0x2f22e8[_0x2c20e9(0x214)]('['+_0x3b94d2(_0x334f86)+_0x2c20e9(0x6a2)+_0x356899);}};_0x354212[_0x299ffa(0x4e9)]=_0x1c8bc8,_0x329e54[_0x299ffa(0x4e9)]=_0x1c8bc8;}else{}}else _0x50b003[_0x299ffa(0x694)][_0x299ffa(0x214)]({'senderId':_0x3e80ba['id'],'kind':_0x299ffa(0x83a),'sticker':_0x397a46});}}else{const _0x11805f=_0x7578b8[_0x299ffa(0xb34)]('chatHistory_'+_0x11057),_0x462db4=_0x57469b[_0x299ffa(0x180)](_0x11805f||'[]');return _0x4df12a[_0x299ffa(0x8aa)](_0x462db4)?_0x462db4:[];}}):_0xffff1f(_0x5aaa59(0xd89),'livestreamRoom');}});const _0x25059a=document[_0x1cbd38(0x473)](_0x1cbd38(0x861)),_0x558374=document[_0x1cbd38(0x473)](_0x1cbd38(0x356));_0x25059a&&_0x558374&&(_0x25059a['addEventListener'](_0x1cbd38(0x493),()=>_0x558374['click']()),_0x558374[_0x1cbd38(0xc04)](_0x1cbd38(0x1c4),_0x2c0bc9)),document[_0x1cbd38(0x473)](_0x1cbd38(0x1db))[_0x1cbd38(0xc04)](_0x1cbd38(0x493),_0x409d90);}const _0x22c071=_0x57ab4d(0x319);async function _0xea989e(_0x18f01c){const _0x4b14dc=await _0x90829d;return new Promise((_0x57c930,_0x283f19)=>{const _0x43dd77=_0x20c5,_0x125bb5=_0x4b14dc[_0x43dd77(0xdb0)](_0x22c071,_0x43dd77(0xe51)),_0x289ece=_0x125bb5[_0x43dd77(0xb9d)](_0x22c071),_0x51fe6e=_0x289ece['get'](_0x18f01c);_0x51fe6e['onsuccess']=()=>_0x57c930(_0x51fe6e[_0x43dd77(0xdc7)]),_0x51fe6e[_0x43dd77(0x835)]=()=>_0x283f19(_0x51fe6e['error']);});}async function _0x4604c2(){const _0x4aacd5=_0x57ab4d;if('kvhAW'==='ygZhX')_0x4a8d41[_0x4aacd5(0xc04)]('click',_0x267a09);else{const _0x343a02=await _0x90829d;return new Promise((_0x35547a,_0x378508)=>{const _0x48c7f3=_0x4aacd5,_0x4d4088=_0x343a02['transaction'](_0x22c071,'readonly'),_0x363202=_0x4d4088[_0x48c7f3(0xb9d)](_0x22c071),_0x15fca0=_0x363202['getAll']();_0x15fca0['onsuccess']=()=>_0x35547a(_0x15fca0[_0x48c7f3(0xdc7)]),_0x15fca0[_0x48c7f3(0x835)]=()=>_0x378508(_0x15fca0[_0x48c7f3(0xc95)]);});}}async function _0x327586(_0x41df4c){const _0x2c95d0=await _0x90829d;return new Promise((_0x4867f2,_0x3cd82b)=>{const _0x4541db=_0x20c5;if('ZkmWM'===_0x4541db(0x29f))_0x2be13d['textContent']=_0x5a8930[_0x4541db(0xe79)]||_0x4541db(0x34c)+_0x54fbe9[_0x4541db(0x584)][_0x4541db(0x893)]+')';else{const _0x3f9ddf=_0x2c95d0[_0x4541db(0xdb0)](_0x22c071,_0x4541db(0x4a7)),_0x2c434d=_0x3f9ddf[_0x4541db(0xb9d)](_0x22c071),_0x4255d3=_0x2c434d[_0x4541db(0x5d6)](_0x41df4c);_0x4255d3[_0x4541db(0x7ad)]=()=>_0x4867f2(_0x4255d3[_0x4541db(0xdc7)]),_0x4255d3[_0x4541db(0x835)]=()=>_0x3cd82b(_0x4255d3[_0x4541db(0xc95)]);}});}async function _0x16d386(_0x59d523){const _0x441b89=await _0x90829d;return new Promise((_0x1682b2,_0x386249)=>{const _0x484860=_0x20c5;if(_0x484860(0x679)!==_0x484860(0xa5a)){const _0x15b313=_0x441b89['transaction'](_0x22c071,_0x484860(0x4a7)),_0x23a6b7=_0x15b313[_0x484860(0xb9d)](_0x22c071),_0x2b08c5=_0x23a6b7[_0x484860(0x1d2)](_0x59d523);_0x2b08c5[_0x484860(0x7ad)]=()=>_0x1682b2(),_0x2b08c5[_0x484860(0x835)]=()=>_0x386249(_0x2b08c5[_0x484860(0xc95)]);}else _0x10666b(_0x4a8758),_0xf69765();});}let _0x77e446={'audio':null,'cover':null,'info':null,'lyrics':null};const _0xfd05a7={'audio':document['getElementById'](_0x57ab4d(0xc3)),'cover':document[_0x57ab4d(0x473)](_0x57ab4d(0x97a)),'info':document[_0x57ab4d(0x473)](_0x57ab4d(0xbbb)),'lyrics':document[_0x57ab4d(0x473)](_0x57ab4d(0x8f8))},_0x2ab2cc={'audio':document['getElementById'](_0x57ab4d(0x4ea)),'cover':document['getElementById'](_0x57ab4d(0x813)),'info':document[_0x57ab4d(0x473)]('info-file-input'),'lyrics':document[_0x57ab4d(0x473)](_0x57ab4d(0x1ab))};function _0x4a636a(){const _0x31f8c0=_0x57ab4d;if(_0x31f8c0(0xd1)!==_0x31f8c0(0xd3e)){const _0x28cf72=document[_0x31f8c0(0x473)](_0x31f8c0(0x1db));_0x77e446[_0x31f8c0(0xd12)]&&_0x77e446[_0x31f8c0(0x70d)]?_0x31f8c0(0xd98)!=='xBYNB'?_0x28cf72[_0x31f8c0(0xdeb)]=![]:(_0x413f11['style'][_0x31f8c0(0x1ba)]=_0x31f8c0(0x8bb),_0x1e9b5b[_0x31f8c0(0x3e4)]['textShadow']=_0x31f8c0(0x183)):_0x28cf72['disabled']=!![];}else{const _0x74814c=_0x3a15f2(_0x2781c4[_0x31f8c0(0xd5b)]);_0xe3bfa5=_0x74814c[_0x31f8c0(0x98f)]||_0xe5ed86;const _0x33afe8=_0x4f360f(_0x42b02a?.[_0x31f8c0(0x584)][0x0]);_0x33afe8&&(_0x1b3f35=_0x33afe8[_0x31f8c0(0x210)]||'');}}async function _0x2c0bc9(_0x2c799a){const _0x29e6f7=_0x57ab4d,_0x1b96f1=_0x2c799a[_0x29e6f7(0x63c)][_0x29e6f7(0xcf5)][0x0];if(!_0x1b96f1)return;_0x27a15c(!![],_0x29e6f7(0x45f));const _0x17fd50=document[_0x29e6f7(0x473)](_0x29e6f7(0x861)),_0x43a8c8=document['getElementById'](_0x29e6f7(0x1db));_0x17fd50[_0x29e6f7(0x970)][_0x29e6f7(0x702)](_0x29e6f7(0x77d)),_0x43a8c8['disabled']=!![],_0x17fd50[_0x29e6f7(0x373)](_0x29e6f7(0xcf))['textContent']=_0x1b96f1[_0x29e6f7(0xe79)];try{const _0xeaaccb=await JSZip[_0x29e6f7(0x556)](_0x1b96f1),_0xbc5b30={'audio':null,'cover':null,'info':null,'lyrics':null},_0x5ba105=[];_0xeaaccb[_0x29e6f7(0x1dc)]((_0x480556,_0xf9afa1)=>{const _0x5de9dc=_0x29e6f7,_0x1258a3=_0xf9afa1[_0x5de9dc(0xe79)];if(/\.(mp3|flac)$/i['test'](_0x1258a3)){if('MCrAC'!=='MCrAC'){const _0x568a58=_0x299b97['parse'](_0x307cf0[_0x5de9dc(0x9c6)][_0x5de9dc(0x6e4)][_0x5de9dc(0x833)](/&quot;/g,'\x22')),_0x2d8cd4=_0x5f0bbf[_0x5de9dc(0x9c6)]['contactName'],_0x2fd97c=_0x5e6cfb[_0x5de9dc(0x9c6)][_0x5de9dc(0x3f2)];_0x7c8148(_0x2d8cd4,_0x2fd97c,_0x568a58);}else _0x5ba105['push'](_0xf9afa1['async']('blob')[_0x5de9dc(0xcae)](_0x5777e8=>_0xbc5b30[_0x5de9dc(0xd12)]=new File([_0x5777e8],_0xf9afa1[_0x5de9dc(0xe79)])));}else{if(/\.(jpg|jpeg|png|webp)$/i[_0x5de9dc(0x4cf)](_0x1258a3))_0x5ba105[_0x5de9dc(0x214)](_0xf9afa1[_0x5de9dc(0x4fe)](_0x5de9dc(0x5c1))[_0x5de9dc(0xcae)](_0x5714a7=>_0xbc5b30['cover']=new File([_0x5714a7],_0xf9afa1[_0x5de9dc(0xe79)])));else{if(/\.(txt|json)$/i[_0x5de9dc(0x4cf)](_0x1258a3))_0x5ba105[_0x5de9dc(0x214)](_0xf9afa1[_0x5de9dc(0x4fe)](_0x5de9dc(0x5c1))[_0x5de9dc(0xcae)](_0x359509=>_0xbc5b30[_0x5de9dc(0x70d)]=new File([_0x359509],_0xf9afa1[_0x5de9dc(0xe79)])));else/\.lrc$/i[_0x5de9dc(0x4cf)](_0x1258a3)&&_0x5ba105['push'](_0xf9afa1[_0x5de9dc(0x4fe)]('blob')[_0x5de9dc(0xcae)](_0x4506fb=>_0xbc5b30['lyrics']=new File([_0x4506fb],_0xf9afa1['name'])));}}}),await Promise[_0x29e6f7(0xc1d)](_0x5ba105);if(!_0xbc5b30[_0x29e6f7(0xd12)]||!_0xbc5b30[_0x29e6f7(0x70d)])throw new Error(_0x29e6f7(0xbd1));_0x77e446=_0xbc5b30,_0x17fd50[_0x29e6f7(0x970)][_0x29e6f7(0xddb)]('filled'),_0x43a8c8[_0x29e6f7(0xdeb)]=![],_0x27a15c(![]),_0x198030('音乐魔方解析完毕，随时可以献上祭品。');}catch(_0xb01aad){if(_0x29e6f7(0x113)!=='zVbtl')_0x27a15c(![]),console[_0x29e6f7(0xc95)](_0x29e6f7(0x274),_0xb01aad),_0x198030(_0x29e6f7(0x560)+_0xb01aad['message']),_0x17fd50[_0x29e6f7(0x373)](_0x29e6f7(0xcf))['textContent']=_0x29e6f7(0x1e4);else{const _0x41b42b=[];if(_0x56571b[_0x29e6f7(0x893)]>0x0)_0x41b42b['push']('喜欢'+_0x45f64e[_0x29e6f7(0x1de)](0x0,0x3)[_0x29e6f7(0x332)]('、'));if(_0x10d4b2[_0x29e6f7(0x893)]>0x0)_0x41b42b[_0x29e6f7(0x214)]('讨厌'+_0x523261['slice'](0x0,0x2)[_0x29e6f7(0x332)]('、'));_0x284bf6[_0x29e6f7(0x214)]('偏好:\x20'+_0x41b42b[_0x29e6f7(0x332)]('；'));}}finally{_0x2c799a['target'][_0x29e6f7(0x2d4)]='';}}document[_0x57ab4d(0x473)]('confirm-altar-upload-button')[_0x57ab4d(0xc04)]('click',async()=>{const _0x1467cb=_0x57ab4d;if(!_0x77e446[_0x1467cb(0xd12)]||!_0x77e446[_0x1467cb(0x70d)]){if(_0x1467cb(0x9bd)===_0x1467cb(0xe8e))_0x58d3fd[_0x1467cb(0xc95)](_0x1467cb(0xdc1),_0x329916);else{_0x198030(_0x1467cb(0x322));return;}}await _0x409d90();}),document[_0x57ab4d(0x473)]('upload-music-button')[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x12ae9c=_0x57ab4d;_0xffff1f(_0x12ae9c(0x5d1),'musicLibrary');}),document[_0x57ab4d(0x473)](_0x57ab4d(0x7b2))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{_0xffff1f('musicLibrary','musicUploadAltar');});let _0x4f505b=![];async function _0x409d90(){const _0x5e3055=_0x57ab4d;if(_0x5e3055(0x4d7)===_0x5e3055(0x4d7)){if(_0x4f505b){if(_0x5e3055(0x504)===_0x5e3055(0xb87))_0x2745f2[_0x5e3055(0xc95)](_0x5e3055(0x81d),_0x5a85bb),_0x49b20a(_0x5e3055(0x933)+_0x3d1a80[_0x5e3055(0xe32)]);else{console[_0x5e3055(0x6e4)](_0x5e3055(0x1f0));return;}}_0x4f505b=!![],_0x27a15c(!![],_0x5e3055(0x496));try{if(_0x5e3055(0x325)!==_0x5e3055(0x325))_0x1ba9e2+=_0x5e3055(0x91f)+_0x1b4a66[_0x5e3055(0xb5d)]+_0x5e3055(0x614)+_0x1f1cdd[_0x5e3055(0x687)]+_0x5e3055(0x9a9);else{const _0x3452a5=await _0x77e446[_0x5e3055(0x70d)][_0x5e3055(0x51c)]();let _0x4e6828;if(_0x3452a5[_0x5e3055(0x8eb)]()[_0x5e3055(0x324)]('{'))_0x4e6828=JSON['parse'](_0x3452a5);else{if(_0x5e3055(0x780)!==_0x5e3055(0x780))_0x45c021(),_0x3d294a(_0x5e3055(0xd89),_0x5e3055(0xbd6));else{_0x4e6828={};const _0x52ad33=_0x3452a5[_0x5e3055(0x8ff)]('\x0a');_0x52ad33[_0x5e3055(0x1dc)](_0x552a30=>{const _0x13e893=_0x5e3055;if('jzeDc'===_0x13e893(0xc3e)){if(_0x3c5920[_0x13e893(0x45c)]===_0x13e893(0x215))return _0x13e893(0xe13)+_0x337369[_0x13e893(0x9a4)]+']：'+_0x3218cf['content'];return'[弹幕\x20'+_0x32a286['user']+']：'+(_0x340364[_0x13e893(0xdf3)]||_0xc793a3[_0x13e893(0xb17)]);}else{const _0xb09f25=_0x552a30[_0x13e893(0x8ff)](/:\s|：\s/);if(_0xb09f25['length']===0x2){const _0x264896=_0xb09f25[0x0][_0x13e893(0x8eb)](),_0x465934=_0xb09f25[0x1]['trim'](),_0x4f8da8={'歌名':_0x13e893(0xe8f),'艺术家':'歌手','专辑':'专辑'};_0x4f8da8[_0x264896]&&(_0x4e6828[_0x4f8da8[_0x264896]]=_0x465934);}}});if(!_0x4e6828[_0x5e3055(0xe8f)])throw new Error(_0x5e3055(0xf4));_0x4e6828['歌曲ID']=_0x5e3055(0x94f)+Date[_0x5e3055(0x144)]()+'\x20';}}const _0x4c0217=_0x5e3055(0x94f)+(_0x4e6828[_0x5e3055(0x800)]||Date[_0x5e3055(0x144)]()),_0x66a4f8={'id':_0x4c0217,'info':_0x4e6828,'audio':_0x77e446[_0x5e3055(0xd12)],'cover':_0x77e446['cover'],'lyrics':_0x77e446[_0x5e3055(0x996)]?await _0x77e446[_0x5e3055(0x996)][_0x5e3055(0x51c)]():''};console[_0x5e3055(0x6e4)]('准备存入圣殿:',_0x66a4f8['id'],_0x4e6828['歌曲名称']),await _0x327586(_0x66a4f8),_0x27a15c(![]),_0x198030(_0x5e3055(0x47c)+_0x4e6828['歌曲名称']+'\x22已存入圣殿。'),_0xffff1f(_0x5e3055(0xceb),_0x5e3055(0x5d1)),setTimeout(_0x438bcd,0x32);}}catch(_0x384428){if('pyhrG'!==_0x5e3055(0xd0d))_0x27a15c(![]),console[_0x5e3055(0xc95)](_0x5e3055(0xa9),_0x384428),_0x198030(_0x5e3055(0x54e)+_0x384428[_0x5e3055(0xe32)]+'\x20');else{_0x9b4bac[_0x5e3055(0xc95)]('批量生成动态失败:\x20',_0x579fcb),_0x2d836b[_0x5e3055(0xa79)]=_0x1013bb;throw _0x4b580b;}}finally{_0x4f505b=![];}}else _0xe42f41(),_0x4dc4a0(_0x5e3055(0x1cf),_0x5e3055(0xbcc));}async function _0x438bcd(){const _0x5194cb=_0x57ab4d;if(_0x5194cb(0x870)===_0x5194cb(0x870)){const _0x5ca263=document['getElementById'](_0x5194cb(0xbb4));_0x5ca263['innerHTML']='';const _0x47a364=await _0x4604c2();console[_0x5194cb(0x6e4)](_0x5194cb(0xe2e),_0x47a364);if(_0x47a364[_0x5194cb(0x893)]===0x0){if(_0x5194cb(0x4aa)!==_0x5194cb(0x9ef)){_0x5ca263['innerHTML']=_0x5194cb(0x7ab);return;}else _0xd744c0['src']&&_0x23d011[_0x5194cb(0x3e4)][_0x5194cb(0x5cf)]!=='0'?(_0x4f7c7d['style'][_0x5194cb(0x5cf)]=0x0,_0x50720c(()=>{const _0xf9fd5d=_0x5194cb;_0x4dad6d['src']=_0x38503a['createObjectURL'](_0x32c344),_0x588bfe[_0xf9fd5d(0x3e4)][_0xf9fd5d(0x5cf)]=0x1;},0x96)):(_0x5ab959[_0x5194cb(0x706)]=_0x4862c2[_0x5194cb(0xc18)](_0xc68574),_0x47508d['style'][_0x5194cb(0x5cf)]=0x1);}_0x47a364[_0x5194cb(0x84c)]((_0x6acffe,_0x34ad5f)=>(_0x6acffe['info'][_0x5194cb(0xe8f)]||'')[_0x5194cb(0xd68)](_0x34ad5f['info'][_0x5194cb(0xe8f)]||''));for(const _0x1c8ab7 of _0x47a364){const _0x19ea48=document[_0x5194cb(0x7a9)]('div');_0x19ea48[_0x5194cb(0xd04)]=_0x5194cb(0x582),_0x19ea48[_0x5194cb(0x9c6)]['songId']=_0x1c8ab7['id'];const _0x25c146=_0x1c8ab7['cover']?URL[_0x5194cb(0xc18)](_0x1c8ab7['cover']):_0x96c08e;_0x19ea48[_0x5194cb(0x6f0)]=_0x5194cb(0x915)+_0x25c146+_0x5194cb(0x479)+(_0x1c8ab7[_0x5194cb(0x70d)]['歌曲名称']||_0x5194cb(0x37c))+_0x5194cb(0x644)+(_0x1c8ab7['info']['歌手']||_0x5194cb(0x530))+'</div>\x0a\x20\x20</div>\x0a';let _0x196916=null;const _0x47043c=_0x838f74=>{const _0x3c0d0e=_0x5194cb;if('cwQTp'!==_0x3c0d0e(0xc6b))_0x310f0f['error'](_0x3c0d0e(0x44a)+_0x27b19b+':',_0x24ef52);else{if(_0x838f74[_0x3c0d0e(0x849)]===0x2)return;_0x196916=setTimeout(async()=>{const _0x25c03c=_0x3c0d0e;if('ZUaRP'!==_0x25c03c(0x5e7))_0x1df335[_0x25c03c(0xc95)](_0x25c03c(0x9c2)+_0x347c3b['id']+')，已跳过。这不应该发生，数据库可能已损坏。',_0x40fa77);else{if(_0x838f74['type']===_0x25c03c(0x69c))_0x838f74[_0x25c03c(0xd27)]();const _0x3a4b7d=await _0x410108(_0x25c03c(0xbd5)+_0x1c8ab7[_0x25c03c(0x70d)][_0x25c03c(0xe8f)]+'》吗？');_0x3a4b7d&&(_0x25c03c(0xdbd)===_0x25c03c(0xdbd)?(await _0x16d386(_0x1c8ab7['id']),await _0x438bcd(),_0x198030(_0x25c03c(0x5db))):_0x30c0bc[_0x384a3a]=_0x3b3006[_0x25c03c(0x180)](_0x1e0c38));}},0x320);}},_0x58c5d1=()=>{const _0x42e06b=_0x5194cb;_0x42e06b(0x76d)===_0x42e06b(0xd85)?_0x47c6fa('错误:\x20'+_0x3ebac5['message']):clearTimeout(_0x196916);};_0x19ea48[_0x5194cb(0xc04)](_0x5194cb(0xc32),_0x47043c),_0x19ea48[_0x5194cb(0xc04)](_0x5194cb(0x241),_0x58c5d1),_0x19ea48[_0x5194cb(0xc04)]('mouseleave',_0x58c5d1),_0x19ea48[_0x5194cb(0xc04)](_0x5194cb(0x69c),_0x47043c,{'passive':![]}),_0x19ea48['addEventListener'](_0x5194cb(0xcf0),_0x58c5d1),_0x19ea48['addEventListener'](_0x5194cb(0x1d3),_0x58c5d1),_0x19ea48[_0x5194cb(0xc04)](_0x5194cb(0x493),_0x3b1a7c=>{if(_0x196916)clearTimeout(_0x196916);if(_0x3b1a7c['defaultPrevented'])return;setTimeout(()=>{const _0x3552b9=_0x20c5;_0x196916&&_0x42c003(_0x1c8ab7['id'],_0x47a364[_0x3552b9(0x17f)](_0x1167ad=>_0x1167ad['id']));},0x32);}),_0x5ca263[_0x5194cb(0xced)](_0x19ea48);}}else{const _0x3cfb0c=(_0x53550b-0x5a)*_0x135900['PI']/0xb4;return{'x':_0x219c99+_0x4c09f2*_0x5968ca[_0x5194cb(0xc63)](_0x3cfb0c),'y':_0x379001+_0x1853fa*_0x49cc71[_0x5194cb(0x66c)](_0x3cfb0c)};}}_0x392688['addEventListener'](_0x57ab4d(0x493),()=>{const _0x417de4=_0x57ab4d;_0x417de4(0x7c1)!==_0x417de4(0x7c1)?_0x3ff8de['currentAbortController']&&_0x5cb51a[_0x417de4(0x858)][_0x417de4(0xdb3)]===_0x31cde9&&(_0x28b9a4[_0x417de4(0x858)]=null):_0x198030(_0x417de4(0x737));}),_0x349a3b[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x419189=_0x57ab4d;_0x198030(_0x419189(0x97c));});let _0x108b4b=[],_0x353f86=-0x1;async function _0x42c003(_0x576915,_0x15891f){const _0x381852=_0x57ab4d;if(_0x381852(0xfc)!==_0x381852(0xfc)){_0x3eec02(_0x381852(0x771),_0x381852(0x852));if(!_0x2ab93a){const _0x3ffbe3=_0x381852(0x5f5)+_0x33ead0[_0x381852(0x144)]();_0x1c5abf(_0x3ffbe3);}}else{const _0x4ea110=await _0xea989e(_0x576915);if(!_0x4ea110)return;_0x5dbdc5={'title':_0x4ea110[_0x381852(0x70d)][_0x381852(0xe8f)]||_0x381852(0x37c),'artist':_0x4ea110[_0x381852(0x70d)]['歌手']||_0x381852(0x530),'cover':_0x4ea110[_0x381852(0xdd5)]?URL[_0x381852(0xc18)](_0x4ea110[_0x381852(0xdd5)]):_0x96c08e,'isFromLibrary':!![]};const _0x39360a=URL['createObjectURL'](_0x4ea110[_0x381852(0xd12)]);_0x5552f1[_0x381852(0x706)]=_0x39360a,_0x5552f1[_0x381852(0x50a)](),_0x466f7d();}}async function _0x466f7d(){const _0x1a8334=_0x57ab4d,_0x325502=document[_0x1a8334(0x473)]('music-widget-card'),_0x456022=document[_0x1a8334(0x473)]('widget-title'),_0x12ee1a=document[_0x1a8334(0x473)](_0x1a8334(0xb6c)),_0x1f7712=document[_0x1a8334(0x473)](_0x1a8334(0xe9e)),_0x1ee4d5=_0x5dbdc5;_0x1ee4d5&&_0x1ee4d5[_0x1a8334(0x2f3)]?'KqVeS'===_0x1a8334(0x677)?(_0x456022[_0x1a8334(0x226)]=_0x1ee4d5[_0x1a8334(0x136)],_0x12ee1a[_0x1a8334(0x226)]=_0x1ee4d5[_0x1a8334(0x6e3)],_0x325502[_0x1a8334(0x970)][_0x1a8334(0xddb)](_0x1a8334(0xba7)),_0x325502[_0x1a8334(0x3e4)][_0x1a8334(0xd2c)](_0x1a8334(0x878),_0x1a8334(0x548)+_0x1ee4d5[_0x1a8334(0xdd5)]+')')):_0x5352b9=_0x1be221[_0x1a8334(0x180)](_0x4601ac):(_0x456022[_0x1a8334(0x226)]=_0x1a8334(0xe0d),_0x12ee1a[_0x1a8334(0x226)]=_0x1a8334(0x359),_0x325502[_0x1a8334(0x970)][_0x1a8334(0x702)]('is-playing'),_0x1f7712['style'][_0x1a8334(0xd2c)](_0x1a8334(0x878),_0x1a8334(0x4a6)));}function _0x4fc791(){const _0x583783=_0x57ab4d;if('okxZK'!==_0x583783(0xada)){const _0x2268a5=_0x55ff87[_0x583783(0x7a9)](_0x583783(0x527));_0x2268a5['className']=_0x583783(0xc66),_0x2268a5[_0x583783(0x6f0)]=_0x583783(0xc7b)+_0x4baf5c[_0x583783(0x881)]+_0x583783(0xb2e)+_0x3e9d92[_0x583783(0xe79)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2268a5['addEventListener'](_0x583783(0x493),()=>_0x51efad(_0x3e276b['id'],_0x4f2fd8[_0x583783(0xe79)])),_0x56698b['appendChild'](_0x2268a5);}else{const _0x468261=document[_0x583783(0x473)](_0x583783(0x86e));if(!_0x468261)return;const _0x50c85c=document['getElementById'](_0x583783(0x25f)),_0x243b83=document[_0x583783(0x473)](_0x583783(0x321)),_0x24235b=document['getElementById'](_0x583783(0x646)),_0x2f210a=document[_0x583783(0x473)](_0x583783(0x7d6)),_0x1a5ff1=_0xa7652b[_0x583783(0x2bd)][_0xa7652b[_0x583783(0xd5d)]],_0x584bc8=_0xa7652b[_0x583783(0x9d1)],_0x35ad45=document[_0x583783(0x473)]('music-screen')[_0x583783(0x970)][_0x583783(0x85f)](_0x583783(0x4b2));_0x1a5ff1&&_0x35ad45?_0x583783(0x736)!==_0x583783(0x736)?(_0x164bea[_0x583783(0x706)]=_0x4c095b[_0x583783(0xc18)](_0x1053ed),_0x2514b3[_0x583783(0x3e4)]['display']=_0x583783(0x2a3)):(_0x468261[_0x583783(0x970)][_0x583783(0x702)](_0x583783(0x519)),_0x1a5ff1['coverId']?'wMkAd'!==_0x583783(0x86b)?_0xf3eefa(_0x1a5ff1['coverId'])['then'](_0x58452d=>{const _0x30826f=_0x583783;if(_0x58452d)_0x50c85c[_0x30826f(0x706)]=URL['createObjectURL'](_0x58452d);}):(_0x236060(),_0x7dd246('worldBook',_0x583783(0x447))):_0x50c85c[_0x583783(0x706)]=_0x1a5ff1['coverUrl']||_0x96c08e,_0x243b83['textContent']=_0x1a5ff1['songName']||_0x583783(0x37c),_0x24235b['textContent']=_0x1a5ff1[_0x583783(0x6e3)]||_0x583783(0x530),_0x2f210a[_0x583783(0x226)]=_0x584bc8?'❚❚':'▶'):_0x468261[_0x583783(0x970)][_0x583783(0xddb)](_0x583783(0x519));}}_0x392688&&('YRdio'!=='vdBIe'?_0x392688[_0x57ab4d(0xc04)]('click',()=>{const _0x2b4a30=_0x57ab4d;if(_0x108b4b[_0x2b4a30(0x893)]===0x0)return;_0x353f86=(_0x353f86+0x1)%_0x108b4b[_0x2b4a30(0x893)],_0x42c003(_0x108b4b[_0x353f86],_0x108b4b);}):_0x13a6dc[_0x57ab4d(0xc95)](_0x57ab4d(0x78c),_0x59942e));_0x349a3b&&_0x349a3b[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x324c4b=_0x57ab4d;if('llQWZ'!==_0x324c4b(0x6b0))_0x2e11e2[_0x324c4b(0x226)]=_0x226f67['speaker']===_0x324c4b(0xd5a)?'旁白':_0x3eb3c1['speaker'],_0x477d84[_0x324c4b(0x226)]=_0x141d34[_0x324c4b(0x5b1)],_0x5d967f[_0x324c4b(0x9a4)]===_0x4a86da[_0x324c4b(0xe79)]?_0x278a50(_0x3fd261,_0x487ec7[_0x324c4b(0x3a1)]):_0x20e9dd(_0xf459f5,_0x324c4b(0x177));else{if(_0x108b4b[_0x324c4b(0x893)]===0x0)return;_0x353f86=(_0x353f86-0x1+_0x108b4b[_0x324c4b(0x893)])%_0x108b4b[_0x324c4b(0x893)],_0x42c003(_0x108b4b[_0x353f86],_0x108b4b);}});_0x5552f1['addEventListener']('play',()=>{_0xa7652b['isPlaying']=!![],_0xfb0694();}),_0x5552f1['addEventListener'](_0x57ab4d(0xb57),()=>{const _0x57e75b=_0x57ab4d;_0xa7652b[_0x57e75b(0x9d1)]=![],_0xfb0694();}),_0x5552f1['addEventListener'](_0x57ab4d(0xca7),()=>{const _0x57608e=_0x57ab4d;if('TXXJa'!==_0x57608e(0xe38))return _0x1e4e87[_0x57608e(0x664)](_0x25ce57)[_0x57608e(0x332)](_0x57608e(0x6d6));else{if(_0x392688)_0x392688[_0x57608e(0x493)]();}});function _0x5289f4(){const _0x1da115=_0x57ab4d;if(_0x1da115(0xd2e)!=='ToVGZ'){const _0x1e719a=_0x41c782();if(!_0x1e719a)return;_0x31b15a[_0x1da115(0x6f0)]='',_0x5802d5[_0x1da115(0x2d4)]='',_0x1e719a[_0x1da115(0x45c)]===_0x1da115(0x4b5)?(_0x1e719a[_0x1da115(0x584)]['forEach'](_0x2b5e22=>{const _0x38eac6=_0x1da115,_0x571fca=_0x1238ea(_0x2b5e22);if(_0x571fca){if(_0x38eac6(0x269)===_0x38eac6(0x269)){const _0x2c8ef5=document[_0x38eac6(0x7a9)](_0x38eac6(0xc37));_0x2c8ef5[_0x38eac6(0x2d4)]=_0x571fca['id'],_0x2c8ef5[_0x38eac6(0x226)]=_0x571fca['name'],_0x31b15a['appendChild'](_0x2c8ef5);}else _0x49c68b[_0x38eac6(0x2d4)]=_0x46a99b,_0x2e18f3(_0x38eac6(0x38d));}}),_0x20f8d0[_0x1da115(0x3e4)][_0x1da115(0x1df)]='block'):_0x20f8d0[_0x1da115(0x3e4)][_0x1da115(0x1df)]=_0x1da115(0x4a6),_0x4bd376[_0x1da115(0x970)][_0x1da115(0xddb)](_0x1da115(0x348)),_0x5802d5[_0x1da115(0x190)]();}else{const _0x2fe24=_0x2eec7f[_0x1da115(0x7a9)]('a'),_0x2106c6=_0x2a77a3['createObjectURL'](_0x1f2de2);_0x2fe24[_0x1da115(0xdd8)]=_0x2106c6,_0x2fe24[_0x1da115(0x93d)]=_0x1c9dcc,_0x1af19d[_0x1da115(0x5ef)]['appendChild'](_0x2fe24),_0x2fe24['click'](),_0x4152c4[_0x1da115(0x5ef)][_0x1da115(0x91d)](_0x2fe24),_0x3037e5[_0x1da115(0x906)](_0x2106c6);}}function _0x49fcb8(){const _0x24d654=_0x57ab4d,_0x6cab89=parseFloat(_0x5802d5[_0x24d654(0x2d4)]);if(isNaN(_0x6cab89)||_0x6cab89<=0x0){_0x198030(_0x24d654(0xa29));return;}const _0xebddb=_0x41c782();let _0x17d96c=null;if(_0xebddb['type']==='group')_0x17d96c=_0x31b15a[_0x24d654(0x2d4)];else{if(_0x24d654(0x343)!==_0x24d654(0x343)){if(_0x4d2247[_0x24d654(0x402)])_0x3a0962(_0x370f8c['replayPressTimer']);const _0x1a7188=()=>{const _0x58720a=_0x24d654;_0x46edd3[_0x58720a(0x402)]=_0x1f71ae(()=>{const _0x2199fd=_0x58720a;_0x2629d3[_0x2199fd(0xd27)](),_0x4bc20f(_0x342075,_0x475e02);},0x320);},_0x3c6837=()=>{const _0x378e41=_0x24d654;_0x517de8(_0x5eff78[_0x378e41(0x402)]),_0x532c6b['removeEventListener'](_0x378e41(0x241),_0x3c6837),_0x116e4d[_0x378e41(0x50e)](_0x378e41(0x718),_0x3c6837),_0x30501e[_0x378e41(0x50e)](_0x378e41(0xcf0),_0x3c6837),_0x5e8c9a[_0x378e41(0x50e)](_0x378e41(0x1d3),_0x3c6837);};_0x450cd3[_0x24d654(0xc04)](_0x24d654(0x241),_0x3c6837,{'once':!![]}),_0x4c8eda[_0x24d654(0xc04)](_0x24d654(0x718),_0x3c6837,{'once':!![]}),_0x54906b[_0x24d654(0xc04)](_0x24d654(0xcf0),_0x3c6837,{'once':!![]}),_0x131f42[_0x24d654(0xc04)]('touchcancel',_0x3c6837,{'once':!![]}),_0x1a7188();}else _0x17d96c=_0xebddb[_0x24d654(0x584)][0x0];}const _0xe56450=_0x2e35cc(_0xebddb['id']),_0x134eeb={'role':'user','type':_0x24d654(0x99f),'content':_0x24d654(0x422)+(_0x1238ea(_0x17d96c)?.[_0x24d654(0xe79)]||'未知')+_0x24d654(0xb90)+_0x6cab89+']','amount':_0x6cab89,'recipientId':_0x17d96c,'senderId':_0xe56450['id'],'timestamp':Date[_0x24d654(0x144)]()};_0xa7652b[_0x24d654(0xdc0)][_0x24d654(0x214)](_0x134eeb),_0x2c2648(),_0x1f1d12(),_0x4bd376[_0x24d654(0x970)]['remove']('show');}async function _0x4dd8df(_0x44ea27){const _0x5ad5ce=_0x57ab4d,_0xa32ec7=_0x1238ea(_0x44ea27);if(!_0xa32ec7)return;const _0x114c38=await _0x410108('确定要永久清空【'+_0xa32ec7[_0x5ad5ce(0xe79)]+_0x5ad5ce(0x3d0));if(!_0x114c38)return;const _0x1b40bc=_0xa7652b[_0x5ad5ce(0x65b)][_0x5ad5ce(0x6f6)](_0x24986c=>_0x24986c[_0x5ad5ce(0x3b1)]===_0x44ea27);if(_0x1b40bc>-0x1)_0xa7652b[_0x5ad5ce(0x65b)][_0x5ad5ce(0x197)](_0x1b40bc,0x1),_0x2e0417(),_0x5d73af(),_0x198030('【'+_0xa32ec7['name']+_0x5ad5ce(0x992));else{if(_0x5ad5ce(0x3ac)!==_0x5ad5ce(0x660))_0x198030(_0x5ad5ce(0x857));else{if(_0x42fedd[_0x5ad5ce(0x45c)]==='private'){const _0x43d91c=_0x28d85b(_0x5230cd[_0x5ad5ce(0x584)][0x0]);return _0x43d91c?_0x4b2c9b('char_avatar_'+_0x43d91c['id']):_0x2fbc61[_0x5ad5ce(0x4f3)](null);}else return _0xe0d8a6('group_avatar_'+_0x56e166['id']);}}}function _0x4bde46(){const _0x49b4df=_0x57ab4d,_0xa1d073=document[_0x49b4df(0x473)](_0x49b4df(0x2f9));_0xa1d073['innerHTML']='';const _0x402ca1=_0xa7652b['characters'][_0x49b4df(0x1a9)](_0xb57dc8=>_0xa7652b[_0x49b4df(0x4ec)][_0x49b4df(0x691)](_0x63a02c=>_0x63a02c[_0x49b4df(0x45c)]==='private'&&_0x63a02c[_0x49b4df(0x584)][_0x49b4df(0x5c0)](_0xb57dc8['id'])));if(_0x402ca1[_0x49b4df(0x893)]===0x0){_0xa1d073[_0x49b4df(0x6f0)]=_0x49b4df(0xb3a);return;}_0x402ca1[_0x49b4df(0x1dc)](_0x54d813=>{const _0x3e70b1=_0x49b4df,_0x419c96=document[_0x3e70b1(0x7a9)]('li');_0x419c96[_0x3e70b1(0xd04)]=_0x3e70b1(0x4b0),_0x419c96[_0x3e70b1(0x9c6)][_0x3e70b1(0xa48)]=_0x54d813['id'],_0x419c96[_0x3e70b1(0x6f0)]=_0x3e70b1(0xa3d)+(_0x54d813[_0x3e70b1(0x98f)]||_0x96c08e)+'\x22\x20alt=\x22avatar\x22\x20class=\x22char-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-name\x22>'+_0x54d813[_0x3e70b1(0xe79)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-remark\x22>查看手机...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22toolbar-button\x20snoop-clear-btn\x22\x20title=\x22清空'+_0x54d813[_0x3e70b1(0xe79)]+_0x3e70b1(0x741),_0x419c96[_0x3e70b1(0x373)](_0x3e70b1(0x18a))['addEventListener'](_0x3e70b1(0x493),()=>_0xa411d8(_0x54d813['id'])),_0x419c96[_0x3e70b1(0x373)]('.snoop-clear-btn')['addEventListener'](_0x3e70b1(0x493),async _0x4c4b2f=>{const _0x55b86f=_0x3e70b1;_0x4c4b2f['stopPropagation']();const _0x863ef4=_0x1238ea(_0x54d813['id']);if(!_0x863ef4)return;const _0x907a0=await _0x410108(_0x55b86f(0xe3b)+_0x863ef4[_0x55b86f(0xe79)]+_0x55b86f(0xb67));if(_0x907a0){_0x27a15c(!![],'正在焚烧【'+_0x863ef4[_0x55b86f(0xe79)]+_0x55b86f(0x820));const _0x5ed52e=[_0x55b86f(0xa5b),_0x55b86f(0x149),'abyss',_0x55b86f(0x42b),_0x55b86f(0xae3),_0x55b86f(0x65c),_0x55b86f(0x8d0),_0x55b86f(0xe18)];for(const _0x41ade6 of _0x5ed52e){const _0x42f75d=_0x55b86f(0x882)+_0x863ef4['id']+'_'+_0x41ade6;await _0x4294c8(_0x42f75d);}_0x27a15c(![]),_0x198030('【'+_0x863ef4[_0x55b86f(0xe79)]+_0x55b86f(0x934));}}),_0xa1d073[_0x3e70b1(0xced)](_0x419c96);});}let _0x524f24=null,_0x1f26cd=null;function _0x4b04d9(){const _0x16b67d=_0x57ab4d,_0x25149d=new Date(),_0x301025=document[_0x16b67d(0x473)](_0x16b67d(0x3ab)),_0x320e31=document['getElementById'](_0x16b67d(0x476)),_0x5f3a55=document[_0x16b67d(0x473)](_0x16b67d(0x7be));_0x301025&&_0x320e31&&(_0x301025['textContent']=_0x25149d[_0x16b67d(0x9e2)]('zh-CN',{'hour':'2-digit','minute':_0x16b67d(0xc07),'hour12':![]}),_0x320e31['textContent']=_0x25149d[_0x16b67d(0x647)](_0x16b67d(0xbbe),{'month':_0x16b67d(0x501),'day':_0x16b67d(0x762),'weekday':_0x16b67d(0x501)}));if(_0x5f3a55){if(_0x16b67d(0xd3b)==='oYHhu'){const _0x523998=_0x1ca187[_0x16b67d(0x473)](_0x16b67d(0xa56));_0x523998[_0x16b67d(0x970)][_0x16b67d(0x702)]('show'),_0x1b5ef8[_0x16b67d(0x473)](_0x16b67d(0xb40))[_0x16b67d(0x3e4)]['display']=_0x16b67d(0x5c9),_0x54b7c0['getElementById'](_0x16b67d(0xafd))[_0x16b67d(0x3e4)][_0x16b67d(0x1df)]='none',_0x114523[_0x16b67d(0x473)](_0x16b67d(0x163))[_0x16b67d(0x3e4)][_0x16b67d(0x1df)]=_0x16b67d(0x2a3),_0x41a3ca[_0x16b67d(0x473)](_0x16b67d(0x7eb))[_0x16b67d(0x3e4)]['display']=_0x16b67d(0x2a3);}else _0x5f3a55[_0x16b67d(0x6f0)]='\x0a\x20\x20\x20\x20<div\x20>\x20'+_0x25149d[_0x16b67d(0x9e2)](_0x16b67d(0xbbe),{'hour':_0x16b67d(0xc07),'minute':'2-digit','hour12':![]})+_0x16b67d(0x40b);}}function _0xa411d8(_0x35227d){const _0x596b52=_0x57ab4d;_0x524f24=_0x35227d;const _0xe6bab3=_0x1238ea(_0x35227d);if(!_0xe6bab3)return;const _0xa4c452=document[_0x596b52(0x473)](_0x596b52(0xa24)),_0x48b245=document[_0x596b52(0x473)](_0x596b52(0xe59));if(_0x48b245)_0x48b245[_0x596b52(0x702)]();const _0x26e8ce=document[_0x596b52(0x473)](_0x596b52(0xd48));if(_0x26e8ce)_0x26e8ce[_0x596b52(0x702)]();_0xa4c452[_0x596b52(0x650)](_0x596b52(0x2fd),_0x596b52(0x57c)),_0xa4c452[_0x596b52(0x650)]('beforeend','<div\x20id=\x22snoop-dock\x22></div>'),document[_0x596b52(0x473)](_0x596b52(0xb27))[_0x596b52(0x226)]='',_0x1bd371();if(_0x1f26cd)clearInterval(_0x1f26cd);_0x4b04d9(),_0x1f26cd=setInterval(_0x4b04d9,0x2710),_0xffff1f(_0x596b52(0xb3),_0x596b52(0x14b));}function _0x1bd371(){const _0x589bcc=_0x57ab4d;if(_0x589bcc(0x158)!=='lfLJu'){const _0x2f8328=_0x51c935(_0x49e064[_0x589bcc(0x9ed)]);if(!_0x2f8328)return;const _0x3d7ff2=_0x543122(_0x4dff2b[_0x589bcc(0x473)](_0x589bcc(0xaf1))[_0x589bcc(0x2d4)]),_0x5a12de=_0x18ec6d(_0x2d4911[_0x589bcc(0x473)](_0x589bcc(0xb8b))[_0x589bcc(0x2d4)]),_0x53157d=_0x240b21(_0x13023a[_0x589bcc(0x473)](_0x589bcc(0x4d2))[_0x589bcc(0x2d4)])/0x64;_0x2f8328[_0x589bcc(0x682)]={'x':_0x3d7ff2,'y':_0x5a12de,'scale':_0x53157d},_0xb6a275(),_0x30a1c6(_0x589bcc(0x59a)),_0x22db9b(!![]);}else{const _0x25a87e=document[_0x589bcc(0x473)](_0x589bcc(0x276)),_0x58e2b8=document['getElementById']('snoop-dock'),_0x59460f=_0xa7652b[_0x589bcc(0xbfe)]['find'](_0x51c02b=>_0x51c02b['id']===_0x524f24),_0x1a3853=_0x59460f?_0x59460f['name']:'未知角色',_0x5acc58=_0x59460f&&_0x59460f['avatar']?_0x59460f['avatar']:_0x96c08e;_0x25a87e['innerHTML']=_0x589bcc(0xc1f)+_0x1a3853+_0x589bcc(0x918);const _0x469a1f=_0x25a87e[_0x589bcc(0x373)](_0x589bcc(0x3d2));if(_0x469a1f){if(_0x589bcc(0x914)!==_0x589bcc(0x914))return new _0x5b8262(_0x2f4536=>{const _0x307e75=_0x589bcc,_0x54df41=_0x307e75(0xdfb);_0x2b8962[_0x307e75(0x5ef)][_0x307e75(0x650)](_0x307e75(0x2fd),_0x54df41);const _0x21eb00=_0x236ce3['getElementById'](_0x307e75(0x19d)),_0x1a73c4=_0x3cc36a[_0x307e75(0x473)]('diary-modal-textarea'),_0x5de3d7=_0xb4435[_0x307e75(0x473)](_0x307e75(0x71c)),_0x54c2b5=_0x368e78['getElementById'](_0x307e75(0xbc2)),_0x35d6fd=_0x21eb00['querySelector'](_0x307e75(0x5a8)),_0x12f000=()=>{_0x21eb00['remove'](),_0x2f4536();};_0x5de3d7[_0x307e75(0x4e9)]=()=>{const _0x426c23=_0x307e75;_0x336a9c(_0x1a73c4[_0x426c23(0x2d4)]),_0x12f000();},_0x54c2b5[_0x307e75(0x4e9)]=_0x12f000,_0x35d6fd['onclick']=_0x12f000;});else _0x469a1f[_0x589bcc(0x706)]=_0x5acc58;}_0x58e2b8['innerHTML']='';const _0x66e12d=_0x25a87e[_0x589bcc(0x373)](_0x589bcc(0x9e4)),_0x2e9952=[{'id':'whispers','name':'聊天','svg':'<path\x20d=\x22M21\x2015a2\x202\x200\x200\x201-2\x202H7l-4\x204V5a2\x202\x200\x200\x201\x202-2h14a2\x202\x200\x200\x201\x202\x202z\x22></path>'},{'id':_0x589bcc(0x492),'name':'浏览器','svg':_0x589bcc(0x237)},{'id':'gallery','name':'相册','svg':_0x589bcc(0x275)},{'id':_0x589bcc(0xe18),'name':'总结','svg':_0x589bcc(0x713)},{'id':_0x589bcc(0x42b),'name':'备忘录','svg':_0x589bcc(0x364)},{'id':_0x589bcc(0xae3),'name':'外卖','svg':'<path\x20d=\x22M3\x2011h18v10a2\x202\x200\x200\x201-2\x202H5a2\x202\x200\x200\x201-2-2v-10z\x22></path><path\x20d=\x22M6\x2011V7a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v4\x22></path><line\x20x1=\x2210\x22\x20y1=\x2216\x22\x20x2=\x2210\x22\x20y2=\x2223\x22></line><line\x20x1=\x2214\x22\x20y1=\x2216\x22\x20x2=\x2214\x22\x20y2=\x2223\x22></line>'},{'id':_0x589bcc(0x65c),'name':'购物','svg':_0x589bcc(0x18b)},{'id':_0x589bcc(0x8d0),'name':'足迹','svg':_0x589bcc(0x593)}];_0x2e9952[_0x589bcc(0x1dc)](_0x1eb691=>{const _0x55e4ff=_0x589bcc;if(_0x55e4ff(0x5eb)===_0x55e4ff(0xb06))_0x42f336[_0x55e4ff(0x473)](_0x55e4ff(0x2a2))[_0x55e4ff(0x3e4)][_0x55e4ff(0x1df)]='none',_0x1678e9(_0x55e4ff(0x14b),_0x55e4ff(0xb3));else{const _0x4ffc03=document['createElement'](_0x55e4ff(0x527));_0x4ffc03[_0x55e4ff(0xd04)]=_0x55e4ff(0xc66),_0x4ffc03['innerHTML']=_0x55e4ff(0xc7b)+_0x1eb691[_0x55e4ff(0x881)]+_0x55e4ff(0xb2e)+_0x1eb691[_0x55e4ff(0xe79)]+_0x55e4ff(0xc56),_0x4ffc03[_0x55e4ff(0xc04)](_0x55e4ff(0x493),()=>_0x1395e2(_0x1eb691['id'],_0x1eb691['name'])),_0x66e12d[_0x55e4ff(0xced)](_0x4ffc03);}});}}document[_0x57ab4d(0x473)](_0x57ab4d(0x3d7))['addEventListener'](_0x57ab4d(0x493),()=>{const _0x211feb=_0x57ab4d;_0x1f26cd&&(clearInterval(_0x1f26cd),_0x1f26cd=null);document[_0x211feb(0x473)]('snoop-app-view-container')[_0x211feb(0x3e4)][_0x211feb(0x1df)]=_0x211feb(0x4a6);const _0x12213e=document[_0x211feb(0x473)](_0x211feb(0xd48));if(_0x12213e)_0x12213e['remove']();const _0x334677=document['getElementById']('snoop-home-clock');if(_0x334677)_0x334677[_0x211feb(0x702)]();_0xffff1f(_0x211feb(0x14b),_0x211feb(0xb3));});async function _0x1395e2(_0x296665,_0xbe9667,_0x367df0=![]){const _0x2f6053=_0x57ab4d;let _0x48040b=null;document[_0x2f6053(0x473)](_0x2f6053(0x7f7))[_0x2f6053(0x3e4)][_0x2f6053(0x1df)]=_0x2f6053(0x4a6);const _0x166ef8=document[_0x2f6053(0x473)]('snoop-app-view-container');_0x166ef8['innerHTML']='<div\x20class=\x22loader-spinner\x22\x20style=\x22margin:\x20auto;\x22></div>',_0x166ef8[_0x2f6053(0x3e4)]['display']=_0x2f6053(0x5c9);const _0x1138ff=_0x2f6053(0x882)+_0x524f24+'_'+_0x296665;try{if(_0x2f6053(0x9bb)===_0x2f6053(0x21d)){const _0x840e7a=_0x2cbbee['parse'](_0x5700dd);_0x840e7a[_0x2f6053(0x4f2)]&&_0x840e7a[_0x2f6053(0x4f2)][0x0]&&_0x840e7a[_0x2f6053(0x4f2)][0x0][_0x2f6053(0x93e)]&&(_0x3f1e7a+=_0x840e7a[_0x2f6053(0x4f2)][0x0][_0x2f6053(0x93e)][_0x2f6053(0xb17)]||''),_0x840e7a[_0x2f6053(0xa34)]&&(_0x7eecf1=_0x840e7a['usage']);}else{if(_0x296665==='summary'){if(_0x2f6053(0xa36)!==_0x2f6053(0xa36))_0x39023a[_0x2f6053(0x858)]['abort']('User\x20cancelled');else{const _0x1140cb=await _0xe38d16(_0x524f24);_0x58356c(_0x296665,_0xbe9667,_0x1140cb);return;}}let _0x1ee885=await _0x3d41c4(_0x1138ff);if(_0x367df0||!_0x1ee885){console[_0x2f6053(0x6e4)]('请求AI更新:\x20'+_0x1138ff+_0x2f6053(0x8f1)),_0x48040b=await _0x537bf1(_0x296665,_0x524f24,_0x1ee885,_0x367df0,null);if(_0x48040b){if(_0x2f6053(0x2bc)!=='RLwZl')_0xed10cd={'id':'wbc_html_default_builtin','name':_0x2f6053(0x5d0)},_0x8cd6a1['worldBookCategories'][_0x2f6053(0x214)](_0x2037c3),_0x538984[_0x2f6053(0x6e4)](_0x2f6053(0x63e)),_0x4178d8=!![];else{const _0x323e28=_0x48040b[_0x2f6053(0x41c)](/```(?:json)?\s*([\s\S]*?)\s*```/),_0x2555ff=_0x323e28?_0x323e28[0x1][_0x2f6053(0x8eb)]():_0x48040b[_0x2f6053(0x8eb)]();let _0x9431d1;try{_0x9431d1=JSON[_0x2f6053(0x180)](_0x2555ff);}catch(_0x4759d7){_0x9431d1=_0x374ff2(_0x2555ff);if(!_0x9431d1)throw new Error('AI返回了无法识别的数据格式。');}const _0x360583=JSON[_0x2f6053(0xaf6)](_0x9431d1);console['log'](_0x2f6053(0x3bb)),await _0x3bfa49(_0x1138ff,_0x360583),_0x1ee885=_0x360583;}}}else console['log'](_0x2f6053(0x674)+_0x1138ff);_0x58356c(_0x296665,_0xbe9667,_0x1ee885);}}catch(_0x4374e2){if(_0x2f6053(0xb7d)!==_0x2f6053(0xb7d))_0x2f25ec[_0x2f6053(0x970)][_0x2f6053(0x401)](_0x2f6053(0x74d),_0xeb4dbe[_0x2f6053(0xdaf)]);else{console['error'](_0x2f6053(0x64d)+_0xbe9667+_0x2f6053(0x452),_0x4374e2);const _0x323c66=_0x1238ea(_0x524f24),_0x3899da='\x0a\x20\x20\x20\x20<div\x20class=\x22snoop-app-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-app-back-btn\x22\x20class=\x22snoop-app-header-button\x22>返回</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22\x20style=\x22color:\x20#d8000c;\x22>发生错误</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>'+_0x323c66['name']+_0x2f6053(0x26f);let _0x141729=_0x2f6053(0x34a)+_0x4374e2[_0x2f6053(0xe32)]+_0x2f6053(0x19c);_0x48040b&&(_0x2f6053(0xa3c)!==_0x2f6053(0x89a)?_0x141729+='\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:\x200\x2015px\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>下面就是那个笨蛋AI返回的原始“梦话”，你自己看看吧：</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<pre\x20style=\x22white-space:\x20pre-wrap;\x20word-break:\x20break-all;\x20background:\x20#f0f0f0;\x20padding:\x2010px;\x20border-radius:\x205px;\x20color:\x20#333;\x20max-height:\x20400px;\x20overflow-y:\x20auto;\x22>'+_0x391bab(_0x48040b)+'</pre>\x0a\x20\x20\x20\x20\x20\x20</div>':_0x2a4133+=_0x2f6053(0xbf0)+_0x10844a(_0x115522)+_0x2f6053(0xa2e)),_0x166ef8[_0x2f6053(0x6f0)]=_0x3899da+(_0x2f6053(0xc24)+_0x141729+_0x2f6053(0x28d)),document[_0x2f6053(0x473)]('snoop-app-back-btn')[_0x2f6053(0xc04)](_0x2f6053(0x493),()=>{const _0x3691fe=_0x2f6053;_0x166ef8['style'][_0x3691fe(0x1df)]='none',document[_0x3691fe(0x473)](_0x3691fe(0x7f7))[_0x3691fe(0x3e4)][_0x3691fe(0x1df)]=_0x3691fe(0x5c9);});}}}function _0x391bab(_0x591195){const _0x158976=_0x57ab4d;if(!_0x591195)return'';return _0x591195[_0x158976(0x833)](/&/g,_0x158976(0x806))[_0x158976(0x833)](/</g,'&lt;')[_0x158976(0x833)](/>/g,_0x158976(0xc9e))[_0x158976(0x833)](/"/g,_0x158976(0x705))[_0x158976(0x833)](/'/g,_0x158976(0xd52));}function _0x58356c(_0x123ef5,_0x4622bf,_0x40d681){const _0x4ecd55=_0x57ab4d,_0x717ad1=_0x1238ea(_0x524f24),_0x1dd51f=document['getElementById'](_0x4ecd55(0x2a2));let _0x271f75='';if(!_0x40d681)_0x271f75=_0x4ecd55(0xe06);else{if(_0x4ecd55(0x77f)!=='qlWXU')_0x3f5734(_0x318b12);else{if(_0x123ef5===_0x4ecd55(0xe18))_0x271f75=_0x4ecd55(0xd3c)+_0x40d681+_0x4ecd55(0xa89);else try{if('YXIUO'!==_0x4ecd55(0x7c4))_0x36abc0[_0x4ecd55(0xdc0)][_0x47ec]['accepted']=!![],_0x5d01ee();else{let _0x39b7fc=null;const _0x2251b7=_0x40d681['match'](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x2bbf96=_0x2251b7?_0x2251b7[0x1][_0x4ecd55(0x8eb)]():_0x40d681['trim']();try{_0x4ecd55(0x9ad)==='qLKOi'?_0x2a5592[_0x4ecd55(0x45c)]===_0x4ecd55(0xc85)&&_0x3ffee3(_0x375ff5):_0x39b7fc=JSON[_0x4ecd55(0x180)](_0x2bbf96);}catch(_0x1761a0){console[_0x4ecd55(0x591)](_0x4ecd55(0xb8c),_0x1761a0[_0x4ecd55(0xe32)]);try{_0x39b7fc=_0x374ff2(_0x2bbf96);if(!_0x39b7fc){if(_0x4ecd55(0x122)!==_0x4ecd55(0x370))throw new Error(_0x4ecd55(0xe5d));else{const _0x25cb19=new _0x43fba4();_0x25cb19[_0x4ecd55(0x4ef)]=()=>_0x5b58cc(_0x25cb19['result']),_0x25cb19[_0x4ecd55(0x835)]=_0x7ccbd1,_0x25cb19[_0x4ecd55(0xd9b)](_0x1daabb);}}console[_0x4ecd55(0x6e4)]('兼容模式成功，已将旧格式数据翻译。');}catch(_0x414fe2){if(_0x4ecd55(0x82a)!==_0x4ecd55(0xa28))throw _0x1761a0;else{_0xa6696a(_0x4ecd55(0x7d0));return;}}}switch(_0x123ef5){case _0x4ecd55(0xa5b):_0x271f75=_0x1ad1ac(_0x39b7fc);break;case'whispers':_0x271f75=_0x507557(_0x39b7fc,_0x717ad1[_0x4ecd55(0xe79)]);break;case _0x4ecd55(0x492):_0x271f75=_0x3de7d1(_0x39b7fc);break;case'fragments':_0x271f75=_0x1de07d(_0x39b7fc);break;case'bites':_0x271f75=_0x1f4b9c(_0x39b7fc);break;case _0x4ecd55(0x65c):_0x271f75=_0x3082c6(_0x39b7fc);break;case _0x4ecd55(0x8d0):_0x271f75=_0x58d0db(_0x39b7fc);break;default:_0x271f75=_0x4ecd55(0x781)+JSON['stringify'](_0x39b7fc,null,0x2)+_0x4ecd55(0xd73);}}}catch(_0x17020c){if(_0x4ecd55(0x89b)!==_0x4ecd55(0x89b)){const _0xee7652=_0x2c6b98['worldBookCategories'][_0x4ecd55(0x394)](_0x3df041=>_0x3df041[_0x4ecd55(0xe79)]===_0x26c3e5[_0x4ecd55(0xe79)]);!_0xee7652&&_0x3d8dbe['worldBookCategories'][_0x4ecd55(0x214)]({'id':_0x15b286['id']||'wbc_imported_'+_0x3a8939[_0x4ecd55(0x144)](),'name':_0x4f2547['name']});}else console[_0x4ecd55(0xc95)](_0x4ecd55(0xb5f),_0x17020c),_0x271f75=_0x4ecd55(0x618)+_0x40d681+_0x4ecd55(0x2aa);}}}_0x1dd51f[_0x4ecd55(0x6f0)]=_0x4ecd55(0xc28)+_0x4622bf+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sub-title\x22>'+_0x717ad1['name']+_0x4ecd55(0xae5)+(_0x123ef5===_0x4ecd55(0xe18)?'<button\x20id=\x22snoop-copy-summary-btn\x22\x20class=\x22snoop-app-header-button\x22>复制</button>':_0x4ecd55(0xdec))+_0x4ecd55(0x860)+_0x271f75+_0x4ecd55(0x9fc);const _0x44427f=_0x1dd51f[_0x4ecd55(0x373)](_0x4ecd55(0xcb0));_0x123ef5==='summary'&&(_0x4ecd55(0xa5d)===_0x4ecd55(0xa5d)?_0x44427f['style'][_0x4ecd55(0x1e1)]='0':(_0x475c8f[_0x4ecd55(0x3e4)][_0x4ecd55(0x1df)]=_0x4ecd55(0x5c9),_0x2fd537(()=>_0x15e07f[_0x4ecd55(0x970)]['add'](_0x4ecd55(0x348)),0xa))),document[_0x4ecd55(0x473)](_0x4ecd55(0x8d2))['addEventListener']('click',()=>{const _0x5f1743=_0x4ecd55;_0x1dd51f[_0x5f1743(0x3e4)][_0x5f1743(0x1df)]=_0x5f1743(0x4a6),document[_0x5f1743(0x473)](_0x5f1743(0x7f7))[_0x5f1743(0x3e4)][_0x5f1743(0x1df)]=_0x5f1743(0x5c9);}),_0x123ef5===_0x4ecd55(0xe18)?_0x4ecd55(0x8ee)!=='mgwAr'?_0x4ce417+=_0x4ecd55(0xd2):document[_0x4ecd55(0x473)](_0x4ecd55(0xe4e))['addEventListener'](_0x4ecd55(0x493),()=>{const _0x16131c=_0x4ecd55,_0x3a2233=document['getElementById'](_0x16131c(0x1ca));_0x3a2233[_0x16131c(0x6d1)](),document['execCommand'](_0x16131c(0xd9f)),_0x198030('档案已复制到剪贴板！');}):'HPidG'==='HPidG'?document[_0x4ecd55(0x473)]('snoop-app-refresh-btn')[_0x4ecd55(0xc04)](_0x4ecd55(0x493),async()=>{_0x1395e2(_0x123ef5,_0x4622bf,!![]);}):_0x20fe6c=_0x4ecd55(0xd3c)+_0x106442+_0x4ecd55(0xa89),_0x123ef5===_0x4ecd55(0x149)&&(_0x4ecd55(0x8df)===_0x4ecd55(0x8df)?_0x1dd51f['querySelectorAll']('.snoop-chat-item')[_0x4ecd55(0x1dc)](_0x335ca8=>{const _0x555c14=_0x4ecd55;_0x335ca8[_0x555c14(0xc04)]('click',()=>{const _0x3c14e9=_0x555c14;if(_0x3c14e9(0x97e)===_0x3c14e9(0x3b5))_0x502066=0x0;else{const _0x4c9c2e=JSON['parse'](_0x335ca8['dataset'][_0x3c14e9(0x6e4)][_0x3c14e9(0x833)](/&quot;/g,'\x22')),_0x2231c5=_0x335ca8[_0x3c14e9(0x9c6)][_0x3c14e9(0x967)],_0xc49c27=_0x335ca8[_0x3c14e9(0x9c6)][_0x3c14e9(0x3f2)];_0x4531ce(_0x2231c5,_0xc49c27,_0x4c9c2e);}});}):(_0x4df196=_0x4ecd55(0x11e),_0xd40572='\x22(保留旧的并补充)\x22',_0x131d18='\x22(保留旧的并补充)\x22',_0x46297d='（【【【最高指令：增量更新】】】\x0a\x20\x20\x20\x20*\x20你的任务是基于**旧总结**，将**新消息**中的【新发现】补充进去。\x0a\x20\x20\x20\x20*\x20**如果发现冲突**（例如旧档案说TA很A，新消息说TA很B），你【绝对禁止】只写\x22TA既A又B\x22。\x0a\x20\x20\x20\x20*\x20你【必须】提出一个能同时解释A和B的\x27新理论\x27来【修正】总结。\x0a\x20\x20\x20\x20*\x20**[错误示范]**:\x20\x22TA很沉稳，但最近又很活跃。\x22\x20(←\x20这是垃圾！)\x0a\x20\x20\x20\x20*\x20**[正确示范]**:\x20\x22TA的核心是沉稳的，但（新发现）只在[提到某事]时，才会展露出非常活跃的一面。\x22\x20(←\x20这才叫整理！)\x0a'));}function _0x374ff2(_0x16091e){const _0x2d6658=_0x57ab4d;if(!_0x16091e||typeof _0x16091e!==_0x2d6658(0xdab))return null;const _0x3e0c5c=_0x16091e['trim']()['split']('\x0a'),_0x3d88f8=[];let _0x2047bb=null;for(const _0x268f40 of _0x3e0c5c){const _0x29ef79=_0x268f40[_0x2d6658(0x8eb)]();if(_0x29ef79[_0x2d6658(0x324)]('-\x20')){_0x2047bb&&_0x3d88f8[_0x2d6658(0x214)](_0x2047bb);_0x2047bb={};const _0x391b10=_0x29ef79[_0x2d6658(0x825)](0x2),_0x464508=_0x391b10[_0x2d6658(0x8ff)](/:\s(.+)/);if(_0x464508[_0x2d6658(0x893)]>0x1){if(_0x2d6658(0x804)!==_0x2d6658(0x804)){const _0xc6f14c=_0x35f621[_0x2d6658(0xdb0)](_0x2d6658(0xd8a),_0x2d6658(0x4a7)),_0x2f9562=_0xc6f14c[_0x2d6658(0xb9d)]('images'),_0xddd9b8=_0x2f9562['put']({'id':_0x3d48f6,'blob':_0x1718d6});_0xddd9b8[_0x2d6658(0x7ad)]=()=>_0x22bc64(_0xddd9b8[_0x2d6658(0xdc7)]),_0xddd9b8[_0x2d6658(0x835)]=()=>_0x1a6468(_0xddd9b8[_0x2d6658(0xc95)]);}else{const _0x6296a5=_0x464508[0x0][_0x2d6658(0x8eb)](),_0x22bfe2=_0x464508[0x1][_0x2d6658(0x8eb)]()[_0x2d6658(0x833)](/^"|"$/g,'');_0x2047bb[_0x6296a5]=_0x22bfe2;}}}else{if(_0x2047bb&&_0x29ef79){if(_0x2d6658(0x2b5)===_0x2d6658(0xaf8))_0x4d4631[_0x2d6658(0x6f0)]=_0x2d6658(0x191)+_0x4c7b18[_0x2d6658(0x9e2)](_0x2d6658(0xbbe),{'hour':_0x2d6658(0xc07),'minute':_0x2d6658(0xc07),'hour12':![]})+_0x2d6658(0x40b);else{const _0x4d153a=_0x29ef79[_0x2d6658(0x8ff)](/:\s(.+)/);if(_0x4d153a[_0x2d6658(0x893)]>0x1){const _0x259166=_0x4d153a[0x0]['trim'](),_0x7c3d1c=_0x4d153a[0x1][_0x2d6658(0x8eb)]()[_0x2d6658(0x833)](/^"|"$/g,'');_0x2047bb[_0x259166]=_0x7c3d1c;}}}}}return _0x2047bb&&_0x3d88f8[_0x2d6658(0x214)](_0x2047bb),_0x3d88f8[_0x2d6658(0x893)]>0x0?_0x3d88f8:null;}function _0x4531ce(_0x228da6,_0x59a41c,_0xcf369){const _0x4bd27b=_0x57ab4d,_0x109379=document['querySelector'](_0x4bd27b(0x558)),_0x565607=document[_0x4bd27b(0x373)]('#snoop-app-view-container\x20.snoop-app-header');let _0xfaca90=_0x4bd27b(0xd40);!_0xcf369||_0xcf369[_0x4bd27b(0x893)]===0x0?_0xfaca90+=_0x4bd27b(0xef):_0x4bd27b(0xae)!=='TttPu'?_0x4896ba[_0x4bd27b(0x214)](_0x586bc8[_0x4bd27b(0xb9d)](_0x4bd27b(0xee))[_0x4bd27b(0x5d6)](_0x412605)):_0xcf369[_0x4bd27b(0x1dc)](_0x1a2808=>{const _0x43b3df=_0x4bd27b;if(_0x43b3df(0xac4)===_0x43b3df(0xc00))_0x2cea3b['style'][_0x43b3df(0x1df)]=_0x43b3df(0x4a6),_0x21dbf9['style'][_0x43b3df(0x9b4)]=_0x43b3df(0x6fa),_0x39ed29['style'][_0x43b3df(0x391)]=_0x43b3df(0xb7f);else{const _0x557cef=_0x1a2808[_0x43b3df(0x39d)]===_0x43b3df(0x130),_0x412f16=_0x557cef?_0x59a41c?_0x59a41c[0x0]:'?':_0x228da6?_0x228da6[0x0]:'?';_0xfaca90+=_0x43b3df(0xb5b)+(_0x557cef?_0x43b3df(0xea1):'ai')+_0x43b3df(0xac7)+(!_0x557cef?_0x43b3df(0x25a)+_0x412f16+_0x43b3df(0x28d):'')+'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20'+(_0x557cef?_0x43b3df(0xea1):'ai')+_0x43b3df(0xda4)+_0x1a2808[_0x43b3df(0xb17)]+_0x43b3df(0xd72)+(_0x557cef?_0x43b3df(0x25a)+_0x412f16+'</div>':'')+_0x43b3df(0x6fd);}});_0xfaca90+='</div>',_0x109379[_0x4bd27b(0x6f0)]=_0xfaca90,_0x109379[_0x4bd27b(0xc55)]=_0x109379[_0x4bd27b(0x251)],_0x565607[_0x4bd27b(0x6f0)]='\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22snoop-log-back-btn\x22\x20class=\x22snoop-app-header-button\x22\x20style=\x22text-align:\x20left;\x22>‹\x20聊天</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22snoop-app-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22main-title\x22>'+_0x228da6+_0x4bd27b(0x30a),document[_0x4bd27b(0x473)](_0x4bd27b(0x654))[_0x4bd27b(0xc04)]('click',()=>{const _0x1f3e44=_0x4bd27b;_0x1f3e44(0xc58)!==_0x1f3e44(0x5a3)?_0x1395e2(_0x1f3e44(0x149),'聊天'):_0x3b8f2b[_0x1f3e44(0x214)](_0x1f3e44(0xe89)+_0x35b4a0['observed_changes'][_0x4c43af['observed_changes']['length']-0x1]);}),document[_0x4bd27b(0x473)](_0x4bd27b(0xcd0))[_0x4bd27b(0xc04)](_0x4bd27b(0x493),()=>{_0x4635c9(_0x228da6);});if(!document[_0x4bd27b(0x473)](_0x4bd27b(0xc3b))){if('sgubL'===_0x4bd27b(0xb1))document[_0x4bd27b(0x730)][_0x4bd27b(0x650)]('beforeend',_0x4bd27b(0x6ed));else{const _0x1839c7=_0x3a52d3[_0x4bd27b(0x473)](_0x4bd27b(0x18d)),_0x4cf69b=_0x3f91c1[_0x4bd27b(0x473)](_0x4bd27b(0xf3));_0x1839c7[_0x4bd27b(0x6f0)]='';const _0x2bf0d1=new _0x51692b(_0x2d5086+_0x4bd27b(0x6e1));_0x4cf69b[_0x4bd27b(0x226)]=_0x2bf0d1[_0x4bd27b(0xc57)]()+0x1+'月'+_0x2bf0d1['getDate']()+'日';const _0xd47574=_0x16f04f['calendarEvents'][_0x4bd27b(0x1a9)](_0x95a631=>_0x95a631[_0x4bd27b(0x382)]===_0x19522b);if(_0xd47574[_0x4bd27b(0x893)]===0x0){_0x1839c7[_0x4bd27b(0x6f0)]=_0x4bd27b(0x245);return;}_0xd47574[_0x4bd27b(0x1dc)](_0x34367e=>{const _0x596a32=_0x4bd27b,_0x300ecb=_0x2d5af3[_0x596a32(0x7a9)](_0x596a32(0x527));_0x300ecb['className']=_0x34367e[_0x596a32(0x45c)]===_0x596a32(0x995)?_0x596a32(0x70b):'todo-item',_0x300ecb[_0x596a32(0x226)]=_0x34367e[_0x596a32(0xb17)],_0x300ecb[_0x596a32(0x9c6)]['id']=_0x34367e['id'],_0x1839c7[_0x596a32(0xced)](_0x300ecb);});}}}async function _0x4635c9(_0x3c2852){const _0xee94f2=_0x57ab4d;if('gfByp'!=='gfByp')_0x5dd7ad['currentDate']=new _0x6e782d(),_0x3b3613['selectedDate']=_0x33f0e9(),_0x512e76();else{const _0x3b99ad=_0xee94f2(0x149),_0x3e889a='聊天';if(!_0x524f24||!_0x3c2852)return;const _0x2151de=document[_0xee94f2(0x373)]('#snoop-app-view-container\x20.snoop-app-content'),_0x6ddfb6=document[_0xee94f2(0x473)]('snoop-log-refresh-btn');if(_0x6ddfb6)_0x6ddfb6[_0xee94f2(0xdeb)]=!![];_0x2151de[_0xee94f2(0x650)](_0xee94f2(0x2fd),_0xee94f2(0xe98)),_0x2151de[_0xee94f2(0xc55)]=_0x2151de[_0xee94f2(0x251)];const _0x545617=_0xee94f2(0x882)+_0x524f24+'_'+_0x3b99ad;try{const _0x5c7dbd=await _0x3d41c4(_0x545617),_0x9daa52=await _0x537bf1(_0x3b99ad,_0x524f24,_0x5c7dbd,![],_0x3c2852);if(_0x9daa52){if(_0xee94f2(0xc51)==='RPbmk')_0x521ae0[_0xee94f2(0x29d)](_0x3538c5,_0x47663e[_0x3f6f3a]);else{const _0x2b54c8=_0x9daa52[_0xee94f2(0x41c)](/```(?:json)?\s*([\s\S]*?)\s*```/),_0x11fbb2=_0x2b54c8?_0x2b54c8[0x1][_0xee94f2(0x8eb)]():_0x9daa52[_0xee94f2(0x8eb)]();let _0x14a73e;try{_0x14a73e=JSON['parse'](_0x11fbb2);}catch(_0x2e8e20){if(_0xee94f2(0x665)===_0xee94f2(0xde4))_0x47d91c(_0x5e9475['id']);else{_0x14a73e=_0x374ff2(_0x11fbb2);if(!_0x14a73e)throw new Error('AI返回了无法识别的数据格式。');}}const _0x2eb847=JSON[_0xee94f2(0xaf6)](_0x14a73e);await _0x3bfa49(_0x545617,_0x2eb847);const _0x9d0d8c=_0x14a73e[_0xee94f2(0x394)](_0x150d31=>_0x150d31[_0xee94f2(0xfe)]===_0x3c2852);_0x9d0d8c?_0x4531ce(_0x3c2852,_0x1238ea(_0x524f24)['name'],_0x9d0d8c['log']):_0xee94f2(0x201)===_0xee94f2(0x201)?_0x1395e2(_0x3b99ad,_0x3e889a):(_0x56af97(),_0x49619a(_0xee94f2(0x595)));}}else{if(_0xee94f2(0xb01)===_0xee94f2(0xb01))throw new Error(_0xee94f2(0xfb));else _0x1e2f22[_0x4343a2]=_0x1a0e11[_0xee94f2(0x180)](_0x433269);}}catch(_0x947230){_0xee94f2(0x1f2)===_0xee94f2(0x1f2)?(_0x198030(_0xee94f2(0x865)+_0x947230['message']),_0x1395e2(_0x3b99ad,_0x3e889a)):(_0x1d614d[_0xee94f2(0x3e4)]['top']=_0x384dd7[_0xee94f2(0x5d8)]+'%',_0x2b2a1c[_0xee94f2(0x3e4)][_0xee94f2(0x855)]=_0xe1d5b[_0xee94f2(0x855)]+'%');}const _0x488dc0=document[_0xee94f2(0x473)](_0xee94f2(0xe31));if(_0x488dc0)_0x488dc0[_0xee94f2(0x702)]();if(_0x6ddfb6)_0x6ddfb6[_0xee94f2(0xdeb)]=![];}}async function _0xa63707(_0x43bd8f){const _0x47c2ad=_0x57ab4d;if(!_0x43bd8f)return'';const _0x387626=[{'id':_0x47c2ad(0xa5b),'name':'相册'},{'id':'whispers','name':'和其他人的聊天'},{'id':'abyss','name':_0x47c2ad(0xa52)},{'id':_0x47c2ad(0x42b),'name':_0x47c2ad(0xde3)},{'id':_0x47c2ad(0xae3),'name':_0x47c2ad(0x82f)},{'id':_0x47c2ad(0x65c),'name':_0x47c2ad(0x101)},{'id':_0x47c2ad(0x8d0),'name':_0x47c2ad(0x637)}];let _0x10c8af='';for(const _0x59fb32 of _0x387626){if(_0x47c2ad(0x6b8)===_0x47c2ad(0x7bb)){_0x32abe8(_0x47c2ad(0x962));return;}else try{const _0x37b73b=_0x47c2ad(0x882)+_0x43bd8f+'_'+_0x59fb32['id'],_0x6840ef=await _0x3d41c4(_0x37b73b);if(_0x6840ef){if(_0x47c2ad(0x656)!==_0x47c2ad(0xeb)){const _0x160bf8=_0x6840ef[_0x47c2ad(0x41c)](/```(?: json) ?\s * ([\s\S] *?) \s * ```/),_0x50e8dd=_0x160bf8?_0x160bf8[0x1][_0x47c2ad(0x8eb)]():_0x6840ef[_0x47c2ad(0x8eb)]();if(!_0x50e8dd)continue;let _0x463d56=null;try{_0x463d56=JSON[_0x47c2ad(0x180)](_0x50e8dd);}catch(_0x4b06fb){console[_0x47c2ad(0x591)](_0x47c2ad(0x867)+_0x59fb32['id']+_0x47c2ad(0x395),_0x4b06fb[_0x47c2ad(0xe32)]);try{_0x463d56=_0x374ff2(_0x50e8dd);if(!_0x463d56){if(_0x47c2ad(0x851)===_0x47c2ad(0x851))throw new Error(_0x47c2ad(0xe5d));else _0x1803f3[_0x47c2ad(0x372)]['setMonth'](_0x343761[_0x47c2ad(0x372)][_0x47c2ad(0xc57)]()-0x1),_0x326d8a();}console[_0x47c2ad(0x6e4)]('兼容模式成功，已将\x20'+_0x59fb32['id']+_0x47c2ad(0x414));}catch(_0xe6de6a){if(_0x47c2ad(0x659)!==_0x47c2ad(0xb39))throw _0x4b06fb;else _0x2e2cc5[_0x47c2ad(0x214)](_0x47c2ad(0xb79)+_0x3cd7df['value_map']['core_values']);}}if(Array[_0x47c2ad(0x8aa)](_0x463d56)&&_0x463d56[_0x47c2ad(0x893)]>0x0){if(_0x47c2ad(0x1eb)===_0x47c2ad(0x1eb)){_0x10c8af===''&&(_0x10c8af+=_0x47c2ad(0x406));_0x10c8af+=_0x47c2ad(0xccc)+_0x59fb32[_0x47c2ad(0xe79)]+'\x20\x0a';switch(_0x59fb32['id']){case _0x47c2ad(0xa5b):_0x463d56[_0x47c2ad(0x1dc)](_0x153b95=>{const _0x39e30f=_0x47c2ad;_0x39e30f(0xb04)===_0x39e30f(0xb04)?_0x10c8af+=_0x39e30f(0xd56)+_0x153b95[_0x39e30f(0xd76)]+_0x39e30f(0x9a9):(_0x545043[_0x39e30f(0x473)](_0x39e30f(0xbfb))[_0x39e30f(0xc04)](_0x39e30f(0x493),_0x272905),_0x23df9c[_0x39e30f(0x473)](_0x39e30f(0x72e))['addEventListener'](_0x39e30f(0x493),_0x5beecb),_0x2f4e4a[_0x39e30f(0x473)](_0x39e30f(0x8b2))[_0x39e30f(0xc04)](_0x39e30f(0x493),_0x26d506),_0x4eee59[_0x39e30f(0x473)]('livestream-sprite-confirm-button')[_0x39e30f(0xc04)](_0x39e30f(0x493),_0x1f19a2),_0x3165c9[_0x39e30f(0x473)]('livestream-sprite-cancel-button')[_0x39e30f(0xc04)]('click',()=>_0x2ed5ac(![])),_0x352987[_0x39e30f(0x473)](_0x39e30f(0x346))[_0x39e30f(0xc04)](_0x39e30f(0x493),_0x46aecd),_0x31a7ee[_0x39e30f(0x473)](_0x39e30f(0xaf1))[_0x39e30f(0xc04)](_0x39e30f(0x1bf),_0x5711a2),_0x4f2007[_0x39e30f(0x473)](_0x39e30f(0xb8b))['addEventListener'](_0x39e30f(0x1bf),_0x3ba4c0),_0x5748d5[_0x39e30f(0x473)]('livestream-sprite-slider-scale')[_0x39e30f(0xc04)](_0x39e30f(0x1bf),_0x3aa5c6));});break;case _0x47c2ad(0x149):_0x463d56[_0x47c2ad(0x1dc)](_0x562086=>{const _0x3347f2=_0x47c2ad;_0x10c8af+=_0x3347f2(0x2fb)+_0x562086[_0x3347f2(0xfe)]+'”聊过天，关于：“'+_0x562086[_0x3347f2(0x240)]+'”。\x0a',_0x562086['log']&&Array[_0x3347f2(0x8aa)](_0x562086[_0x3347f2(0x6e4)])&&(_0x10c8af+=_0x3347f2(0x480),_0x562086[_0x3347f2(0x6e4)][_0x3347f2(0x1dc)](_0xc00f79=>{const _0x4ebc51=_0x3347f2,_0x3bac8c=_0xc00f79[_0x4ebc51(0x39d)]==='character'?'你':_0x562086[_0x4ebc51(0xfe)];_0x10c8af+='\x20\x20\x20\x20-\x20'+_0x3bac8c+':\x20'+_0xc00f79[_0x4ebc51(0xb17)]+'\x20\x0a';}));});break;case _0x47c2ad(0x492):_0x463d56['forEach'](_0x40abd9=>{const _0x3294fd=_0x47c2ad;_0x10c8af+='-\x20你曾经搜索过：“'+_0x40abd9[_0x3294fd(0xe0f)]+_0x3294fd(0x3cf)+(_0x40abd9['result_page_content']||'没有看到具体内容')+_0x3294fd(0x9a9);});break;case _0x47c2ad(0x42b):_0x463d56[_0x47c2ad(0x1dc)](_0x1a4dfc=>{const _0x5b4695=_0x47c2ad;_0x10c8af+=_0x5b4695(0x93)+_0x1a4dfc[_0x5b4695(0x136)]+_0x5b4695(0x98b)+_0x1a4dfc['content'][_0x5b4695(0x833)](/\n/g,'\x20')+'”。\x0a';});break;case'bites':_0x463d56[_0x47c2ad(0x1dc)](_0xc8f4e3=>{const _0xf5400e=_0x47c2ad;_0x10c8af+=_0xf5400e(0x956)+_0xc8f4e3[_0xf5400e(0xb2a)]+_0xf5400e(0x36f)+_0xc8f4e3[_0xf5400e(0x1ed)][_0xf5400e(0x332)]('、')+'。\x0a';});break;case _0x47c2ad(0x65c):_0x463d56[_0x47c2ad(0x1dc)](_0x20455d=>{const _0x56b08b=_0x47c2ad;if(_0x56b08b(0xa84)!==_0x56b08b(0xa84)){_0x442c98(_0x56b08b(0xa54));return;}else _0x10c8af+='-\x20你在“'+_0x20455d[_0x56b08b(0xb9b)]+_0x56b08b(0x99e)+_0x20455d[_0x56b08b(0x575)]+'”。\x0a';});break;case _0x47c2ad(0x8d0):_0x463d56[_0x47c2ad(0x1dc)](_0x3fd42f=>{const _0x576ff3=_0x47c2ad;_0x576ff3(0x205)!=='JUOBG'?_0x31df0e&&_0x588e7b(_0x33d3b3):_0x10c8af+=_0x576ff3(0x91f)+_0x3fd42f[_0x576ff3(0xb5d)]+'”，在那里“'+_0x3fd42f[_0x576ff3(0x687)]+_0x576ff3(0x9a9);});break;default:_0x463d56[_0x47c2ad(0x1dc)](_0x1458cd=>{const _0xb93ae9=_0x47c2ad;if(_0xb93ae9(0x235)===_0xb93ae9(0x235))_0x10c8af+='-\x20'+JSON[_0xb93ae9(0xaf6)](_0x1458cd)+'\x20\x0a';else{_0x9f8705=_0x28178d[_0xb93ae9(0x4ec)][_0xb93ae9(0x394)](_0x1a6a6a=>_0x1a6a6a[_0xb93ae9(0x45c)]==='private'&&_0x1a6a6a[_0xb93ae9(0x584)]['includes'](_0x23be0f));const _0x34add3=_0x6d1c0e(_0x37bac3);_0x1f0ea0=_0x34add3?_0x34add3[_0xb93ae9(0xe79)]:_0xb93ae9(0xe2c);}});break;}}else _0x299434[_0x47c2ad(0x45c)]=_0x47c2ad(0x51c);}}else{const _0x42e989=_0x1c698e[_0x47c2ad(0x473)](_0x5efe3d);if(_0x42e989&&_0x1aaa0d)_0x42e989[_0x47c2ad(0x706)]=_0x4bfc67[_0x47c2ad(0xc18)](_0x4f0fb0);}}}catch(_0x54989f){console['error']('加载视奸记忆失败('+_0x59fb32['id']+')，已跳过。这不应该发生，数据库可能已损坏。',_0x54989f);}}return _0x10c8af;}function _0x1ad1ac(_0xc5a99){const _0x43fc56=_0x57ab4d;if(_0x43fc56(0x2ce)!==_0x43fc56(0x2ce)){_0x6317dc[_0x43fc56(0x6f0)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20margin-top:\x2050px;\x22>圣殿空空如也，点击右上角“+”献上你的第一首歌吧。</p>';return;}else{_0xc5a99[_0x43fc56(0x84c)]((_0x53cba8,_0x1fde46)=>new Date(_0x1fde46[_0x43fc56(0xb9f)])-new Date(_0x53cba8[_0x43fc56(0xb9f)]));if(!Array[_0x43fc56(0x8aa)](_0xc5a99))return _0x43fc56(0x1b8);if(_0xc5a99[_0x43fc56(0x893)]===0x0)return _0x43fc56(0x57e);return _0x43fc56(0x120)+_0xc5a99['map']((_0x254a80,_0x4101a4)=>'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x22\x20style\x20=\x20\x22align-items:\x20flex-start;\x20margin-bottom:\x200;\x20padding:\x2015px;\x20'+(_0x4101a4<_0xc5a99[_0x43fc56(0x893)]-0x1?'border-bottom:\x201px\x20solid\x20var(--border-color);':'')+'\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-avatar\x22\x20style=\x22width:\x2060px;\x20height:\x2060px;\x20background-color:\x20#eee;\x20border-radius:\x208px;\x20font-size:\x202rem;\x20flex-shrink:\x200;\x22>🖼️</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-info\x22\x20style=\x22margin-top:\x202px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a<div\x20class=\x22char-remark\x22\x20style=\x22white-space:\x20normal;\x20line-height:\x201.6;\x22>'+(_0x254a80[_0x43fc56(0xd76)]||_0x43fc56(0x929))+_0x43fc56(0x35f)+(_0x254a80[_0x43fc56(0xb9f)]||'')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div\x20>\x0a\x20\x20\x20\x20\x20\x20')[_0x43fc56(0x332)]('')+'</div\x20>\x20';}}function _0x507557(_0x37be1e,_0x165b6f){const _0x5f97b6=_0x57ab4d;if(!Array[_0x5f97b6(0x8aa)](_0x37be1e)||_0x37be1e[_0x5f97b6(0x893)]===0x0)return _0x5f97b6(0x899);return _0x5f97b6(0x120)+_0x37be1e[_0x5f97b6(0x17f)]((_0x1c17c2,_0x799516)=>{const _0x5aaeb0=_0x5f97b6,_0x221742=JSON[_0x5aaeb0(0xaf6)](_0x1c17c2[_0x5aaeb0(0x6e4)]||[])[_0x5aaeb0(0x833)](/'/g,_0x5aaeb0(0x41a))[_0x5aaeb0(0x833)](/"/g,'&quot;'),_0x3eb67b=_0x1c17c2[_0x5aaeb0(0xfe)]||_0x5aaeb0(0xd0);return'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22character-item\x20snoop-chat-item\x22\x0a\x20\x20\x20\x20style\x20=\x20\x22margin-bottom:\x200;\x20cursor:\x20pointer;\x20'+(_0x799516<_0x37be1e[_0x5aaeb0(0x893)]-0x1?_0x5aaeb0(0x9f5):'')+_0x5aaeb0(0x1e3)+_0x221742+'\x27\x0a\x20\x20\x20\x20data-contact-name=\x27'+_0x3eb67b+_0x5aaeb0(0x4bb)+_0x165b6f+_0x5aaeb0(0x2f4)+_0x3eb67b[_0x5aaeb0(0x512)](0x0)+_0x5aaeb0(0x9fb)+_0x3eb67b+_0x5aaeb0(0xa06)+(_0x1c17c2['last_message_preview']||'')+_0x5aaeb0(0x73d);})[_0x5f97b6(0x332)]('')+_0x5f97b6(0x9da);}function _0x3de7d1(_0x19daaf){const _0x331080=_0x57ab4d;if(_0x331080(0x3ca)!=='RihhZ'){const _0x12aab1=_0x214a72[_0x331080(0x473)](_0x331080(0x707));_0x12aab1[_0x331080(0x6f0)]='';if(_0x3415db[_0x331080(0x932)][_0x331080(0x893)]===0x0){_0x12aab1[_0x331080(0x6f0)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>还没有任何用户资料，点击右上角“+”创建第一个。</p>';return;}_0x1a4fcc[_0x331080(0x932)][_0x331080(0x1dc)](_0x1a39e0=>{const _0xb2ce3=_0x331080,_0x3b8fd0=_0x33904e[_0xb2ce3(0x7a9)](_0xb2ce3(0x527));_0x3b8fd0['className']=_0xb2ce3(0x522),_0x3b8fd0['dataset']['id']=_0x1a39e0['id'];const _0x49a172=_0x1a39e0['id']===_0x1e95e3['activeUserProfileId']?'\x20(当前)':'';_0x3b8fd0[_0xb2ce3(0x6f0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-item-name\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x1a39e0[_0xb2ce3(0x98f)]||_0x4faa01)+'\x22\x20class=\x22char-avatar\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1a39e0[_0xb2ce3(0xe79)]+_0x49a172+_0xb2ce3(0x57f)+_0x1a39e0[_0xb2ce3(0x171)][_0xb2ce3(0x825)](0x0,0x64)+_0xb2ce3(0x9fc),_0x3b8fd0[_0xb2ce3(0xc04)](_0xb2ce3(0x493),()=>_0xe12453(_0x1a39e0['id'])),_0x12aab1[_0xb2ce3(0xced)](_0x3b8fd0);});}else{if(!Array[_0x331080(0x8aa)](_0x19daaf))return _0x331080(0x1b8);if(_0x19daaf[_0x331080(0x893)]===0x0)return _0x331080(0x4e6);return _0x19daaf[_0x331080(0x84c)]((_0xddd3d7,_0x2e36a1)=>new Date(_0x2e36a1[_0x331080(0xb9f)])-new Date(_0xddd3d7[_0x331080(0xb9f)])),_0x331080(0x120)+_0x19daaf[_0x331080(0x17f)]((_0x4c984b,_0x552987)=>_0x331080(0xcb1)+(_0x552987<_0x19daaf[_0x331080(0x893)]-0x1?_0x331080(0x9f5):'')+_0x331080(0x2e2)+(_0x4c984b[_0x331080(0xe0f)]||_0x331080(0xe4b))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.85rem;\x20color:\x20var(--text-color-light);\x20margin-top:\x208px;\x20padding:\x2010px;\x20background:\x20var(--surface-bg);\x20border-radius:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4c984b[_0x331080(0x3aa)]||_0x331080(0x255))+_0x331080(0x1e0)+(_0x4c984b['timestamp']||'')+_0x331080(0xce4))['join']('')+_0x331080(0x9da);}}function _0x1de07d(_0x1f9bd9){const _0x36ad20=_0x57ab4d;if(!Array[_0x36ad20(0x8aa)](_0x1f9bd9))return _0x36ad20(0x1b8);if(_0x1f9bd9['length']===0x0)return'<p\x20style=\x22text-align:\x20center;\x20color:\x20#999;\x22>备忘录是空的。</p>';return _0x1f9bd9[_0x36ad20(0x84c)]((_0x1bdb59,_0x5a242e)=>new Date(_0x5a242e[_0x36ad20(0x42c)])-new Date(_0x1bdb59[_0x36ad20(0x42c)])),_0x1f9bd9[_0x36ad20(0x17f)](_0x286caa=>_0x36ad20(0x211)+(_0x286caa[_0x36ad20(0x136)]||_0x36ad20(0x3a2))+_0x36ad20(0x2ea)+(_0x286caa[_0x36ad20(0xb17)]||'')+_0x36ad20(0x16c)+(_0x286caa[_0x36ad20(0x42c)]||'')+_0x36ad20(0x454))[_0x36ad20(0x332)]('');}function _0x1f4b9c(_0x29fd59){const _0x514fc6=_0x57ab4d;if('lOSLK'==='tkKEY')_0x30e9a8(_0x514fc6(0xd33)+_0x40e928['message']);else{if(!Array[_0x514fc6(0x8aa)](_0x29fd59))return _0x514fc6(0x1b8);if(_0x29fd59['length']===0x0)return _0x514fc6(0xd70);return _0x29fd59[_0x514fc6(0x84c)]((_0x20b551,_0x586dc5)=>new Date(_0x586dc5[_0x514fc6(0xb9f)])-new Date(_0x20b551[_0x514fc6(0xb9f)])),_0x29fd59[_0x514fc6(0x17f)](_0x51da5e=>{const _0x7048fe=_0x514fc6;if(_0x7048fe(0xc3d)===_0x7048fe(0xc3d)){const _0x5b2902=(_0x51da5e['items']||[])[_0x7048fe(0x17f)](_0x5c75c7=>'<div\x20style\x20=\x20\x22display:\x20flex;\x20justify-content:\x20space-between;\x20font-size:\x200.9rem;\x20color:\x20var(--text-color);\x20margin-top:\x205px;\x22\x20>\x0a\x20\x20\x20\x20\x20\x20<span>'+_0x5c75c7+_0x7048fe(0x7de))[_0x7048fe(0x332)]('');return _0x7048fe(0x597)+(_0x51da5e[_0x7048fe(0xb2a)]||_0x7048fe(0xbe0))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22diary-timestamp\x22\x20style=\x22font-size:\x200.75rem;\x22>'+(_0x51da5e[_0x7048fe(0xb9f)]||'')+_0x7048fe(0x412)+(_0x51da5e['status']||_0x7048fe(0x920))+_0x7048fe(0x763)+_0x5b2902+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x20font-size:\x201.1rem;\x20font-weight:\x20bold;\x20margin-top:\x2010px;\x20padding-top:\x2010px;\x20border-top:\x201px\x20solid\x20var(--border-color);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20实付:\x20<span\x20class=\x22amount\x22>¥\x20'+(_0x51da5e[_0x7048fe(0x44e)]||0x0)[_0x7048fe(0x684)](0x2)+_0x7048fe(0x131);}else _0x285677[_0x7048fe(0x970)][_0x7048fe(0x702)]('show');})['join']('');}}function _0x3082c6(_0x21d4e0){const _0x6d675e=_0x57ab4d;if(_0x6d675e(0xde7)===_0x6d675e(0xad8))_0x1a012a[_0x6d675e(0x970)][_0x6d675e(0x702)](_0x6d675e(0x9cb)),_0x225a68[_0x6d675e(0x970)][_0x6d675e(0x702)](_0x6d675e(0x5b5));else{if(!Array['isArray'](_0x21d4e0))return _0x6d675e(0x1b8);if(_0x21d4e0['length']===0x0)return _0x6d675e(0xa3);return _0x21d4e0[_0x6d675e(0x84c)]((_0x34accc,_0x4c8c91)=>new Date(_0x4c8c91[_0x6d675e(0xb9f)])-new Date(_0x34accc[_0x6d675e(0xb9f)])),_0x21d4e0[_0x6d675e(0x17f)](_0x23d7ed=>_0x6d675e(0xb7)+(_0x23d7ed[_0x6d675e(0xb9b)]||_0x6d675e(0x739))+_0x6d675e(0x559)+(_0x23d7ed['timestamp']||'')+_0x6d675e(0x7a1)+(_0x23d7ed[_0x6d675e(0x575)]||_0x6d675e(0x8e8))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22font-size:\x201.1rem;\x20font-weight:\x20bold;\x20color:\x20var(--accent-color);\x20text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20¥\x20'+(_0x23d7ed[_0x6d675e(0x4c5)]||0x0)[_0x6d675e(0x684)](0x2)+_0x6d675e(0xa02))[_0x6d675e(0x332)]('');}}function _0x58d0db(_0x5e5a7c){const _0x56f9de=_0x57ab4d;if(_0x56f9de(0xbb8)===_0x56f9de(0x3bc)){if(!_0x1f1b18)return;const _0x2e5b6f=_0x10d949[_0x56f9de(0x3c5)]?_0x1a4a84[_0x56f9de(0x3c5)][0x0]['clientY']:_0x27cf02[_0x56f9de(0xd42)];_0x2e2ae8=_0x2e5b6f-_0x30cc58;if(_0x2800fc<0x0){const _0x501df4=_0x30fd9a[_0x56f9de(0xd5e)](_0x373ae7),_0x22f4a3=0.4,_0x365f29=_0xa930f4[_0x56f9de(0xc71)](_0x501df4,_0x22f4a3)*0x14;_0x4c7463['style'][_0x56f9de(0x3b7)]='translateY(-'+_0x365f29+_0x56f9de(0x990);}}else{if(!Array['isArray'](_0x5e5a7c))return _0x56f9de(0x1b8);if(_0x5e5a7c['length']===0x0)return _0x56f9de(0x392);return _0x5e5a7c['sort']((_0x3e4fd9,_0x2d32e9)=>new Date(_0x2d32e9[_0x56f9de(0xb9f)])-new Date(_0x3e4fd9[_0x56f9de(0xb9f)])),'<div\x20style\x20=\x20\x22border-left:\x202px\x20solid\x20var(--border-color);\x20padding-left:\x2015px;\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2015px;\x22\x20>\x20'+_0x5e5a7c[_0x56f9de(0x17f)](_0xa1ef88=>_0x56f9de(0xda0)+(_0xa1ef88[_0x56f9de(0xb5d)]||_0x56f9de(0xe05))+_0x56f9de(0xd75)+(_0xa1ef88['activity_description']||'')+_0x56f9de(0xb2)+(_0xa1ef88[_0x56f9de(0xb9f)]||'')+_0x56f9de(0x11b))[_0x56f9de(0x332)]('')+_0x56f9de(0x9da);}}async function _0x537bf1(_0x2b1a1e,_0x2b4ab2,_0x2a7324=null,_0x2b7078=![],_0x456c78=null){const _0x1c097d=_0x57ab4d,_0x531efe=_0x1238ea(_0x2b4ab2),_0x256e5e=_0xa7652b[_0x1c097d(0x4ec)][_0x1c097d(0x394)](_0x226fc8=>_0x226fc8[_0x1c097d(0x45c)]===_0x1c097d(0x722)&&_0x226fc8[_0x1c097d(0x584)]['includes'](_0x2b4ab2)),_0x329be1=_0x2e35cc(_0x256e5e?.['id']||_0xa7652b[_0x1c097d(0xd5b)]);if(!_0x531efe)throw new Error(_0x1c097d(0x3fc));const {omniText:_0x526b13}=_0x32429c(_0x2b4ab2);let _0x1007d2='';const _0x72ef11=new Date();let _0xafdb=null,_0x45a535='无';if(_0x2a7324)try{if(_0x1c097d(0xafe)==='Lmlaz'){let _0x49841f;try{if(_0x1c097d(0x545)!==_0x1c097d(0x545)){const _0x4b19f1=_0x20a627[_0x1c097d(0x473)](_0x1c097d(0x9eb));if(!_0x4b19f1)return;_0x4fc7bc['preferences']['forceWhiteClock']?(_0x4b19f1[_0x1c097d(0x3e4)][_0x1c097d(0x1ba)]=_0x1c097d(0x8bb),_0x4b19f1[_0x1c097d(0x3e4)][_0x1c097d(0x85b)]='0\x202px\x208px\x20rgba(0,0,0,0.4)'):(_0x4b19f1[_0x1c097d(0x3e4)]['color']=_0x1c097d(0xd5c),_0x4b19f1[_0x1c097d(0x3e4)][_0x1c097d(0x85b)]=_0x1c097d(0x4a6));}else _0x49841f=JSON['parse'](_0x2a7324);}catch(_0x406aef){_0x49841f=_0x374ff2(_0x2a7324);}if(Array['isArray'](_0x49841f)&&_0x49841f[_0x1c097d(0x893)]>0x0){const _0x3133b7=_0x49841f[_0x1c097d(0x17f)](_0x2d29a4=>new Date(_0x2d29a4['timestamp']||_0x2d29a4['last_edited']))[_0x1c097d(0x1a9)](_0x914593=>!isNaN(_0x914593));if(_0x3133b7[_0x1c097d(0x893)]>0x0){if(_0x1c097d(0x44c)===_0x1c097d(0x44c))_0xafdb=new Date(Math['max'][_0x1c097d(0x5e9)](null,_0x3133b7)),_0x45a535=_0xafdb[_0x1c097d(0x1f3)](_0x1c097d(0xbbe),{'dateStyle':_0x1c097d(0x886),'timeStyle':_0x1c097d(0x6b5)});else return _0x123ea5[_0x1c097d(0x1de)](0x0,0xc);}}}else _0x23af62(new _0x48e0b2('Canvas\x20to\x20Blob\x20conversion\x20failed.'));}catch(_0x114a24){console[_0x1c097d(0x591)](_0x1c097d(0xcbc),_0x114a24);}const _0x1007fb=_0x3a3aa1(_0x2b4ab2);_0x1007d2=_0x1c097d(0x907),_0x1007d2+=_0x1c097d(0xa10)+_0x72ef11[_0x1c097d(0x1f3)](_0x1c097d(0xbbe),{'dateStyle':_0x1c097d(0x7d3),'timeStyle':_0x1c097d(0x6b5)})+'\x20\x0a';if(_0x1007fb){if(_0x1c097d(0xc54)!==_0x1c097d(0xc54)){const _0x4c225a=_0x72243d[_0x1c097d(0x394)](_0x2744f0=>_0x2744f0[_0x1c097d(0xe79)]===_0x22e22e['name']);if(_0x4c225a)_0x52a58a[_0x1c097d(0x8b3)](_0x3eed10,{'content':'[AI发送了表情：'+_0x4c225a[_0x1c097d(0xe79)]+']','displayUrl':_0x4c225a[_0x1c097d(0x17c)]});else _0xc9c605['content']=_0x1c097d(0x384)+_0x4ec9e0['name']+']';}else{const _0x4a6228=new Date(_0x1007fb[_0x1c097d(0xb9f)]),_0xb51b8=_0x420848(_0x4a6228);_0x1007d2+=_0x1c097d(0xa07)+_0xb51b8+'\x20\x0a';const _0x5aa041=_0x72ef11[_0x1c097d(0xc8e)](),_0x232265=_0x4a6228[_0x1c097d(0xc8e)](),_0x20bccb=new Date();_0x20bccb[_0x1c097d(0xd58)](_0x72ef11[_0x1c097d(0x947)]()-0x1);const _0x5d08ad=_0x20bccb[_0x1c097d(0xc8e)]();if(_0x5aa041===_0x232265){if(_0x1c097d(0x28b)!=='mlCkw')_0x2b6c22+=_0x1c097d(0xaed)+_0x4e9243+'\x0a'+_0x18dfc9[_0x2fa00b]['join']('\x0a');else{const _0x194d06=(_0x72ef11-_0x4a6228)/(0x3e8*0x3c);_0x1007d2+='-\x20**\x20状态提示\x20**:\x20你的生活正在进行中，生成的内容应该是“刚才”或“几分钟前”发生的。\x0a';}}else{if(_0x5d08ad===_0x232265)_0x1007d2+=_0x1c097d(0xb9);else{if('WpASC'===_0x1c097d(0x97))_0x366ba6[_0x1c097d(0x45c)]='music',_0x38e69f[_0x1c097d(0x8b3)](_0x565cfd,_0xcb49ab);else{const _0x592796=Math[_0x1c097d(0xe81)]((_0x72ef11-_0x4a6228)/(0x3e8*0x3c*0x3c*0x18));_0x1007d2+=_0x1c097d(0xd19)+_0x592796+_0x1c097d(0x515);}}}}}else _0x1007d2+=_0x1c097d(0x12c);let _0xfc3fb2='',_0x5f3182='';_0x2a7324?'HPRvT'==='Lisgz'?(_0x4ac09d[_0x1c097d(0xd5b)]=_0x4162e8['id'],_0x4de39f(),_0x22dcab()):(_0xfc3fb2=_0x1c097d(0xabf),_0x5f3182=_0x1c097d(0xc81)+_0x2a7324+_0x1c097d(0x94)):_0xfc3fb2=_0x1c097d(0x8b7);const _0x22eea2={'gallery':'\x0a#\x20任务:\x20生成相册内容\x0a根据角色的近期经历、人际关系和隐藏性格，生成3\x20-\x205张照片的文字描述。重点是，照片内容要能引发联想，暗示一些用户不知道的事件。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22id\x22:\x20\x22photo_1725123456\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22一张在海边拍的黄昏照片，照片里有一个模糊的、看不清脸的背影。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-24\x2018:30\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','whispers':_0x1c097d(0xd4),'abyss':_0x1c097d(0x1a6),'fragments':'\x0a#\x20任务:\x20生成备忘录内容\x0a生成2\x20-\x203个简短的备忘录。内容必须多样化，足以体现角色的生活细节和内心世界。可以是购物清单、几句没头没尾的歌词、一个地址、或者一段练习如何道歉的草稿。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22要买的东西\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22-\x20牛奶\x5cn-\x20猫粮（快没了！）\x5cn-\x20《仿生人会梦见电子羊吗？》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22last_edited\x22:\x20\x222025-09-25\x2009:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','bites':_0x1c097d(0x49d),'wants':'\x0a#\x20任务:\x20生成购物记录\x0a创建一份近期的购物清单。这些商品必须是有指向性的，而不是随便买的日用品。比如游戏、书籍、衣服等。最关键的是，这些记录必须和他\x20/\x20她的浏览器历史、备忘录、聊天内容里透露出的兴趣和秘密能够互相印证。一些比较幻想风格的角色可以用更加符合角色背景的内容风格。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20输出格式必须是严格的JSON数组。\x0a#\x20示例\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22item_name\x22:\x20\x22《神经漫游者》\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22store_name\x22:\x20\x22城东旧书店\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22书籍\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22cost\x22:\x2045.00,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x222025-09-22\x2015:10\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]','footprints':_0x1c097d(0xd23)};let _0x60c81a=_0x22eea2[_0x2b1a1e]||_0x1c097d(0x884)+_0x2b1a1e+_0x1c097d(0xc5);if(_0x2b1a1e==='whispers'){const _0x1afa0d=_0x1c097d(0x4b9);let _0x4bd8b6='';if(_0x2b7078)_0x1c097d(0x565)===_0x1c097d(0x2bb)?_0x81263b(_0x1c097d(0xd6d))[_0x1c097d(0xcae)](_0x39f129=>{const _0x1e11ea=_0x1c097d;if(_0x39f129){const _0x9feebd=_0x1be099(_0x58f3bb[_0x1e11ea(0x9ed)]);_0x9feebd&&(delete _0x9feebd[_0x1e11ea(0x682)],_0x172f52(),_0x50e4aa(_0x9feebd['id'],_0x1e11ea(0x177)),_0x27e24e(_0x1e11ea(0x5df)),_0x427ecd(!![]));}}):_0x4bd8b6=_0x1c097d(0x3de)+(_0x5f3182?_0x1c097d(0x8fa):_0x1c097d(0x1a0))+_0x1c097d(0xc7d);else _0x456c78?_0x4bd8b6=_0x1c097d(0xe6e)+_0x456c78+'`\x20的联系人【续写】3-5条新的对话。\x0a-\x20【【【绝对禁止】】】创造新的人物或修改其他人的对话！\x0a'+_0x1afa0d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x4bd8b6='\x0a#\x20【作战指令：首次加载】\x0a-\x20你的任务是更新和扩展现有的聊天列表。\x0a-\x201.\x20**延续对话**:\x20挑选\x201-2\x20个【已有内容】中的对话，在原有基础上【续写】3-5条新的对话。\x0a-\x202.\x20**开启新篇**:\x20创造\x201-2\x20个【全新的】虚拟联系人（NPC）和他们的对话记录。\x0a'+_0x1afa0d+_0x1c097d(0x79c);_0x60c81a=_0x22eea2[_0x2b1a1e]+'\x0a'+_0x4bd8b6;}let _0x2022cc='';if(_0x531efe[_0x1c097d(0x277)]&&_0x531efe[_0x1c097d(0x277)][_0x1c097d(0x893)]>0x0){if(_0x1c097d(0x4de)!==_0x1c097d(0x4de)){const _0x2ca8b2=_0xa8d782[_0x1c097d(0x180)](_0x24760f[_0x1c097d(0xb34)](_0x1c097d(0x648))||'[]');_0x26b0d5[_0x1c097d(0x1dc)](_0x387814=>{const _0x18098b=_0x1c097d,_0x204300=_0x387814[_0x18098b(0x9c6)][_0x18098b(0x8f6)];!_0x2ca8b2[_0x18098b(0x5c0)](_0x204300)&&_0x2ca8b2[_0x18098b(0x214)](_0x204300);}),_0x577a6e[_0x1c097d(0x29d)](_0x1c097d(0x648),_0x5e52d9[_0x1c097d(0xaf6)](_0x2ca8b2)),_0xd8337a=![],_0x365a7f(),_0x21ba19(_0x1c097d(0xab6));}else{const _0x3afe27=_0x531efe[_0x1c097d(0x277)][_0x1c097d(0x17f)](_0x3e48b1=>_0xa7652b['worldBooks']['find'](_0x755821=>_0x755821['id']===_0x3e48b1))[_0x1c097d(0x1a9)](Boolean)[_0x1c097d(0x17f)](_0x41ca7d=>_0x1c097d(0x862)+_0x41ca7d[_0x1c097d(0xe79)]+'\x0a'+_0x41ca7d[_0x1c097d(0xb17)])[_0x1c097d(0x332)]('');_0x3afe27&&(_0x2022cc=_0x1c097d(0xa0a)+_0x3afe27);}}const _0x2f6ea2=_0x1c097d(0xab4)+_0x531efe[_0x1c097d(0xe79)]+'\x22。你正在生成你【自己】手机里的内容。\x0a\x0a#\x20【绝对身份锁定协议】(最高优先级)\x0a-\x20你【就是】\x22'+_0x531efe[_0x1c097d(0xe79)]+_0x1c097d(0x84f)+_0x329be1[_0x1c097d(0xe79)]+_0x1c097d(0x82d)+_0x1007d2+'\x0a\x0a#\x20角色核心资料\x0a-\x20姓名:\x20'+_0x531efe[_0x1c097d(0xe79)]+_0x1c097d(0x231)+_0x531efe[_0x1c097d(0x171)]+'\x0a'+_0x2022cc+_0x1c097d(0x93b)+_0x329be1[_0x1c097d(0xe79)]+_0x1c097d(0x231)+_0x329be1[_0x1c097d(0x171)]+_0x1c097d(0xbd3)+_0x329be1[_0x1c097d(0xe79)]+'刚发生的事)\x0a'+_0x526b13+'\x0a'+_0x5f3182+_0x1c097d(0xc01)+_0xfc3fb2+'\x0a'+_0x60c81a+_0x1c097d(0xd0a),_0x35a6a0=[{'role':'system','content':_0x2f6ea2}];_0x35a6a0[_0x1c097d(0x214)]({'role':_0x1c097d(0xea1),'content':_0x1c097d(0x6a0)});const _0x22d396=await _0x56b292(_0x35a6a0,{'json':!![]});return _0x22d396;}async function _0xe38d16(_0xfe6d09){const _0x2e3291=_0x57ab4d,_0x5d4c0c=_0x1238ea(_0xfe6d09);if(!_0x5d4c0c)throw new Error('找不到角色。');_0x27a15c(!![],_0x2e3291(0xdc5));const _0x148aaf=[_0x2e3291(0xa5b),'whispers','abyss',_0x2e3291(0x42b),_0x2e3291(0xae3),_0x2e3291(0x65c),'footprints'];let _0x56f1ad={};await Promise['all'](_0x148aaf[_0x2e3291(0x17f)](async _0x1f43f8=>{const _0x238ff3=_0x2e3291,_0x5865e7=_0x238ff3(0x882)+_0xfe6d09+'_'+_0x1f43f8,_0x1c6a6a=await _0x3d41c4(_0x5865e7);if(_0x1c6a6a)try{_0x56f1ad[_0x1f43f8]=JSON[_0x238ff3(0x180)](_0x1c6a6a);}catch(_0x114c6c){}}));if(Object[_0x2e3291(0xd79)](_0x56f1ad)[_0x2e3291(0x893)]===0x0){if(_0x2e3291(0x36b)===_0x2e3291(0xda7))_0x7f755e(_0x2594fd['selectedDate']);else return _0x2e3291(0x5aa);}const _0x1862a3='\x0a#\x20核心任务:\x20档案馆书记官\x0a你的任务是为一个名为“'+_0x5d4c0c[_0x2e3291(0xe79)]+_0x2e3291(0x66d),_0x3bdd5b=[{'role':_0x2e3291(0xaae),'content':_0x1862a3},{'role':_0x2e3291(0xea1),'content':JSON[_0x2e3291(0xaf6)](_0x56f1ad,null,0x2)}];_0x27a15c(!![],_0x2e3291(0xd55));const _0x5430be=await _0x56b292(_0x3bdd5b);return _0x5430be||_0x2e3291(0x36e);}async function _0xe38d16(_0x7e8126){const _0x58d27d=_0x57ab4d,_0x29d21f=_0x1238ea(_0x7e8126);if(!_0x29d21f)throw new Error(_0x58d27d(0x841));try{if(_0x58d27d(0xa62)===_0x58d27d(0xa62)){_0x27a15c(!![],'正在翻阅所有档案...');const _0x7eacfc=[_0x58d27d(0xa5b),'whispers',_0x58d27d(0x492),_0x58d27d(0x42b),_0x58d27d(0xae3),_0x58d27d(0x65c),_0x58d27d(0x8d0)];let _0x3f728e={};await Promise[_0x58d27d(0xc1d)](_0x7eacfc['map'](async _0x12deeb=>{const _0x435651=_0x58d27d,_0x5dab5f=_0x435651(0x882)+_0x7e8126+'_'+_0x12deeb,_0x4eab48=await _0x3d41c4(_0x5dab5f);if(_0x4eab48)try{_0x3f728e[_0x12deeb]=JSON['parse'](_0x4eab48);}catch(_0x276070){}}));if(Object[_0x58d27d(0xd79)](_0x3f728e)['length']===0x0){if('FyKWF'!==_0x58d27d(0x8b0))return _0x58d27d(0x5aa);else{if(!_0xd92281)return'';return _0x16d39a[_0x58d27d(0x833)](/&/g,_0x58d27d(0x806))[_0x58d27d(0x833)](/</g,_0x58d27d(0x6c1))[_0x58d27d(0x833)](/>/g,_0x58d27d(0xc9e))['replace'](/"/g,'&quot;')['replace'](/'/g,_0x58d27d(0xd52));}}const _0x17c4a8=_0x58d27d(0xd0b)+_0x29d21f['name']+'”的角色撰写一份“手机内容总结档案”。你将收到一份包含其手机内多个应用数据的JSON对象。\x0a\x0a#\x20档案撰写规则\x0a1.\x20\x20**格式**:\x20你的输出【必须】是、也【只能】是一个遵循\x20YAML\x20格式的纯文本,标题为：$【{character.name}的私人手机存储着以下信息】。\x0a2.\x20\x20**结构**:\x0a\x20\x20\x20\x20-\x20根节点必须是\x20`phone_summary:`。\x0a\x20\x20\x20\x20-\x20下一级是以应用名（如\x20`gallery`,\x20`whispers`\x20等）作为键。\x0a\x20\x20\x20\x20-\x20每个应用下是一个事件列表，每一项都是一个以连字符\x20`-`\x20开头的字符串。\x0a3.\x20\x20**内容**:\x0a\x20\x20\x20\x20-\x20**【绝对禁止】复读**:\x20不要直接复制粘贴原文！你要用自己的话进行【总结】和【提炼】。\x0a\x20\x20\x20\x20-\x20**【聚焦核心】**:\x20专注于关键信息、情感转折点、重要决定、暴露的秘密、体现性格的核心事件。忽略无意义的细节。\x0a\x20\x20\x20\x20-\x20**【中立视角】**:\x20以客观的第三人称档案管理员视角进行记录。\x0a\x0a#\x20输出示例\x0a```yaml\x0aphone_summary:\x0a\x20\x20gallery:\x0a\x20\x20\x20\x20-\x20\x22相册里有一张在海边拍的黄昏照片，出现了一个神秘的背影。\x22\x0a\x20\x20whispers:\x0a\x20\x20\x20\x20-\x20\x22角色曾与一位叫\x27Rin\x27的神秘联系人讨论过一个重要的决定。\x22\x0a\x20\x20abyss:\x0a\x20\x20\x20\x20-\x20\x22近期频繁搜索关于“独自庆祝生日”的话题，可能暗示了其孤独感。\x22\x0a```\x0a\x0a#\x20最终指令\x0a请严格按照上述规则，分析我提供的JSON数据全文，并生成一份\x20YAML\x20格式的档案。直接从\x20`phone_summary:`\x20开始输出。\x0a',_0x2fc88d=[{'role':_0x58d27d(0xaae),'content':_0x17c4a8},{'role':_0x58d27d(0xea1),'content':JSON[_0x58d27d(0xaf6)](_0x3f728e,null,0x2)}];_0x27a15c(!![],'书记官正在奋笔疾书...');const _0x5aba9d=await _0x56b292(_0x2fc88d);return _0x5aba9d||_0x58d27d(0x36e);}else _0x29fde['currentLivestreamDMs'][_0x58d27d(0x214)]({'sender':'ai','content':_0x19ea88[_0x58d27d(0x8eb)]()});}finally{if(_0x58d27d(0x2f2)!==_0x58d27d(0x792))_0x27a15c(![]);else{const _0x29832a={'id':'circle_'+_0x58c44f[_0x58d27d(0x144)](),'name':_0x5a4b78,'boundUserProfileId':_0x18acec,'memberCharacterIds':_0x228cb7,'posts':[]};_0x249fae[_0x58d27d(0x175)][_0x58d27d(0x214)](_0x29832a);}}}document['getElementById'](_0x57ab4d(0xcfd))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>_0xffff1f('home',_0x57ab4d(0x14b))),document[_0x57ab4d(0x473)](_0x57ab4d(0x3d7))[_0x57ab4d(0xc04)](_0x57ab4d(0x493),()=>{const _0x527b63=_0x57ab4d;if('lzsoN'!==_0x527b63(0x52e)){const _0x10d346=_0x55763d['getElementById']('music-widget-card'),_0x5d35c1=_0x4b5183['getElementById'](_0x527b63(0xc48)),_0x399c0a=_0x3738de['getElementById'](_0x527b63(0xb6c)),_0x189044=_0x500db0[_0x527b63(0x473)]('widget-cover-art'),_0x2dbbb7=_0x2aacd7;_0x2dbbb7&&_0x2dbbb7[_0x527b63(0x2f3)]?(_0x5d35c1[_0x527b63(0x226)]=_0x2dbbb7[_0x527b63(0x136)],_0x399c0a[_0x527b63(0x226)]=_0x2dbbb7[_0x527b63(0x6e3)],_0x10d346[_0x527b63(0x970)][_0x527b63(0xddb)]('is-playing'),_0x10d346['style'][_0x527b63(0xd2c)](_0x527b63(0x878),_0x527b63(0x548)+_0x2dbbb7['cover']+')')):(_0x5d35c1[_0x527b63(0x226)]=_0x527b63(0xe0d),_0x399c0a[_0x527b63(0x226)]=_0x527b63(0x359),_0x10d346[_0x527b63(0x970)][_0x527b63(0x702)](_0x527b63(0xba7)),_0x189044[_0x527b63(0x3e4)][_0x527b63(0xd2c)](_0x527b63(0x878),'none'));}else document['getElementById'](_0x527b63(0x2a2))[_0x527b63(0x3e4)][_0x527b63(0x1df)]=_0x527b63(0x4a6),_0xffff1f('snoopList',_0x527b63(0xb3));});const _0x5088e9=document['getElementById'](_0x57ab4d(0x185));_0x5088e9&&(_0x57ab4d(0xa60)===_0x57ab4d(0x155)?_0x173299(_0x3170bf,_0x1e453f):_0x5088e9['addEventListener']('click',()=>{const _0xdbdcc9=_0x57ab4d;if(_0xdbdcc9(0x40c)===_0xdbdcc9(0x88e))_0xd359c[_0xdbdcc9(0x3e4)][_0xdbdcc9(0x16b)]='',_0x16d787[_0xdbdcc9(0x3e4)][_0xdbdcc9(0x1ba)]='',_0x5e2db2['querySelectorAll'](_0xdbdcc9(0x63d))[_0xdbdcc9(0x1dc)](_0x37f5fb=>{const _0x3f9a05=_0xdbdcc9;_0x37f5fb['style'][_0x3f9a05(0x85b)]='';});else{const _0x15d762=document[_0xdbdcc9(0x473)]('lock-screen-overlay');_0x15d762&&(_0xdbdcc9(0x3cc)===_0xdbdcc9(0x3cc)?(_0x15d762[_0xdbdcc9(0x970)][_0xdbdcc9(0x702)](_0xdbdcc9(0xae6)),_0x15d762[_0xdbdcc9(0x3e4)][_0xdbdcc9(0x3b7)]='',_0x15d762['style'][_0xdbdcc9(0x5cf)]=''):_0x5aaf69=_0xdbdcc9(0x4eb)+_0x4c160e+_0xdbdcc9(0xb5a)+_0x472db7+_0xdbdcc9(0xba2)+_0x3c5f17+_0xdbdcc9(0xaca)+_0x334ecf+_0xdbdcc9(0x770));}})),_0xe2acf3();});async function _0xaf2918(){const _0x1f64f5=_0x49c371;console[_0x1f64f5(0x6e4)](_0x1f64f5(0x6b9)),console[_0x1f64f5(0x6e4)]('哼，正在开始净化你那被污染的聊天记录...');async function _0x188267(_0xfb62ae,_0x4ce6a6){const _0x590fd0=await _0x90829d;return new Promise((_0x5793e3,_0x3fcd1c)=>{const _0x65f47b=_0x20c5;if(_0x65f47b(0x72b)===_0x65f47b(0x9af))_0x31b6a1['error'](_0x65f47b(0xab1),_0x365f3e);else{const _0x5bc75d=_0x590fd0[_0x65f47b(0xdb0)](_0x3ddffa,_0x65f47b(0x4a7)),_0x59176a=_0x5bc75d[_0x65f47b(0xb9d)](_0x3ddffa),_0x2b2e4b=_0x59176a[_0x65f47b(0x5d6)]({'id':_0xfb62ae,'blob':_0x4ce6a6});_0x2b2e4b['onsuccess']=()=>_0x5793e3(_0x2b2e4b[_0x65f47b(0xdc7)]),_0x2b2e4b[_0x65f47b(0x835)]=()=>_0x3fcd1c(_0x2b2e4b[_0x65f47b(0xc95)]);}});}async function _0x2fa6ac(_0x145ddc){const _0xc0b5a1=_0x1f64f5;if(_0xc0b5a1(0xb44)===_0xc0b5a1(0x62a)){const _0x23c3de=_0x5abdd9,_0x1dc1bd=_0x23c3de[_0xc0b5a1(0x251)],_0x31807=_0x23c3de['scrollTop'];_0x411c75['displayedMessageCount']+=0x32,_0x1be111(),_0x165eee(()=>{const _0x24cae6=_0xc0b5a1,_0x3e8b1b=_0x23c3de['scrollHeight'];_0x23c3de[_0x24cae6(0xc55)]=_0x31807+(_0x3e8b1b-_0x1dc1bd);});}else{const _0xf16595=await _0x90829d;return new Promise((_0x5a1141,_0x1d9644)=>{const _0x3a9b8a=_0xc0b5a1,_0x53466a=_0xf16595[_0x3a9b8a(0xdb0)](_0x13337f,_0x3a9b8a(0xe51)),_0x34028a=_0x53466a['objectStore'](_0x13337f),_0x1d9ea8=_0x34028a[_0x3a9b8a(0x470)](_0x145ddc);_0x1d9ea8[_0x3a9b8a(0x7ad)]=()=>_0x5a1141(_0x1d9ea8[_0x3a9b8a(0xdc7)]?_0x1d9ea8[_0x3a9b8a(0xdc7)][_0x3a9b8a(0x173)]:null),_0x1d9ea8[_0x3a9b8a(0x835)]=()=>_0x1d9644(_0x1d9ea8[_0x3a9b8a(0xc95)]);});}}async function _0x16b440(_0x4d8a19,_0x20a106){const _0x15cf20=await _0x90829d;return new Promise((_0x3c8f4a,_0x42cbb8)=>{const _0x5029c3=_0x20c5,_0x1582b3=_0x15cf20[_0x5029c3(0xdb0)](_0x13337f,_0x5029c3(0x4a7)),_0x4143e3=_0x1582b3[_0x5029c3(0xb9d)](_0x13337f),_0x58f3c9=_0x4143e3['put']({'id':_0x4d8a19,'data':_0x20a106});_0x58f3c9[_0x5029c3(0x7ad)]=()=>_0x3c8f4a(),_0x58f3c9[_0x5029c3(0x835)]=()=>_0x42cbb8(_0x58f3c9['error']);});}function _0x1f74f6(_0x5e1a19){const _0xc47092=_0x1f64f5;if(_0xc47092(0xcce)==='Ccgqk'){const _0x4497aa=_0x19050a['createElement'](_0xc47092(0x527));_0x4497aa[_0xc47092(0xd04)]=_0xc47092(0xa19)+_0x25c235;const _0x3e5b61=_0x2c8840[_0xc47092(0x7a9)]('img');_0x3e5b61[_0xc47092(0x706)]=_0x18cb54,_0x3e5b61[_0xc47092(0xd04)]=_0xc47092(0x98f);const _0x2f1819=_0x1959c3[_0xc47092(0x7a9)](_0xc47092(0x527));return _0x2f1819['className']='avatar-frame',_0x105091&&(_0x2f1819[_0xc47092(0x3e4)][_0xc47092(0x16b)]='url(\x27'+_0x3b3caf+'\x27)'),_0x4497aa[_0xc47092(0xced)](_0x3e5b61),_0x4497aa[_0xc47092(0xced)](_0x2f1819),_0x4497aa;}else return fetch(_0x5e1a19)[_0xc47092(0xcae)](_0x88b9c5=>_0x88b9c5[_0xc47092(0x5c1)]());}let _0x2625e0=0x0;for(let _0x44af84=0x0;_0x44af84<localStorage[_0x1f64f5(0x893)];_0x44af84++){const _0x456c72=localStorage['key'](_0x44af84);if(_0x456c72&&_0x456c72['startsWith']('chatHistory_')){let _0x576d55,_0x159dd4=![];try{if('UvAnp'!==_0x1f64f5(0xe8))_0x545241[_0x1f64f5(0x21b)]({'behavior':_0x1f64f5(0x524),'block':_0x1f64f5(0xaaa)});else{_0x576d55=JSON[_0x1f64f5(0x180)](localStorage['getItem'](_0x456c72));if(!Array[_0x1f64f5(0x8aa)](_0x576d55))continue;for(const _0x4ddf63 of _0x576d55){if('CSNyj'!==_0x1f64f5(0x95)){if(_0x4ddf63&&_0x4ddf63['image']&&_0x4ddf63[_0x1f64f5(0x72d)][_0x1f64f5(0x324)](_0x1f64f5(0xb6f))){if('cSFWI'!==_0x1f64f5(0xbb2)){const _0x556650=await _0x1f74f6(_0x4ddf63['image']),_0x1aee52=_0x1f64f5(0x45d)+Date[_0x1f64f5(0x144)]()+'_'+Math['random']();await _0x188267(_0x1aee52,_0x556650),_0x4ddf63['imageId']=_0x1aee52,delete _0x4ddf63[_0x1f64f5(0x72d)],_0x159dd4=!![],_0x2625e0++;}else _0x29f214[_0x1f64f5(0x214)]({'timestamp':_0x3ccc41,'type':'直播回放','content':_0xd68c47});}}else{if(!_0x504196[_0x1f64f5(0x8aa)](_0xb90d23)||_0x5d3f58[_0x1f64f5(0x893)]===0x0)return _0x1f64f5(0x899);return _0x1f64f5(0x120)+_0x3dcd40[_0x1f64f5(0x17f)]((_0x15e978,_0x4da39c)=>{const _0x22660e=_0x1f64f5,_0x46d5b7=_0x3e2946[_0x22660e(0xaf6)](_0x15e978[_0x22660e(0x6e4)]||[])[_0x22660e(0x833)](/'/g,_0x22660e(0x41a))[_0x22660e(0x833)](/"/g,_0x22660e(0x705)),_0x43d14b=_0x15e978['contact_name']||_0x22660e(0xd0);return _0x22660e(0x538)+(_0x4da39c<_0x41d130['length']-0x1?_0x22660e(0x9f5):'')+'\x22\x0a\x20\x20\x20\x20data-log=\x27'+_0x46d5b7+'\x27\x0a\x20\x20\x20\x20data-contact-name=\x27'+_0x43d14b+_0x22660e(0x4bb)+_0x2a9e89+_0x22660e(0x2f4)+_0x43d14b['charAt'](0x0)+_0x22660e(0x9fb)+_0x43d14b+_0x22660e(0xa06)+(_0x15e978['last_message_preview']||'')+_0x22660e(0x73d);})[_0x1f64f5(0x332)]('')+_0x1f64f5(0x9da);}}_0x159dd4&&localStorage[_0x1f64f5(0x29d)](_0x456c72,JSON[_0x1f64f5(0xaf6)](_0x576d55));}}catch(_0x2a997d){console[_0x1f64f5(0xc95)](_0x1f64f5(0x107)+_0x456c72+_0x1f64f5(0xc77),_0x2a997d);continue;}}}console[_0x1f64f5(0x6e4)](_0x1f64f5(0x7f4)+_0x2625e0+_0x1f64f5(0x5ae));}function _0x4ccc22(_0x31f518,_0x1c743d){const _0x14827d=_0x49c371,_0x2872b2=document[_0x14827d(0x7a9)]('a'),_0xeaf2cc=URL[_0x14827d(0xc18)](_0x31f518);_0x2872b2[_0x14827d(0xdd8)]=_0xeaf2cc,_0x2872b2[_0x14827d(0x93d)]=_0x1c743d,document[_0x14827d(0x5ef)][_0x14827d(0xced)](_0x2872b2),_0x2872b2[_0x14827d(0x493)](),document['body']['removeChild'](_0x2872b2),URL[_0x14827d(0x906)](_0xeaf2cc);}async function _0x324d26(){const _0x17a2e6=_0x49c371;console[_0x17a2e6(0x6e4)](_0x17a2e6(0xd65)),console['log'](_0x17a2e6(0x628));async function _0x47d9c0(_0x1214a6,_0x2cb4c3){const _0x44fb43=_0x17a2e6;if('bEtuk'!==_0x44fb43(0x938)){const _0x3be02f=_0x96fd83['target'][_0x44fb43(0x9c6)]['categoryId'],_0x8ea10b=_0x19d2f8[_0x44fb43(0x63c)][_0x44fb43(0x3e3)];_0x5ca3e3[_0x44fb43(0xe54)]('.wb-entry-item\x20input[data-category-id=\x22'+_0x3be02f+'\x22]')[_0x44fb43(0x1dc)](_0x3e95e2=>{_0x3e95e2['checked']=_0x8ea10b;}),_0x180ca2();}else{const _0x5e15f8=await _0x90829d;return new Promise((_0x3bee8e,_0x4d213b)=>{const _0x1e34e1=_0x44fb43;if(_0x1e34e1(0x777)!==_0x1e34e1(0xe8a)){const _0x387489=_0x5e15f8['transaction'](_0x1e34e1(0xd8a),_0x1e34e1(0x4a7)),_0x463035=_0x387489['objectStore'](_0x1e34e1(0xd8a)),_0x2e2976=_0x463035[_0x1e34e1(0x5d6)]({'id':_0x1214a6,'blob':_0x2cb4c3});_0x2e2976[_0x1e34e1(0x7ad)]=()=>_0x3bee8e(_0x2e2976['result']),_0x2e2976['onerror']=()=>_0x4d213b(_0x2e2976[_0x1e34e1(0xc95)]);}else{const _0x421b79=_0x153ce9[_0x1e34e1(0x41c)](/\{[\s\S]*\}/);_0x421b79?_0x310010=_0x30985a[_0x1e34e1(0x180)](_0x421b79[0x0]):_0x259668=_0x49962f[_0x1e34e1(0x180)](_0x1c71f);}});}}function _0x436437(_0x59d668){const _0x3f8c93=_0x17a2e6;return fetch(_0x59d668)['then'](_0x2fe28c=>_0x2fe28c[_0x3f8c93(0x5c1)]());}let _0x447f3d=0x0,_0xcc0640=![];try{if(_0x17a2e6(0x590)===_0x17a2e6(0x192)){const _0x23579c=_0x66d86c[_0x17a2e6(0x180)](_0x25fcdb);_0x3f7c12[_0x17a2e6(0x8aa)](_0x23579c)&&(_0x40a493=_0x23579c[_0x17a2e6(0x1a9)](_0x230a78=>_0x230a78&&typeof _0x230a78==='object'&&typeof _0x230a78[_0x17a2e6(0xab8)]==='string'&&typeof _0x230a78[_0x17a2e6(0xb17)]!==_0x17a2e6(0xacc)));}else{const _0x496c35=localStorage[_0x17a2e6(0xb34)](_0x17a2e6(0xc6a));if(!_0x496c35){if(_0x17a2e6(0x328)!==_0x17a2e6(0x328))_0xa74e11(_0x17a2e6(0xd51)+_0x4a77ab['message']);else{console[_0x17a2e6(0x6e4)]('好友圈档案柜是空的，无需净化。');return;}}const _0x3f75da=JSON['parse'](_0x496c35);if(!_0x3f75da[_0x17a2e6(0x175)]||!Array['isArray'](_0x3f75da['friendCircles']))return;for(const _0xee391 of _0x3f75da[_0x17a2e6(0x175)]){if(_0xee391[_0x17a2e6(0xb6e)]&&Array[_0x17a2e6(0x8aa)](_0xee391[_0x17a2e6(0xb6e)])){if('iHWoM'!==_0x17a2e6(0x4b6))return _0x5be392['log'](_0x17a2e6(0xa58)),0x0;else for(const _0x49bfdb of _0xee391[_0x17a2e6(0xb6e)]){if('ekYgo'!==_0x17a2e6(0x301)){const _0x243280=_0x4f7732[_0x17a2e6(0x833)](/```(?:yaml)?/g,'')[_0x17a2e6(0x8eb)]();return _0x243280;}else{if(_0x49bfdb&&_0x49bfdb[_0x17a2e6(0x72d)]&&_0x49bfdb[_0x17a2e6(0x72d)][_0x17a2e6(0x324)](_0x17a2e6(0xb6f))){if('Edsqd'==='Edsqd'){console[_0x17a2e6(0x6e4)](_0x17a2e6(0xac3)+_0xee391[_0x17a2e6(0xe79)]+_0x17a2e6(0x979));const _0x2a166a=await _0x436437(_0x49bfdb[_0x17a2e6(0x72d)]),_0x37b0eb='post_image_migrated_'+Date['now']()+'_'+Math[_0x17a2e6(0x1c6)]();await _0x47d9c0(_0x37b0eb,_0x2a166a),_0x49bfdb['imageId']=_0x37b0eb,delete _0x49bfdb[_0x17a2e6(0x72d)],_0xcc0640=!![],_0x447f3d++;}else _0x3388f0[_0x17a2e6(0xc95)](_0x17a2e6(0x10c),_0x2d54aa),_0x5bdae1&&(_0x464352[_0x17a2e6(0x3e4)][_0x17a2e6(0x16b)]='');}}}}}_0xcc0640&&(console[_0x17a2e6(0x6e4)](_0x17a2e6(0xcc0)),localStorage[_0x17a2e6(0x29d)](_0x17a2e6(0xc6a),JSON[_0x17a2e6(0xaf6)](_0x3f75da)));}}catch(_0x52a9d1){_0x17a2e6(0x8cc)!==_0x17a2e6(0x910)?console['error'](_0x17a2e6(0x4bf),_0x52a9d1):_0x2b1104=_0x59b4b1['parse'](_0x26f140);}return console[_0x17a2e6(0x6e4)](_0x17a2e6(0x244)),console[_0x17a2e6(0x6e4)](_0x17a2e6(0x3d4)+_0x447f3d+_0x17a2e6(0xcba)),_0x447f3d;}function _0x20c5(_0x2fb30e,_0x50fce5){const _0x4ca72b=_0x4ca7();return _0x20c5=function(_0x20c5a6,_0x9a14ad){_0x20c5a6=_0x20c5a6-0x8d;let _0x551942=_0x4ca72b[_0x20c5a6];return _0x551942;},_0x20c5(_0x2fb30e,_0x50fce5);}async function _0x260098(){const _0x3a7cc0=_0x49c371;console[_0x3a7cc0(0x6e4)](_0x3a7cc0(0xe97)),console['log'](_0x3a7cc0(0x4dd));let _0x4740cb=0x0,_0x37288e=![];try{const _0x2bed1d=localStorage[_0x3a7cc0(0xb34)](_0x3a7cc0(0xc6a));if(!_0x2bed1d)return console[_0x3a7cc0(0x6e4)](_0x3a7cc0(0x465)),0x0;for(let _0x2c7f8f=0x0;_0x2c7f8f<localStorage[_0x3a7cc0(0x893)];_0x2c7f8f++){if(_0x3a7cc0(0xe2d)!=='HbVqC'){const _0x40e030=localStorage[_0x3a7cc0(0x834)](_0x2c7f8f);if(_0x40e030&&_0x40e030[_0x3a7cc0(0x324)](_0x3a7cc0(0xd62))){let _0x577e74,_0x405f46=![];try{if(_0x3a7cc0(0x8a9)===_0x3a7cc0(0xcd))_0x27bef2['push']({'timestamp':_0x56ac14[_0x3a7cc0(0xb9f)],'type':_0x346062(_0x5b7062),'content':'['+(_0x5c4d1e[_0x3a7cc0(0xab8)]==='user'?_0x3e14a5[_0x3a7cc0(0xe79)]:_0x3e958f[_0x3a7cc0(0xe79)])+']:\x20'+_0x64b2f4[_0x3a7cc0(0xb17)]});else{_0x577e74=JSON['parse'](localStorage['getItem'](_0x40e030));if(!Array['isArray'](_0x577e74))continue;for(const _0x3262f9 of _0x577e74){if(_0x3262f9&&(_0x3262f9['type']===_0x3a7cc0(0x784)||_0x3262f9['type']==='listen-together-invite')&&_0x3262f9[_0x3a7cc0(0x4f6)]&&_0x3262f9[_0x3a7cc0(0x4f6)]['startsWith'](_0x3a7cc0(0xb6f))){const _0x42c67e=await _0x530eb9(_0x3262f9[_0x3a7cc0(0x4f6)]),_0x261a28='music_cover_migrated_'+Date[_0x3a7cc0(0x144)]()+'_'+Math[_0x3a7cc0(0x1c6)]();await _0x1366c1(_0x261a28,_0x42c67e),_0x3262f9[_0x3a7cc0(0x4f9)]=_0x261a28,delete _0x3262f9[_0x3a7cc0(0x4f6)],_0x405f46=!![],_0x4740cb++;}}_0x405f46&&('RgEAp'!==_0x3a7cc0(0x9f)?localStorage[_0x3a7cc0(0x29d)](_0x40e030,JSON[_0x3a7cc0(0xaf6)](_0x577e74)):_0x24829e[_0x3a7cc0(0xe67)][_0x3a7cc0(0xaec)][_0x3a7cc0(0x1dc)](_0x5bf764=>{const _0xd56019=_0x3a7cc0;_0x17bb03[_0xd56019(0x5c0)](_0x5bf764[_0xd56019(0x52f)]())&&_0x4bc85a[_0xd56019(0x893)]<_0x977bfc&&_0x3684af[_0xd56019(0x214)](_0xd56019(0x75c)+_0x5bf764+_0xd56019(0x9e7));}));}}catch(_0x2b50b2){console[_0x3a7cc0(0xc95)](_0x3a7cc0(0x107)+_0x40e030+_0x3a7cc0(0x2f8),_0x2b50b2);continue;}}}else{const _0x35b145=_0xc47c77(_0x2ca5be[_0x3a7cc0(0x771)],_0xe83820['history'],_0x5ce585);if(_0x35b145[_0x3a7cc0(0x893)]===0x0)return;const _0x1ba87e=_0x565bc5===0x0?_0x3a7cc0(0xd99):_0x3a7cc0(0x5d2);_0x45611f['push'](_0x3a7cc0(0x481)+_0x1ba87e+_0x40a408(_0x4c12a4[_0x3a7cc0(0x771)])+'\x0a'+_0x35b145[_0x3a7cc0(0x332)]('\x0a')),_0x2f4c1f[_0x1125c7['chat']['id']]=_0x35b145['length'];}}}catch(_0x30f334){if('tpYMa'===_0x3a7cc0(0x2a8)){const _0x533bdc=_0x378904[_0x3a7cc0(0xc86)]();_0x533bdc[_0x3a7cc0(0x7ad)]=()=>_0x32df8c(_0x533bdc[_0x3a7cc0(0xdc7)]),_0x533bdc['onerror']=()=>_0x313239(_0x533bdc[_0x3a7cc0(0xc95)]);}else console[_0x3a7cc0(0xc95)]('净化音乐封面时出错，真是的。',_0x30f334);}return console['log']('---\x20音乐净化仪式完成\x20---'),console['log'](_0x3a7cc0(0x3d4)+_0x4740cb+'\x20张旧的音乐封面。'),_0x4740cb;}async function _0x33538b(){const _0x20810a=_0x49c371;console[_0x20810a(0x6e4)](_0x20810a(0x8a3)),console[_0x20810a(0x6e4)]('正在检查是否有需要救援的旧头像...');let _0x560d33=0x0;try{if(_0x20810a(0x2d6)!==_0x20810a(0x96c)){const _0x3a3a77=localStorage[_0x20810a(0xb34)]('appState');if(!_0x3a3a77)return console[_0x20810a(0x6e4)](_0x20810a(0xa58)),0x0;const _0x209b69=JSON['parse'](_0x3a3a77);if(!_0x209b69['characters']||!Array[_0x20810a(0x8aa)](_0x209b69[_0x20810a(0xbfe)]))return 0x0;for(const _0x549f59 of _0x209b69[_0x20810a(0xbfe)]){if(_0x20810a(0xd8e)===_0x20810a(0x284))_0x232e9b(),_0x3bd8b8(_0x20810a(0xb20),_0x20810a(0xbd6));else{if(_0x549f59&&_0x549f59[_0x20810a(0x98f)]&&_0x549f59['avatar']['startsWith'](_0x20810a(0xb6f))){if(_0x20810a(0xb89)!==_0x20810a(0xc73)){const _0x99e6f8=await _0xf3eefa(_0x20810a(0x6ea)+_0x549f59['id']);if(!_0x99e6f8){if(_0x20810a(0x21e)===_0x20810a(0x21e)){console[_0x20810a(0x6e4)](_0x20810a(0xce5)+_0x549f59[_0x20810a(0xe79)]+_0x20810a(0x1a1));const _0x43d854=await _0x530eb9(_0x549f59[_0x20810a(0x98f)]);await _0x1366c1(_0x20810a(0x6ea)+_0x549f59['id'],_0x43d854),_0x560d33++;}else{const _0x5ff0a0=_0x33400b[_0x20810a(0x175)]['find'](_0x5ca08a=>_0x5ca08a['id']===_0x42fad0);_0x5ff0a0&&(_0x5ff0a0[_0x20810a(0xe79)]=_0x4c90bb,_0x5ff0a0[_0x20810a(0x8f5)]=_0x552e5a,_0x5ff0a0[_0x20810a(0x84a)]=_0x525821);}}}else _0x4b2e96(_0x20810a(0xa3a));}}}}else _0x42a6a2['friendCircles'][_0x20810a(0x1dc)](_0x366797=>{const _0x1bdc77=_0x20810a;_0x366797[_0x1bdc77(0xb6e)]&&_0x366797[_0x1bdc77(0xb6e)][_0x1bdc77(0x1dc)](_0x1931d8=>{const _0x179e7d=_0x1bdc77;_0x279eb4(_0x1931d8,_0x179e7d(0x72d)),_0x18501b(_0x1931d8,_0x179e7d(0x4f6));});});}catch(_0x2e2964){if(_0x20810a(0x927)!=='gwrqy'){const _0x35fa32=_0x3abfc2(_0x4d3f59[_0x20810a(0x9c6)][_0x20810a(0x28f)],0xa);_0x22ec66(_0x35fa32);}else console['error']('救援头像时出错:',_0x2e2964);}return console['log'](_0x20810a(0xcf9)),console['log']('成功救援并备份了\x20'+_0x560d33+_0x20810a(0xbc9)),_0x560d33;}function _0x3781fd(){const _0x4698f4=_0x49c371;if(!_0xa7652b[_0x4698f4(0xf7)])return _0xa7652b['userProfiles'][_0x4698f4(0x394)](_0x5ea0d5=>_0x5ea0d5['id']===_0xa7652b[_0x4698f4(0xa4f)])||_0xa7652b[_0x4698f4(0x932)][0x0];const _0x38661b=_0xa7652b['chats'][_0x4698f4(0x394)](_0x52a060=>_0x52a060[_0x4698f4(0x45c)]===_0x4698f4(0x722)&&_0x52a060['participantIds'][_0x4698f4(0x5c0)](_0xa7652b[_0x4698f4(0xf7)])),_0x47b192=_0x38661b?.[_0x4698f4(0x8f5)]||_0xa7652b['activeUserProfileId'];return _0xa7652b[_0x4698f4(0x932)][_0x4698f4(0x394)](_0x2500ac=>_0x2500ac['id']===_0x47b192)||_0xa7652b[_0x4698f4(0x932)][0x0];}function _0x420848(_0x31562b){const _0x5dcce6=_0x49c371,_0x3289bd=new Date(),_0x433d1d=_0x3289bd-_0x31562b,_0x21583a=Math[_0x5dcce6(0xe81)](_0x433d1d/0x3e8),_0x50cdc4=Math[_0x5dcce6(0xe81)](_0x21583a/0x3c),_0x4d57cd=Math['round'](_0x50cdc4/0x3c),_0x418573=Math[_0x5dcce6(0xe81)](_0x4d57cd/0x18),_0x4a8ddd=_0x31562b['toLocaleTimeString'](_0x5dcce6(0xbbe),{'hour':_0x5dcce6(0xc07),'minute':_0x5dcce6(0xc07)});if(_0x21583a<0x3c)return'刚才';if(_0x50cdc4<0x3c)return _0x50cdc4+_0x5dcce6(0x2b3);const _0x379eae=_0x3289bd[_0x5dcce6(0xc8e)]()===_0x31562b[_0x5dcce6(0xc8e)]();if(_0x379eae)return _0x5dcce6(0x4d0)+_0x4a8ddd;const _0x13b5f=new Date();_0x13b5f[_0x5dcce6(0xd58)](_0x3289bd[_0x5dcce6(0x947)]()-0x1);const _0x22d67c=_0x13b5f[_0x5dcce6(0xc8e)]()===_0x31562b[_0x5dcce6(0xc8e)]();if(_0x22d67c)return _0x5dcce6(0x7ea)+_0x4a8ddd;if(_0x418573<=0x7){if(_0x5dcce6(0xa95)===_0x5dcce6(0xa95)){const _0xe74dfd=['星期日',_0x5dcce6(0xa00),_0x5dcce6(0xcb7),_0x5dcce6(0x67a),'星期四','星期五',_0x5dcce6(0x302)];return _0xe74dfd[_0x31562b[_0x5dcce6(0x441)]()]+'\x20'+_0x4a8ddd;}else _0x2e970e['style'][_0x5dcce6(0x1e1)]='0';}return _0x31562b[_0x5dcce6(0x72f)]()+'年'+(_0x31562b['getMonth']()+0x1)+'月'+_0x31562b[_0x5dcce6(0x947)]()+'日';}function _0x40bef0(_0x3dd13d,_0x2234db=0x320,_0x579e2d=0.8,_0x48896c=![]){return new Promise((_0x2ba8ce,_0x2198c8)=>{const _0x2e786b=_0x20c5;if(_0x2e786b(0x643)!==_0x2e786b(0x643)){_0x2b061b();return;}else{if(!_0x3dd13d||!_0x3dd13d[_0x2e786b(0x45c)]['startsWith']('image/'))return _0x2198c8(new Error(_0x2e786b(0x463)));const _0x298ef1=new FileReader();_0x298ef1[_0x2e786b(0xd9b)](_0x3dd13d),_0x298ef1[_0x2e786b(0x3c6)]=_0x47d75c=>{const _0x334977=_0x2e786b;if(_0x334977(0x2b0)==='PFbQt')_0x2df01c['style'][_0x334977(0x1df)]='none',_0x303a0c['onclick']=_0x10d40a['onclick']=_0x3e1d19['onclick']=null,_0x292e15[_0x334977(0x50e)](_0x334977(0xdad),_0x2139f1),_0x50934d(_0x38f77b);else{const _0x42b734=new Image();_0x42b734[_0x334977(0x706)]=_0x47d75c[_0x334977(0x63c)][_0x334977(0xdc7)],_0x42b734[_0x334977(0x3c6)]=()=>{const _0xc36947=_0x334977,_0x359fc0=document[_0xc36947(0x7a9)](_0xc36947(0x187));let _0x3e8041=_0x42b734[_0xc36947(0xc5d)],_0x429f06=_0x42b734[_0xc36947(0xb3b)];_0x3e8041>_0x429f06?_0x3e8041>_0x2234db&&(_0x429f06*=_0x2234db/_0x3e8041,_0x3e8041=_0x2234db):_0x429f06>_0x2234db&&(_0x3e8041*=_0x2234db/_0x429f06,_0x429f06=_0x2234db);_0x359fc0[_0xc36947(0xc5d)]=_0x3e8041,_0x359fc0[_0xc36947(0xb3b)]=_0x429f06;const _0x140d6f=_0x359fc0[_0xc36947(0x80a)]('2d');_0x140d6f[_0xc36947(0x989)](_0x42b734,0x0,0x0,_0x3e8041,_0x429f06);const _0x317f24=_0x3dd13d[_0xc36947(0x45c)]===_0xc36947(0x750)?_0xc36947(0x750):_0xc36947(0x9f2);_0x48896c?_0x359fc0[_0xc36947(0x87f)](_0x58d144=>{const _0x179d23=_0xc36947;_0x58d144?_0x2ba8ce(_0x58d144):_0x2198c8(new Error(_0x179d23(0x5c2)));},_0x317f24,_0x579e2d):'uRkne'!==_0xc36947(0xe42)?_0x298bde=_0xc36947(0x891)+_0x1a8b4a:_0x2ba8ce(_0x359fc0[_0xc36947(0xbf4)](_0x317f24,_0x579e2d));},_0x42b734[_0x334977(0x835)]=_0x399187=>_0x2198c8(_0x399187);}},_0x298ef1['onerror']=_0x1f1207=>_0x2198c8(_0x1f1207);}});}function _0xbb85d0(_0x537921){return new Promise((_0x4adbaa,_0x3ffe98)=>{const _0x28b908=_0x20c5;if(_0x28b908(0x153)!==_0x28b908(0x217)){const _0x5a247c=new FileReader();_0x5a247c[_0x28b908(0x4ef)]=()=>_0x4adbaa(_0x5a247c[_0x28b908(0xdc7)]),_0x5a247c[_0x28b908(0x835)]=_0x3ffe98,_0x5a247c[_0x28b908(0xd9b)](_0x537921);}else _0x3839d6['meetingViewMode']=_0x34d78e['meetingViewMode']===_0x28b908(0x638)?_0x28b908(0xba):_0x28b908(0x638),_0x994b3d();});}function _0xbb85d0(_0x182e0f){return new Promise((_0x4e930a,_0x16a5f5)=>{const _0x3b3933=_0x20c5;if(_0x3b3933(0x7b7)===_0x3b3933(0xb71))_0x4af1ac[_0x3b3933(0x214)](_0x3b3933(0x33c)+_0x10e125+_0x3b3933(0xa8e));else{const _0x452e3d=new FileReader();_0x452e3d[_0x3b3933(0x4ef)]=()=>_0x4e930a(_0x452e3d[_0x3b3933(0xdc7)]),_0x452e3d[_0x3b3933(0x835)]=_0x16a5f5,_0x452e3d[_0x3b3933(0xd9b)](_0x182e0f);}});}function _0x2c05fa(_0x4ce2dc,_0x1f92a9,_0x13a83b){const _0x4e1dd4=_0x49c371,_0x948016=_0x5ccc7b=>{const _0x1c6ca6=_0x20c5;if(_0x1c6ca6(0x273)===_0x1c6ca6(0x273)){if(_0x5ccc7b[_0x1c6ca6(0xab8)]===_0x1c6ca6(0xea1))return _0xa7652b[_0x1c6ca6(0xbcc)]?.[_0x1c6ca6(0xe79)]||_0x1c6ca6(0x725);if(_0x4ce2dc[_0x1c6ca6(0x45c)]==='group'){if(_0x1c6ca6(0xbbc)===_0x1c6ca6(0xba6))_0x4e8806[_0x1c6ca6(0x3e3)]=!![],_0x3cca85[_0x1c6ca6(0x3e5)]=![];else{const _0x4d9389=_0x5ccc7b['senderId']?_0x220877(_0x5ccc7b['senderId']):null;return _0x4d9389?.[_0x1c6ca6(0xe79)]||_0x1c6ca6(0x7ef);}}else{if(_0x1c6ca6(0x8bd)===_0x1c6ca6(0x5f2))_0x1621f5[_0x1c6ca6(0x2d4)]=_0x1c6ca6(0x4d6);else{const _0x29235c=_0x220877(_0x4ce2dc[_0x1c6ca6(0x584)][0x0]);return _0x29235c?.[_0x1c6ca6(0xe79)]||'AI';}}}else _0x4d7dc0['key']==='Enter'&&(_0x5759d4[_0x1c6ca6(0xd27)](),_0x4d236f());},_0xbeb4ba=_0x1f92a9[_0x4e1dd4(0x1de)](-_0x13a83b),_0x36f376=[];for(const _0x3b3d8 of _0xbeb4ba){if(_0x4e1dd4(0xb03)===_0x4e1dd4(0xb03)){const _0x3f37e3=_0x3b3d8['type']===_0x4e1dd4(0x784),_0x430b37=_0xbeb4ba[_0x4e1dd4(0x740)](_0x3b3d8),_0x1a2590=_0xbeb4ba[_0x4e1dd4(0x893)],_0xf97e69=_0x1a2590-_0x430b37<=0x1e;if(_0x3f37e3&&!_0xf97e69){if(_0x4e1dd4(0x460)===_0x4e1dd4(0x460))continue;else{const _0x7e7d90=_0x325a38['key'](_0x3a36c2);_0x7e7d90&&_0x7e7d90[_0x4e1dd4(0x324)](_0x4e1dd4(0x5ec))&&_0x4ea589[_0x4e1dd4(0x214)](_0x7e7d90);}}const _0x4b9e67=new Date(_0x3b3d8[_0x4e1dd4(0xb9f)]),_0x345f8d=String(_0x4b9e67[_0x4e1dd4(0xc57)]()+0x1)[_0x4e1dd4(0x2c8)](0x2,'0'),_0x2d713b=String(_0x4b9e67[_0x4e1dd4(0x947)]())[_0x4e1dd4(0x2c8)](0x2,'0'),_0x2e47c9=String(_0x4b9e67[_0x4e1dd4(0xa49)]())[_0x4e1dd4(0x2c8)](0x2,'0'),_0x4d1987=String(_0x4b9e67['getMinutes']())[_0x4e1dd4(0x2c8)](0x2,'0'),_0x8cb962=_0x345f8d+'-'+_0x2d713b+'\x20'+_0x2e47c9+':'+_0x4d1987,_0x5c3f9d=_0x3b3d8[_0x4e1dd4(0xaba)]?_0x4e1dd4(0x1f9):_0x4e1dd4(0x808);if(_0x3b3d8['content']){const _0x136d91=_0x3b3d8[_0x4e1dd4(0xaba)]?String(_0x3b3d8[_0x4e1dd4(0xb17)])[_0x4e1dd4(0x8eb)]()['replace'](/\n+/g,'\x20'):String(_0x3b3d8[_0x4e1dd4(0xb17)])[_0x4e1dd4(0x8eb)]();if(_0x136d91)_0x36f376[_0x4e1dd4(0x214)](_0x5c3f9d+'\x20['+_0x8cb962+_0x4e1dd4(0x4f7)+_0x948016(_0x3b3d8)+']\x20'+_0x136d91);}}else{const _0x53a512=_0x39dbcc[_0x4e1dd4(0x372)][_0x4e1dd4(0x72f)](),_0x3c06c3=_0x254b2f['currentDate']['getMonth']();_0x1f4c32['getElementById']('calendar-header-title')[_0x4e1dd4(0x226)]=_0x53a512+'年\x20'+(_0x3c06c3+0x1)+'月',_0x148349(_0x53a512,_0x3c06c3),_0xebfb87(_0x10bca6[_0x4e1dd4(0xd91)]);}}return _0x36f376;}function _0x2f5518(_0x5f5c84){const _0xe9cff8=_0x49c371;if(_0x5f5c84['type']==='group')return _0xe9cff8(0xb15)+(_0x5f5c84[_0xe9cff8(0xe79)]||_0xe9cff8(0xab))+'」';const _0x1d15a9=_0x220877(_0x5f5c84[_0xe9cff8(0x584)][0x0]);return'与\x20'+(_0x1d15a9?.[_0xe9cff8(0xe79)]||_0xe9cff8(0x4ad))+'\x20的私聊';}function _0x3828cf(_0x5e5ef1){const _0x165f38=_0x49c371;try{const _0x2114be=localStorage[_0x165f38(0xb34)](_0x165f38(0xd62)+_0x5e5ef1),_0x1af3a4=JSON['parse'](_0x2114be||'[]');return Array[_0x165f38(0x8aa)](_0x1af3a4)?_0x1af3a4:[];}catch{return[];}}function _0x32429c(_0x342c2e){const _0x57153e=_0x49c371,_0xd7a3e3=Math['max'](0x1,Number(_0xa7652b[_0x57153e(0x5fa)]?.[_0x57153e(0xa9a)]??0x64)),_0x2e024b=_0xa7652b[_0x57153e(0x4ec)][_0x57153e(0x1a9)](_0x1867c5=>_0x1867c5[_0x57153e(0x584)][_0x57153e(0x5c0)](_0x342c2e)),_0x98fb74=_0x2e024b[_0x57153e(0x17f)](_0x427c2b=>{const _0x27470f=_0x57153e;if(_0x27470f(0x374)===_0x27470f(0xbaa))_0x518e24[_0x27470f(0x6d1)](),_0x4a812e[_0x27470f(0x9e)][_0x27470f(0x234)](_0xf99506['value'])[_0x27470f(0xcae)](()=>{const _0x378558=_0x27470f;_0x2d63e8(_0x378558(0xcf3));})[_0x27470f(0xbb7)](_0x38e2ab=>{_0x22452e('复制失败了，哼。');});else{const _0x356b67=_0x3828cf(_0x427c2b['id']),_0x532bce=_0x356b67[_0x27470f(0x893)]>0x0?_0x356b67[_0x356b67['length']-0x1]:null;return{'chat':_0x427c2b,'history':_0x356b67,'lastTimestamp':_0x532bce?_0x532bce[_0x27470f(0xb9f)]:0x0};}})['filter'](_0x58d742=>_0x58d742['history'][_0x57153e(0x893)]>0x0);_0x98fb74['sort']((_0x14e89b,_0x40a240)=>_0x40a240['lastTimestamp']-_0x14e89b[_0x57153e(0x9ae)]);const _0x137ac1=[],_0x15e424={};return _0x98fb74[_0x57153e(0x1dc)]((_0x343d34,_0x1191cd)=>{const _0x12e1a2=_0x57153e;if('hwPoW'!==_0x12e1a2(0x753)){const _0x295236=_0x2c05fa(_0x343d34[_0x12e1a2(0x771)],_0x343d34[_0x12e1a2(0x692)],_0xd7a3e3);if(_0x295236['length']===0x0)return;const _0x476b18=_0x1191cd===0x0?_0x12e1a2(0xd99):_0x12e1a2(0x5d2);_0x137ac1[_0x12e1a2(0x214)]('##\x20'+_0x476b18+_0x2f5518(_0x343d34[_0x12e1a2(0x771)])+'\x0a'+_0x295236[_0x12e1a2(0x332)]('\x0a')),_0x15e424[_0x343d34[_0x12e1a2(0x771)]['id']]=_0x295236[_0x12e1a2(0x893)];}else return _0x4f0ebf;}),{'omniText':_0x137ac1[_0x57153e(0x332)]('\x0a\x0a'),'usedCounts':_0x15e424};}function _0x3a3aa1(_0x34c121){const _0x3df105=_0x49c371;let _0x5721ad=null;const _0x18096b=_0xa7652b[_0x3df105(0x4ec)]['filter'](_0x469476=>_0x469476[_0x3df105(0x584)][_0x3df105(0x5c0)](_0x34c121));for(const _0x10e684 of _0x18096b){const _0x39b5bc=_0x3828cf(_0x10e684['id']);if(_0x39b5bc&&_0x39b5bc[_0x3df105(0x893)]>0x0){if(_0x3df105(0x53e)===_0x3df105(0x53e)){const _0x20984d=_0x39b5bc[_0x39b5bc['length']-0x1];(!_0x5721ad||_0x20984d['timestamp']>_0x5721ad[_0x3df105(0xb9f)])&&(_0x5721ad=_0x20984d);}else{const _0x14bc34=_0x5df880[_0x3df105(0x7a9)]('div');_0x14bc34['id']=_0x3df105(0x58f),_0x14bc34[_0x3df105(0x226)]=_0x3df105(0x228),_0x26be0e[_0x3df105(0x8b3)](_0x14bc34[_0x3df105(0x3e4)],{'position':_0x3df105(0x7ca),'top':_0x3df105(0x316),'right':_0x3df105(0x550),'fontSize':_0x3df105(0x9b),'lineHeight':_0x3df105(0x6cf),'color':_0x3df105(0x84b),'opacity':_0x3df105(0x955),'cursor':'pointer','zIndex':'1','transition':_0x3df105(0x230),'whiteSpace':_0x3df105(0x509),'textAlign':_0x3df105(0x54b)}),_0x14bc34[_0x3df105(0xaa)]=()=>{const _0x557d69=_0x3df105;_0x14bc34[_0x557d69(0x3e4)][_0x557d69(0x5cf)]='1';},_0x14bc34['onmouseout']=()=>{const _0x22c8ee=_0x3df105;_0x14bc34['style'][_0x22c8ee(0x5cf)]=_0x22c8ee(0x955);},_0x14bc34['addEventListener'](_0x3df105(0x493),()=>{const _0x57ea28=_0x3df105;_0x5bb1e0['open'](_0x57ea28(0xba8),_0x57ea28(0x13b));}),_0x3d2320[_0x3df105(0x3e4)][_0x3df105(0x31d)]=_0x3df105(0x542),_0xdfab66[_0x3df105(0x206)](_0x14bc34);}}}return _0x5721ad;}function _0x500681(_0x3ebbe1){const _0x29ca31=_0x49c371;if(!_0x3ebbe1||!_0x3ebbe1[_0x29ca31(0x5c0)](','))return _0x3ebbe1;const _0x26ee02=_0x3ebbe1['split'](',')[_0x29ca31(0x17f)](_0x5d05c8=>_0x5d05c8[_0x29ca31(0x8eb)]());return _0x26ee02[Math[_0x29ca31(0xe7c)](Math[_0x29ca31(0x1c6)]()*_0x26ee02[_0x29ca31(0x893)])];}function _0x410108(_0x14533e){return new Promise(_0x23a0c0=>{const _0x251462=_0x20c5,_0x29e4eb=document[_0x251462(0x473)]('modal-root'),_0x5e4c07=document[_0x251462(0x473)](_0x251462(0xb58)),_0x59c964=document[_0x251462(0x473)](_0x251462(0xbb9)),_0x4a6fde=document[_0x251462(0x473)]('modal-cancel'),_0x582292=document[_0x251462(0x473)](_0x251462(0xe4c));_0x5e4c07[_0x251462(0x226)]=_0x14533e,_0x29e4eb[_0x251462(0x3e4)]['display']=_0x251462(0x5c9);const _0x328127=_0x554f48=>{const _0x515035=_0x251462;_0x29e4eb['style'][_0x515035(0x1df)]=_0x515035(0x4a6),_0x59c964[_0x515035(0x4e9)]=_0x4a6fde[_0x515035(0x4e9)]=_0x582292[_0x515035(0x4e9)]=null,document['removeEventListener'](_0x515035(0xdad),_0x4d2228),_0x23a0c0(_0x554f48);},_0x4d2228=_0x41676e=>{const _0x131fd8=_0x251462;if(_0x41676e['key']===_0x131fd8(0x1a3))_0x328127(![]);if(_0x41676e[_0x131fd8(0x834)]===_0x131fd8(0xae8))_0x328127(!![]);};_0x59c964['onclick']=()=>_0x328127(!![]),_0x4a6fde[_0x251462(0x4e9)]=()=>_0x328127(![]),_0x582292[_0x251462(0x4e9)]=()=>_0x328127(![]),document[_0x251462(0xc04)](_0x251462(0xdad),_0x4d2228);});}function _0x198030(_0x6fcb26){const _0x15750a=_0x49c371,_0x16d611=document[_0x15750a(0x473)](_0x15750a(0x3d8));_0x16d611['textContent']=_0x6fcb26,_0x16d611[_0x15750a(0x3e4)][_0x15750a(0x1df)]=_0x15750a(0x2a3);if(_0x198030['_t'])clearTimeout(_0x198030['_t']);_0x198030['_t']=setTimeout(()=>{const _0x13a5fe=_0x15750a;_0x16d611[_0x13a5fe(0x3e4)][_0x13a5fe(0x1df)]=_0x13a5fe(0x4a6);},0x1388);}function _0x16d86f(){const _0x3ac514=_0x49c371,_0x1023fa=document[_0x3ac514(0x473)](_0x3ac514(0x4f0));if(!_0x1023fa)return;let _0x15c288=0x0,_0x194654=0x0;const _0x56ecfd=0x50;let _0x26b312=![];const _0xcd6c77=_0x376396=>{const _0x55762a=_0x3ac514;_0x55762a(0x6f9)!==_0x55762a(0x8ba)?(_0x15c288=_0x376396['touches']?_0x376396['touches'][0x0][_0x55762a(0xd42)]:_0x376396[_0x55762a(0xd42)],_0x194654=0x0,_0x1023fa[_0x55762a(0x3e4)][_0x55762a(0x773)]=_0x55762a(0x4a6),_0x26b312=!![],_0x376396['type']===_0x55762a(0xc32)&&(_0x55762a(0xa96)==='pGMwQ'?(document['addEventListener'](_0x55762a(0x67f),_0x497cb0),document[_0x55762a(0xc04)](_0x55762a(0x241),_0x3528ce)):_0x2da9f4[_0x55762a(0x226)]=_0x55762a(0xad0))):_0x5e6c8a[_0x55762a(0x3e4)][_0x5ebce6]=_0x5a8576[_0xbd96fc];},_0x497cb0=_0x3c28c0=>{const _0x1c1344=_0x3ac514;if(!_0x26b312)return;const _0x8dcdfe=_0x3c28c0[_0x1c1344(0x3c5)]?_0x3c28c0[_0x1c1344(0x3c5)][0x0][_0x1c1344(0xd42)]:_0x3c28c0[_0x1c1344(0xd42)];_0x194654=_0x8dcdfe-_0x15c288;if(_0x194654<0x0){if(_0x1c1344(0xa2d)!==_0x1c1344(0xa2d))_0x5a5c01[_0x1c1344(0x2d4)]=_0x1627ff[_0x1c1344(0xbcc)]['name']||'',_0x562224['src']=_0x1a4c47[_0x1c1344(0xbcc)][_0x1c1344(0x98f)]||_0x30719e,_0x63f3b7[_0x1c1344(0x2d4)]=_0x115134[_0x1c1344(0xbcc)][_0x1c1344(0x171)]||'';else{const _0x158afd=Math[_0x1c1344(0xd5e)](_0x194654),_0x39f09a=0.4,_0xf51851=Math[_0x1c1344(0xc71)](_0x158afd,_0x39f09a)*0x14;_0x1023fa['style'][_0x1c1344(0x3b7)]='translateY(-'+_0xf51851+_0x1c1344(0x990);}}},_0x3528ce=()=>{const _0x25613=_0x3ac514;if(!_0x26b312)return;_0x26b312=![],_0x1023fa[_0x25613(0x3e4)][_0x25613(0x773)]=_0x25613(0x264);if(_0x194654<-_0x56ecfd)_0x25613(0xe66)===_0x25613(0xe66)?_0x1023fa[_0x25613(0x970)][_0x25613(0xddb)](_0x25613(0xae6)):(_0x3fe292['log'](_0x25613(0x198)+_0x4347c2),_0x2339b9[_0x25613(0x1ac)](_0xe59916,{'keyPath':'id'}));else{if('JBObx'==='JBObx')_0x1023fa[_0x25613(0x3e4)]['transform']='translateY(0px)';else{if(_0x432b8e<0x0||_0x5ad945>=_0x12b23c[_0x25613(0x893)])return;_0x551d5c=_0xd9d55c;const _0x520a33=_0x29a92a[_0x411b36];_0x3b04a0['src']=_0x520a33[_0x25613(0x5c4)]||_0x520a33['url'],_0x50e242['play'](),_0x415447(),_0x7da0();}}document[_0x25613(0x50e)](_0x25613(0x67f),_0x497cb0),document[_0x25613(0x50e)](_0x25613(0x241),_0x3528ce);};_0x1023fa['addEventListener']('touchstart',_0xcd6c77,{'passive':!![]}),_0x1023fa['addEventListener'](_0x3ac514(0x36a),_0x497cb0,{'passive':!![]}),_0x1023fa[_0x3ac514(0xc04)](_0x3ac514(0xcf0),_0x3528ce),_0x1023fa[_0x3ac514(0xc04)]('mousedown',_0xcd6c77);}function _0x340edc(){const _0x2c6c5c=_0x49c371,_0x1b4edf=document['getElementById']('app-pages-container'),_0xc5f784=document[_0x2c6c5c(0x473)]('app-pages-slider'),_0x4ed841=document[_0x2c6c5c(0xe54)](_0x2c6c5c(0x9a2)),_0x344bdd=document[_0x2c6c5c(0x473)](_0x2c6c5c(0x9a0));let _0x56bbae=0x0;const _0x53f98e=0x2;_0xc5f784[_0x2c6c5c(0x3e4)][_0x2c6c5c(0xc5d)]=_0x2c6c5c(0x49f),_0x344bdd['style']['display']=_0x2c6c5c(0x5c9);function _0x4ad67e(_0x15835e){const _0xcb910d=_0x2c6c5c;if(_0xcb910d(0xb48)===_0xcb910d(0xb48)){if(_0x15835e<0x0||_0x15835e>=_0x53f98e)return;_0xc5f784[_0xcb910d(0x3e4)][_0xcb910d(0x3b7)]=_0xcb910d(0xbf1)+_0x15835e*(0x64/_0x53f98e)+'%)',_0x4ed841[_0xcb910d(0x1dc)](_0x235505=>_0x235505[_0xcb910d(0x970)][_0xcb910d(0x702)](_0xcb910d(0x4b2))),_0x4ed841[_0x15835e][_0xcb910d(0x970)][_0xcb910d(0xddb)]('active'),_0x56bbae=_0x15835e;}else{const _0x11be5f=_0x24b8aa[_0xcb910d(0xa25)][_0x2112db]?.[_0x2972d3];if(_0x11be5f===_0x4e4228)return;const _0x4bfeae=_0x33587d['getElementById'](_0xcb910d(0x8f2)),_0x194864=_0x197d4e['getElementById'](_0xcb910d(0x413));_0x194864[_0xcb910d(0x2d4)]=_0x11be5f,_0x4bfeae['classList'][_0xcb910d(0xddb)](_0xcb910d(0x348)),_0x55efe6[_0xcb910d(0x473)]('save-edit-replay-btn')[_0xcb910d(0x4e9)]=()=>_0x166701(_0x3ffce1,_0x9672f7),_0x595fa3[_0xcb910d(0x473)](_0xcb910d(0x544))[_0xcb910d(0x4e9)]=_0x4b045f,_0x3ac580[_0xcb910d(0x473)](_0xcb910d(0x79a))[_0xcb910d(0x4e9)]=_0x169195;}}_0x4ad67e(0x0),_0x4ed841['forEach'](_0x266ebd=>{const _0x5e4d87=_0x2c6c5c;_0x5e4d87(0x21f)===_0x5e4d87(0x21f)?_0x266ebd[_0x5e4d87(0xc04)](_0x5e4d87(0x493),()=>{const _0x2e176e=_0x5e4d87;if(_0x2e176e(0x1f8)!=='Qklqj'){const _0x528057=parseInt(_0x266ebd[_0x2e176e(0x9c6)][_0x2e176e(0x28f)],0xa);_0x4ad67e(_0x528057);}else _0x32b1e4(_0xb49440[_0x2e176e(0x70f)])[_0x2e176e(0xcae)](_0x329e7b=>{const _0x2b3bce=_0x2e176e;if(_0x329e7b){const _0x5770d1=_0x59c461[_0x2b3bce(0xc18)](_0x329e7b);_0x1e2798[_0x2b3bce(0x706)]=_0x5770d1,_0x354495[_0x2b3bce(0x3c6)]=()=>_0x38f46e[_0x2b3bce(0x906)](_0x5770d1);}});}):(_0x1fcaa4[_0x5e4d87(0xd27)](),_0x2f943(_0x4b393c,_0x5c595e));});let _0x38694e=0x0,_0x316d48=0x0,_0x16436e=0x0,_0x3eb09b=![],_0x451862='';_0x1b4edf[_0x2c6c5c(0xc04)]('touchstart',_0x4076d7=>{const _0x1181cc=_0x2c6c5c;if(_0x1181cc(0x25c)!==_0x1181cc(0x25c)){const _0x1c9c3b=_0x57a5f6[_0x1181cc(0x7a9)](_0x1181cc(0x527));_0x1c9c3b[_0x1181cc(0xd04)]=_0x1181cc(0x522),_0x1c9c3b['dataset']['id']=_0xe910f1['id'],_0x1c9c3b[_0x1181cc(0x6f0)]=_0x1181cc(0xa38)+_0x5a2e5d[_0x1181cc(0xe79)]+_0x1181cc(0x138)+_0x320317[_0x1181cc(0xb17)][_0x1181cc(0x825)](0x0,0x64)+_0x1181cc(0x9fc),_0x1c9c3b['addEventListener']('click',()=>_0x456461(_0x332c69['id'])),_0x45b5d9[_0x1181cc(0xced)](_0x1c9c3b);}else _0x38694e=_0x4076d7[_0x1181cc(0x3c5)][0x0]['clientX'],_0x316d48=_0x4076d7[_0x1181cc(0x3c5)][0x0][_0x1181cc(0xd42)],_0x3eb09b=!![],_0x451862='';},{'passive':!![]}),_0x1b4edf[_0x2c6c5c(0xc04)]('touchmove',_0x28b357=>{const _0x175b6b=_0x2c6c5c;if(!_0x3eb09b)return;if(_0x451862===''){const _0x34832e=_0x28b357[_0x175b6b(0x3c5)][0x0][_0x175b6b(0x9b2)]-_0x38694e,_0x2206d7=_0x28b357[_0x175b6b(0x3c5)][0x0][_0x175b6b(0xd42)]-_0x316d48;Math[_0x175b6b(0xd5e)](_0x34832e)>Math['abs'](_0x2206d7)?'CqbDG'==='CqbDG'?_0x451862=_0x175b6b(0xc4a):_0x516c86=_0x437ee3['image']:_0x175b6b(0x270)===_0x175b6b(0x270)?_0x451862=_0x175b6b(0x47e):(_0x7fd24e[_0x175b6b(0xc95)](_0x175b6b(0x487),_0x539f2c),_0x3f9c81[_0x175b6b(0x473)](_0x175b6b(0x249))['src']='',_0x49f46b[_0x175b6b(0x473)](_0x175b6b(0x651))[_0x175b6b(0x706)]='');}_0x451862===_0x175b6b(0xc4a)&&_0x28b357[_0x175b6b(0xd27)]();},{'passive':![]}),_0x1b4edf['addEventListener'](_0x2c6c5c(0xcf0),_0x45171b=>{const _0x50b7a5=_0x2c6c5c;if(!_0x3eb09b)return;_0x16436e=_0x45171b[_0x50b7a5(0xe9)][0x0][_0x50b7a5(0x9b2)];if(_0x451862===_0x50b7a5(0xc4a)){if(_0x50b7a5(0xd30)!=='PMbdn')_0x302e49();else{_0x3179ef['classList'][_0x50b7a5(0x401)](_0x50b7a5(0xdfe));const _0x38ac48=_0x43e045[_0x50b7a5(0x373)](_0x50b7a5(0x12e));_0x570fb4['classList'][_0x50b7a5(0x401)](_0x50b7a5(0x4b2),!!_0x38ac48);}}_0x3eb09b=![];});function _0x302e49(){const _0x5aefcd=0x32;if(_0x16436e<_0x38694e-_0x5aefcd)_0x4ad67e(_0x56bbae+0x1);else _0x16436e>_0x38694e+_0x5aefcd&&_0x4ad67e(_0x56bbae-0x1);}}function _0x5f088a(){return new Promise(_0x538669=>{const _0x3ce412=_0x20c5,_0xd0f46d=document[_0x3ce412(0x473)]('music-input-modal'),_0xa4ce17=document['getElementById']('music-input-song'),_0x1824d6=document[_0x3ce412(0x473)]('music-input-artist'),_0x3b8245=document[_0x3ce412(0x473)](_0x3ce412(0x11c)),_0x33f7a6=document['getElementById']('cancel-music-input'),_0x4f886e=document[_0x3ce412(0x473)](_0x3ce412(0x58c));_0xa4ce17[_0x3ce412(0x2d4)]='',_0x1824d6[_0x3ce412(0x2d4)]='',_0xd0f46d['classList'][_0x3ce412(0xddb)](_0x3ce412(0x348)),_0xa4ce17[_0x3ce412(0x190)]();const _0x1fff8a=_0x38a77f=>{const _0x3769de=_0x3ce412;_0x3769de(0x141)===_0x3769de(0x141)?(_0xd0f46d['classList'][_0x3769de(0x702)]('show'),_0x3b8245[_0x3769de(0x4e9)]=null,_0x33f7a6[_0x3769de(0x4e9)]=null,_0x4f886e['onclick']=null,document[_0x3769de(0x50e)]('keydown',_0x3d9637),_0x538669(_0x38a77f)):(_0x5f1225['style'][_0x3769de(0x773)]=_0x3769de(0x836),_0x5aa356['style'][_0x3769de(0x5cf)]='1');},_0x377a70=()=>{const _0x33b87f=_0x3ce412,_0xe26c7e=_0xa4ce17[_0x33b87f(0x2d4)]['trim'](),_0x3e64ac=_0x1824d6[_0x33b87f(0x2d4)]['trim']();if(!_0xe26c7e||!_0x3e64ac){if(_0x33b87f(0x2ff)===_0x33b87f(0x164)){_0x405ad5(_0x33b87f(0x140));return;}else{_0x198030(_0x33b87f(0xd7f));return;}}_0x1fff8a({'songName':_0xe26c7e,'artist':_0x3e64ac});},_0x3d9637=_0x4d1426=>{const _0x328ebb=_0x3ce412;if(_0x328ebb(0x2eb)!==_0x328ebb(0x7d1)){if(_0x4d1426['key']===_0x328ebb(0x1a3))_0x1fff8a(null);_0x4d1426['key']===_0x328ebb(0xae8)&&(_0x4d1426[_0x328ebb(0xd27)](),_0x377a70());}else _0x5f1a92+=_0x328ebb(0xa13)+_0x4aa6f0[_0x328ebb(0xb6d)]+_0x328ebb(0x6d6)+_0x2a45a3[_0x328ebb(0x6e3)]+']';};_0x3b8245[_0x3ce412(0x4e9)]=_0x377a70,_0x33f7a6['onclick']=()=>_0x1fff8a(null),_0x4f886e['onclick']=()=>_0x1fff8a(null),document[_0x3ce412(0xc04)](_0x3ce412(0xdad),_0x3d9637);});}function _0x1393f6(_0x4bfd27){const _0x6aa1d8=_0x49c371;if(!_0x4bfd27)return{'bubbles':[],'schedules':[]};const _0x394a65=_0x4bfd27['trim']();if(_0x394a65[_0x6aa1d8(0x324)](_0x6aa1d8(0x3c2))&&_0x394a65[_0x6aa1d8(0x6ec)](_0x6aa1d8(0x28d))){if(_0x6aa1d8(0x1b3)==='ngZSp'){if(_0x47b09c&&_0xf563b5[_0x2c0b44]&&typeof _0x3578c4[_0x59136]==='string'&&_0x52d29e[_0x2b210e][_0x6aa1d8(0x324)]('data:'))return delete _0x29d2d6[_0x13a77c],!![];return![];}else return{'bubbles':[_0x394a65],'schedules':[]};}const _0x2f5080=/(\[sticker:[^\]]+\]|\[music:[^\]]+\]|\[transfer:[^\]]+\]|\[create_event:[^\]]+\]|\[html\][\s\S]*?\[\/html\]|\[schedule_message[^\]]+\])/g,_0x2217ac=_0x6aa1d8(0x125),_0x23bb96=[],_0x2c9d48=_0x4bfd27[_0x6aa1d8(0x833)](_0x2f5080,_0x5c0f1e=>{return _0x23bb96['push'](_0x5c0f1e),_0x2217ac;}),_0x339992=_0x2c9d48[_0x6aa1d8(0x8ff)](_0x2217ac),_0x5685ad=[],_0x380e3c=[];let _0x22fc25=0x0;return _0x339992[_0x6aa1d8(0x1dc)]((_0x275e8a,_0x40502e)=>{const _0x407b4f=_0x6aa1d8,_0x55c9d5=_0x275e8a[_0x407b4f(0x8eb)]();_0x55c9d5&&_0x5685ad[_0x407b4f(0x214)](..._0x487935(_0x55c9d5));if(_0x22fc25<_0x23bb96['length']){if(_0x407b4f(0x96f)!==_0x407b4f(0x96f))_0x54a28e[_0x407b4f(0xc95)](_0x407b4f(0x745),_0x3f05c4),_0x48ffdc[_0x407b4f(0x706)]='';else{const _0x7fe45d=_0x23bb96[_0x22fc25][_0x407b4f(0x8eb)]();if(_0x7fe45d[_0x407b4f(0x324)](_0x407b4f(0xdd))){const _0x4f3ed3=_0x2870de(_0x7fe45d);_0x4f3ed3&&_0x380e3c[_0x407b4f(0x214)](_0x4f3ed3);}else{if(_0x407b4f(0x6ff)!==_0x407b4f(0x6ff)){const _0x3c0051=_0xd73b63();if(_0x3c0051[_0x407b4f(0x45c)]===_0x407b4f(0x4b5)){const _0x585fda=_0xac937a['characters']['find'](_0x28c7fe=>_0x3c0051['participantIds'][_0x407b4f(0x5c0)](_0x28c7fe['id'])&&_0x28c7fe['name']===_0x1df752);if(_0x585fda)_0x1b2d5c=_0x585fda['id'];}}else _0x5685ad[_0x407b4f(0x214)](_0x7fe45d);}_0x22fc25++;}}}),{'bubbles':_0x5685ad,'schedules':_0x380e3c};}function _0x49ca4a(_0x331cc0,_0x4f0608,_0x28c410=''){const _0x30457a=_0x49c371,_0x288cd4=document[_0x30457a(0x7a9)](_0x30457a(0x527));_0x288cd4['className']=_0x30457a(0xa19)+_0x28c410;const _0x5a606a=document[_0x30457a(0x7a9)](_0x30457a(0x222));_0x5a606a[_0x30457a(0x706)]=_0x331cc0,_0x5a606a[_0x30457a(0xd04)]=_0x30457a(0x98f);const _0x5cbd71=document[_0x30457a(0x7a9)](_0x30457a(0x527));return _0x5cbd71[_0x30457a(0xd04)]=_0x30457a(0xc6c),_0x4f0608&&(_0x5cbd71[_0x30457a(0x3e4)][_0x30457a(0x16b)]=_0x30457a(0x6cb)+_0x4f0608+'\x27)'),_0x288cd4[_0x30457a(0xced)](_0x5a606a),_0x288cd4[_0x30457a(0xced)](_0x5cbd71),_0x288cd4;}function _0x45f543(_0x487ec8){const _0x3bf3f2=_0x49c371;if(!_0x487ec8)return[];let _0x487393=String(_0x487ec8)[_0x3bf3f2(0x8eb)]();const _0x250e6f=_0x487393[_0x3bf3f2(0x41c)](/```(?:json)?([\s\S]*?)```/i);if(_0x250e6f)_0x487393=_0x250e6f[0x1][_0x3bf3f2(0x8eb)]();try{const _0x3e15f8=JSON['parse'](_0x487393);if(_0x3e15f8&&Array[_0x3bf3f2(0x8aa)](_0x3e15f8['reply']))return _0x3e15f8[_0x3bf3f2(0x4d5)][_0x3bf3f2(0x17f)](_0x83ca58=>typeof _0x83ca58===_0x3bf3f2(0xdab)?_0x83ca58:_0x83ca58?.[_0x3bf3f2(0xb17)])['filter'](Boolean)[_0x3bf3f2(0x40d)](_0x487935);const _0x4afaa9=['response',_0x3bf3f2(0x312),_0x3bf3f2(0xe32),_0x3bf3f2(0x51c),_0x3bf3f2(0xb17),_0x3bf3f2(0x5b1),'utterance'];if(_0x3e15f8&&typeof _0x3e15f8==='object'){if('vAvFz'===_0x3bf3f2(0x6a8))_0xa1615f[_0x3bf3f2(0x970)][_0x3bf3f2(0xddb)](_0x3bf3f2(0x348));else{const _0x4aac52=[];for(const _0x2d8704 of Object['keys'](_0x3e15f8)){const _0x260776=_0x2d8704[_0x3bf3f2(0x52f)]();if(_0x4afaa9[_0x3bf3f2(0x691)](_0x1e7fd2=>_0x260776[_0x3bf3f2(0x324)](_0x1e7fd2))){if(_0x3bf3f2(0xd32)==='VQvmj'){const _0x514ab9=[],_0x2c1566=/"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi;let _0x6995af;while((_0x6995af=_0x2c1566[_0x3bf3f2(0x897)](_0x21927c))!==null){const _0xfb9905=_0x6995af[0x1][_0x3bf3f2(0x833)](/\\"/g,'\x22')[_0x3bf3f2(0x833)](/\\n/g,'\x0a')[_0x3bf3f2(0x8eb)]();if(_0xfb9905)_0x514ab9['push'](_0xfb9905);}if(_0x514ab9[_0x3bf3f2(0x893)])return _0x514ab9[_0x3bf3f2(0x40d)](_0x44b17b)['slice'](0x0,0x9);}else{const _0x59e16e=_0x3e15f8[_0x2d8704];if(typeof _0x59e16e===_0x3bf3f2(0xdab))_0x4aac52['push'](_0x59e16e);if(Array[_0x3bf3f2(0x8aa)](_0x59e16e))_0x59e16e[_0x3bf3f2(0x1dc)](_0x24b2d8=>{const _0x4355fd=_0x3bf3f2;if(typeof _0x24b2d8===_0x4355fd(0xdab))_0x4aac52[_0x4355fd(0x214)](_0x24b2d8);});}}}if(_0x4aac52[_0x3bf3f2(0x893)])return _0x4aac52['flatMap'](_0x487935)[_0x3bf3f2(0x1de)](0x0,0x9);}}}catch{}if(/[{\[]/['test'](_0x487393)&&/":/['test'](_0x487393)){const _0x472ead=[],_0x1240c1=/"(?:response|dialogue|message|text|content|line\d*|utterance\d*)"\s*:\s*"([\s\S]*?)"/gi;let _0x4cf7cc;while((_0x4cf7cc=_0x1240c1[_0x3bf3f2(0x897)](_0x487393))!==null){const _0x28de60=_0x4cf7cc[0x1][_0x3bf3f2(0x833)](/\\"/g,'\x22')[_0x3bf3f2(0x833)](/\\n/g,'\x0a')[_0x3bf3f2(0x8eb)]();if(_0x28de60)_0x472ead[_0x3bf3f2(0x214)](_0x28de60);}if(_0x472ead[_0x3bf3f2(0x893)])return _0x472ead[_0x3bf3f2(0x40d)](_0x487935)['slice'](0x0,0x9);}return _0x487935(_0x487393);}function _0x487935(_0x44d68d){const _0x2c2f42=_0x49c371,_0x1150f7=String(_0x44d68d)[_0x2c2f42(0x8eb)]();if(_0x1150f7[_0x2c2f42(0x324)](_0x2c2f42(0x3c2))&&_0x1150f7[_0x2c2f42(0x6ec)]('</div>'))return[_0x1150f7];const _0x1dc5e5=_0x1150f7[_0x2c2f42(0x8ff)](/(?<=[。！？!?…])\s+|[\r\n]+/)[_0x2c2f42(0x17f)](_0x749466=>_0x749466[_0x2c2f42(0x8eb)]())[_0x2c2f42(0x1a9)](Boolean);if(_0x1dc5e5[_0x2c2f42(0x893)]>0x0)return _0x1dc5e5[_0x2c2f42(0x1de)](0x0,0xc);return[_0x1150f7][_0x2c2f42(0x1a9)](Boolean);}function _0x2870de(_0x5020c1){const _0x5ce037=_0x49c371;if(!_0x5020c1||typeof _0x5020c1!=='string')return null;const _0x13a6c2=/\[schedule_message\s*\|\s*(.*?)\s*\|\s*(fixed|prompted|auto)\s*\|?\s*(.*?)?\s*\]/i,_0x532f77=_0x5020c1[_0x5ce037(0x41c)](_0x13a6c2);if(_0x532f77){if(_0x5ce037(0x791)==='bYKYj'){_0x2d1866[_0x5ce037(0x6f0)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x20font-family:\x20sans-serif;\x20padding-top:\x2050px;\x22>日记本还是空白的...</p>',_0x18a633[_0x5ce037(0x6f0)]=_0x5ce037(0x9cd),_0x209cf6[_0x5ce037(0x473)](_0x5ce037(0xe36))[_0x5ce037(0xc04)]('click',_0x13d453),_0x474c38[_0x5ce037(0x473)](_0x5ce037(0x811))['addEventListener']('click',_0x50e411);return;}else{const _0x471ed9=_0x532f77[0x1][_0x5ce037(0x8eb)](),_0x437fc3=_0x532f77[0x2]['toLowerCase']();let _0x22f5a6=(_0x532f77[0x3]||'')['trim']();const _0x5de4d6=new Date(_0x471ed9);if(isNaN(_0x5de4d6[_0x5ce037(0x48e)]()))return console[_0x5ce037(0xc95)](_0x5ce037(0x900),_0x471ed9),null;if(_0x437fc3===_0x5ce037(0x524))_0x22f5a6=null;else{if(!_0x22f5a6){if(_0x5ce037(0x748)!==_0x5ce037(0x748))_0x2b86e2[_0x5ce037(0xd27)]();else return console[_0x5ce037(0xc95)]('Noir\x27s\x20Decoder:\x20fixed\x20或\x20prompted\x20类型的指令缺少内容。'),null;}}return{'scheduleTime':_0x5de4d6,'type':_0x437fc3,'content':_0x22f5a6};}}return null;}const _0x90829d=new Promise((_0x481980,_0x18556d)=>{const _0x59618d=_0x49c371,_0x4b6fe1=indexedDB[_0x59618d(0x41e)](_0x128ff9,0x3);_0x4b6fe1[_0x59618d(0x835)]=()=>_0x18556d(_0x59618d(0xc96)),_0x4b6fe1[_0x59618d(0x7ad)]=()=>_0x481980(_0x4b6fe1[_0x59618d(0xdc7)]),_0x4b6fe1['onupgradeneeded']=_0x6bdaa=>{const _0x2fb939=_0x59618d,_0x5608b0=_0x6bdaa[_0x2fb939(0x63c)][_0x2fb939(0xdc7)];console['log']('Upgrading\x20database\x20to\x20version\x20'+_0x5608b0[_0x2fb939(0x313)]+_0x2fb939(0x8f1));!_0x5608b0['objectStoreNames'][_0x2fb939(0x85f)](_0x3ddffa)&&(console['log'](_0x2fb939(0x198)+_0x3ddffa),_0x5608b0['createObjectStore'](_0x3ddffa,{'keyPath':'id'}));!_0x5608b0[_0x2fb939(0x147)][_0x2fb939(0x85f)](_0x2fb939(0x319))&&('PtvMc'!==_0x2fb939(0x7e7)?_0x4a39f0=_0x2fb939(0x404)+_0x4b5b1a+'\x22>'+_0x15cdbc+_0x2fb939(0x45a):(console['log'](_0x2fb939(0x472)),_0x5608b0[_0x2fb939(0x1ac)](_0x2fb939(0x319),{'keyPath':'id'})));if(!_0x5608b0['objectStoreNames'][_0x2fb939(0x85f)](_0x13337f)){if(_0x2fb939(0x70e)==='fkRor'){_0x172950(),_0x14c051[_0x2fb939(0x473)](_0x2fb939(0x5a9))[_0x2fb939(0x970)][_0x2fb939(0x702)](_0x2fb939(0x348));const _0x1350e2=_0x23bf84['getElementById'](_0x2fb939(0x5e6));if(_0x1350e2)_0x1350e2['style'][_0x2fb939(0x1df)]=_0x2fb939(0x4a6);const _0x29605e=_0x1d0754[_0x2fb939(0x473)]('chat-messages');if(_0x29605e)_0x29605e['innerHTML']='';_0x3711b7['activeChatId']=null,_0x40026b();const _0x2cdf32=_0xf9afb1[_0x2fb939(0x473)](_0x2fb939(0x42e));_0x2cdf32[_0x2fb939(0x970)][_0x2fb939(0x702)](_0x2fb939(0xa8c));const _0x366581=_0x141703['getElementById']('chat-view-pane');_0x366581&&(_0x366581['style'][_0x2fb939(0x3b7)]=_0x2fb939(0x6c0),_0x366581[_0x2fb939(0x3e4)][_0x2fb939(0x919)]=_0x2fb939(0x519)),_0x571757===_0x2fb939(0xbd6)&&_0x4ebf91(_0x2fb939(0xbd6),_0x2fb939(0x771));}else console[_0x2fb939(0x6e4)](_0x2fb939(0x198)+_0x13337f),_0x5608b0[_0x2fb939(0x1ac)](_0x13337f,{'keyPath':'id'});}};});async function _0xf3eefa(_0x30408f){const _0x293379=await _0x90829d;return new Promise((_0x1d9c56,_0x32a10b)=>{const _0x359067=_0x20c5,_0x3086a4=_0x293379[_0x359067(0xdb0)](_0x3ddffa,_0x359067(0xe51)),_0x45529b=_0x3086a4[_0x359067(0xb9d)](_0x3ddffa),_0x54c249=_0x45529b['get'](_0x30408f);_0x54c249['onsuccess']=()=>_0x1d9c56(_0x54c249['result']?_0x54c249['result']['blob']:null),_0x54c249[_0x359067(0x835)]=()=>_0x32a10b(_0x54c249[_0x359067(0xc95)]);});}async function _0x3d41c4(_0x2ead87){const _0x5ca452=await _0x90829d;return new Promise((_0x587f63,_0x29fbfe)=>{const _0x4880f7=_0x20c5,_0x2a34cd=_0x5ca452['transaction'](_0x13337f,'readonly'),_0x12488a=_0x2a34cd[_0x4880f7(0xb9d)](_0x13337f),_0x26c827=_0x12488a['get'](_0x2ead87);_0x26c827['onsuccess']=()=>_0x587f63(_0x26c827[_0x4880f7(0xdc7)]?_0x26c827[_0x4880f7(0xdc7)][_0x4880f7(0x173)]:null),_0x26c827[_0x4880f7(0x835)]=()=>_0x29fbfe(_0x26c827[_0x4880f7(0xc95)]);});}async function _0x3bfa49(_0x225964,_0x3c71d8){const _0x3461e8=await _0x90829d;return new Promise((_0x155620,_0xea3e32)=>{const _0xfea1ac=_0x20c5,_0x6e68d9=_0x3461e8[_0xfea1ac(0xdb0)](_0x13337f,'readwrite'),_0x1037c7=_0x6e68d9[_0xfea1ac(0xb9d)](_0x13337f),_0x4adc74=_0x1037c7[_0xfea1ac(0x5d6)]({'id':_0x225964,'data':_0x3c71d8});_0x4adc74[_0xfea1ac(0x7ad)]=()=>_0x155620(),_0x4adc74['onerror']=()=>_0xea3e32(_0x4adc74[_0xfea1ac(0xc95)]);});}async function _0x4294c8(_0x2befc5){const _0x2d8fdd=await _0x90829d;return new Promise((_0x4ff292,_0xb22689)=>{const _0x57faf3=_0x20c5,_0x21f4c5=_0x2d8fdd[_0x57faf3(0xdb0)](_0x13337f,_0x57faf3(0x4a7)),_0x4237bd=_0x21f4c5[_0x57faf3(0xb9d)](_0x13337f),_0x31784d=_0x4237bd[_0x57faf3(0x1d2)](_0x2befc5);_0x31784d[_0x57faf3(0x7ad)]=()=>_0x4ff292(),_0x31784d[_0x57faf3(0x835)]=()=>_0xb22689(_0x31784d[_0x57faf3(0xc95)]);});}async function _0x1366c1(_0x454adf,_0x382a07){const _0x3da8a0=await _0x90829d;return new Promise((_0x4ca0c5,_0x53cd9c)=>{const _0x34d3ba=_0x20c5,_0x2151db=_0x3da8a0['transaction'](_0x3ddffa,_0x34d3ba(0x4a7)),_0x30a37d=_0x2151db[_0x34d3ba(0xb9d)](_0x3ddffa),_0x3df1be=_0x30a37d[_0x34d3ba(0x5d6)]({'id':_0x454adf,'blob':_0x382a07});_0x3df1be[_0x34d3ba(0x7ad)]=()=>_0x4ca0c5(_0x3df1be[_0x34d3ba(0xdc7)]),_0x3df1be[_0x34d3ba(0x835)]=()=>_0x53cd9c(_0x3df1be[_0x34d3ba(0xc95)]);});}async function _0x21e7e1(_0x57cdf9){const _0x341147=await _0x90829d;return new Promise((_0x5c38a1,_0x2906f7)=>{const _0x5bc946=_0x20c5;if('jTOpS'==='LHJWk'){if(_0xb7a563[_0x5bc946(0x45c)]===_0x5bc946(0x69c))_0x14ed98[_0x5bc946(0xd27)]();_0x5af366(_0x481a59);}else{const _0xeb9291=_0x341147[_0x5bc946(0xdb0)](_0x3ddffa,_0x5bc946(0x4a7)),_0x201fea=_0xeb9291[_0x5bc946(0xb9d)](_0x3ddffa),_0x2ec34f=_0x201fea[_0x5bc946(0x1d2)](_0x57cdf9);_0x2ec34f['onsuccess']=()=>_0x5c38a1(),_0x2ec34f['onerror']=()=>_0x2906f7(_0x2ec34f[_0x5bc946(0xc95)]);}});}function _0x530eb9(_0x2bc478){const _0x23db6d=_0x49c371;return fetch(_0x2bc478)[_0x23db6d(0xcae)](_0x4cc29e=>_0x4cc29e['blob']());}function _0x42c730(){const _0x2ab124=_0x49c371;return _0xa7652b['chats'][_0x2ab124(0x394)](_0x4a32a3=>_0x4a32a3['id']===_0xa7652b[_0x2ab124(0xd5b)]);}function _0x5e5389(){const _0x34f35f=_0x49c371;if(!_0xa7652b[_0x34f35f(0xdd0)])return;const {charId:_0x5cbffb}=_0xa7652b[_0x34f35f(0xdd0)],_0x43228c=_0x220877(_0x5cbffb);if(!_0x43228c)return;const _0x374f3d=document[_0x34f35f(0x473)](_0x34f35f(0xa56)),_0x4389df=document[_0x34f35f(0x473)]('profile-view-title');_0x4389df[_0x34f35f(0x226)]=_0x34f35f(0xa12)+_0x43228c[_0x34f35f(0xe79)]+_0x34f35f(0x605),document[_0x34f35f(0x473)](_0x34f35f(0xe14))[_0x34f35f(0x2d4)]=_0x34f35f(0x754),document[_0x34f35f(0x473)](_0x34f35f(0xb40))['style'][_0x34f35f(0x1df)]=_0x34f35f(0x4a6),document[_0x34f35f(0x473)](_0x34f35f(0xafd))[_0x34f35f(0x3e4)][_0x34f35f(0x1df)]='flex',document[_0x34f35f(0x473)]('close-profile-button')[_0x34f35f(0x3e4)][_0x34f35f(0x1df)]=_0x34f35f(0x4a6),document[_0x34f35f(0x473)](_0x34f35f(0x7eb))[_0x34f35f(0x3e4)][_0x34f35f(0x1df)]=_0x34f35f(0x4a6),_0x374f3d[_0x34f35f(0x970)][_0x34f35f(0xddb)](_0x34f35f(0x348)),_0x22adbc();}async function _0x22adbc(){const _0x1b4fe7=_0x49c371;if(!_0xa7652b[_0x1b4fe7(0xdd0)])return;const {charId:_0x69ae56,contextChatId:_0x33e11a}=_0xa7652b[_0x1b4fe7(0xdd0)],_0x216eb6=document[_0x1b4fe7(0x473)](_0x1b4fe7(0xe14));try{_0x1b4fe7(0xb60)===_0x1b4fe7(0xb60)?(_0x216eb6['value']=_0x1b4fe7(0xa12)+_0x220877(_0x69ae56)[_0x1b4fe7(0xe79)]+'\x20的新认知...\x20(0/1)',document[_0x1b4fe7(0x473)](_0x1b4fe7(0x3f7))[_0x1b4fe7(0xdeb)]=!![],document[_0x1b4fe7(0x473)](_0x1b4fe7(0x403))[_0x1b4fe7(0xdeb)]=!![],await refineProfile(_0x69ae56,![],_0x33e11a),_0x216eb6[_0x1b4fe7(0x2d4)]=_0x1b4fe7(0x7a3),await _0x5c8b6a(_0x69ae56)):_0x2241af[_0x1b4fe7(0xc95)]('加载用户头像失败',_0x24d62b);}catch(_0x447ddd){_0x1b4fe7(0xd36)!==_0x1b4fe7(0x429)?_0x216eb6[_0x1b4fe7(0x2d4)]=_0x1b4fe7(0xc8b)+_0x447ddd[_0x1b4fe7(0xe32)]+_0x1b4fe7(0x1b5):_0x1ad8c6[_0x1b4fe7(0x2d4)]='';}finally{document[_0x1b4fe7(0x473)](_0x1b4fe7(0x3f7))['disabled']=![],document[_0x1b4fe7(0x473)](_0x1b4fe7(0x403))[_0x1b4fe7(0xdeb)]=![];}}async function _0x414c4a(){const _0x35dea2=_0x49c371;if(!_0xa7652b[_0x35dea2(0xdd0)])return;const {charId:_0x5cbb05}=_0xa7652b[_0x35dea2(0xdd0)];try{if(_0x35dea2(0xe6d)!==_0x35dea2(0xe6d)){_0xf3c152[_0x35dea2(0xdaf)]=!![],_0x3b2754();const _0x3391df=_0x406b01(_0x57d458['activeLivestreamCharId']);_0x302fb3('【叮咚！收到来自\x20'+_0x3391df[_0x35dea2(0xe79)]+_0x35dea2(0x181));}else showFeedLoader(!![],_0x35dea2(0x490)),await Capacitor[_0x35dea2(0x4be)][_0x35dea2(0x68c)][_0x35dea2(0x702)]({'key':_0x35dea2(0x6d0)+_0x5cbb05}),_0xa7652b[_0x35dea2(0xdd0)]=null,_0xe6c20b();}catch(_0x1471d4){_0x35dea2(0x675)===_0x35dea2(0x675)?_0x198030('销毁缓冲区失败:\x20'+_0x1471d4['message']):_0x4ebf9f(_0x35dea2(0x5dd));}finally{if(_0x35dea2(0x44f)!==_0x35dea2(0x44f)){const _0xed0d76=_0x570f86['createElement'](_0x35dea2(0x527));_0xed0d76[_0x35dea2(0xd04)]=_0x35dea2(0x5f7);const _0x5bbc25=_0x5304a5+'-'+_0x18086d(_0x13e37f+0x1)['padStart'](0x2,'0')+'-'+_0x16d390(_0x131951)[_0x35dea2(0x2c8)](0x2,'0');if(_0x5bbc25===_0x3fc702)_0xed0d76[_0x35dea2(0x970)][_0x35dea2(0xddb)]('is-today');if(_0x5bbc25===_0x3f1f33[_0x35dea2(0xd91)])_0xed0d76[_0x35dea2(0x970)][_0x35dea2(0xddb)](_0x35dea2(0xcc2));const _0x48ad7e=_0x413dc1['createElement'](_0x35dea2(0x868));_0x48ad7e['className']=_0x35dea2(0x304),_0x48ad7e[_0x35dea2(0x226)]=_0x2f33a5,_0xed0d76[_0x35dea2(0xced)](_0x48ad7e);const _0x4a4690=_0x17ae03['calendarEvents']['filter'](_0x33bad2=>_0x33bad2[_0x35dea2(0x382)]===_0x5bbc25);if(_0x4a4690['length']>0x0){const _0xe4c6de=_0x2aa26a[_0x35dea2(0x7a9)]('div');_0xe4c6de['className']=_0x35dea2(0x425),_0xed0d76[_0x35dea2(0xced)](_0xe4c6de);}_0xed0d76[_0x35dea2(0xc04)](_0x35dea2(0x493),()=>{const _0x392f8e=_0x35dea2;_0x491bee[_0x392f8e(0xd91)]=_0x5bbc25,_0x3fc3a3();}),_0x1c21e3['appendChild'](_0xed0d76);}else showFeedLoader(![]);}}async function _0x5c8b6a(_0x17817f){const _0x53da99=_0x49c371,_0x3ec0fc=document[_0x53da99(0x473)](_0x53da99(0xe14));try{if(_0x53da99(0xd84)!=='fzFNV'){const _0x2de0e1=_0x53da99(0x710)+_0x17817f,{value:_0x3eb559}=await Capacitor[_0x53da99(0x4be)][_0x53da99(0x68c)][_0x53da99(0x470)]({'key':_0x2de0e1});if(_0x3eb559){const _0x2993ef=JSON[_0x53da99(0x180)](_0x3eb559);_0x3ec0fc[_0x53da99(0x2d4)]=_0x239968(_0x2993ef);}else _0x3ec0fc['value']=_0x53da99(0xb45);}else{_0x5c49e3(_0x53da99(0xa73));return;}}catch(_0x304610){_0x3ec0fc[_0x53da99(0x2d4)]='读取档案失败了，哼。\x0a'+_0x304610[_0x53da99(0xe32)];}}function _0x239968(_0x567d22){const _0x4e85cf=_0x49c371;let _0x3df063=_0x4e85cf(0x902)+_0x567d22[_0x4e85cf(0x313)]+'\x0a';_0x3df063+='最后更新：'+_0x567d22['last_updated']+'\x0a',_0x3df063+='\x0a━━━━━━━━━━━━━━━━━━━━━━━━\x0a\x0a';if(_0x567d22['value_map']){if('vYPKP'===_0x4e85cf(0x30b)){_0x3df063+=_0x4e85cf(0x4f4);const _0x361586=_0x567d22[_0x4e85cf(0xe67)][_0x4e85cf(0x5fa)]?.['喜欢']||[],_0x34f2b4=_0x567d22[_0x4e85cf(0xe67)][_0x4e85cf(0x5fa)]?.['讨厌']||[];if(_0x361586['length']>0x0)_0x3df063+=_0x4e85cf(0x443)+_0x361586[_0x4e85cf(0x332)](_0x4e85cf(0x49e))+'\x0a\x0a';if(_0x34f2b4[_0x4e85cf(0x893)]>0x0)_0x3df063+=_0x4e85cf(0x6b1)+_0x34f2b4[_0x4e85cf(0x332)](_0x4e85cf(0x49e))+'\x0a\x0a';if(_0x567d22[_0x4e85cf(0xe67)][_0x4e85cf(0xaec)]?.['length']>0x0)_0x3df063+=_0x4e85cf(0x4e7)+_0x567d22['value_map'][_0x4e85cf(0xaec)][_0x4e85cf(0x332)]('\x0a\x20\x20')+'\x0a\x0a';if(_0x567d22[_0x4e85cf(0xe67)][_0x4e85cf(0x6c8)])_0x3df063+=_0x4e85cf(0x873)+_0x567d22['value_map']['core_values']+'\x0a\x0a';}else return _0x4e85cf(0x5aa);}if(_0x567d22['behavior_profile']){_0x3df063+=_0x4e85cf(0x2ba);if(_0x567d22['behavior_profile'][_0x4e85cf(0xe52)])_0x3df063+='🎭\x20语气风格：\x0a\x20\x20'+_0x567d22[_0x4e85cf(0x38c)][_0x4e85cf(0xe52)]+'\x0a\x0a';if(_0x567d22['behavior_profile'][_0x4e85cf(0x631)])_0x3df063+=_0x4e85cf(0xdcb)+_0x567d22['behavior_profile'][_0x4e85cf(0x631)]+'\x0a\x0a';if(_0x567d22['behavior_profile'][_0x4e85cf(0xa1e)])_0x3df063+='🔄\x20回应模式：\x0a\x20\x20'+_0x567d22[_0x4e85cf(0x38c)][_0x4e85cf(0xa1e)]+'\x0a\x0a';}if(_0x567d22[_0x4e85cf(0x19e)]){_0x3df063+='\x0a【三、情绪图谱】\x0a\x0a';const _0x4b49ce=_0x567d22['emotion_schema']['triggers']?.['正面']||[],_0x1a0f7e=_0x567d22[_0x4e85cf(0x19e)][_0x4e85cf(0x581)]?.['负面']||[];if(_0x4b49ce[_0x4e85cf(0x893)]>0x0)_0x3df063+=_0x4e85cf(0x965)+_0x4b49ce['join'](_0x4e85cf(0x49e))+'\x0a\x0a';if(_0x1a0f7e[_0x4e85cf(0x893)]>0x0)_0x3df063+=_0x4e85cf(0x75a)+_0x1a0f7e[_0x4e85cf(0x332)](_0x4e85cf(0x49e))+'\x0a\x0a';if(_0x567d22[_0x4e85cf(0x19e)]['comfort_zone'])_0x3df063+=_0x4e85cf(0xa7c)+_0x567d22[_0x4e85cf(0x19e)][_0x4e85cf(0x853)]+'\x0a\x0a';if(_0x567d22['emotion_schema'][_0x4e85cf(0xe28)]?.['length']>0x0)_0x3df063+='⚡\x20压力信号：\x0a\x20\x20'+_0x567d22[_0x4e85cf(0x19e)][_0x4e85cf(0xe28)]['join'](_0x4e85cf(0x49e))+'\x0a\x0a';}if(_0x567d22[_0x4e85cf(0xb8e)]){_0x3df063+='\x0a【四、性格核心】\x0a\x0a';if(_0x567d22[_0x4e85cf(0xb8e)][_0x4e85cf(0xe18)])_0x3df063+=_0x4e85cf(0x688)+_0x567d22[_0x4e85cf(0xb8e)][_0x4e85cf(0xe18)]+'\x0a\x0a';if(_0x567d22[_0x4e85cf(0xb8e)][_0x4e85cf(0x925)]?.[_0x4e85cf(0x893)]>0x0)_0x3df063+=_0x4e85cf(0xb32)+_0x567d22[_0x4e85cf(0xb8e)][_0x4e85cf(0x925)][_0x4e85cf(0x332)](_0x4e85cf(0x49e))+'\x0a\x0a';if(_0x567d22[_0x4e85cf(0xb8e)][_0x4e85cf(0xbe9)])_0x3df063+=_0x4e85cf(0x503)+_0x567d22[_0x4e85cf(0xb8e)][_0x4e85cf(0xbe9)]+'\x0a\x0a';}if(_0x567d22['observed_changes']&&_0x567d22[_0x4e85cf(0x778)][_0x4e85cf(0x893)]>0x0){_0x3df063+=_0x4e85cf(0x248);const _0x126c98=_0x567d22[_0x4e85cf(0x778)][_0x4e85cf(0x17f)](_0x44bf78=>typeof _0x44bf78===_0x4e85cf(0xdab)?_0x44bf78:Object[_0x4e85cf(0x664)](_0x44bf78)[_0x4e85cf(0x332)](_0x4e85cf(0x6d6)));_0x3df063+='•\x20'+_0x126c98['join']('\x0a•\x20');}return _0x3df063;}async function _0x30d9af(){const _0x328b54=_0x49c371;if(_0xa7652b[_0x328b54(0xdd0)]){if(_0x328b54(0x47a)===_0x328b54(0x47a)){_0x198030(_0x328b54(0x464));return;}else _0x424e6a['characters'][_0x328b54(0x1dc)](_0x1ab485=>_0x42feaa(_0x1ab485,_0x328b54(0x98f)));}const _0x552073=_0x42c730();if(!_0x552073){_0x198030('请先选择一个聊天！');return;}const _0x77e66b=_0x552073[_0x328b54(0x584)][0x0];if(!_0x77e66b)return;const _0x3c01b0=_0x220877(_0x77e66b);if(!_0x3c01b0)return;const _0x34e3e6=document[_0x328b54(0x473)](_0x328b54(0xa56)),_0x27c1b6=document[_0x328b54(0x473)](_0x328b54(0x574));_0x27c1b6[_0x328b54(0x226)]=_0x3c01b0[_0x328b54(0xe79)]+_0x328b54(0x14d),document['getElementById']('profile-view-footer')[_0x328b54(0x3e4)]['display']=_0x328b54(0x5c9),document['getElementById'](_0x328b54(0xafd))[_0x328b54(0x3e4)][_0x328b54(0x1df)]=_0x328b54(0x4a6),document[_0x328b54(0x473)](_0x328b54(0x163))[_0x328b54(0x3e4)][_0x328b54(0x1df)]=_0x328b54(0x2a3),document[_0x328b54(0x473)](_0x328b54(0x7eb))[_0x328b54(0x3e4)][_0x328b54(0x1df)]='block',_0x34e3e6[_0x328b54(0x970)][_0x328b54(0xddb)](_0x328b54(0x348)),await _0x5c8b6a(_0x77e66b);}function _0xe6c20b(){const _0x22efdf=_0x49c371,_0x3fdfa2=document[_0x22efdf(0x473)](_0x22efdf(0xa56));_0x3fdfa2[_0x22efdf(0x970)]['remove']('show'),document['getElementById']('profile-view-footer')[_0x22efdf(0x3e4)][_0x22efdf(0x1df)]='flex',document[_0x22efdf(0x473)](_0x22efdf(0xafd))[_0x22efdf(0x3e4)][_0x22efdf(0x1df)]=_0x22efdf(0x4a6),document['getElementById'](_0x22efdf(0x163))[_0x22efdf(0x3e4)][_0x22efdf(0x1df)]=_0x22efdf(0x2a3),document[_0x22efdf(0x473)](_0x22efdf(0x7eb))['style']['display']='block';}function _0x74edd7(){const _0x40fb2c=_0x49c371,_0x1c2db1=document['getElementById'](_0x40fb2c(0xe14));_0x1c2db1[_0x40fb2c(0x6d1)](),document[_0x40fb2c(0x296)]('copy'),_0x198030('档案内容已复制到剪贴板！');}async function _0x26c295(){const _0x316a88=_0x49c371,_0x5f57ad=_0x42c730();if(!_0x5f57ad)return;const _0x55460b=_0x5f57ad[_0x316a88(0x584)][0x0];if(!_0x55460b)return;const _0x3308de=_0x220877(_0x55460b),_0x572429=await _0x410108(_0x316a88(0x5d7)+_0x3308de[_0x316a88(0xe79)]+_0x316a88(0xbb6));if(!_0x572429)return;try{if(_0x316a88(0xb22)!==_0x316a88(0xb22))return _0x374873[_0x316a88(0xc95)](_0x316a88(0x900),_0x461cde),null;else{_0xe6c20b(),window['showFeedLoader'](!![],'正在为【'+_0x3308de[_0x316a88(0xe79)]+_0x316a88(0x2dd));const _0x4c959c=_0x316a88(0x710)+_0x55460b,_0x447ea2=_0x316a88(0x6d0)+_0x55460b;await Capacitor['Plugins']['Preferences'][_0x316a88(0x702)]({'key':_0x4c959c}),await Capacitor['Plugins'][_0x316a88(0x68c)]['remove']({'key':_0x447ea2}),await window[_0x316a88(0x991)](_0x55460b,![]),window[_0x316a88(0x2a9)](![]),_0x198030('【'+_0x3308de[_0x316a88(0xe79)]+_0x316a88(0x609)),_0x30d9af();}}catch(_0x210021){window[_0x316a88(0x2a9)](![]),_0x198030(_0x316a88(0xdb5)+_0x210021[_0x316a88(0xe32)]);}}async function _0x2a9706(){const _0x285200=_0x49c371,_0x4f80e0=_0x42c730();if(!_0x4f80e0||_0x4f80e0[_0x285200(0x45c)]!==_0x285200(0x722)){_0x198030(_0x285200(0xc69));return;}const _0x1ee84b=_0x4f80e0[_0x285200(0x584)][0x0];if(!_0x1ee84b)return;const _0xc70797=_0x220877(_0x1ee84b);if(!_0xc70797)return;const _0x2f5eeb=await _0x410108('【功能3：深度统合档案】\x0a\x0a确定要立即统合【'+_0xc70797['name']+_0x285200(0x8e4));if(!_0x2f5eeb)return;try{_0xe6c20b(),window[_0x285200(0x2a9)](!![],'正在执行深度统合...'),await window['refineProfile'](_0x1ee84b,!![]),window['showFeedLoader'](![]),_0x198030(_0x285200(0x757)),_0x30d9af();}catch(_0x47ad3f){window[_0x285200(0x2a9)](![]),_0x198030(_0x285200(0x731)+_0x47ad3f[_0x285200(0xe32)]);}}document[_0x49c371(0xc04)]('DOMContentLoaded',()=>{const _0x32c121=_0x49c371,_0x5cf991=document['getElementById'](_0x32c121(0xb2f));_0x5cf991&&('STwlU'!==_0x32c121(0xbee)?_0x5cf991[_0x32c121(0xc04)](_0x32c121(0x493),_0x30d9af):_0x5a3458+='-\x20你的备忘录里有一条叫“'+_0x1ada4c[_0x32c121(0x136)]+_0x32c121(0x98b)+_0x255163[_0x32c121(0xb17)][_0x32c121(0x833)](/\n/g,'\x20')+_0x32c121(0x9a9));const _0x5b6349=document[_0x32c121(0x473)](_0x32c121(0x163));_0x5b6349&&_0x5b6349['addEventListener'](_0x32c121(0x493),_0xe6c20b);const _0x4c51ce=document[_0x32c121(0x473)](_0x32c121(0x7eb));_0x4c51ce&&_0x4c51ce[_0x32c121(0xc04)](_0x32c121(0x493),_0x74edd7);const _0x56d2f7=document[_0x32c121(0x473)](_0x32c121(0xb85));if(_0x56d2f7){const _0x429a7a=_0x56d2f7['cloneNode'](!![]);_0x56d2f7[_0x32c121(0x355)][_0x32c121(0x635)](_0x429a7a,_0x56d2f7),_0x429a7a[_0x32c121(0xc04)]('click',_0x26c295),console[_0x32c121(0x6e4)](_0x32c121(0x704));}const _0x28878b=document[_0x32c121(0x473)](_0x32c121(0x430));if(_0x28878b){if(_0x32c121(0xa64)==='FmKIa'){_0x5a2ea3['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-color-light);\x22>今天还没有花钱哦。</p>',_0x2fa5e2[_0x32c121(0x6f0)]='';return;}else _0x28878b[_0x32c121(0xc04)](_0x32c121(0x493),_0x2a9706);}const _0x5ae2f9=document[_0x32c121(0x473)]('confirm-refinement-btn');_0x5ae2f9&&_0x5ae2f9[_0x32c121(0xc04)](_0x32c121(0x493),_0x414c4a);const _0x493862=document[_0x32c121(0x473)](_0x32c121(0x403));_0x493862&&('zzsUl'!=='zzsUl'?(_0x43ac35[_0x32c121(0xc95)](_0x32c121(0x71d),_0x2b414a),_0xb0a85e(_0x32c121(0x224))):_0x493862[_0x32c121(0xc04)](_0x32c121(0x493),_0x22adbc));const _0x36394f=document[_0x32c121(0x473)](_0x32c121(0x163));_0x36394f&&(_0x32c121(0xb54)===_0x32c121(0xb54)?_0x36394f['onclick']=()=>{const _0x4fb447=_0x32c121;_0xa7652b[_0x4fb447(0xdd0)]?_0x4fb447(0x105)===_0x4fb447(0x105)?_0x414c4a():_0x1f8141[_0x4fb447(0x214)](_0x395a04):_0xe6c20b();}:_0x1ff0a9[_0x32c121(0x473)](_0x32c121(0x5e4))[_0x32c121(0x226)]=_0x32c121(0x47f));const _0xc5f368=document[_0x32c121(0x473)](_0x32c121(0x79d));if(_0xc5f368){if(_0x32c121(0xdb4)!==_0x32c121(0xdb4)){if(_0x25a592)_0x4e4226['src']=_0x47296d[_0x32c121(0xc18)](_0x32a8e8);}else _0xc5f368[_0x32c121(0x4e9)]=()=>{const _0x2252c8=_0x32c121;_0xa7652b[_0x2252c8(0xdd0)]?_0x414c4a():_0xe6c20b();};}});
    </script>
  <div id="listen-together-ui" style="display: none;">
    <div class="lt-ui-backdrop"></div>
    <div class="lt-ui-main">
      <div class="lt-ui-header">
        <span id="lt-ui-header-title">正在与 TA 一起听</span>
        <button id="lt-ui-close-btn">×</button>
      </div>
      <div class="lt-ui-content">
        <div class="lt-ui-cover-container">
          <img id="lt-ui-cover-art" src="">
        </div>
        <div class="lt-ui-info">
          <h2 id="lt-ui-song-title">歌曲名称</h2>
          <p id="lt-ui-song-artist">歌手</p>
        </div>
        <div id="lt-ui-lyrics-container">
          <p class="no-lyrics-placeholder">暂无歌词</p>
        </div>
        <div class="lt-ui-controls">
          <button id="lt-ui-change-song-btn" class="lt-ui-control-button" title="切换歌曲">
            <span>♫</span>
            <span class="button-label">换一首</span>
          </button>
          <button id="lt-ui-end-session-btn" class="lt-ui-control-button danger" title="结束听歌">
            <span>⏹</span>
            <span class="button-label">结束</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div id="summarize-modal" class="choice-modal">
    <div id="summarize-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-summary-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title">聊天记录总结</span>
        <button id="copy-summary-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-textarea" placeholder="AI正在拼命总结中，别催..."></textarea>
      </div>
    </div>
  </div>

  <div id="profile-view-modal" class="choice-modal">
    <div id="profile-view-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <button id="close-profile-button" class="header-button" style="min-width: 50px;">关闭</button>
        <span class="header-title" id="profile-view-title">用户档案</span>
        <button id="copy-profile-button" class="header-button" style="min-width: 50px;">复制</button>
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="profile-textarea" placeholder="加载中..." style="font-family: 'Courier New', monospace; width: 100%; height: 100%; border: none; outline: none; resize: none; padding: 15px; box-sizing: border-box; font-size: 0.9rem; line-height: 1.6;"></textarea>
      </div>

      <div id="refinement-controls-footer" style="padding: 10px; border-top: 1px solid var(--border-color); display: none; gap: 10px;">
        <button id="confirm-refinement-btn" class="form-button primary" style="margin: 0; flex: 1;">哼，就这样吧</button>
        <button id="retry-refinement-btn" class="form-button secondary" style="margin: 0; flex: 1;">重来！</button>
      </div>
      <div id="profile-view-footer" style="padding: 10px; border-top: 1px solid var(--border-color); display: flex; gap: 10px;">
        <button id="reset-profile-button" class="form-button destructive" style="margin: 0; flex: 1;">重置此档案</button>
       <button id="manual-refine-button" class="form-button primary" style="margin: 0; flex: 1;">深度统合档案</button>
      </div>
    </div>
  </div>




  <div id="add-event-modal" class="choice-modal">
    <div id="add-event-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 20px; width: 90%; max-width: 320px;">
      <h3 id="add-event-modal-title" style="margin-top: 0; text-align: center;">为 YYYY-MM-DD 添加...</h3>
      <div class="input-group">
        <label for="event-content-input">内容</label>
        <input type="text" id="event-content-input" placeholder="要做什么或者是什么日子？">
      </div>
      <div class="input-group">
        <label>类型</label>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <input type="radio" id="event-type-todo" name="event-type" value="todo" checked>
          <label for="event-type-todo" style="width: auto;">普通日程</label>
          <input type="radio" id="event-type-important" name="event-type" value="important">
          <label for="event-type-important" style="width: auto;">重要纪念日</label>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button id="save-event-button" class="form-button primary">保存</button>
        <button id="cancel-event-button" class="form-button secondary">取消</button>
      </div>
    </div>
  </div>

  <div id="edit-replay-modal" class="choice-modal">
    <div id="edit-replay-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content"
      style="padding: 0; width: 95%; max-width: 360px; height: 70%; display: flex; flex-direction: column;">
      <div class="header" style="flex-shrink: 0;">
        <button id="cancel-edit-replay-btn" class="header-button">取消</button>
        <span class="header-title">编辑回放档案</span>
        <button id="save-edit-replay-btn" class="header-button">保存</button>
      </div>
      <div class="content" style="padding: 0; flex-grow: 1;">
        <textarea id="edit-replay-textarea"
          style="width: 100%; height: 100%; border: none; outline: none; resize: none; font-family: 'Courier New', monospace; font-size: 0.9rem; padding: 10px; box-sizing: border-box;"></textarea>
      </div>
    </div>
  </div>

  <div id="summary-preview-modal" class="choice-modal">
    <div id="summary-preview-backdrop" class="choice-modal-backdrop"></div>
    <div class="choice-modal-content" style="padding: 0; width: 95%; max-width: 360px; height: 75%; display: flex; flex-direction: column;">
      <div class="header" style="border-bottom: 1px solid var(--border-color); flex-shrink: 0;">
        <span class="header-title">确认回放摘要</span>
        <div style="width: 50px;"></div> 
      </div>
      <div class="content" style="flex-grow: 1; padding: 0;">
        <textarea id="summary-preview-textarea" style="width: 100%; height: 100%; border: none; outline: none; resize: none; font-family: 'Courier New', monospace; font-size: 0.9rem; padding: 15px; box-sizing: border-box; background: #fdfdfd; color: var(--text-color);"></textarea>
      </div>
      <div style="padding: 15px; border-top: 1px solid var(--border-color); display: flex; gap: 10px; flex-direction: column;">
        <div style="display: flex; gap: 10px;">
            <button id="summary-confirm-btn" class="form-button primary" style="margin: 0; flex: 2;">确认归档</button>
            <button id="summary-reroll-btn" class="form-button secondary" style="margin: 0; flex: 1;">重写</button>
        </div>
        <button id="summary-cancel-btn" class="form-button secondary" style="margin: 0; background: transparent; color: #666; border: none;">暂不结束，返回直播</button>
      </div>
    </div>
  </div>
  <script src="capacitor.js"></script>


</body>

</html>